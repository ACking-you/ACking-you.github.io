[{"categories":["é’è®­è¥ç¬”è®°"],"content":"è¿™æ˜¯æˆ‘å‚ä¸ã€Œç¬¬ä¸‰å±Šé’è®­è¥ -åç«¯åœºã€ç¬”è®°åˆ›ä½œæ´»åŠ¨çš„çš„ç¬¬ä¸€ç¯‡ç¬”è®°ã€‚","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["é’è®­è¥ç¬”è®°"],"content":"è¿™æ˜¯æˆ‘å‚ä¸ã€Œç¬¬ä¸‰å±Šé’è®­è¥ -åç«¯åœºã€ç¬”è®°åˆ›ä½œæ´»åŠ¨çš„çš„ç¬¬ä¸€ç¯‡ç¬”è®°ã€‚ ","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/:0:0","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["é’è®­è¥ç¬”è®°"],"content":"è¯­æ³•é€Ÿè§ˆ ","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/:1:0","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["é’è®­è¥ç¬”è®°"],"content":"åŸºç¡€è¯­æ³• åŸºç¡€è¯­æ³•æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š ç¬¬ä¸€ï¼šç±»å‹ æœ‰å€¼ç±»å‹ï¼Œæœ‰æŒ‡é’ˆï¼ŒæŒ‡é’ˆåªèƒ½ä½œä¸ºå¼•ç”¨çš„æ›¿ä»£å“ï¼Œæ— æ³•æŒ‡é’ˆç›´æ¥è¿ç®—ã€‚ goè¯­è¨€æœ‰å€¼ç±»å‹ï¼Œå¯ä»¥ç›´æ¥åƒä¸‹é¢è¿™æ ·å®šä¹‰å˜é‡ï¼š type Student struct { name string sid string } func main(){ var student = Student{name: \"John\", sid: \"1001\"} //studentä¸ºå€¼ç±»å‹ var student = \u0026Student{name: \"John\", sid: \"1001\"} //studentä¸ºæŒ‡é’ˆç±»å‹ï¼ˆæ³¨æ„ç”±äºgoæœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥è¿™é‡Œä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬å¼€è¾Ÿå †å†…å­˜ student := new(Student) //ä¹Ÿå¯é€šè¿‡å†…ç½®çš„new()å‡½æ•°ç›´æ¥å¼€è¾Ÿå †å†…å­˜ï¼Œè€Œä¸ç«‹é©¬åˆå§‹åŒ–ï¼Œå¾—åˆ°ä¸€ä¸ªæŒ‡é’ˆ } goè¯­è¨€çš„åˆ‡ç‰‡ åŒæ ·åˆ‡ç‰‡ç±»å‹ä¹Ÿæœ‰ä¸Šè¿°ä¸¤ç§è·å¾—å†…å­˜çš„å®šä¹‰æ–¹å¼ï¼Œä¹Ÿå¯é€šè¿‡å†…ç½®çš„makeå‡½æ•°å¯¹å†…éƒ¨çš„capå’Œlenè¿›è¡Œåˆå§‹çš„æ§åˆ¶ã€‚ nums := make([]int,2,10)//å¾—åˆ°ä¸€ä¸ªåº•å±‚æ•°ç»„é•¿åº¦ä¸º2ï¼Œcapä¸º10çš„åˆå§‹åˆ‡ç‰‡ nums1 := nums2[0:3] //ç¬¬äºŒç§åˆ‡ç‰‡æ–¹å¼ ç¬¬äºŒï¼šå†…ç½®åº“éƒ¨åˆ† jsonåº“çš„ä½¿ç”¨ é€šè¿‡åœ¨å­—æ®µåé¢è·Ÿç€çš„å­—ç¬¦ä¸²è¿›è¡Œåºåˆ—åŒ–çš„å®šä¹‰ï¼Œåé¢è·Ÿç€çš„ç§°ä¸ºåŸŸæ ‡ç­¾ã€‚ package main import ( \"encoding/json\" \"fmt\" ) type Student struct { Name string `json:\"name\"` Sid string `json:\"sid\"` } func main() { s := Student{Name: \"jonh\" ,Sid: \"10323\"} //åºåˆ—åŒ– p ,err := json.Marshal(s) if err!=nil { panic(err) } fmt.Println(string(p)) //ååºåˆ—åŒ– err = json.Unmarshal(p,\u0026s) if err!=nil { panic(err) } fmt.Println(s) } å®˜æ–¹å¯¹åŸŸæ ‡ç­¾æœ‰ä»¥ä¸‹è¯´æ˜ï¼š // Field appears in JSON as key \"myName\". Field int `json:\"myName\"` // Field appears in JSON as key \"myName\" and // the field is omitted from the object if its value is empty, // as defined above. Field int `json:\"myName,omitempty\"` // Field appears in JSON as key \"Field\" (the default), but // the field is skipped if empty. // Note the leading comma. Field int `json:\",omitempty\"` // Field is ignored by this package. Field int `json:\"-\"` // Field appears in JSON as key \"-\". Field int `json:\"-,\"` æ—¶é—´åº“çš„ä½¿ç”¨ æ—¶é—´çš„è·å– è·å–å½“å‰æ—¶é—´ï¼š package main import ( \"fmt\" \"time\" ) func main() { now := time.Now() //è·å–å½“å‰æ—¶é—´ fmt.Printf(\"current time:%v\\n\", now) year := now.Year() //å¹´ month := now.Month() //æœˆ day := now.Day() //æ—¥ hour := now.Hour() //å°æ—¶ minute := now.Minute() //åˆ†é’Ÿ second := now.Second() //ç§’ fmt.Printf(\"%d-%02d-%02d %02d:%02d:%02d\\n\", year, month, day, hour, minute, second) } è·å–æ—¶é—´æˆ³ package main import ( \"fmt\" \"time\" ) func main() { now := time.Now() //è·å–å½“å‰æ—¶é—´ timestamp1 := now.Unix() //æ—¶é—´æˆ³ timestamp2 := now.UnixNano() //çº³ç§’æ—¶é—´æˆ³ fmt.Printf(\"ç°åœ¨çš„æ—¶é—´æˆ³ï¼š%v\\n\", timestamp1) fmt.Printf(\"ç°åœ¨çš„çº³ç§’æ—¶é—´æˆ³ï¼š%v\\n\", timestamp2) } æ—¶é—´æˆ³ä¸æ—¶é—´çš„è½¬æ¢ package main import ( \"fmt\" \"time\" ) func main() { now := time.Now() //è·å–å½“å‰æ—¶é—´ timestamp := now.Unix() //æ—¶é—´æˆ³ timeObj := time.Unix(timestamp, 0) //å°†æ—¶é—´æˆ³è½¬ä¸ºæ—¶é—´æ ¼å¼ fmt.Println(timeObj) year := timeObj.Year() //å¹´ month := timeObj.Month() //æœˆ day := timeObj.Day() //æ—¥ hour := timeObj.Hour() //å°æ—¶ minute := timeObj.Minute() //åˆ†é’Ÿ second := timeObj.Second() //ç§’ fmt.Printf(\"%d-%02d-%02d %02d:%02d:%02d\\n\", year, month, day, hour, minute, second) } è·å–æ˜ŸæœŸå‡  package main import ( \"fmt\" \"time\" ) func main() { t := time.Now() fmt.Println(t.Weekday().String()) } æ—¶é—´çš„æ“ä½œ ï¼ˆ1ï¼‰Add(during)å‡½æ•°å®ç°æŸä¸ªæ—¶é—´ + æ—¶é—´é—´éš” package main import ( \"fmt\" \"time\" ) func main() { now := time.Now() later := now.Add(time.Hour) // å½“å‰æ—¶é—´åŠ 1å°æ—¶åçš„æ—¶é—´ fmt.Println(later) } ï¼ˆ2ï¼‰Sub(Time)è·å–æ—¶é—´å·®å€¼ è¿”å›ä¸€ä¸ªæ—¶é—´æ®µ t - u çš„å€¼ã€‚å¦‚æœç»“æœè¶…å‡ºäº† Duration å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§å€¼æˆ–æœ€å°å€¼ï¼Œå°†è¿”å›æœ€å¤§å€¼æˆ–æœ€å°å€¼ï¼Œè¦è·å–æ—¶é—´ç‚¹ t - dï¼ˆd ä¸º Durationï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ t.Add(-d)ã€‚ ï¼ˆ3ï¼‰Equal(Time)åˆ¤æ–­æ—¶é—´æ˜¯å¦ç›¸åŒ ï¼ˆ4ï¼‰Before å’Œ AfteræŸä¸ªæ—¶é—´æ˜¯å¦åœ¨ä»–ä¹‹å‰æˆ–ä¹‹å å®šæ—¶ä»»åŠ¡ ä½¿ç”¨ time.Tick(æ—¶é—´é—´éš”) å¯ä»¥è®¾ç½®å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šé“ï¼ˆchannelï¼‰ package main import ( \"fmt\" \"time\" ) func main() { ticker := time.Tick(time.Second) //å®šä¹‰ä¸€ä¸ª1ç§’é—´éš”çš„å®šæ—¶å™¨ for i := range ticker { fmt.Println(i) //æ¯ç§’éƒ½ä¼šæ‰§è¡Œçš„ä»»åŠ¡ } } è§£æå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´ Parse å‡½æ•°å¯ä»¥è§£æä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²å¹¶è¿”å›å®ƒä»£è¡¨çš„æ—¶é—´ã€‚ func Parse(layout, value string) (Time, error) ä¸ Parse å‡½æ•°ç±»ä¼¼çš„è¿˜æœ‰ ParseInLocation å‡½æ•°ã€‚ func ParseInLocation(layout, value string, loc *Location) (Time, error) ParseInLocation ä¸ Parse å‡½æ•°ç±»ä¼¼ï¼Œä½†æœ‰ä¸¤ä¸ªé‡è¦çš„ä¸åŒä¹‹å¤„ï¼š ç¬¬ä¸€ï¼Œå½“ç¼ºå°‘æ—¶åŒºä¿¡æ¯æ—¶ï¼ŒParse å°†æ—¶é—´è§£é‡Šä¸º UTC æ—¶é—´ï¼Œè€Œ ParseInLocation å°†è¿”å›å€¼çš„ Location è®¾ç½®ä¸º locï¼› ç¬¬äºŒï¼Œå½“æ—¶é—´å­—ç¬¦ä¸²æä¾›äº†æ—¶åŒºåç§»é‡ä¿¡æ¯æ—¶ï¼ŒParse ä¼šå°è¯•å»åŒ¹é…æœ¬åœ°æ—¶åŒºï¼Œè€Œ ParseInLocation ä¼šå»åŒ¹é… locã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š package main import ( \"fmt\" \"time\" ) func main() { var layout string = \"2006-01-02 15:04:05\" var timeStr string = \"2019-12-12 15:22:12\" timeObj1, _ := time.Parse(layout, timeStr) fmt.Println(timeObj1) timeObj2, _ := time.ParseInLocation(layout, timeStr, time.Local) fmt.Println(timeObj2) } å­—ç¬¦ä¸²å’Œæ•°å­—äº’è½¬ å­—ç¬¦ä¸²ä¸æ•°å­—äº’è½¬çš„æƒ³å…³åº“å‡½æ•°å…¨åœ¨ä¸€ä¸ªåŒ…å†…ï¼šstrconvåŒ… ä¸€å›¾èƒœåƒè¨€ï¼š osç›¸å…³ä¿¡æ¯ osåŒ…é‡Œé¢å°è£…äº†å¾ˆå¤šå’Œæ“ä½œç³»ç»Ÿç›¸å…³çš„å†…å®¹ã€‚ å¦‚ä¸‹ï¼š package main import ( \"fmt\" \"os\" \"os/exec\" ) func main() { fmt.Println(os.Args) //æ‰“å°å‘½ä»¤è¡Œå‚æ•° fmt.Println(os.Getenv(\"PATH\")) //æ‰“å°ç¯","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/:1:1","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["é’è®­è¥ç¬”è®°"],"content":"å®æˆ˜é¡¹ç›® ","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/:2:0","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["é’è®­è¥ç¬”è®°"],"content":"çŒœè°œæ¸¸æˆï¼ˆpassï¼Œè¿‡äºç®€å•ï¼‰ ","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/:2:1","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["é’è®­è¥ç¬”è®°"],"content":"åœ¨çº¿è¯å…¸ æƒ³è¦å®ç°åœ¨çº¿è¯å…¸ï¼Œé¦–å…ˆå°±å¾—ç”¨åˆ°åˆ«äººçš„ç¿»è¯‘å¼•æ“ ç¬¬ä¸€æ­¥ï¼šæŠ“åŒ…å¾—å¾—åˆ°æ•°æ®è¿›è¡Œåˆ†æ ä»¥å½©äº‘è¯å…¸ä¸ºä¾‹ï¼š ä»ç½‘é¡µè°ƒè¯•å·¥å…·é‡Œé¢æŸ¥çœ‹éšæ—¶æ”¶å‘çš„ç½‘ç»œæ•°æ®åŒ…ï¼ŒæŒ¨ä¸ªæŸ¥çœ‹å®ƒä»¬çš„responseï¼Œå¦‚æœé‡Œé¢çš„jsonæ•°æ®å‡ºç°ç¿»è¯‘ç»“æœï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªåŒ…å°±æ˜¯è¿”å›çš„ç¿»è¯‘ç»“æœï¼ é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦è®©goè¯­è¨€æ¥åšåŒæ ·çš„ä¸¤ä»¶äº‹ï¼š å‘èµ·è¯·æ±‚ã€‚ è§£æè¿”å›çš„jsonå†…å®¹ã€‚ åªè¦åšå¥½äº†è¿™ä¸¤ä»¶äº‹ï¼Œé‚£ä¹ˆå°±å¾ˆå¿«å¾—åˆ°äº†ä¸€ä¸ªå•è¯çš„ç¿»è¯‘äº†ã€‚ ç¬¬äºŒæ­¥ï¼šåˆ©ç”¨å·¥å…·ç”Ÿæˆä»£ç  åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬éœ€è¦æ¸…æ¥šæœ‰ä¸¤ä¸ªç¥å™¨èˆ¬å­˜åœ¨çš„ç½‘ç«™ï¼š curlconverter æŠŠcurlè¯·æ±‚ç›´æ¥è½¬ä¸ºgoçš„è¯·æ±‚ä»£ç ã€‚ oktools JSONè½¬Golang Struct é‚£ä¹ˆæˆ‘ä»¬å…ˆè‚¯å®šæ˜¯è¦å¾—åˆ°è¯·æ±‚çš„ä»£ç ï¼Œç„¶åç¨ä½œæ›´æ”¹ï¼Œè§£æbodyåå¾—å‡ºæƒ³è¦çš„ç»“æœã€‚ curlè¯·æ±‚ç›´æ¥è½¬ä¸ºgoçš„è¯·æ±‚ä»£ç  å¦‚ä¸‹å›¾è¿›åˆ°åˆšæ‰æˆ‘ä»¬æ•æ‰åˆ°çš„ç›®æ ‡åŒ…ï¼Œç„¶åå¤åˆ¶cURLï¼Œåˆ°ç½‘ç«™è¿›è¡Œè§£æå¾—åˆ°æœ€ç»ˆä»£ç ã€‚ package main import ( \"fmt\" \"io/ioutil\" \"log\" \"net/http\" \"strings\" ) func main() { client := \u0026http.Client{} var data = strings.NewReader(`{\"trans_type\":\"en2zh\",\"source\":\"hello\"}`) req, err := http.NewRequest(\"POST\", \"https://api.interpreter.caiyunai.com/v1/dict\", data) if err != nil { log.Fatal(err) } req.Header.Set(\"Connection\", \"keep-alive\") req.Header.Set(\"sec-ch-ua\", `\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"99\", \"Google Chrome\";v=\"99\"`) req.Header.Set(\"sec-ch-ua-mobile\", \"?0\") req.Header.Set(\"User-Agent\", \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36\") req.Header.Set(\"app-name\", \"xy\") req.Header.Set(\"Content-Type\", \"application/json;charset=UTF-8\") req.Header.Set(\"Accept\", \"application/json, text/plain, */*\") req.Header.Set(\"os-type\", \"web\") req.Header.Set(\"X-Authorization\", \"token:qgemv4jr1y38jyq6vhvi\") req.Header.Set(\"sec-ch-ua-platform\", `\"Windows\"`) req.Header.Set(\"Origin\", \"https://fanyi.caiyunapp.com\") req.Header.Set(\"Sec-Fetch-Site\", \"cross-site\") req.Header.Set(\"Sec-Fetch-Mode\", \"cors\") req.Header.Set(\"Sec-Fetch-Dest\", \"empty\") req.Header.Set(\"Referer\", \"https://fanyi.caiyunapp.com/\") req.Header.Set(\"Accept-Language\", \"zh-CN,zh;q=0.9\") resp, err := client.Do(req) if err != nil { log.Fatal(err) } defer resp.Body.Close() bodyText, err := ioutil.ReadAll(resp.Body) if err != nil { log.Fatal(err) } fmt.Printf(\"%s\\n\", bodyText) } è§‚å¯Ÿä»£ç çš„æ”¹å˜æˆ‘ä»¬åªéœ€å¯¹sourceéƒ¨åˆ†çš„å†…å®¹è¿›è¡Œæ›´æ”¹ï¼Œå³å¯å¾—åˆ°å¯¹åº”çš„ç¿»è¯‘ç»“æœã€‚ JSONè½¬Golang Struct å¾—åˆ°ç¿»è¯‘ç»“æœï¼Œbodyå†…å®¹åï¼Œæˆ‘ä»¬éœ€è¦æŠŠbodyå†…å®¹è§£æä¸ºæœ¬åœ°çš„sturctæ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆå½“ç„¶ä½ å¤´é“çš„è¯å¯ä»¥ç›´æ¥æ‰¾å¯¹åº”çš„å­—ç¬¦ä¸²å³å¯ï¼Œä¹Ÿä¸éœ€è¦ååºåˆ—åŒ–ã€‚ type AutoGenerated struct { Rc int `json:\"rc\"` Wiki struct { KnownInLaguages int `json:\"known_in_laguages\"` Description struct { Source string `json:\"source\"` Target interface{} `json:\"target\"` } `json:\"description\"` ID string `json:\"id\"` Item struct { Source string `json:\"source\"` Target string `json:\"target\"` } `json:\"item\"` ImageURL string `json:\"image_url\"` IsSubject string `json:\"is_subject\"` Sitelink string `json:\"sitelink\"` } `json:\"wiki\"` Dictionary struct { Prons struct { EnUs string `json:\"en-us\"` En string `json:\"en\"` } `json:\"prons\"` Explanations []string `json:\"explanations\"` Synonym []string `json:\"synonym\"` Antonym []interface{} `json:\"antonym\"` WqxExample [][]string `json:\"wqx_example\"` Entry string `json:\"entry\"` Type string `json:\"type\"` Related []interface{} `json:\"related\"` Source string `json:\"source\"` } `json:\"dictionary\"` } ç¬¬ä¸‰æ­¥ï¼šæ›´æ”¹ä»£ç å®ç°åŠŸèƒ½ é€šè¿‡å‰é¢ç”Ÿæˆçš„ä»£ç å·²ç»èƒ½å¤Ÿå®ç°è¯·æ±‚å’Œæ¥æ”¶å“åº”ï¼Œä¸”å¯ä»¥ç›´æ¥æŠŠå“åº”å†…å®¹ååºåˆ—åŒ–ä¸ºç»“æ„ä½“ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œåªéœ€è¦æŠŠæƒ³è¦çš„éƒ¨åˆ†éå†æ‰“å°å³å¯ã€‚ æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š package src import ( \"bytes\" \"encoding/json\" \"fmt\" \"io/ioutil\" \"log\" \"net/http\" ) func QueryCaiyun(word string) { client := \u0026http.Client{} request := DictRequestCaiyun{TransType: \"en2zh\", Source: word} buf, err := json.Marshal(request) if err != nil { log.Fatal(err) } var data = bytes.NewReader(buf) req, err := http.NewRequest(\"POST\", \"https://api.interpreter.caiyunai.com/v1/dict\", data) if err != nil { log.Fatal(err) } req.Header.Set(\"Connection\", \"keep-alive\") req.Header.Set(\"sec-ch-ua\", `\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"99\", \"Google Chrome\";v=\"99\"`) req.Header.Set(\"sec-ch-ua-mobile\", \"?0\") req.Header.Set(\"User-Agent\", \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36\") req.Header.Set(\"app-name\", \"xy\") req.Header.Set(\"Content-Type\", \"application/json;charset=UTF-8\") req.Header.Set(\"Accept\", \"application/json, text/plain, */*\") req.Header.Set(\"os-type\", \"web\") req.Header.Set(\"X-Authorization\", \"token:qgemv4jr1y38jyq6vhvi\") req.Header.Set(\"sec-ch-ua-platform\", `\"Windows\"`) req.Header.Set(\"Origin\", \"https://fanyi.caiy","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/:2:2","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["é’è®­è¥ç¬”è®°"],"content":"SOCKS5ä»£ç†æœåŠ¡å™¨ SOCKS5ç®€å•ä»‹ç» SOCKS5æ˜¯ä»£ç†åè®®ï¼Œåœ¨ä½¿ç”¨TCP/IPåè®®é€šä¿¡çš„å‰ç«¯æœºå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å‘æŒ¥ä¸­ä»‹ä½œç”¨ï¼Œä½¿å†…éƒ¨ç½‘ç»œçš„å‰ç«¯æœºå™¨èƒ½å¤Ÿè®¿é—®äº’è”ç½‘çš„æœåŠ¡å™¨ï¼Œä½¿é€šä¿¡æ›´åŠ å®‰å…¨ã€‚SOCKS5æœåŠ¡å™¨å°†å‰ç«¯å‘é€çš„è¯·æ±‚è½¬å‘ç»™çœŸæ­£çš„ç›®æ ‡æœåŠ¡å™¨ï¼Œæ¨¡æ‹Ÿå‰ç«¯è¡Œä¸ºã€‚æ­¤å¤„ï¼Œå‰ç«¯ä¸SOCKS5ä¹‹é—´ä¹Ÿæ˜¯é€šè¿‡TCP/IPåè®®è¿›è¡Œé€šä¿¡çš„ï¼Œå‰ç«¯å‘SOCKS5æœåŠ¡å™¨å‘é€è¯·æ±‚å‘é€ç»™SOCKS5æœåŠ¡å™¨ï¼Œç„¶åSOCKS5æœåŠ¡å™¨å°†è¯·æ±‚å‘é€ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚SOCKS5æœåŠ¡å™¨åœ¨å°†é€šè®¯è¯·æ±‚å‘é€ç»™çœŸæ­£æœåŠ¡å™¨çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºè¯·æ±‚æ•°æ®åŒ…æœ¬èº«ä¸åŠ ä»»ä½•æ”¹å˜ï¼ˆæ˜æ–‡ä¼ è¾“ï¼‰ã€‚SOCKS5æœåŠ¡å™¨åœ¨æ”¶åˆ°çœŸå®æœåŠ¡å™¨å“åº”åï¼Œä¹ŸåŸæ ·è½¬å‘åˆ°å‰ç«¯ã€‚ å®ƒçš„ç”¨é€”æ˜¯ï¼Œ æ¯”å¦‚æŸäº›ä¼ä¸šçš„å†…ç½‘ä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼Œæœ‰å¾ˆä¸¥æ ¼çš„é˜²ç«å¢™ç­–ç•¥ï¼Œä½†æ˜¯å¸¦æ¥çš„å‰¯ä½œç”¨å°±æ˜¯è®¿é—®æŸäº›èµ„æºä¼šå¾ˆéº»çƒ¦ã€‚ socks5 ç›¸å½“äºåœ¨é˜²ç«å¢™å¼€äº†ä¸ªå£å­ï¼Œè®©æˆæƒçš„ç”¨æˆ·å¯ä»¥é€šè¿‡å•ä¸ªç«¯å£å»è®¿é—®å†…éƒ¨çš„æ‰€æœ‰èµ„æºã€‚å®é™…ä¸Šå¾ˆå¤šç¿»å¢™è½¯ä»¶ï¼Œæœ€ç»ˆæš´éœ²çš„ä¹Ÿæ˜¯ä¸€ä¸ª socks5 åè®®çš„ç«¯å£ã€‚ SOCKS5ä»£ç†åŸç† æ­£å¸¸æµè§ˆå™¨è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œå¦‚æœä¸ç»è¿‡ä»£ç†æœåŠ¡å™¨çš„è¯ï¼Œå°±æ˜¯å…ˆå’Œå¯¹æ–¹çš„ç½‘ç«™å»ºç«‹ TCP è¿æ¥ï¼Œç„¶åä¸‰æ¬¡æ¡æ‰‹ï¼Œæ¡æ‰‹å®Œä¹‹åå‘èµ· HTTP è¯·æ±‚ï¼Œç„¶åæœåŠ¡è¿”å› HTTP å“åº”ã€‚å¦‚æœè®¾ç½®ä»£ç†æœåŠ¡å™¨ä¹‹åï¼Œæµç¨‹ä¼šå˜å¾—å¤æ‚ä¸€äº›ã€‚ é¦–å…ˆæ˜¯æµè§ˆå™¨å’Œ socks5 ä»£ç†å»ºç«‹ TCP è¿æ¥ï¼Œä»£ç†å†å’ŒçœŸæ­£çš„æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ã€‚è¿™é‡Œå¯ä»¥åˆ†æˆå››ä¸ªé˜¶æ®µï¼Œæ¡æ‰‹é˜¶æ®µã€è®¤è¯é˜¶æ®µã€è¯·æ±‚é˜¶æ®µã€ relay é˜¶æ®µã€‚ æ¡æ‰‹é˜¶æ®µï¼šæµè§ˆå™¨ä¼šå‘ socks5 ä»£ç†å‘é€è¯·æ±‚ï¼ŒåŒ…çš„å†…å®¹åŒ…æ‹¬ä¸€ä¸ªåè®®çš„ç‰ˆæœ¬å·ï¼Œè¿˜æœ‰æ”¯æŒçš„è®¤è¯çš„ç§ç±»ï¼Œsocks5 æœåŠ¡å™¨ä¼šé€‰ä¸­ä¸€ä¸ªè®¤è¯æ–¹å¼ï¼Œè¿”å›ç»™æµè§ˆå™¨ã€‚å¦‚æœè¿”å›çš„æ˜¯ 00 çš„è¯å°±ä»£è¡¨ä¸éœ€è¦è®¤è¯ï¼Œè¿”å›å…¶ä»–ç±»å‹çš„è¯ä¼šå¼€å§‹è®¤è¯æµç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å¯¹è®¤è¯æµç¨‹è¿›è¡Œæ¦‚è¿°äº†ã€‚ï¼ˆæœ¬æ¬¡è¯¾ç¨‹è·³è¿‡è®¤è¯é˜¶æ®µï¼‰ è¯·æ±‚é˜¶æ®µï¼šè®¤è¯é€šè¿‡ä¹‹åæµè§ˆå™¨ä¼šå¯¹ socks5 æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚ä¸»è¦ä¿¡æ¯åŒ…æ‹¬ ç‰ˆæœ¬å·ï¼Œè¯·æ±‚çš„ç±»å‹ï¼Œä¸€èˆ¬ä¸»è¦æ˜¯ connection è¯·æ±‚ï¼Œå°±ä»£è¡¨ä»£ç†æœåŠ¡å™¨è¦å’ŒæŸä¸ªåŸŸåæˆ–è€…æŸä¸ª IP åœ°å€æŸä¸ªç«¯å£å»ºç«‹ TCP è¿æ¥ã€‚ä»£ç†æœåŠ¡å™¨æ”¶åˆ°å“åº”ä¹‹åï¼Œä¼šçœŸæ­£å’Œåç«¯æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œç„¶åè¿”å›ä¸€ä¸ªå“åº”ã€‚ relay é˜¶æ®µï¼šæ­¤æ—¶æµè§ˆå™¨ä¼šå‘é€ æ­£å¸¸å‘é€è¯·æ±‚ï¼Œç„¶åä»£ç†æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¼šç›´æ¥æŠŠè¯·æ±‚è½¬æ¢åˆ°çœŸæ­£çš„æœåŠ¡å™¨ä¸Šã€‚ç„¶åå¦‚æœçœŸæ­£çš„æœåŠ¡å™¨ä»¥åè¿”å›å“åº”çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿä¼šæŠŠè¯·æ±‚è½¬å‘åˆ°æµè§ˆå™¨è¿™è¾¹ã€‚ç„¶åå®é™…ä¸Š ä»£ç†æœåŠ¡å™¨å¹¶ä¸å…³å¿ƒæµé‡çš„ç»†èŠ‚ï¼Œå¯ä»¥æ˜¯ HTTPæµé‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒ TCP æµé‡ã€‚ è¿™ä¸ªå°±æ˜¯ socks5 åè®®çš„å·¥ä½œåŸç†ã€‚ graph LR\ra[æ¡æ‰‹é˜¶æ®µ]\rb[è®¤è¯é˜¶æ®µ]\rc[è¯·æ±‚é˜¶æ®µ]\rd[è½¬å‘relayé˜¶æ®µ]\ra--\u003eb--\u003ec--\u003ed\rå…·ä½“å®ç° v1-ç®€å•echoæœåŠ¡å™¨ package main import ( \"bufio\" \"fmt\" \"log\" \"net\" ) func main() { server, err := net.Listen(\"tcp\", \"0.0.0.0:1080\") if err != nil { panic(err) } for { client, err := server.Accept() if err != nil { log.Printf(\"Accept failed %v\", err) continue } fmt.Printf(\"è¿æ¥æˆåŠŸ! clent:%v \\n\", client.RemoteAddr()) go process(client) } } func process(conn net.Conn) { defer func() { conn.Close() fmt.Printf(\"è¿æ¥æ–­å¼€! clent:%v \\n\", conn.RemoteAddr()) }() //ç”¨ç¼“å†²æµè¿›è¡Œä¸€æ¬¡åŒ…è£…ï¼Œå‡å°‘åº•å±‚IOæ¬¡æ•°ï¼Œè®©è¯»å–æ•ˆç‡æ›´é«˜æ•ˆ reader := bufio.NewReader(conn) for { b, err := reader.ReadByte() if err != nil { break } _, err = conn.Write([]byte{b}) if err != nil { break } } } å®¢æˆ·ç«¯éªŒè¯ï¼š æ²¡å¿…è¦å†å†™ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè¿™æ—¶å®Œå…¨å¯ä»¥netcatå·¥å…·è¿›è¡Œtcpè¿æ¥æµ‹è¯•ã€‚ å¦‚ä¸‹ï¼š v2-å®ç°SOCKS5çš„æ¡æ‰‹é˜¶æ®µ å®ç°SOCKS5ä¹‹å‰æˆ‘ä»¬éœ€è¦æ¸…æ¥šSOCKS5çš„æ¡æ‰‹é˜¶æ®µçš„è¯·æ±‚å’Œè¿”å›æ˜¯æ€ä¹ˆæ ·çš„ï¼Œå¦‚ä¸‹é¢çš„å›¾è¡¨æ‰€ç¤ºï¼š VER NMETHODS METHODS 1byte 1byte 1 to 255 byte åè®®ç‰ˆæœ¬ä¿¡æ¯socks5ä¸º0x05 æ”¯æŒè®¤è¯çš„æ–¹æ³•æ•°é‡å€¼ä¸º0x00åˆ™è¡¨ç¤ºæ— éœ€è®¤è¯ NMETHODSçš„å€¼ä¸ºå¤šå°‘METHODSå°±æœ‰å¤šå°‘ä¸ªå­—èŠ‚ package main //auth é˜¶æ®µ import ( \"bufio\" \"fmt\" \"io\" \"log\" \"net\" ) const( socks5Ver = 0x05 cmdBind = 0x01 atypIPV4 = 0x01 atypeHOST = 0x03 atypeIPV6 = 0x04 ) func main() { server, err := net.Listen(\"tcp\", \"0.0.0.0:1080\") if err != nil { panic(err) } for { client, err := server.Accept() if err != nil { log.Printf(\"Accept failed %v\", err) continue } fmt.Printf(\"è¿æ¥æˆåŠŸ! clent:%v \\n\", client.RemoteAddr()) go process(client) } } func process(conn net.Conn) { defer func() { conn.Close() fmt.Printf(\"è¿æ¥æ–­å¼€! clent:%v \\n\", conn.RemoteAddr()) }() reader := bufio.NewReader(conn) err := auth(reader,conn) if err!=nil{ log.Printf(\"client %v auth failed:%v\",conn.RemoteAddr(),err) } log.Println(\"auth success\") } func auth(reader *bufio.Reader, conn net.Conn) (err error) { //åè®®ç‰ˆæœ¬ ver,err := reader.ReadByte() if err != nil{ return fmt.Errorf(\"read ver failed:%w\",err) } if ver != socks5Ver{ return fmt.Errorf(\"not supported ver:%v\",ver) } //æ”¯æŒçš„æ–¹æ³•æ•°é‡ methodSize,err := reader.ReadByte() if err!=nil{ return fmt.Errorf(\"read methodSize failed:%w\",err) } //æ–¹æ³•å€¼ method := make([]byte,methodSize) _,err = io.ReadFull(reader,method) if err!=nil{ return fmt.Errorf(\"read method failed %w\",err) } log.Println(\"ver\",ver,\"method\",method) //è¿”å›çš„å†…å®¹è¡¨ç¤ºSOCKS5é€šä¿¡ï¼Œä¸”æ— éœ€è®¤è¯ _,err = conn.Write([]byte{socks5Ver,0x00}) if err !=nil{ return fmt.Errorf(\"write failed:%w\",err) } return nil } v3-å®ç°SOCKS5çš„è¯·æ±‚é˜¶æ®µ åŒæ ·æ¥çœ‹çœ‹æ­¤æ—¶çš„æ¶ˆæ¯åè®®ï¼š å®¢æˆ·ç«¯è¯·æ±‚ï¼š VER CMD RSV ATYP DST.ADDR DST.PORT 1byte 1byte 1byte 1byte Variable 2byte åè®®ç‰ˆæœ¬0x05ä¸ºSOCKS5 ä»£è¡¨è¯·æ±‚ç±»å‹0x01è¡¨ç¤ºCONNECTè¯·æ±‚ ä¿ç•™å­—æ®µï¼ˆä¸ç†ä¼šï¼‰ ç›®æ ‡åœ°å€ç±»å‹ï¼ˆIPV4/IPV6/åŸŸåï¼‰ åœ°å€å€¼ï¼Œæ ¹æ®ä¸åŒåœ°å€ç±»å‹ï¼Œé•¿åº¦ä¸åŒ éœ€è¦è®¿é—®çš„æœåŠ¡å™¨çš„ç«¯å£å· æœåŠ¡ç«¯å“åº”ï¼š VER REP RSV ATYP BIND.ADDR BIND.PORT 1byte 1byte 1byte 1byte Variable 2byte åè®®ç‰ˆæœ¬0x05ä¸ºSOCKS5 ä»£è¡¨å“åº”ã€‚æˆåŠŸå°±è¿”å›0 ä¿ç•™å­—æ®µï¼ˆä¸ç†ä¼šï¼‰ åœ°å€ç±»å‹ï¼ˆIPV4/IPV6/åŸŸåï¼‰ åœ°å€å€¼ï¼ˆè¿™é‡Œæš‚æ—¶ä¸éœ€è¦ ç«¯å£å·ï¼ˆè¿™é‡Œæš‚æ—¶ä¸éœ€è¦ è¿™ä¸€è¿‡ç¨‹çš„ä»£ç ï¼š å¯¹å½“å‰çš„å®ç°è¿›è¡Œæµ‹è¯•ï¼š è¿›è¡Œå¦‚ä¸‹curlå‘½ä»¤ï¼š curl --socks5 localhost:1080 -v http://www.qq.com æ­¤æ—¶è¯·æ±‚ä¼šå¤±è´¥ï¼Œä½†æˆ‘ä»¬å·²ç»èƒ½çœ‹åˆ°æ­£å¸¸æ‰“å°å‡ºæ¥çš„ipå’Œç«¯å£å· v4-å®ç°SOCKS5çš„è½¬å‘é˜¶æ®µï¼ˆæœ€ç»ˆå®Œå…¨ç‰ˆæœ¬ æœ€åçš„è½¬å‘è¿‡ç¨‹ï¼Œç”±äºä¸éœ€è¦å¯¹æµé‡è¿›è¡Œä»»ä½•çš„å¤„ç†ï¼Œæ‰€ä»¥æ²¡æœ‰ä¸Šå±‚åè®®ï¼Œç›´æ¥å†Writeæ“ä½œå®ŒåæŠŠæµé‡è¿›è¡Œè½¬å‘å³å¯ã€‚ å¯¹äºä¸¤ä¸ªè¿æ¥æµé‡çš„è½¬å‘ï¼Œæ ‡å‡†åº“é‡Œæœ‰æœ‰ä¸€äº›å¥½ç”¨çš„å‡½æ•°åº“ã€‚ é€šè¿‡net.Dialå»ºç«‹tcpè¿æ¥ã€‚ dest, err := net.Dial(\"tcp\", fmt","date":"2022-05-07","objectID":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/:2:3","tags":["Goè¯­è¨€ä¸Šæ‰‹"],"title":"Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°","uri":"/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"é¡¹ç›®èƒŒæ™¯ æƒ³è¦ç”¨çº¯C++å®ç°ä¸€ä¸ªQQï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯çš„uiå’Œé€šä¿¡ï¼Œä»¥åŠæœåŠ¡ç«¯çš„æ•°æ®æ”¶å‘é€šä¿¡ã€‚ å®¢æˆ·ç«¯ï¼šä½¿ç”¨C++çš„Qtæ¡†æ¶å®ç°UIï¼ˆæ­£åœ¨è¿›è¡Œï¼‰ï¼Œä½¿ç”¨è‡ªå·±æ‰‹å†™çš„ç½‘ç»œæ¡†æ¶è¿›è¡Œé€šä¿¡ï¼ˆè¿˜æœªå¼€å§‹ï¼‰ï¼Œä»¥åŠæ‰‹å†™çš„bencodeç¼–ç è¿›æœ¬åœ°åºåˆ—åŒ–ï¼ˆå·²ç»å®Œæˆï¼‰ã€‚ æœåŠ¡ç«¯ï¼šä½¿ç”¨è‡ªå·±é€ å¥½çš„ç½‘ç»œæ¡†æ¶è¿›è¡Œæ•°æ®çš„æ”¶å‘å’Œé€šä¿¡ï¼ˆè¿˜æœªå¼€å§‹ï¼‰ã€‚ æœ¬ç¯‡è¿›åº¦ï¼šå·²ç»å®ç°äº†ç™»å½•ç•Œé¢å’ŒåŸºæœ¬çš„ä¸»ç•Œé¢ï¼Œæœ¬æ¬¡æ˜¯æƒ³æ‹“å±•ä¸€ä¸ªå®æ—¶çš„æœç´¢æ¡†ï¼Œç»“æœç¢°åˆ°äº†å‘ï¼Œç„¶ååœ¨æ­¤å†™ä¸‹è®°å½•ã€‚ ç›®å‰UIå®ç°æƒ…å†µå¦‚ä¸‹å›¾ï¼š ç™»å½•ç•Œé¢ï¼š ä¸»ç•Œé¢ï¼š ","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/:1:0","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"å®æ—¶QQå¥½å‹æœç´¢æ¡†å®ç°æ€è·¯ å®ç°ç›®æ ‡ï¼šå½“ç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥åå­—çš„æ—¶å€™ï¼Œä¼šå®æ—¶å°†å½“å‰åˆ—è¡¨å†…çš„åŒ…å«è¯¥åå­—çš„å¥½å‹ç»™åˆ—ä¸¾å‡ºæ¥ã€‚ å®ç°æ–¹å¼ï¼šé€šè¿‡è¿æ¥ä¿¡å· QLineEdit::textChanged æ¥å¯¹åº”ç”¨æˆ·æŒ‰é’®çš„å­˜å‚¨æ§ä»¶ä¸­çš„æ§½å‡½æ•°ã€‚ ","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/:2:0","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"å…·ä½“æ€è·¯ ç”±äºæˆ‘æ˜¯é€šè¿‡ QListWidget å­˜ä¸‹å¤šä¸ªè‡ªå·±é‡å†™çš„ QPushButton æ¥å®ç°å¥½å‹åˆ—è¡¨ï¼Œæ•…æƒ³è¦è¿›è¡Œåˆ—è¡¨ä¸­çš„åˆ é™¤å’Œå¢åŠ å°±æ˜¯å¯¹ QListWidget å¢åŠ æˆ–åˆ é™¤ QListWidgetItem ã€‚ç”±äº QListWidget åªæä¾›äº† QListWidget::addItem æ–¹æ³•è¿›è¡Œæ·»åŠ ï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½ä¿è¯åœ¨å…·ä½“å“ªä¸€è¡Œæ’å…¥ï¼Œåªä¼šåœ¨åˆ—è¡¨çš„å°¾éƒ¨è¿›è¡Œæ·»åŠ ï¼Œæ‰€ä»¥æˆ‘é€šè¿‡è¿™æ ·ä¸€ä¸ªæ–¹æ³•å®ç°å®æ—¶çš„åˆ—è¡¨æœç´¢é¡¹ï¼šæ¸…ç©ºå†é‡æ–°åˆ›å»ºç¬¦åˆæ¡ä»¶çš„ QPushButtonã€‚ ","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/:2:1","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"å®è·µ ","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/:3:0","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"å®è·µä¸€ï¼šé€šè¿‡ä¿å­˜ä¸€ä»½æ‹·è´(æ‰‘è¡—bug) æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘å¾ˆå¿«æƒ³åˆ°ï¼Œéœ€è¦ä¿å­˜å¥½æœç´¢å‰çš„æ‰€æœ‰åˆ—è¡¨é¡¹ï¼Œç„¶åå†é€šè¿‡ç”¨æˆ·è¾“å…¥çš„æ–‡å­—ç­›é€‰ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„åˆ—è¡¨é¡¹æ·»åŠ è¿›å»ã€‚ è¿™æ ·å¾ˆå¿«å°±å‡ºç°äº†é—®é¢˜ï¼šç”±äºæ¸…ç©ºåˆ—è¡¨ä¼šå¯¼è‡´åˆ—è¡¨é¡¹é‡Œé¢çš„æ‰€æœ‰å†…å­˜éƒ½è¢«ææ„ï¼æ‰€ä»¥å¦‚æœä½ å»æŒ‰ç…§è¿™æ ·ä¸€ä¸ªæ€è·¯å»å®ç°ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨ addUserBtn æ·»åŠ ç”¨æˆ·æŒ‰é’®çš„æ—¶å€™å­˜ä¸‹ä¸€ä»½æ‹·è´ï¼Œç„¶åä½ æŠŠåˆ—è¡¨æ¸…ç©ºåå†…å­˜ææ„ä¹Ÿä¸€ç›´èƒ½ç”¨è¿™ä¸€ä»½æ‹·è´å†ç”Ÿæˆæ–°çš„æ‹·è´æŒ‰é’®æ¥æ·»åŠ åˆ°åˆ—è¡¨ä¸­å»ï¼Œè¿™æ ·é—®é¢˜åº”è¯¥å°±è§£å†³äº†ã€‚ ç„¶åæˆ‘é©¬ä¸åœè¹„çš„é©¬ä¸Šå†™å¥½äº†ä»£ç ï¼Œè·‘èµ·æ¥å‡†å¤‡æµ‹è¯•ï¼Œç«‹é©¬å‡ºç°æ–°çš„é—®é¢˜ï¼šæ¯æ¬¡è¾“å…¥æ—¶ç¡®å®ä¼šæ˜¾ç¤ºå¯¹åº”çš„ç”¨æˆ·æŒ‰é’®æ˜¯æ²¡é”™ï¼Œä½†å›¾ç‰‡éƒ½æ²¡äº†ï¼Œç”šè‡³å¾ˆå¤šæŒ‰é’®æ˜¯ç©ºçš„ï¼Ÿï¼Ÿï¼Ÿ ç»è¿‡æ³¨æ„æ’æŸ¥ï¼Œå‘ç°æ˜¯æˆ‘å†™æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™æŠŠå¾ˆå¤š QString æˆå‘˜è½¬äº†å³å€¼ç”¨äº†ç§»åŠ¨æ„é€ ï¼Œæ‰€ä»¥æ¯æ¬¡å‘é€æ‹·è´æ—¶ï¼Œå®é™…ä¸Šèµ„æºå·²ç»è½¬ç§»äº†ã€‚ã€‚ã€‚ æ”¹å¥½è¿™ä¸ªbugï¼Œåˆç»§ç»­æµ‹è¯•ï¼Œç„¶åæœä¸å…¶ç„¶ï¼Œåˆå‡ºç°äº†æ–°çš„é—®é¢˜ï¼šç”¨æˆ·è¾“å…¥çš„æ—¶å€™ä¼šæœ‰ç¬¦åˆæ¡ä»¶çš„é¡¹è¢«åˆ›å»ºæ²¡é”™ï¼Œä¸”éƒ½æœ‰å¯¹åº”çš„æ•°æ®ï¼Œä½†æ˜¯éšç€ç»§ç»­è¾“å…¥åˆ›å»ºçš„å¯¹è±¡æ˜¯è¶Šæ¥è¶Šå¤šäº†ï¼Ÿï¼Ÿï¼Ÿ åˆç»è¿‡ä»”ç»†æ’æŸ¥ï¼Œå‘ç°æ˜¯å› ä¸ºæ¯æ¬¡ addUserBtn çš„æ—¶å€™éƒ½ä¼šæŠŠå¯¹åº”çš„æ•°æ®æ·»åŠ ä¸€ä»½æ‹·è´åˆ°ç¼“å­˜ï¼Œä½†æ˜¯å¦‚æœæ˜¯ç”¨æˆ·åœ¨è¾“å…¥æ¡†ç«‹é©¬è¾“å…¥ä¿¡æ¯è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œè°ƒç”¨äº†è¿™ä¸ªaddå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šä¸æ–­çš„æ·»åŠ é‡å¤çš„ä¿¡æ¯åˆ°ç¼“å­˜ä¸­å»ï¼ï¼ï¼ æ­¤æ—¶å¾ˆå¤šäººå¯èƒ½ä¼šæƒ³ç€ç”¨ set æ›¿ä»£ list åšç¼“å­˜ï¼Œä½†æ˜¯æˆ‘å°±æ­¤å‘ç°äº†æˆ‘è¿™ä¸ªå®ç°æ€è·¯å°±å¾ˆæœ‰é—®é¢˜ï¼š ä¸€ã€æ¯æ¬¡é‡æ–°æ·»åŠ æ§ä»¶éœ€è¦æŠŠæ•´ä¸ªä¿¡æ¯å…¨æ‹·è´ä¸€éï¼Œå¦‚æœæ•°æ®å¤šäº†ä¼šæ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„å·¥ä½œï¼ äºŒã€æˆ‘å‘ç°äº†ç½ªæ¶ä¹‹æºï¼šQListWidget æŠŠæ§ä»¶çš„ç”Ÿå‘½å‘¨æœŸç‰¢ç‰¢æŠŠæ¡ï¼ï¼ï¼è¦ä¸æ˜¯æ¯æ¬¡åˆ é™¤æ§ä»¶éƒ½å¾—æŠŠç«‹é©¬çš„ä¸œè¥¿ææ„æ‰èƒ½è®©è¿™ä¸ªæ§ä»¶ä¸æ˜¾ç¤ºï¼Œæ‰ä¸ä¼šå‡ºç°è¿™ç­‰é—®é¢˜ï¼ä¹Ÿæ‰ä¸ä¼šéœ€è¦é‡å¤ä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼ ","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/:3:1","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"å®è·µäºŒï¼šé€šè¿‡å‰åç«¯åˆ†ç¦»+æ™ºèƒ½æŒ‡é’ˆå®Œç¾è§£å†³ è¿™æ¬¡æ¨å€’é‡æ¥ï¼Œå‰é¢çš„è¯•æ¢ä¹Ÿå¹¶éæ˜¯åœ¨åšæ— ç”¨åŠŸï¼Œè‡³å°‘é€šè¿‡å‰é¢çš„å®è·µå‘ç°ï¼Œæ—¢ç„¶æˆ‘ä»¬æ²¡æ³•æŠŠ Button çš„ç”Ÿå‘½å‘¨æœŸæ‹¿åœ¨æ‰‹é‡Œï¼ˆæ¯æ¬¡è¿˜æ˜¯éœ€è¦é‡æ–°newå‡ºæ–°çš„Buttonï¼‰ï¼Œä½†æˆ‘ä»¬è‡³å°‘æŠŠ Button é‡Œæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸæ‹¿åœ¨æ‰‹é‡Œå•Šï¼Œæˆ‘ä»¬åˆ©ç”¨æ•°æ®å’Œç•Œé¢åˆ†ç¦»çš„æ€æƒ³ï¼Œå°†æ•°æ®ä»¥ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆçš„æ–¹å¼ä¿å­˜åœ¨ Button å†…éƒ¨ï¼Œè¿™æ ·ä¸€æ¥æŒ‰é’®è¢«ææ„ï¼Œæ•°æ®ä¹Ÿä¸ä¸€å®šå°±ä¼šè¢«ææ„ï¼Œåªæœ‰å½“æ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™æ‰è¢«ææ„ã€‚ æ‰€ä»¥å›åˆ°å‰é¢çš„å®è·µä¸€ï¼Œè¿™æ¬¡æˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸€ä¸ªç¼“å­˜å­˜ä¸‹åŸæœ¬çš„æ•°æ®ï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬å­˜å‚¨çš„ä¸æ˜¯ Button å¯¹è±¡ï¼Œè€Œæ˜¯ Button å¯¹è±¡ä¸­çš„æ™ºèƒ½æŒ‡é’ˆæ•°æ®ï¼Œæ‰€ä»¥åªè¦ç¼“å­˜è¿˜å­˜åœ¨ï¼Œé‚£ä¹ˆ Button é‡Œé¢çš„æ•°æ®å°±è¿˜æ˜¯å¯ä»¥å¤ç”¨çš„ï¼æ‰€ä»¥æ¯æ¬¡ new å‡ºæ–°çš„ Button å»æ˜¾ç¤ºçš„ä»£ä»·æ˜¯å¾ˆå°çš„ ï¼Œå› ä¸ºæŒ‡é’ˆçš„copyå‡ ä¹æ˜¯æ²¡æœ‰ä»£ä»·çš„ã€‚ã€‚ã€‚ è€Œä¸”å¦‚æœç”¨setå­˜å‚¨æŒ‡é’ˆçš„è¯ï¼Œç›´æ¥é€šè¿‡åˆ¤æ–­åœ°å€å°±èƒ½æ¸…æ¥šæ˜¯å¦æ˜¯ç›¸åŒçš„æ•°æ®äº†ï¼è¿™æ ·çš„å­˜å‚¨æ€§èƒ½ä¼šæ¯”ç›´æ¥å­˜ä¸‹æ•°æ®è¦é«˜å¾ˆå¤šã€‚ åƒè¿™æ ·æŠŠæ•°æ®å’Œç•Œé¢åˆ†ç¦»å¼€çš„æ€è·¯ï¼Œæˆ‘è§‰å¾—å°±å’Œwebç«¯çš„å‰åç«¯åˆ†ç¦»çš„æ€è·¯æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘æ„¿æ„ç§°ä¹‹ä¸ºæ¡Œé¢ç«¯çš„å‰åç«¯åˆ†ç¦»ã€‚ ","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/:3:2","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡"],"content":"é™„å½• æœ€åæˆ‘è´´ä¸Šæˆ‘å…·ä½“å®ç°çš„ä»£ç ï¼š èƒ½çœ‹æ‡‚çš„åº”è¯¥ä¼šæœ‰æ”¶è·ï¼Œçœ‹ä¸æ‡‚ä»¥åæ€»ä¼šçœ‹å¾—æ‡‚ğŸ˜ UserButton.h class UserButton :public QPushButton{ Q_OBJECT private: UserButton(QWidget*parent); public: //æŒ‰é’®çš„ç±»å‹ enum class Type{ Meg_Btn, User_Btn }; //å­˜å‚¨æŒ‰é’®æ•°æ®çš„ç±»å‹ struct ButtonInfo{ int _unread = 0; int _hide = 0; int _uid = 0; State _state = State::OffLine; Type _type = Type::Meg_Btn; QString _iconPath; QString _name; QString _text; static std::shared_ptr\u003cButtonInfo\u003e getDefaultButtonInfo(QString const\u0026name,QString const\u0026text,QString const\u0026iconPath); }; using shared_info = std::shared_ptr\u003cButtonInfo\u003e; //æ ¹æ®å¤–ç•Œæ•°æ®åˆ›å»ºæŒ‰é’® static UserButton* fromButtonInfo(shared_info const\u0026 info,QWidget* parent=nullptr); /** * æŒä¹…åŒ–æˆåŠŸè¿”å›å­˜å‚¨çš„è·¯å¾„ï¼Œå¦åˆ™è¿”å›ç©ºoptional * @param imageSrc * @param name * @return */ static std::optional\u003cQString\u003e StorageIcon(QByteArray const\u0026imageSrc,QString const\u0026 name); ~UserButton() override; protected: void paintEvent(QPaintEvent *) override; public: //ç”»å‡ºMessageæŒ‰é’® void PainMessageBtn(); //ç”»å‡ºUseræŒ‰é’® void PainUserBtn(); QRect adjustSize(QString\u0026dest); //ä¸€å¤§å †getterå’Œsetter QString getName(); void setName(QString name); int getNumUnread() const; void setNumUnread(int numUnread); State getMState() const; void setMState(State mState); const QString \u0026getMIconPath() const; void setMIconPath(const QString \u0026mIconPath); Type getMType() const; void setMType(Type mType); void setHideMsgStyle(bool isHide); int getMisHide(); int getUid() const; void setUid(int uid); void setContent(QString const\u0026 text); QString getContent(); shared_info getSharedInfo(); public slots: //ç”¨äºå¤–ç•Œå®æ—¶æ›´æ–°æ¶ˆæ¯æ¡†çš„æ˜¾ç¤ºå†…å®¹çš„æ§½å‡½æ•° void updateContent(QString const\u0026 text); private: //æ•°æ® shared_info m_info_; }; UserButton.cpp // // Created by Alone on 2022-4-18. // #include \"UserButton.h\"#include \u003cQFile\u003e#include \u003cQByteArray\u003e#include \u003cutility\u003e#include \u003cQDir\u003e#include \u003cconfig_path.h\u003e#include \u003ciostream\u003e#include \u003cQPainter\u003e //æ–¹ä¾¿è¿›è¡Œæµ‹è¯•çš„ä¿¡shared_infoå¿«é€Ÿåˆ›å»º UserButton::shared_info UserButton::ButtonInfo::getDefaultButtonInfo(const QString \u0026name, const QString \u0026text, const QString \u0026iconPath) { auto* src = new UserButton::ButtonInfo; src-\u003e_name = name; src-\u003e_text = text; src-\u003e_iconPath = iconPath; return std::shared_ptr\u003cUserButton::ButtonInfo\u003e(src); } //qssæ ·å¼ inline QString My_StyleSheet(QString const\u0026 icon_path){ return QString(R\"( QPushButton{ border:none; image: url(%1); image-position:left; min-width:120px; padding-top:7px; padding-left:10px; padding-bottom:7px; background:rgb(248, 249, 249); } QPushButton:hover{ border:none; background:rgb(242, 242, 242); } QPushButton:checked{ border:none; background:rgb(235, 235, 235); } )\").arg(icon_path); } UserButton::UserButton(QWidget *parent): QPushButton(parent) { setCheckable(true); setAutoExclusive(true); } UserButton::~UserButton() { } UserButton* UserButton::fromButtonInfo(shared_info const\u0026 info,QWidget* parent){ auto* btn = new UserButton(parent); btn-\u003em_info_ = info; btn-\u003esetStyleSheet(My_StyleSheet(btn-\u003egetMIconPath())); return btn; } //è°ƒæ•´å†…å®¹æ˜¾ç¤º QRect UserButton::adjustSize(QString \u0026dest){ assert(m_info_!=nullptr); // ä¸‰æ¡£è°ƒèŠ‚ int num_width = 0; int span = 13; if(m_info_-\u003e_unread\u003c10){ dest = QString::number(m_info_-\u003e_unread); num_width = span; }else if(m_info_-\u003e_unread\u003c99){ dest = QString::number(m_info_-\u003e_unread); num_width = span*2; }else{ dest.append(\"99+\"); num_width = span*3; } return {this-\u003ewidth()-10-num_width,this-\u003eheight()/2+5,num_width,13}; } //æ ¹æ®ä¸åŒçš„æŒ‰é’®è¿›è¡Œä¸åŒçš„ç»˜åˆ¶ void UserButton::paintEvent(QPaintEvent *e) { assert(m_info_!=nullptr); QPushButton::paintEvent(e); switch (m_info_-\u003e_type) { case Type::User_Btn: PainUserBtn(); break; case Type::Meg_Btn: PainMessageBtn(); break; } } //æŒä¹…åŒ–äºŒè¿›åˆ¶æ•°æ®åˆ°æœ¬åœ°(ä¸»è¦æ˜¯å›¾ç‰‡) std::optional\u003cQString\u003e UserButton::StorageIcon(QByteArray const\u0026 imageSrc,QString const\u0026 name) { QString base_path = QDir::homePath()+DirName_Base; QString user_icon_path = base_path +DirName_Icon; //å¦‚æœä¸¤çº§æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºæ–‡ä»¶å¤¹ QDir dir(base_path); if(!dir.exists()){ qDebug()\u003c\u003c\"base_dir not exists,being created\"; if(!dir.mkdir(base_path) ) return {}; } dir.setPath(user_icon_path); if(!dir.exists() ) { qDebug()\u003c\u003c\"icon_dir not exists","date":"2022-04-24","objectID":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/:4:0","tags":["å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"],"title":"å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","uri":"/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"æ¡ä»¶å˜é‡(C++11) ","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/:1:0","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"ä¸ºä»€ä¹ˆè¦å¼•å…¥æ¡ä»¶å˜é‡ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€ä¸ªç”±äº’æ–¥é‡åŠ é”æ„æˆçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼š // // Created by Alone on 2022-3-27. // #include \u003ciostream\u003e#include \u003cmutex\u003e#include \u003cdeque\u003e#include \u003cthread\u003estd::mutex mtx; std::deque\u003cint\u003e q; // producer void task1(){ int i = 0; while (1){ std::unique_lock\u003cstd::mutex\u003e lock(mtx); //std::this_thread::sleep_for(std::chrono::milliseconds(10)); q.push_back(i); if (i \u003c 9999999) { i++; }else { i = 0; } } } // consumer void task2(){ int data = 0; while (1) { std::unique_lock\u003cstd::mutex\u003e lock(mtx); if(!q.empty()){ data = q.front(); q.pop_front(); std::cout\u003c\u003c\"Get value from que task2:\"\u003c\u003cdata\u003c\u003cstd::endl; } } } void task3(){ int data = 0; while (1) { std::unique_lock\u003cstd::mutex\u003e lock(mtx); if (!q.empty()) { data = q.front(); q.pop_front(); std::cout\u003c\u003c\"Get value from que task3:\"\u003c\u003cdata\u003c\u003cstd::endl; } } } int main() { std::thread t1(task1); std::thread t2(task2); std::thread t3(task3); t1.join(); t2.join(); t3.join(); return 0; } ä»¥ä¸Šä»£ç ï¼Œç”±äºç›´æ¥çš„while(1)å¾ªç¯ä¼šå¯¼è‡´cpuèµ„æºå ç”¨çš„éå¸¸å‰å®³ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å»¶æ—¶sleep_foræ¥è¿›è¡Œä¼˜åŒ–ï¼Œä½†è¿™ä¸ªå»¶æ—¶çš„æ—¶é—´æˆ‘ä»¬å¹¶ä¸å¥½æ§åˆ¶ï¼ æˆ‘ä»¬è¿™ä¸ªç”Ÿäº§è€…ã€æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œæƒ³è¦å®ç°çš„æ„¿æ™¯å°±æ˜¯ï¼Œå½“ç”Ÿæˆè€…ç”Ÿäº§å‡ºèµ„æºåï¼Œæˆ‘ä»¬èƒ½å¤ŸåŠæ—¶çš„å”¤é†’æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œè®©å…¶è·å–èµ„æºã€‚ ä½†å¦‚æœæ˜¯ç®€å•çš„å¯¹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è¿›è¡ŒåŠ é”æ¥å®ç°è¿™ä¸€è¿‡ç¨‹ï¼Œå¯èƒ½ä¸­é—´ä¼šæœ‰å¾ˆå¤šè¿‡ç¨‹æ˜¯åœ¨æ¶ˆè´¹è€…æ‹¿åˆ°é”åï¼Œå‘ç°ç”Ÿäº§è€…å¹¶æ²¡æœ‰ç”Ÿäº§å‡ºèµ„æºï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å¾ˆæ˜æ˜¾å°±æ˜¯ä¸€ä¸ªæ— ç”¨åŠŸï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿè®©ç”Ÿäº§è€…ç”Ÿäº§å‡ºèµ„æºåï¼Œç«‹é©¬é€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹æ¥è¯»å–ï¼Œä¸”åœ¨æ²¡æœ‰èµ„æºçš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹èƒ½å¤Ÿé˜»å¡è®©å‡ºcpuæ—¶é—´ç‰‡å‘¢ï¼Ÿå®ç°è¿™ä¸ªéœ€æ±‚æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œè€Œæ¡ä»¶å˜é‡å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ï¼ ","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/:1:1","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"æ¡ä»¶å˜é‡çš„ç”¨æ³• ä»C++11èµ·ï¼Œæ ‡å‡†åº“å¼€å§‹å¼•å…¥æ¡ä»¶å˜é‡ã€‚ å®ƒçš„æˆå‘˜å‡½æ•°ä¹Ÿä¸å¤æ‚ï¼Œå°±ä¸‹é¢è¿™äº›ï¼š æ›´å¤šè¯¦ç»†æè¿° void wait (unique_lock\u003cmutex\u003e\u0026 lck); è¿™æ˜¯éæ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å‹ï¼Œæ¥æ”¶ä¸€ä¸ªunique_lockï¼Œè°ƒç”¨åï¼Œä¼šå¸®ä½ unlockï¼Œå¹¶ä¸”çº¿ç¨‹é™·å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°è¢«è°ƒç”¨notifyå”¤é†’ã€‚ æœ‰å…³notifyçš„æˆå‘˜å‡½æ•°ä¹Ÿå°±è¿™ä¸¤ä¸ªï¼šnotify_oneå’Œnotify_allã€‚ é¡¾åæ€ä¹‰ï¼Œéšæœºå”¤é†’ä¸€ä¸ªï¼Œå’Œå”¤é†’å…¨éƒ¨å¤„äºç­‰å¾…è¢«å”¤é†’çš„çº¿ç¨‹ã€‚ æˆ‘ä»¬å†åˆ©ç”¨æ–°å­¦çš„æ¡ä»¶å˜é‡æ”¹é€ ä¸‹å‰é¢çš„ä»£ç å¦‚ä¸‹ï¼š #include \u003ciostream\u003e#include \u003cmutex\u003e#include \u003cdeque\u003e#include \u003cthread\u003e#include \u003ccondition_variable\u003estd::mutex mtx; std::deque\u003cint\u003e q; std::condition_variable cv; // producer void task1(){ int i = 0; while (1){ std::unique_lock\u003cstd::mutex\u003e lock(mtx); q.push_back(i); cv.notify_one(); if (i \u003c 9999999) { i++; }else { i = 0; } } } // consumer void task2(){ int data = 0; while (1) { std::unique_lock\u003cstd::mutex\u003e lock(mtx); if(q.empty()) { cv.wait(lock); } data = q.front(); q.pop_front(); std::cout\u003c\u003c\"Get value from que task2:\"\u003c\u003cdata\u003c\u003cstd::endl; } } void task3(){ int data = 0; while (1) { std::unique_lock\u003cstd::mutex\u003e lock(mtx); if(q.empty()){ cv.wait(lock); } data = q.front(); q.pop_front(); std::cout\u003c\u003c\"Get value from que task3:\"\u003c\u003cdata\u003c\u003cstd::endl; } } int main() { std::thread t1(task1); std::thread t2(task2); std::thread t3(task3); t1.join(); t2.join(); t3.join(); return 0; } ","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/:1:2","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"æ¡ä»¶å˜é‡å¼•å‘çš„è™šå‡å”¤é†’ ä»€ä¹ˆæ˜¯è™šå‡å”¤é†’ï¼Ÿ å‰é¢æˆ‘ä»¬å†™çš„åˆ©ç”¨æ¡ä»¶å˜é‡å†™çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œæˆ‘å¯ä»¥è‚¯å®šçš„å‘Šè¯‰ä½ ï¼Œå®ƒæ˜¯æœ‰é—®é¢˜çš„ï¼Œè¿è¡Œèµ·æ¥è‚¯å®šæ˜¯ä¼šæŠ¥é”™çš„ï¼ è¿™æ˜¯å› ä¸ºè™šå‡å”¤é†’çš„åŸå› ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯è™šå‡å”¤é†’å‘¢ï¼Ÿ è™šå‡å”¤é†’çš„æ„æ€æ˜¯ï¼Œå½“ä¸€ä¸ªæ­£åœ¨ç­‰å¾…æ¡ä»¶å˜é‡çš„çº¿ç¨‹ç”±äºæ¡ä»¶å˜é‡è¢«è§¦å‘è€Œå”¤é†’æ—¶ï¼Œå´å‘ç°å®ƒç­‰å¾…çš„æ¡ä»¶ï¼ˆå…±äº«æ•°æ®ï¼‰æ²¡æœ‰æ»¡è¶³(ä¹Ÿå°±æ˜¯æ²¡æœ‰å…±äº«æ•°æ®)ã€‚ ç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼šæ˜æ˜å½“å‰çº¿ç¨‹å·²ç»è¢«å”¤é†’äº†ï¼Œå´å¾—ä¸åˆ°éœ€è¦çš„æ•°æ®ã€‚ è™šå‡å”¤é†’çš„äº§ç”Ÿåˆ†æï¼š é‚£ä¹ˆæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼Œä¸Šé¢çš„ä»£ç æ˜¯å¦‚ä½•å‘ç”Ÿçš„è™šå‡å”¤é†’ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹æƒ…å½¢ï¼štask1åˆšå¥½ç”Ÿæˆå‡ºä¸€ä¸ªæ•°æ®åˆ°qä¸­ï¼Œè€Œæ­¤æ—¶task2è¢«å”¤é†’ï¼ŒæŠŠæ•°æ®è¯»å‡ºååˆpopæ‰ï¼Œç„¶åè¿›å…¥mutexäº‰å¤ºï¼Œè¿›å…¥é˜»å¡æˆ–è€…æ˜¯å¾—åˆ°é”ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œåªè¦notify_oneçœŸçš„åªä¼šå”¤é†’ä¸€ä¸ªåœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆä¸€ä¸ªç”Ÿäº§è€…å¯¹åº”å¤šä¸ªæ¶ˆè´¹è€…çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¼šäº§ç”Ÿè™šå‡å”¤é†’çš„ã€‚åé¢æˆ‘å¤šç•ªæŸ¥æ‰¾èµ„æ–™ï¼Œè¯´æ˜¯åœ¨å¤šæ ¸å¤„ç†å™¨çš„ç¯å¢ƒä¸‹ï¼Œnotify_oneå¯èƒ½ä¼šå”¤é†’ä¸æ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿä¸€ä¸ªè™šå‡å”¤é†’ï¼Œè¿™å°±å¯¼è‡´æ˜æ˜qæ˜¯ç©ºçš„ï¼Œå´åœ¨è¢«è¯»å–ï¼ å¦‚ä½•é¿å…è™šå‡å”¤é†’ï¼Ÿ ä¸€ä¸ªç®€å•ç²—æš´çš„é¿å…è™šå‡å”¤é†’çš„æ³•å­å°±æ˜¯æŠŠifè¯­å¥æ”¹ä¸ºwhileè¯­å¥å°±è¡Œï¼Œè¿™ä¸ªäº§ç”Ÿçš„ç›´æ¥ä½œç”¨å°±æ˜¯ï¼Œæœ¬æ¥å”¤é†’åä¼šå› ä¸ºæ²¡æœ‰è¾¾åˆ°é¢„æœŸæƒ…å†µå´è¿˜å¾€ä¸‹æ‰§è¡Œï¼Œè€Œwhileçš„åŠ å…¥åˆ™ç¡®ä¿è¢«å”¤é†’çš„çº¿ç¨‹ä¸€å®šè¦æ˜¯æ»¡è¶³é¢„æœŸæƒ…å†µï¼ ä»£ç å¦‚ä¸‹ï¼š #include \u003ciostream\u003e#include \u003cmutex\u003e#include \u003cdeque\u003e#include \u003cthread\u003e#include \u003ccondition_variable\u003estd::mutex mtx; std::deque\u003cint\u003e q; std::condition_variable cv; // producer void task1(){ int i = 0; while (1){ std::unique_lock\u003cstd::mutex\u003e lock(mtx); q.push_back(i); cv.notify_one(); if (i \u003c 9999999) { i++; }else { i = 0; } } } // consumer void task2(){ int data = 0; while (1) { std::unique_lock\u003cstd::mutex\u003e lock(mtx); while (q.empty()) { cv.wait(lock); } data = q.front(); q.pop_front(); std::cout\u003c\u003c\"Get value from que task2:\"\u003c\u003cdata\u003c\u003cstd::endl; } } void task3(){ int data = 0; while (1) { std::unique_lock\u003cstd::mutex\u003e lock(mtx); while (q.empty()){ cv.wait(lock); } data = q.front(); q.pop_front(); std::cout\u003c\u003c\"Get value from que task3:\"\u003c\u003cdata\u003c\u003cstd::endl; } } int main() { std::thread t1(task1); std::thread t2(task2); std::thread t3(task3); t1.join(); t2.join(); t3.join(); return 0; } ","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/:1:3","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"ä¿¡å·é‡(C++20) å®šä¹‰äºå¤´æ–‡ä»¶ \u003csemaphore\u003e ä¿¡å·é‡æ˜¯C++20æ­£å¼åŠ å…¥æ ‡å‡†åº“çš„ï¼Œä¹‹å‰ä½¿ç”¨ä¿¡å·é‡éƒ½æ˜¯ç›´æ¥è°ƒç”¨Linuxæˆ–è€…windowçš„åº•å±‚APIï¼Œæ²¡æœ‰ç»Ÿä¸€çš„æ¥å£ã€‚ ä¿¡å·é‡åº”è¯¥ç®—æ˜¯æ“ä½œç³»ç»Ÿé‡Œé¢çš„ä¸€ä¸ªæ¦‚å¿µã€‚ å…·ä½“è€Œè¨€ï¼š ç»´åŸºç™¾ç§‘ï¼šä¿¡å·é‡ï¼ˆè‹±è¯­ï¼šSemaphoreï¼‰åˆç§°ä¸ºä¿¡å·é‡ã€æ——è¯­ï¼Œæ˜¯ä¸€ä¸ªåŒæ­¥å¯¹è±¡ï¼Œç”¨äºä¿æŒåœ¨0è‡³æŒ‡å®šæœ€å¤§å€¼ä¹‹é—´çš„ä¸€ä¸ªè®¡æ•°å€¼ã€‚å½“çº¿ç¨‹å®Œæˆä¸€æ¬¡å¯¹è¯¥semaphoreå¯¹è±¡çš„ç­‰å¾…ï¼ˆwaitï¼‰æ—¶ï¼Œè¯¥è®¡æ•°å€¼å‡ä¸€ï¼›å½“çº¿ç¨‹å®Œæˆä¸€æ¬¡å¯¹semaphoreå¯¹è±¡çš„é‡Šæ”¾ï¼ˆreleaseï¼‰æ—¶ï¼Œè®¡æ•°å€¼åŠ ä¸€ã€‚å½“è®¡æ•°å€¼ä¸º0ï¼Œåˆ™çº¿ç¨‹ç­‰å¾…è¯¥semaphoreå¯¹è±¡ä¸èƒ½æˆåŠŸç›´è‡³è¯¥semaphoreå¯¹è±¡å˜æˆsignaledçŠ¶æ€ã€‚semaphoreå¯¹è±¡çš„è®¡æ•°å€¼å¤§äº0ï¼Œä¸ºsignaledçŠ¶æ€ï¼›è®¡æ•°å€¼ç­‰äº0ï¼Œä¸ºnonsignaledçŠ¶æ€. å…¶ä¸­ï¼Œä¿¡å·é‡åˆåˆ†ä¸ºä¸¤ç§ï¼šäºŒè¿›åˆ¶ä¿¡å·é‡å’Œè®¡æ•°ä¿¡å·é‡ã€‚ å¯¹åº”åˆ°C++20é‡Œé¢çš„semaphoreå°±æ˜¯ï¼š std::binary_semaphore å’Œ counting_semaphore ","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/:2:0","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"std::binary_semaphoreä½¿ç”¨ å…¶å®binary_semaphoreå°±æ˜¯counting_sesmaphoreçš„ä¸€ä¸ªç‰¹åŒ–è€Œå·²ã€‚ å®šä¹‰å¦‚ä¸‹ï¼š using binary_semaphore = std::counting_semaphore\u003c1\u003e; è®²ä¿¡å·é‡ä½¿ç”¨å‰ï¼Œæˆ‘ä»¬éœ€è¦è®²è®²å®ƒçš„åŸºæœ¬è¿ç”¨åœºæ™¯ï¼Œå®ƒä¸€èˆ¬ä¸ä½¿ç”¨åœ¨å­˜åœ¨èµ„æºç«äº‰çš„å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä¹‹å‰çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œç”¨ä¿¡å·é‡æ˜¯éå¸¸ä¸é€‚åˆçš„ã€‚ æ¯”è¾ƒé€‚åˆçš„æƒ…å†µæ˜¯ï¼šæŸäº›çº¿ç¨‹éœ€è¦åœ¨æ»¡è¶³æŸä¸ªæƒ…å†µåè¢«é€šçŸ¥æ‰§è¡Œï¼Œæœ‰ç‚¹ç±»ä¼¼äºQtçš„ä¿¡å·æ§½æœºåˆ¶ã€‚ ä»¥ä¸‹æœ‰ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼š ä»¥ä¸‹ä»£ç å·²ç»è¿˜æœ‰å……åˆ†çš„æ³¨é‡Šäº†ï¼Œå…·ä½“è€Œè¨€å°±æ˜¯å¯ä»¥é€šè¿‡releaseæ–¹æ³•è®©è®¡æ•°å™¨+1ï¼Œä»è€Œä½¿å¾—ä¿¡å·é‡çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œç”±äºbinary_semaphoreåªæœ‰0å’Œ1ä¸¤ä¸ªçŠ¶æ€ï¼Œå½“çŠ¶æ€ä¸º1çš„æ—¶å€™ï¼Œä¼šä½¿å¾—è¢«é˜»å¡çš„çº¿ç¨‹æ¿€æ´»ï¼Œè€Œè¢«æ¿€æ´»åä¼šç«‹é©¬æŠŠçŠ¶æ€-1ä¸º0ï¼Œä½¿å¾—å…¶ä»–çº¿ç¨‹è¿˜æ˜¯è¢«é˜»å¡çŠ¶æ€ï¼Œæ‰€ä»¥binaryçš„ä¿¡å·é‡åªèƒ½é€šçŸ¥ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚ ä»¥ä¸‹ä»£ç å®šä¹‰äº†ä¸¤ä¸ªä¿¡å·é‡ï¼Œä¸€ä¸ªæ˜¯ä»mainçº¿ç¨‹ä¼ é€’åˆ°å­çº¿ç¨‹çš„ä¿¡å·é‡ï¼Œä¸€ä¸ªæ˜¯ä»å­çº¿ç¨‹ä¼ é€’åˆ°mainçº¿ç¨‹çš„ä¿¡å·é‡ã€‚ #include \u003ciostream\u003e#include \u003cthread\u003e#include \u003cchrono\u003e#include \u003csemaphore\u003e // global binary semaphore instances // object counts are set to zero // objects are in non-signaled state std::binary_semaphore smphSignalMainToThread{0}, smphSignalThreadToMain{0}; void ThreadProc() { // wait for a signal from the main proc // by attempting to decrement the semaphore smphSignalMainToThread.acquire(); // this call blocks until the semaphore's count // is increased from the main proc std::cout \u003c\u003c \"[thread] Got the signal\\n\"; // response message // wait for 3 seconds to imitate some work // being done by the thread using namespace std::literals; std::this_thread::sleep_for(3s); std::cout \u003c\u003c \"[thread] Send the signal\\n\"; // message // signal the main proc back smphSignalThreadToMain.release(); } int main() { // create some worker thread std::thread thrWorker(ThreadProc); std::cout \u003c\u003c \"[main] Send the signal\\n\"; // message // signal the worker thread to start working // by increasing the semaphore's count smphSignalMainToThread.release(); // wait until the worker thread is done doing the work // by attempting to decrement the semaphore's count smphSignalThreadToMain.acquire(); std::cout \u003c\u003c \"[main] Got the signal\\n\"; // response message thrWorker.join(); } ","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/:2:1","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"counting_semaphoreä½¿ç”¨ åŸç†ä¸binaryç‰ˆæœ¬å®Œå…¨ä¸€è‡´åªæ˜¯çŠ¶æ€ä¸åªæ˜¯0å’Œ1ï¼Œå®ƒèƒ½å¤Ÿè‡ªå®šä¹‰ä¸Šé™çš„çŠ¶æ€ï¼Œå¦‚ä¸‹ä»£ç ï¼Œæˆ‘å°†ä¸Šé™å®šä¸ºäº†3ï¼Œé‚£ä¹ˆreleaseè°ƒç”¨çš„æ—¶å€™å¯ä»¥è®¾ç½®æœ€å¤š+3ï¼Œé‚£ä¹ˆå®ƒå°±èƒ½æˆåŠŸå”¤é†’ä¸‰ä¸ªçº¿ç¨‹. #include \u003ciostream\u003e#include \u003cthread\u003e#include \u003cchrono\u003e#include \u003csemaphore\u003e // global binary semaphore instances // object counts are set to zero // objects are in non-signaled state std::counting_semaphore\u003c3\u003e smphSignalMainToThread{0}, smphSignalThreadToMain{0}; void ThreadProc2() { // wait for a signal from the main proc // by attempting to decrement the semaphore smphSignalMainToThread.acquire(); // this call blocks until the semaphore's count // is increased from the main proc std::cout \u003c\u003c \"[thread] Got the signal2\\n\"; // response message // wait for 3 seconds to imitate some work // being done by the thread using namespace std::literals; std::this_thread::sleep_for(3s); std::cout \u003c\u003c \"[thread] Send the signal2\\n\"; // message // signal the main proc back smphSignalThreadToMain.release(); } void ThreadProc1() { // wait for a signal from the main proc // by attempting to decrement the semaphore smphSignalMainToThread.acquire(); // this call blocks until the semaphore's count // is increased from the main proc std::cout \u003c\u003c \"[thread] Got the signal1\\n\"; // response message // wait for 3 seconds to imitate some work // being done by the thread using namespace std::literals; std::this_thread::sleep_for(3s); std::cout \u003c\u003c \"[thread] Send the signal1\\n\"; // message // signal the main proc back smphSignalThreadToMain.release(); } void ThreadProc3() { // wait for a signal from the main proc // by attempting to decrement the semaphore smphSignalMainToThread.acquire(); // this call blocks until the semaphore's count // is increased from the main proc std::cout \u003c\u003c \"[thread] Got the signal3\\n\"; // response message // wait for 3 seconds to imitate some work // being done by the thread using namespace std::literals; std::this_thread::sleep_for(3s); std::cout \u003c\u003c \"[thread] Send the signal3\\n\"; // message // signal the main proc back smphSignalThreadToMain.release(); } int main() { // create some worker thread std::thread thrWorker1(ThreadProc1); std::thread thrWorker2(ThreadProc2); std::cout \u003c\u003c \"[main] Send the signal\\n\"; // message // signal the worker thread to start working // by increasing the semaphore's count smphSignalMainToThread.release(3); // wait until the worker thread is done doing the work // by attempting to decrement the semaphore's count smphSignalThreadToMain.acquire(); std::cout \u003c\u003c \"[main] Got the signal\\n\"; // response message thrWorker1.join(); thrWorker2.join(); } ","date":"2022-03-27","objectID":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/:2:2","tags":["1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"],"title":"1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)","uri":"/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"åˆ©ç”¨string_viewä¼˜åŒ–C++çš„string","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"ä¸€ã€èƒŒæ™¯ åœ¨æ—¥å¸¸C/C++ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸è¿›è¡Œæ•°æ®çš„ä¼ é€’æ“ä½œï¼Œæ¯”å¦‚ï¼Œå°†æ•°æ®ä¼ ç»™å‡½æ•°ã€‚å½“æ•°æ®å ç”¨çš„å†…å­˜è¾ƒå¤§æ—¶ï¼Œå‡å°‘æ•°æ®çš„æ‹·è´å¯ä»¥æœ‰æ•ˆæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚åœ¨Cä¸­æŒ‡é’ˆæ˜¯å®Œæˆè¿™ä¸€ç›®çš„çš„æ ‡å‡†æ•°æ®ç»“æ„ï¼Œè€Œ**C++å¼•å…¥äº†å®‰å…¨æ€§æ›´é«˜çš„å¼•ç”¨ç±»å‹ã€‚æ‰€ä»¥åœ¨C++ä¸­è‹¥ä¼ é€’çš„æ•°æ®ä»…ä»…åªè¯»ï¼Œconst string\u0026æˆäº†C++**çš„å¤©ç„¶çš„æ–¹å¼ã€‚ä½†è¿™å¹¶éå®Œç¾ï¼Œä»å®è·µæ¥çœ‹ï¼Œå®ƒè‡³å°‘æœ‰ä»¥ä¸‹å‡ æ–¹é¢é—®é¢˜ï¼š å­—ç¬¦ä¸²å­—é¢å€¼ã€å­—ç¬¦æ•°ç»„ã€å­—ç¬¦ä¸²æŒ‡é’ˆçš„ä¼ é€’ä»è¦æ•°æ®æ‹·è´ è¿™ä¸‰ç±»ä½çº§æ•°æ®ç±»å‹ä¸stringç±»å‹ä¸åŒï¼Œä¼ å…¥æ—¶ï¼Œç¼–è¯‘å™¨éœ€è¦åšéšå¼è½¬æ¢ï¼Œå³éœ€è¦æ‹·è´è¿™äº›æ•°æ®ç”Ÿæˆstringä¸´æ—¶å¯¹è±¡ã€‚const string\u0026æŒ‡å‘çš„å®é™…ä¸Šæ˜¯è¿™ä¸ªä¸´æ—¶å¯¹è±¡ã€‚é€šå¸¸å­—ç¬¦ä¸²å­—é¢å€¼è¾ƒå°ï¼Œæ€§èƒ½æŸè€—å¯ä»¥å¿½ç•¥ä¸è®¡ï¼›ä½†å­—ç¬¦ä¸²æŒ‡é’ˆå’Œå­—ç¬¦æ•°ç»„æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼ˆæ¯”å¦‚è¯»å–æ–‡ä»¶çš„å†…å®¹ï¼‰ï¼Œæ­¤æ—¶ä¼šå¼•èµ·é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œæ•°æ®æ‹·è´ï¼Œä¼šä¸¥é‡å½±å“ç¨‹åºçš„æ€§èƒ½ã€‚ substr **O(n)**å¤æ‚åº¦ è¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«å¸¸ç”¨çš„å‡½æ•°ï¼Œå¥½åœ¨std::stringæä¾›äº†è¿™ä¸ªå‡½æ•°ï¼Œç¾ä¸­ä¸è¶³çš„æ˜¯å…¶æ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°ç”Ÿæˆçš„å­ä¸²ï¼Œå¾ˆå®¹æ˜“å¼•èµ·æ€§èƒ½çƒ­ç‚¹ã€‚å®é™…ä¸Šæˆ‘ä»¬æœ¬æ„å¹¶ä¸æ˜¯è¦æ”¹å˜åŸå­—ç¬¦ä¸²ï¼Œä¸ºä»€ä¹ˆä¸åœ¨åŸå­—ç¬¦ä¸²åŸºç¡€ä¸Šè¿”å›å‘¢ï¼Ÿ åœ¨C++17ä¸­å¼•å…¥äº†string_viewï¼Œèƒ½å¾ˆå¥½çš„è§£å†³ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚ ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:1:0","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"äºŒã€std::string_view ä»åå­—å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥ç±»æ¯”æ•°æ®åº“è§†å›¾ï¼Œviewè¡¨ç¤ºè¯¥ç±»å‹ä¸ä¼šä¸ºæ•°æ®åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œè€Œä¸”è¯¥æ•°æ®ç±»å‹åªèƒ½ç”¨æ¥è¯»ã€‚è¯¥æ•°æ®ç±»å‹å¯é€šè¿‡{æ•°æ®çš„èµ·å§‹æŒ‡é’ˆï¼Œæ•°æ®çš„é•¿åº¦}ä¸¤ä¸ªå…ƒç´ è¡¨ç¤ºï¼Œå®é™…ä¸Šè¯¥æ•°æ®ç±»å‹çš„å®ä¾‹ä¸ä¼šå…·ä½“å­˜å‚¨åŸæ•°æ®ï¼Œä»…ä»…å­˜å‚¨æŒ‡å‘çš„æ•°æ®çš„èµ·å§‹æŒ‡é’ˆå’Œé•¿åº¦ï¼Œæ‰€ä»¥è¿™ä¸ªå¼€é”€æ˜¯éå¸¸å°çš„ã€‚ è¦ä½¿ç”¨å­—ç¬¦ä¸²è§†å›¾ï¼Œéœ€è¦å¼•å…¥\u003cstring_view\u003eï¼Œä¸‹é¢ä»‹ç»è¯¥æ•°æ®ç±»å‹ä¸»è¦çš„APIã€‚è¿™äº›APIåŸºæœ¬ä¸Šéƒ½æœ‰constexprä¿®é¥°ï¼Œæ‰€ä»¥èƒ½åœ¨ç¼–è¯‘æ—¶å¾ˆå¥½åœ°å¤„ç†å­—ç¬¦ä¸²å­—é¢å€¼ï¼Œä»è€Œæé«˜ç¨‹åºæ•ˆç‡ã€‚ ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:2:0","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"2.1 æ„é€ å‡½æ•° constexpr string_view() noexcept; constexpr string_view(const string_view\u0026 other) noexcept = default; constexpr string_view(const CharT* s, size_type count); constexpr string_view(const CharT* s); å”¯ä¸€éœ€è¦è¯´æ˜çš„æ˜¯ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬ä»£ç string_view foo(string(\"abc\"))å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œä½†ä¸ºä»€ä¹ˆæ²¡æœ‰å¯¹åº”çš„æ„é€ å‡½æ•°ï¼Ÿ å®é™…ä¸Šè¿™æ˜¯å› ä¸ºstringç±»é‡è½½äº†stringåˆ°string_viewçš„è½¬æ¢æ“ä½œç¬¦ï¼š operator std::basic_string_view\u003cCharT, Traits\u003e() const noexcept; ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:2:1","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"2.2 è‡ªå®šä¹‰å­—é¢é‡ è‡ªå®šä¹‰å­—é¢é‡ä¹Ÿæ˜¯C++17æ–°å¢çš„ç‰¹æ€§ï¼Œæé«˜äº†å¸¸é‡çš„æ˜“è¯»ã€‚ ä¸‹é¢çš„ä»£ç å–å€¼cppreferenceï¼Œèƒ½å¾ˆå¥½åœ°è¯´æ˜è‡ªå®šä¹‰å­—é¢å€¼å’Œå­—ç¬¦ä¸²è¯­ä¹‰çš„å·®å¼‚ã€‚ #include \u003cstring_view\u003e#include \u003ciostream\u003e int main() { using namespace std::literals; std::string_view s1 = \"abc\\0\\0def\"; std::string_view s2 = \"abc\\0\\0def\"sv; std::cout \u003c\u003c \"s1: \" \u003c\u003c s1.size() \u003c\u003c \" \\\"\" \u003c\u003c s1 \u003c\u003c \"\\\"\\n\"; std::cout \u003c\u003c \"s2: \" \u003c\u003c s2.size() \u003c\u003c \" \\\"\" \u003c\u003c s2 \u003c\u003c \"\\\"\\n\"; } è¾“å‡ºï¼š s1: 3 \"abc\" s2: 8 \"abc^@^@def\" ä»¥ä¸Šä¾‹å­èƒ½å¾ˆå¥½çœ‹æ¸…äºŒè€…çš„è¯­ä¹‰åŒºåˆ«ï¼Œ\\0å¯¹äºå­—ç¬¦ä¸²è€Œè¨€ï¼Œæœ‰å…¶ç‰¹æ®Šçš„æ„ä¹‰ï¼Œå³è¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“æŸï¼Œå­—ç¬¦ä¸²è§†å›¾æ ¹æœ¬ä¸careï¼Œå®ƒå…³å¿ƒå®é™…çš„å­—ç¬¦ä¸ªæ•°ã€‚ ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:2:2","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"2.3 æˆå‘˜å‡½æ•° ä¸‹é¢åˆ—ä¸¾å…¶æˆå‘˜å‡½æ•°ï¼šå¿½ç•¥äº†å‡½æ•°çš„è¿”å›å€¼ï¼Œè‹¥å‡½æ•°æœ‰é‡è½½ï¼Œæ‹¬å·å†…ç”¨...å¡«å……ã€‚è¿™æ ·å¯ä»¥å¯¹å…¶æœ‰ä¸ªæ•´ä½“è½®å»“ã€‚ // è¿­ä»£å™¨ begin() end() cbegin() cend() rbegin() rend() crbegin() crend() // å®¹é‡ size() length() max_size() empty() // å…ƒç´ è®¿é—® operator[](size_type pos) at(size_type pos) front() back() data() // ä¿®æ”¹å™¨ remove_prefix(size_type n) remove_suffix(size_type n) swap(basic_string_view\u0026 s) copy(charT* s, size_type n, size_type pos = 0) string_view substr(size_type pos = 0, size_type n = npos) compare(...) starts_with(...) ends_with(...) find(...) rfind(...) find_first_of(...) find_last_of(...) find_first_not_of(...) find_last_not_of(...) ä»å‡½æ•°åˆ—è¡¨æ¥çœ‹ï¼Œå‡ ä¹è·Ÿstringçš„åªè¯»å‡½æ•°ä¸€è‡´ï¼Œä½¿ç”¨string_viewçš„æ–¹å¼è·ŸstringåŸºæœ¬ä¸€è‡´ã€‚æœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦ç‰¹åˆ«è¯´æ˜ï¼š string_viewçš„substrå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œè§£å†³äº†èƒŒæ™¯éƒ¨åˆ†çš„ç¬¬äºŒä¸ªé—®é¢˜ã€‚ ä¿®æ”¹å™¨ä¸­çš„ä¸‰ä¸ªå‡½æ•°ä»…ä¼šä¿®æ”¹string_viewçš„æ•°æ®æŒ‡å‘ï¼Œä¸ä¼šä¿®æ”¹æŒ‡å‘çš„æ•°æ®ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå‡½æ•°ååŸºæœ¬æ˜¯è‡ªè§£é‡Šçš„ã€‚ ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:2:3","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"2.4 ç¤ºä¾‹ Haskellä¸­æœ‰ä¸€ä¸ªå¸¸ç”¨å‡½æ•°linesï¼Œä¼šå°†å­—ç¬¦ä¸²åˆ‡å‰²æˆè¡Œå­˜å‚¨åœ¨å®¹å™¨é‡Œã€‚ä¸‹é¢æˆ‘ä»¬ç”¨**C++**æ¥å®ç° string-ç‰ˆæœ¬ #include \u003cstring\u003e#include \u003ciostream\u003e#include \u003cvector\u003e#include \u003calgorithm\u003e#include \u003csstream\u003e void lines(std::vector\u003cstd::string\u003e \u0026lines, const std::string \u0026str) { auto sep{\"\\n\"}; size_t start{str.find_first_not_of(sep)}; size_t end{}; while (start != std::string::npos) { end = str.find_first_of(sep, start + 1); if (end == std::string::npos) end = str.length(); lines.push_back(str.substr(start, end - start)); start = str.find_first_not_of(sep, end + 1); } } ä¸Šé¢æˆ‘ä»¬ç”¨const std::string \u0026ç±»å‹æ¥æ”¶å¾…åˆ†å‰²çš„å­—ç¬¦ä¸²ï¼Œè‹¥æˆ‘ä»¬ä¼ å…¥æŒ‡å‘è¾ƒå¤§å†…å­˜çš„å­—ç¬¦æŒ‡é’ˆæ—¶ï¼Œä¼šå½±å“ç¨‹åºæ•ˆç‡ã€‚ ä½¿ç”¨std::string_viewå¯ä»¥é¿å…è¿™ç§æƒ…å†µï¼š string_view-ç‰ˆæœ¬ #include \u003cstring\u003e#include \u003ciostream\u003e#include \u003cvector\u003e#include \u003calgorithm\u003e#include \u003csstream\u003e#include \u003cstring_view\u003e void lines(std::vector\u003cstd::string\u003e \u0026lines, std::string_view str) { auto sep{\"\\n\"}; size_t start{str.find_first_not_of(sep)}; size_t end{}; while (start != std::string_view::npos) { end = str.find_first_of(sep, start + 1); if (end == std::string_view::npos) end = str.length(); lines.push_back(std::string{str.substr(start, end - start)}); start = str.find_first_not_of(sep, end + 1); } } ä¸Šé¢çš„ä¾‹å­ä»…ä»…æ˜¯æŠŠstringç±»å‹ä¿®æ”¹æˆäº†string_viewå°±è·å¾—äº†æ€§èƒ½ä¸Šçš„æå‡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†ç¨‹åºä¸­çš„stringæ¢æˆstring_viewçš„è¿‡ç¨‹æ˜¯æ¯”è¾ƒç›´è§‚çš„ï¼Œè¿™å¾—ç›Šäºä¸¤è€…çš„æˆå‘˜å‡½æ•°çš„ç›¸ä¼¼æ€§ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„â€œç¿»è¯‘â€è¿‡ç¨‹éƒ½æ˜¯è¿™æ ·çš„ï¼Œæ¯”å¦‚ï¼š void lines(std::vector\u003cstd::string\u003e \u0026lines, const std::string\u0026 str) { std::stringstream ss(str); std::string line; while (std::getline(ss, line, '\\n')) { lines.push_back(line); } } è¿™ä¸ªç‰ˆæœ¬ä½¿ç”¨stringstreamå®ç°lineså‡½æ•°ã€‚ç”±äºstringstreamæ²¡æœ‰ç›¸åº”çš„æ„é€ å‡½æ•°æ¥æ”¶string_viewç±»å‹å‚æ•°ï¼Œæ‰€ä»¥æ²¡æ³•é‡‡ç”¨ç›´æ¥æ›¿æ¢çš„æ–¹å¼ï¼Œæ‰€ä»¥ç¿»è¯‘è¿‡ç¨‹è¦å¤æ‚ç‚¹ã€‚ ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:2:4","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"ä¸‰ã€ä½¿ç”¨é™·é˜± ä¸–ä¸Šæ²¡æœ‰å…è´¹çš„åˆé¤ã€‚ä¸æ°å½“çš„ä½¿ç”¨string_viewä¹Ÿä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„é—®é¢˜ã€‚ string_viewèŒƒå›´å†…çš„å­—ç¬¦å¯èƒ½ä¸åŒ…å«\\0 å¦‚ï¼š #include \u003ciostream\u003e#include \u003cstring_view\u003e int main() { std::string_view str{\"abc\", 1}; std::cout \u003c\u003c str.data() \u003c\u003c std::endl; return 0; } æœ¬æ¥æ˜¯è¦æ‰“å°aï¼Œä½†è¾“å‡ºäº†abcã€‚è¿™æ˜¯å› ä¸ºå­—ç¬¦ä¸²ç›¸å…³çš„å‡½æ•°éƒ½æœ‰ä¸€æ¡å…¼å®¹Cçš„çº¦å®šï¼š\\0ä»£è¡¨å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚ä¸Šé¢çš„ç¨‹åºæ‰“å°ä»å¼€å§‹åˆ°å­—ç¬¦ä¸²ç»“æŸçš„æ‰€æœ‰å­—ç¬¦ï¼Œè™½ç„¶stråŒ…å«çš„æœ‰æ•ˆå­—ç¬¦æ˜¯aï¼Œä½†coutè®¤\\0ã€‚å¥½åœ¨è¿™å—å†…å­˜ç©ºé—´æœ‰åˆæ³•çš„å­—ç¬¦ä¸²ç»“å°¾ç¬¦ï¼Œå¦‚æœstræŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ²¡æœ‰\\0çš„å­—ç¬¦æ•°ç»„ï¼Œç¨‹åºå¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°å†…å­˜é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å°†string_viewç±»å‹çš„æ•°æ®ä¼ å…¥æ¥æ”¶å­—ç¬¦ä¸²çš„å‡½æ•°æ—¶è¦éå¸¸å°å¿ƒã€‚ ä»[const] char*æ„é€ string_viewå¯¹è±¡æ—¶é—´å¤æ‚åº¦O(n) è¿™æ˜¯å› ä¸ºè·å–å­—ç¬¦ä¸²çš„é•¿åº¦éœ€è¦ä»å¤´å¼€å§‹éå†ã€‚å¦‚æœå¯¹[const] char*ç±»å‹ä»…ä»…æ˜¯ä¸€äº›O(1)çš„æ“ä½œï¼Œç›¸æ¯”ç›´æ¥ä½¿ç”¨[const] char*ï¼Œè½¬ä¸ºstring_viewæ˜¯æ²¡æœ‰æ€§èƒ½ä¼˜åŠ¿çš„ã€‚åªä¸è¿‡æ˜¯ç›¸æ¯”const string\u0026ï¼Œstring_viewå°‘äº†æ‹·è´çš„æŸè€—ã€‚å®é™…ä¸Šæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨[const] char*æ¥æ”¶æ‰€æœ‰çš„å­—ç¬¦ä¸²ï¼Œä½†è¿™ä¸ªç±»å‹å¤ªåº•å±‚äº†ï¼Œä¸ä¾¿ä½¿ç”¨ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è½¬ä¸ºstring_viewå¯èƒ½ä»…ä»…æ˜¯æƒ³ç”¨å…¶ä¸­çš„ä¸€äº›å‡½æ•°ï¼Œæ¯”å¦‚substrã€‚ string_viewæŒ‡å‘çš„å†…å®¹çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½æ¯”å…¶æœ¬èº«çŸ­ string_viewå¹¶ä¸æ‹¥æœ‰å…¶æŒ‡å‘å†…å®¹çš„æ‰€æœ‰æƒï¼Œç”¨Rustçš„æœ¯è¯­æ¥è¯´ï¼Œå®ƒä»…ä»…æ˜¯æš‚æ—¶borrowï¼ˆå€Ÿç”¨ï¼‰äº†å®ƒã€‚å¦‚æœæ‹¥æœ‰è€…æå‰é‡Šæ”¾äº†ï¼Œä½ è¿˜åœ¨ä½¿ç”¨è¿™äº›å†…å®¹ï¼Œé‚£ä¼šå‡ºç°å†…å­˜é—®é¢˜ï¼Œè¿™è·Ÿæ‚¬æŒ‚æŒ‡é’ˆ(dangling pointer)æˆ–æ‚¬æŒ‚å¼•ç”¨ï¼ˆdangling referencesï¼‰å¾ˆåƒã€‚Rustä¸“é—¨æœ‰å¥—æœºåˆ¶åœ¨ç¼–è¯‘æ—¶åˆ†æå˜é‡çš„ç”Ÿå‘½æœŸï¼Œä¿è¯borrowçš„èµ„æºåœ¨ä½¿ç”¨æœŸé—´ä¸ä¼šè¢«é‡Šæ”¾ï¼Œä½†C++æ²¡æœ‰è¿™æ ·çš„æ£€æŸ¥ï¼Œéœ€è¦äººå·¥ä¿è¯ã€‚ä¸‹é¢åˆ—å‡ºä¸€äº›å…¸å‹çš„é—®é¢˜æƒ…å†µï¼š std::string_view sv = std::string{\"hello world\"}; string_view foo() { std::string s{\"hello world\"}; return string_view{s}; } auto id(std::string_view sv) { return sv; } int main() { std::string s = \"hello\"; auto sv = id(s + \" world\"); } ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:3:0","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"å››ã€æµ‹è¯•å…·ä½“æ€§èƒ½ å…‰è¯´ä¸ç”¨å‡æŠŠå¼ï¼Œç›´æ¥å°±åœ°å†™ä¸ªæµ‹è¯•ï¼š #include \u003cstring\u003e#include \u003cstring_view\u003e#include \"../BenchMark/Timer.h\"#include \u003cvector\u003eusing std::vector; using std::string; using std::string_view; //TODO string_view å’Œ string const\u0026å¯¹æ¯”ã€‚ // å‘ç°string_viewåœ¨substr()æ–¹æ³•å’Œvectorçš„push_backè¿‡ç¨‹ä¸­æœ‰å·¨å¤§ä¼˜åŠ¿ï¼ std::vector\u003cstring\u003e testStringView(string_view s){ s.substr(0); vector\u003cstring \u003eret; ret.emplace_back(s); return ret; } std::vector\u003cstring\u003e testString(string const\u0026s){ s.substr(0); vector\u003cstring \u003eret; ret.emplace_back(s); return ret; } int main() { //TEST string const\u0026 { Timer t; for (int i = 0; i \u003c 1000000; ++i) { testString(string (100,'0')); } } //TEST string_view { Timer t; for (int i = 0; i \u003c 1000000; ++i) { testStringView(string(100,'0')); } } return 0; } æ€§èƒ½å·®è·ï¼š é™¤äº†ä»¥ä¸Šä»£ç ï¼Œæˆ‘è¿˜ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œå‘ç°åœ¨ç”¨åˆ°substræˆå‘˜å‡½æ•°ä»¥åŠè¿›è¡Œå„ç§æ‹·è´çš„æ—¶å€™ï¼Œstring_viewä¼šæ¯”string const\u0026å¿«å¾ˆå¤šã€‚å…¶ä½™æƒ…å†µå·®ä¸å¤ªå¤šã€‚ ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:4:0","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"äº”ã€æ€»ç»“ string_viewè§£å†³äº†ä¸€äº›ç—›ç‚¹ï¼Œä½†åŒæ—¶ä¹Ÿå¼•å…¥äº†æŒ‡é’ˆå’Œå¼•ç”¨çš„ä¸€äº›è€é—®é¢˜ã€‚C++æ ‡å‡†å¹¶æ²¡æœ‰å¯¹è¿™ä¸ªç±»å‹åšå¤ªå¤šçš„çº¦æŸï¼Œè¿™å¼•æ¥çš„é—®é¢˜æ˜¯æˆ‘ä»¬å¯ä»¥åƒå¹³å¸¸çš„å˜é‡ä¸€æ ·ä»¥å¤šç§æ–¹å¼ä½¿ç”¨å®ƒï¼Œå¦‚ï¼Œå¯ä»¥ä¼ å‚ï¼Œå¯ä»¥ä½œä¸ºå‡½æ•°è¿”å›å€¼ï¼Œå¯ä»¥åšæ™®é€šå˜é‡ï¼Œç”šè‡³æˆ‘ä»¬å¯ä»¥æ”¾åˆ°å®¹å™¨é‡Œã€‚éšç€ä½¿ç”¨åœºæ™¯çš„å¤æ‚ï¼Œäººå·¥æ˜¯å¾ˆéš¾ä¿è¯æŒ‡å‘çš„å†…å®¹çš„ç”Ÿå‘½å‘¨æœŸè¶³å¤Ÿé•¿ã€‚æ‰€ä»¥ï¼Œæ¨èçš„ä½¿ç”¨æ–¹å¼ï¼šä»…ä»…ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œå› ä¸ºå¦‚æœè¯¥å‚æ•°ä»…ä»…åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è€Œä¸ä¼ é€’å‡ºå»ï¼Œè¿™æ ·ä½¿ç”¨æ˜¯å®‰å…¨çš„ã€‚ ","date":"2022-03-24","objectID":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/:5:0","tags":["åˆ©ç”¨string_viewä¼˜åŒ–string"],"title":"åˆ©ç”¨string_viewä¼˜åŒ–string","uri":"/posts/%E5%88%A9%E7%94%A8string_view%E4%BC%98%E5%8C%96%E7%8E%B0%E4%BB%A3c++%E8%AF%AD%E6%B3%95/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","date":"2022-03-19","objectID":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/","tags":["é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨"],"title":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","uri":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"ä»€ä¹ˆæ˜¯è·³è¡¨ï¼Ÿ æƒ³è¦å¼„æ¸…è¿™ä¸ªï¼Œå¯ä»¥æŸ¥çœ‹ä¸€ç¯‡å¤§ä½¬çš„æ–‡ç« ï¼ŒæŠŠè·³è¡¨åˆ†æçš„éå¸¸é€å½»ï¼Œå¹¶ä¸”å‰–æäº†Redisæºç ï¼Œæˆ‘è¿™é‡Œåªè®²è§£ä¸å¸¦spançš„Redisæºç C++å¤ç°ã€‚ï¼ˆåç»­ä¼šæœ‰å¸¦spançš„å®Œç¾Redisæºç C++å¤åˆ»ï¼‰ å¤§ä½¬çš„è®²è§£ å¦‚æœæƒ³æŸ¥çœ‹Redisæºç çš„å„ä½ï¼Œå¯ä»¥ç‚¹è¿›è¿™ä¸ªé“¾æ¥https://github1s.com/redis/redis/blob/unstable/src/t_zset.c ","date":"2022-03-19","objectID":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/:1:0","tags":["é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨"],"title":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","uri":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ­£å¼å®ç° ","date":"2022-03-19","objectID":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/:2:0","tags":["é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨"],"title":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","uri":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"è·³è¡¨çš„åˆ›å»º Rediså®ç° è·³è¡¨ç»“æ„ï¼šsdsç±»å‹æ˜¯Rediså†…éƒ¨å®ç°çš„å­—ç¬¦ä¸² åˆ›å»ºå‡½æ•°ï¼Œè¿™æ—¶å‰é¢å®šä¹‰çš„level[]ç±»å‹çš„ä¼˜åŠ¿å°±ä½“ç°å‡ºæ¥äº†ï¼Œåœ¨Cä¸­è¿™ä¸ªç±»å‹ç®—æ˜¯æœªå®Œæˆçš„ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦æ ¹æ®ä½ ç»™å®ƒåˆ†é…çš„å†…å­˜æ¥è¿›è¡Œå…·ä½“çš„ä½¿ç”¨ï¼Œæ²¡æœ‰åˆ†é…å†…å­˜å‰ï¼Œä½ å¯ä»¥sizeof(zskiplistNode);è¯•ä¸€è¯•ï¼Œä½ ä¼šå‘ç°levelä¸è®¡å†…å­˜ï¼ é”€æ¯å‡½æ•° cppå®ç° struct SkiplistNode { // string ele; æ­¤é¢˜ä¸éœ€è¦ç»´æŠ¤å…ƒç´ å­—æ®µï¼Œæ‰€ä»¥èˆå» double score; SkiplistNode *backward; struct SkiplistLevel { struct SkiplistNode *forward; // unsigned long span;æ­¤é¢˜ä¸éœ€è¦ç»´æŠ¤è·¨åº¦ï¼Œæ‰€ä»¥çœå» }* level; //TODO æ„é€ å’Œææ„ SkiplistNode(int level,double score):level(new SkiplistLevel[level]) ,score(score),backward(nullptr){} ~SkiplistNode(){ delete[] level; } }; class Skiplist { struct SkiplistNode *header, *tail; unsigned long length; //å½“å‰è·³è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•° int level; //å½“å‰è·³è¡¨ä¸­æœ€å¤§è¡¨çš„é«˜åº¦ public: /** * æ„é€ å‡½æ•°å’Œææ„å‡½æ•° */ Skiplist():level(1),length(0),tail(nullptr){ header = new SkiplistNode(Skiplist_MAXLEVEL,0); for (int j = 0; j \u003c Skiplist_MAXLEVEL; j++) { header-\u003elevel[j].forward = nullptr; } header-\u003ebackward = nullptr; } ~Skiplist(){ SkiplistNode* node = header, *next; while(node) { next = node-\u003elevel[0].forward; delete node; node = next; } } }; ","date":"2022-03-19","objectID":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/:2:1","tags":["é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨"],"title":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","uri":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"Insertæ’å…¥å…ƒç´  Rediså®ç° cppå®ç° å¸¦spanå’Œeleçš„1:1è¿˜åŸ SkiplistNode* Skiplist::Insert(double score,const string\u0026 ele){ SkiplistNode *update[Skiplist_MAXLEVEL], *x; unsigned int rank[Skiplist_MAXLEVEL]; int i,level; //TODO part1ï¼šæ‰¾åˆ°éœ€è¦æ’å…¥ä½ç½®çš„å‰ä¸€ä¸ªè·³è¡¨èŠ‚ç‚¹ï¼Œé¡ºä¾¿æ›´æ–°updateæ•°ç»„ï¼ˆå­˜å‚¨ç€ç»è¿‡è·¯å¾„ä¸­çš„æ¯ä¸ªå±‚çº§æœ€å¤šèµ°åˆ°äº†å“ªä¸ªèŠ‚ç‚¹(ç”¨äºè¿æ¥æ–°èŠ‚ç‚¹çš„æ¯ä¸ªå±‚çº§çš„forwardå’Œæ›´æ–°span)ï¼‰å’Œrankæ•°ç»„ï¼ˆå­˜å‚¨ç€è·¯å¾„ä¸­ç»è¿‡çš„å±‚çº§èŠ‚ç‚¹åˆ°headerçš„é•¿åº¦ï¼‰ x = header; for (i = this-\u003elevel-1; i \u003e= 0; i--) { rank[i] = i == (this-\u003elevel-1) ? 0 : rank[i+1]; cout\u003c\u003crank[i]\u003c\u003cendl; while (x-\u003elevel[i].forward \u0026\u0026 (x-\u003elevel[i].forward-\u003escore \u003c score || (x-\u003elevel[i].forward-\u003escore == score \u0026\u0026 x-\u003elevel[i].forward-\u003eele\u003cele))) { rank[i] += x-\u003elevel[i].span; x = x-\u003elevel[i].forward; } update[i] = x; } //TODO ç”ŸæˆèŠ‚ç‚¹å†…å­˜ï¼Œå¦‚æœéšæœºç”Ÿæˆçš„èŠ‚ç‚¹æ‹¥æœ‰çš„å±‚çº§æ¯”å½“å‰æœ€é«˜çš„èŠ‚ç‚¹è¿˜é«˜ï¼Œåˆ™éœ€è¦æŠŠupdateæ•°ç»„å’Œrankæ•°ç»„ä¸­é«˜äºå½“å‰levelçš„éƒ¨åˆ†çœ‹ä½œæ˜¯å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯headeræ¥æ›´æ–° level = RandomLevel(); if (level \u003e this-\u003elevel) { for (i = this-\u003elevel; i \u003c level; i++) { rank[i] = 0; update[i] = this-\u003eheader; update[i]-\u003elevel[i].span = this-\u003elength; } this-\u003elevel = level; } x = new SkiplistNode(level,score,ele); //TODO è¿æ¥æ“ä½œï¼Œè¿æ¥çš„åŒæ—¶æŠŠä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„spanç»™è½¬ç§»ç»™æˆ‘ï¼Œå¦‚æœè¯¥å±‚çº§çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹å°±ç´§æŒ¨ç€é‚£ä¹ˆå¯ç›´æ¥è½¬ç§»ï¼Œå¦åˆ™æ ¹æ®update[i]-\u003elevel[i].span - (rank[0] - rank[i]);æ¥æ›´æ–°ï¼Œå®é™…ä¸Šä¹ŸåŒ…å«äº†å‰ä¸€ç§æƒ…å†µ for (i = 0; i \u003c level; i++) { x-\u003elevel[i].forward = update[i]-\u003elevel[i].forward; update[i]-\u003elevel[i].forward = x; /* update span covered by update[i] as x is inserted here */ x-\u003elevel[i].span = update[i]-\u003elevel[i].span - (rank[0] - rank[i]); update[i]-\u003elevel[i].span = (rank[0] - rank[i]) + 1; } //TODO æœ€åçš„å–„åæ“ä½œï¼Œ1.å‰é¢é«˜äºå®ƒçš„èŠ‚ç‚¹ï¼Œä¼šå› ä¸ºå®ƒçš„äº§ç”Ÿè€Œä½¿å¾—å®ƒä»¬çš„span+1. 2.æ›´æ–°backwardæŒ‡é’ˆï¼Œå¦‚æœä¸æ˜¯é˜Ÿå°¾åˆ™éœ€è¦æ›´æ–°åé¢çš„backwardï¼Œå¦‚æœæ’å…¥çš„æ˜¯é˜Ÿå°¾ï¼Œåˆ™æ›´æ–°tailæŒ‡é’ˆ 3.æ›´æ–°length /** * æ›´æ–°æ’å…¥çš„èŠ‚ç‚¹æœªèƒ½åˆ°è¾¾çš„å…ƒç´ çš„span+1 */ for (i = level; i \u003c this-\u003elevel; i++) { update[i]-\u003elevel[i].span++; } /** * æ›´æ–°backwardï¼Œä»¥åŠåˆ¤æ–­æ’å…¥å…ƒç´ æ˜¯å¦æ˜¯é˜Ÿå°¾ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ›´æ–°tailæŒ‡é’ˆ */ x-\u003ebackward = (update[0] == this-\u003eheader) ? nullptr : update[0]; if (x-\u003elevel[0].forward) x-\u003elevel[0].forward-\u003ebackward = x; else this-\u003etail = x; this-\u003elength++; return x; } ä¸å¸¦spanå’Œele SkiplistNode* Skiplist::Insert(double score){ SkiplistNode *update[Skiplist_MAXLEVEL], *x; int i,level; //TODO part1ï¼šæ‰¾åˆ°éœ€è¦æ’å…¥ä½ç½®çš„å‰ä¸€ä¸ªè·³è¡¨èŠ‚ç‚¹ï¼Œé¡ºä¾¿æ›´æ–°updateæ•°ç»„(å­˜å‚¨ç€ç»è¿‡è·¯å¾„ä¸­çš„æ¯ä¸ªå±‚çº§æœ€å¤šèµ°åˆ°äº†å“ªä¸ªèŠ‚ç‚¹(ç”¨äºè¿æ¥æ–°èŠ‚ç‚¹çš„æ¯ä¸ªå±‚çº§çš„forward)) x = this-\u003eheader; for (i = this-\u003elevel-1; i \u003e= 0; i--) { while (x-\u003elevel[i].forward\u0026\u0026 x-\u003elevel[i].forward-\u003escore \u003c score) { x = x-\u003elevel[i].forward; } update[i] = x; } //TODO ç”ŸæˆèŠ‚ç‚¹å†…å­˜ï¼Œå¦‚æœéšæœºç”Ÿæˆçš„èŠ‚ç‚¹æ‹¥æœ‰çš„å±‚çº§æ¯”å½“å‰æœ€é«˜çš„èŠ‚ç‚¹è¿˜é«˜ï¼Œåˆ™éœ€è¦æŠŠupdateæ•°ç»„ä¸­é«˜äºå½“å‰levelçš„éƒ¨åˆ†çœ‹ä½œæ˜¯å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯headeræ¥æ›´æ–° level = RandomLevel(); if (level \u003e this-\u003elevel) { for (i = this-\u003elevel; i \u003c level; i++) { update[i] = this-\u003eheader; } this-\u003elevel = level; } x = new SkiplistNode(level,score); //TODO è¿æ¥æ“ä½œ for (i = 0; i \u003c level; i++) { x-\u003elevel[i].forward = update[i]-\u003elevel[i].forward; update[i]-\u003elevel[i].forward = x; } /** * æ›´æ–°backwardï¼Œä»¥åŠåˆ¤æ–­æ’å…¥å…ƒç´ æ˜¯å¦æ˜¯é˜Ÿå°¾ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ›´æ–°tailæŒ‡é’ˆ */ x-\u003ebackward = (update[0] == this-\u003eheader) ? nullptr : update[0]; if (x-\u003elevel[0].forward) x-\u003elevel[0].forward-\u003ebackward = x; else this-\u003etail = x; this-\u003elength++; return x; } ","date":"2022-03-19","objectID":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/:2:2","tags":["é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨"],"title":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","uri":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"Deleteåˆ é™¤å…ƒç´  Rediså®ç° deleteçš„helperå‡½æ•° æ­£å¼delete cppå®ç° 1:1è¿˜åŸå®ç° /** * è¯¥å‡½æ•°å¤„ç†ä¼ å…¥çš„updateæ•°ç»„ï¼Œå¹¶æ›´æ–°åˆ é™¤xèŠ‚ç‚¹åçš„æŒ‡é’ˆè¿æ¥å’Œspanå€¼ * @param zsl éœ€è¦å¤„ç†çš„è·³è¡¨ * @param x éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ * @param update éœ€è¦å¤„ç†çš„çš„updateæ•°ç»„ */ static void Skiplist::DeleteNode(Skiplist *zsl, SkiplistNode *x, SkiplistNode **update) { int i; for (i = 0; i \u003c zsl-\u003elevel; i++) { if (update[i]-\u003elevel[i].forward == x) {//TODO å¦‚æœè¯¥å±‚çº§çš„èŠ‚ç‚¹çš„åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯xèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåˆ é™¤xèŠ‚ç‚¹åspanä¼šå¢åŠ ï¼Œforwardè¦æ›´æ–° update[i]-\u003elevel[i].span += x-\u003elevel[i].span - 1; update[i]-\u003elevel[i].forward = x-\u003elevel[i].forward; } else {//TODO å¦‚æœåä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯xèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ä»…ä»…åªæ˜¯è·¨åº¦ä¸Šå‡å°‘1è€Œå·² update[i]-\u003elevel[i].span -= 1; } } //TODO å’Œä¹‹å‰çš„æ’å…¥å¤„ç†ç›¸åŒï¼Œå¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯æœ«å°¾èŠ‚ç‚¹ï¼Œåˆ™éœ€è¦æ›´æ–°tailæŒ‡é’ˆï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™éœ€è¦æ›´æ–°backwardæŒ‡é’ˆ if (x-\u003elevel[0].forward) { x-\u003elevel[0].forward-\u003ebackward = x-\u003ebackward; } else { zsl-\u003etail = x-\u003ebackward; } while(zsl-\u003elevel \u003e 1 \u0026\u0026 zsl-\u003eheader-\u003elevel[zsl-\u003elevel-1].forward == NULL) zsl-\u003elevel--; zsl-\u003elength--; } /** * æ ¹æ®scoreå’Œeleåˆ é™¤èŠ‚ç‚¹ * @param score ä¼ å…¥çš„åˆ†å€¼æ ‡è¯† * @param ele ä¼ å…¥çš„å…ƒç´ å­—ç¬¦ä¸²æ ‡è¯† * @param node ç”¨äºé€‰æ‹©æ˜¯å¦è¦ä¼ å‡ºnodeï¼Œè€Œä¸æ˜¯å°±åœ°åˆ é™¤ * @return 0è¡¨ç¤ºèŠ‚ç‚¹æœªæ‰¾åˆ°ï¼Œ1è¡¨ç¤ºåˆ é™¤å¤„ç†æˆåŠŸ */ int Skiplist::Delete( double score, string ele, SkiplistNode **node = nullptr) { SkiplistNode *update[Skiplist_MAXLEVEL], *x; int i; x = this-\u003eheader; for (i = this-\u003elevel-1; i \u003e= 0; i--) { while (x-\u003elevel[i].forward \u0026\u0026 (x-\u003elevel[i].forward-\u003escore \u003c score || (x-\u003elevel[i].forward-\u003escore == score \u0026\u0026 x-\u003elevel[i].forward-\u003eele\u003cele))) { x = x-\u003elevel[i].forward; } update[i] = x; } /** * æˆ‘ä»¬å¯èƒ½æœ‰å¤šä¸ªç›¸åŒåˆ†æ•°çš„å…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°åŒæ—¶å…·æœ‰æ­£ç¡®åˆ†æ•°å’Œå¯¹è±¡çš„å…ƒç´ ã€‚ */ x = x-\u003elevel[0].forward; if (x \u0026\u0026 score == x-\u003escore \u0026\u0026 x-\u003eele==ele) { DeleteNode(this, x, update);//TODO å¤„ç†updateæ•°ç»„ä¸Šçš„æŒ‡é’ˆè¿æ¥ if (!node)//TODO å¦‚æœå¤–ç•Œä¸éœ€è¦æ¥ä½nodeæ¥è¿›è¡Œå¤„ç†ï¼Œåˆ™è¯¥nodeå°±åœ°é”€æ¯ï¼Œå¦åˆ™èµ„æºä¼ å‡ºåˆ°å¤–ç•Œ delete x; else *node = x; return 1; } return 0; /* not found */ } ä»…åŒ…å«scoreçš„è¿˜åŸ /** * åˆ é™¤èŠ‚ç‚¹åçš„å¤„ç†è¿‡ç¨‹ * @param zsl éœ€è¦å¤„ç†çš„è·³è¡¨ * @param x éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ * @param update éœ€è¦å¤„ç†çš„updateæ•°ç»„ */ static void Skiplist::DeleteHelper(Skiplist *zsl, SkiplistNode *x, SkiplistNode **update) { assert(zsl!= nullptr\u0026\u0026x!= nullptr\u0026\u0026update!= nullptr); int i; for (i = 0; i \u003c zsl-\u003elevel; i++) { if (update[i]-\u003elevel[i].forward == x) { update[i]-\u003elevel[i].forward = x-\u003elevel[i].forward; } } //TODO å’Œä¹‹å‰çš„æ’å…¥å¤„ç†ç›¸åŒï¼Œå¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯æœ«å°¾èŠ‚ç‚¹ï¼Œåˆ™éœ€è¦æ›´æ–°tailæŒ‡é’ˆï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æ›´æ–°backwardæŒ‡é’ˆ if (x-\u003elevel[0].forward) { x-\u003elevel[0].forward-\u003ebackward = x-\u003ebackward; } else { zsl-\u003etail = x-\u003ebackward; } //TODO åˆ é™¤çš„èŠ‚ç‚¹å¯èƒ½æ˜¯æœ€é«˜çš„é«˜åº¦ï¼Œç”±äºå¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒçš„é«˜åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥åˆ¤æ–­ // å¯ä»å¤´èŠ‚ç‚¹çš„forwardæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºæ¥ç¡®è®¤é«˜åº¦æ˜¯å¦éœ€è¦ä¸‹é™ while(zsl-\u003elevel \u003e 1 \u0026\u0026 zsl-\u003eheader-\u003elevel[zsl-\u003elevel-1].forward == nullptr) zsl-\u003elevel--; zsl-\u003elength--; } /** * æ ¹æ®scoreå’Œeleåˆ é™¤èŠ‚ç‚¹ * @param score ä¼ å…¥çš„åˆ†å€¼æ ‡è¯† * @param node ç”¨äºé€‰æ‹©æ˜¯å¦è¦ä¼ å‡ºnodeï¼Œè€Œä¸æ˜¯å°±åœ°åˆ é™¤ * @return 0è¡¨ç¤ºèŠ‚ç‚¹æœªæ‰¾åˆ°ï¼Œ1è¡¨ç¤ºåˆ é™¤å¤„ç†æˆåŠŸ */ int Skiplist::Delete( double score,SkiplistNode **node = nullptr) { SkiplistNode *update[Skiplist_MAXLEVEL], *x; int i; /** * æŸ¥æ‰¾å¹¶æ›´æ–°updateæ•°ç»„ */ x = this-\u003eheader; for (i = this-\u003elevel-1; i \u003e= 0; i--) { while (x-\u003elevel[i].forward \u0026\u0026 (x-\u003elevel[i].forward-\u003escore \u003c score)) { x = x-\u003elevel[i].forward; } update[i] = x; } x = x-\u003elevel[0].forward; if (x \u0026\u0026 score == x-\u003escore) { DeleteHelper(this, x, update);//TODO å¤„ç†updateæ•°ç»„ä¸Šçš„æŒ‡é’ˆè¿æ¥ if (!node)//TODO å¦‚æœå¤–ç•Œä¸éœ€è¦æ¥ä½nodeæ¥è¿›è¡Œå¤„ç†ï¼Œåˆ™è¯¥nodeå°±åœ°é”€æ¯ï¼Œå¦åˆ™èµ„æºä¼ å‡ºåˆ°å¤–ç•Œ delete x; else *node = x; return 1; } return 0; /* not found */ } ","date":"2022-03-19","objectID":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/:2:3","tags":["é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨"],"title":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","uri":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ­£å¼è§£é¢˜ é¢˜ç›®é“¾æ¥ å‰é¢çš„å¢åˆ å¼„æ‡‚äº†ï¼Œè¿™ä¸ªè·³è¡¨çš„å„ç§æŸ¥æ‰¾ä¹Ÿå°±ä¸åœ¨è¯ä¸‹äº†ï¼Œç°åœ¨å¯ä»¥æ­£å¼è§£é¢˜äº†ã€‚ æ•ˆç‡è¿˜æ˜¯æ¯”è¾ƒniceçš„ï¼ è§£é¢˜æºç ï¼š #define Skiplist_MAXLEVEL 32 /* Should be enough for 2^64 elements */#define Skiplist_P 0.25 /* Skiplist P = 1/4 */ struct SkiplistNode { // string ele; æ­¤é¢˜ä¸éœ€è¦ç»´æŠ¤å…ƒç´ å­—æ®µï¼Œæ‰€ä»¥èˆå» double score; SkiplistNode *backward; struct SkiplistLevel { struct SkiplistNode *forward; // unsigned long span;æ­¤é¢˜ä¸éœ€è¦ç»´æŠ¤è·¨åº¦ï¼Œæ‰€ä»¥çœå» }* level; SkiplistNode(int level,double score):level(new SkiplistLevel[level]) ,score(score),backward(nullptr){} ~SkiplistNode(){ delete[] level; } }; class Skiplist { public: struct SkiplistNode *header, *tail; unsigned long length; //å½“å‰è·³è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•° int level; //å½“å‰è·³è¡¨ä¸­æœ€å¤§è¡¨çš„é«˜åº¦ private: /** * * @return è¿”å›éšæœºäº§ç”Ÿçš„levelé«˜åº¦ */ static int RandomLevel() {//TODO æ ¹æ®rand()å’Œæ©ç ç›¸ä¸å¾—åˆ°å¯¹åº”çš„éšæœºå€¼(0,0xffff)æ¥äº§ç”Ÿlevel int level = 1; while ((rand()\u00260xFFFF) \u003c (Skiplist_P * 0xFFFF)) level += 1; return (level\u003cSkiplist_MAXLEVEL) ? level : Skiplist_MAXLEVEL; } /** * åˆ é™¤èŠ‚ç‚¹åçš„å¤„ç†è¿‡ç¨‹ * @param zsl éœ€è¦å¤„ç†çš„è·³è¡¨ * @param x éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ * @param update éœ€è¦å¤„ç†çš„updateæ•°ç»„ */ static void DeleteHelper(Skiplist *zsl, SkiplistNode *x, SkiplistNode **update) { assert(zsl!= nullptr\u0026\u0026x!= nullptr\u0026\u0026update!= nullptr); int i; for (i = 0; i \u003c zsl-\u003elevel; i++) { if (update[i]-\u003elevel[i].forward == x) { update[i]-\u003elevel[i].forward = x-\u003elevel[i].forward; } } //TODO å’Œä¹‹å‰çš„æ’å…¥å¤„ç†ç›¸åŒï¼Œå¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯æœ«å°¾èŠ‚ç‚¹ï¼Œåˆ™éœ€è¦æ›´æ–°tailæŒ‡é’ˆï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æ›´æ–°backwardæŒ‡é’ˆ if (x-\u003elevel[0].forward) { x-\u003elevel[0].forward-\u003ebackward = x-\u003ebackward; } else { zsl-\u003etail = x-\u003ebackward; } //TODO åˆ é™¤çš„èŠ‚ç‚¹å¯èƒ½æ˜¯æœ€é«˜çš„é«˜åº¦ï¼Œç”±äºå¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒçš„é«˜åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥åˆ¤æ–­ // å¯ä»å¤´èŠ‚ç‚¹çš„forwardæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºæ¥ç¡®è®¤é«˜åº¦æ˜¯å¦éœ€è¦ä¸‹é™ while(zsl-\u003elevel \u003e 1 \u0026\u0026 zsl-\u003eheader-\u003elevel[zsl-\u003elevel-1].forward == nullptr) zsl-\u003elevel--; zsl-\u003elength--; } public: /** * æ„é€ å‡½æ•°å’Œææ„å‡½æ•° */ Skiplist():level(1),length(0),tail(nullptr){ header = new SkiplistNode(Skiplist_MAXLEVEL,0); for (int j = 0; j \u003c Skiplist_MAXLEVEL; j++) { header-\u003elevel[j].forward = nullptr; } header-\u003ebackward = nullptr; } ~Skiplist(){ SkiplistNode* node = header, *next; while(node) { next = node-\u003elevel[0].forward; delete node; node = next; } } /** * æ’å…¥å…ƒç´  * @param score ç”¨äºå®šä½çš„score * @param ele å­˜å‚¨çš„å…ƒç´  * @return è¢«æ’å…¥å…ƒç´ çš„æŒ‡é’ˆ */ SkiplistNode* Insert(double score){ SkiplistNode *update[Skiplist_MAXLEVEL], *x; int i,level; //TODO part1ï¼šæ‰¾åˆ°éœ€è¦æ’å…¥ä½ç½®çš„å‰ä¸€ä¸ªè·³è¡¨èŠ‚ç‚¹ï¼Œé¡ºä¾¿æ›´æ–°updateæ•°ç»„(å­˜å‚¨ç€ç»è¿‡è·¯å¾„ä¸­çš„æ¯ä¸ªå±‚çº§æœ€å¤šèµ°åˆ°äº†å“ªä¸ªèŠ‚ç‚¹(ç”¨äºè¿æ¥æ–°èŠ‚ç‚¹çš„æ¯ä¸ªå±‚çº§çš„forward)) x = header; for (i = this-\u003elevel-1; i \u003e= 0; i--) { while (x-\u003elevel[i].forward\u0026\u0026 x-\u003elevel[i].forward-\u003escore \u003c score) { x = x-\u003elevel[i].forward; } update[i] = x; } //TODO ç”ŸæˆèŠ‚ç‚¹å†…å­˜ï¼Œå¦‚æœéšæœºç”Ÿæˆçš„èŠ‚ç‚¹æ‹¥æœ‰çš„å±‚çº§æ¯”å½“å‰æœ€é«˜çš„èŠ‚ç‚¹è¿˜é«˜ï¼Œåˆ™éœ€è¦æŠŠupdateæ•°ç»„ä¸­é«˜äºå½“å‰levelçš„éƒ¨åˆ†çœ‹ä½œæ˜¯å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯headeræ¥æ›´æ–° level = RandomLevel(); if (level \u003e this-\u003elevel) { for (i = this-\u003elevel; i \u003c level; i++) { update[i] = this-\u003eheader; } this-\u003elevel = level; } x = new SkiplistNode(level,score); //TODO è¿æ¥æ“ä½œ for (i = 0; i \u003c level; i++) { x-\u003elevel[i].forward = update[i]-\u003elevel[i].forward; update[i]-\u003elevel[i].forward = x; } /** * æ›´æ–°backwardï¼Œä»¥åŠåˆ¤æ–­æ’å…¥å…ƒç´ æ˜¯å¦æ˜¯é˜Ÿå°¾ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ›´æ–°tailæŒ‡é’ˆ */ x-\u003ebackward = (update[0] == this-\u003eheader) ? nullptr : update[0]; if (x-\u003elevel[0].forward) x-\u003elevel[0].forward-\u003ebackward = x; else this-\u003etail = x; this-\u003elength++; return x; } /** * æ ¹æ®scoreå’Œeleåˆ é™¤èŠ‚ç‚¹ * @param score ä¼ å…¥çš„åˆ†å€¼æ ‡è¯† * @param node ç”¨äºé€‰æ‹©æ˜¯å¦è¦ä¼ å‡ºnodeï¼Œè€Œä¸æ˜¯å°±åœ°åˆ é™¤ * @return 0è¡¨ç¤ºèŠ‚ç‚¹æœªæ‰¾åˆ°ï¼Œ1è¡¨ç¤ºåˆ é™¤å¤„ç†æˆåŠŸ */ int Delete( double score,SkiplistNode **node = nullptr) { SkiplistNode *update[Skiplist_MAXLEVEL], *x; int i; /** * æŸ¥æ‰¾å¹¶æ›´æ–°updateæ•°ç»„ */ x = this-\u003eheader; for (i = this-\u003elevel-1; i \u003e= 0; i--) { while (x-\u003elevel[i].forward \u0026\u0026 (x-\u003elevel[i].forward-\u003escore \u003c score)) { x = x-\u003elevel[i].forward; } update[i] = x; } x = x-\u003elevel[0].forward; if (x \u0026\u0026 score == x-\u003escore) { DeleteHelper(this, x, update);//TODO å¤„ç†updateæ•°ç»„ä¸Šçš„æŒ‡é’ˆè¿æ¥ if (!node)//TODO å¦‚æœå¤–ç•Œä¸éœ€è¦æ¥ä½nodeæ¥è¿›è¡Œå¤„ç†ï¼Œåˆ™è¯¥nodeå°±åœ°é”€æ¯ï¼Œå¦åˆ™èµ„æºä¼ å‡ºåˆ°å¤–ç•Œ delete x; else *node = x; return 1; } return 0; /* not found */ } //æœ¬é¢˜çš„å‡½æ•°æ¥å£ bool search(int target) const { double score = target; SkiplistNode* x; int i; x = this-\u003eheader; for (i = this-\u003elevel-1; i \u003e= 0; i--) { while (x-\u003elevel[i].forward \u0026\u0026 (x-\u003elevel[i].forward-\u003escore \u003c score)) { x = x-\u003elevel[i].forward; } } auto val = x-\u003elevel[0].forward; if(val) return val-\u003escore==score; return false; } void add(int num) { In","date":"2022-03-19","objectID":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/:3:0","tags":["é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨"],"title":"é€šè¿‡é˜…è¯»Redisæºç ç®€å•å®ç°è·³è¡¨","uri":"/posts/%E9%98%85%E8%AF%BBredis%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0%E8%B7%B3%E8%A1%A8/"},{"categories":["C++åº•å±‚åŸç†"],"content":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":" æœ¬æ–‡é»˜è®¤ä½ å·²ç»æ‹¥æœ‰åŸºæœ¬çš„gccç¼–è¯‘é€‰é¡¹çŸ¥è¯†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç«  ç¨‹åºçš„ç¼–è¯‘è¿‡ç¨‹gccç‰ˆã€‚ ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:0:0","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":"ä»é¢„ç¼–è¯‘çš„è§’åº¦å¯¹æ¯”å®å®šä¹‰å’Œæ¨¡æ¿ ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:1:0","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":"æ¥æµ‹æµ‹å®å®šä¹‰ å¤§å®¶éƒ½çŸ¥é“ï¼Œå®å®šä¹‰ä»…ä»…åªä½œç”¨äºæ–‡æœ¬çš„æ›¿æ¢ï¼Œåœ¨é¢„ç¼–è¯‘çš„æ—¶å€™ï¼ŒæŠŠç”¨åˆ°å®å®šä¹‰çš„éƒ¨åˆ†æ›¿æ¢ä¸ºçœŸæ­£çš„æ–‡æœ¬è€Œå·²ï¼Œç¼ºç‚¹å°±æ˜¯ä¸ä¼šåšç±»å‹æ£€æŸ¥ï¼Œåªè¦è¯­æ³•èƒ½è¿‡ç¼–è¯‘å°±è¡Œã€‚ æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå®æ¥æ±‚ä¸¤è€…ä¹‹é—´çš„æœ€å¤§å€¼ï¼Œä¸ºäº†é˜²æ­¢é¢„ç¼–è¯‘çš„ä»£ç å¤ªè¿‡å†—é•¿ä¸æ˜“çœ‹æ‡‚ï¼Œæ²¡æœ‰ç”¨ include å»åŒ…å«å…¶ä»–å‡½æ•°åº“çš„å£°æ˜ã€‚ ä»£ç å¦‚ä¸‹ï¼š #define MAX_VALUE(_1,_2) ((_1\u003e_2)?_1:_2) int main(){ MAX_VALUE(1,2); } ç»è¿‡ gcc -E å‘½ä»¤åå¾—åˆ°é¢„å¤„ç†åçš„ä»£ç å¦‚ä¸‹ï¼š # 0 \".\\\\test_template.cpp\" # 0 \"\u003cbuilt-in\u003e\" # 0 \"\u003ccommand-line\u003e\" # 1 \".\\\\test_template.cpp\" # 10 \".\\\\test_template.cpp\" int main(){ ((1\u003e2)?1:2); } è§‚å¯Ÿä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å‘ç°ï¼Œç¡®å®æ˜¯ç›´æ¥çš„æ–‡æœ¬æ›¿æ¢ï¼Œå‰é¢çš„å®å®šä¹‰ä»£ç éƒ½ä¸è§äº†ï¼Œåªæœ‰ï¼Œä¼ å…¥çš„æ›¿æ¢æ–‡æœ¬äº†ã€‚ ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:1:1","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":"å®å®šä¹‰çš„å®³å¤„ å¦‚æœæˆ‘ä»¬æŠŠä¸‹é¢è¿™æ®µä»£ç ä¼ å…¥åˆ°å®å®šä¹‰ä¸­ï¼š #define MAX_VALUE(_1,_2) ((_1\u003e_2)?_1:_2) int main(){ MAX_VALUE(\"abdcdf\",\"fdf\"); } å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªä»£ç æ˜¯å¯ä»¥è¿‡ç¼–è¯‘çš„ï¼Œä½†æˆ‘ä»¬è‚¯å®šä¸æƒ³ç›´æ¥çš„å¦‚ä¸‹çš„æ–¹å¼è¿›è¡Œå­—ç¬¦ä¸²çš„æ¯”è¾ƒï¼Œè¿™æ ·çš„æ¯”è¾ƒæ¯«æ— æ„ä¹‰ï¼Œåªä¸è¿‡æ˜¯æ¯”è¾ƒçš„åœ°å€è€Œå·²ã€‚ # 0 \".\\\\test_template.cpp\" # 0 \"\u003cbuilt-in\u003e\" # 0 \"\u003ccommand-line\u003e\" # 1 \".\\\\test_template.cpp\" # 10 \".\\\\test_template.cpp\" int main(){ ((\"abdcdf\"\u003e\"fdf\")?\"abdcdf\":\"fdf\"); } æ•…å®å®šä¹‰çš„æœ€å¤§å±å®³ï¼Œå°±æ˜¯æ²¡æ³•å¯¹ç±»å‹è¿›è¡Œæ£€æŸ¥ï¼è¿™å°±å¯¼è‡´æ— æ³•çµæ´»çš„è¿›è¡Œä¼˜åŒ–å’Œè°ƒæ•´ä¸€äº›ç›´æ¥æ–‡æœ¬æ›¿æ¢å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚ ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:1:2","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":"æ¨¡æ¿æ˜¯å¦ä¼šè¿›è¡Œé¢„å¤„ç†æ“ä½œï¼Ÿ æºä»£ç ï¼š template\u003ctypename T\u003e T MAX_VALUE(T _1, T _2){ if(_1\u003c_2) return _2; return _1; } int main(){ MAX_VALUE(\"abdcdf\",\"fdf\"); } é¢„å¤„ç†åï¼š # 0 \".\\\\test_template.cpp\" # 0 \"\u003cbuilt-in\u003e\" # 0 \"\u003ccommand-line\u003e\" # 1 \".\\\\test_template.cpp\" template\u003ctypename T\u003e T MAX_VALUE(T _1, T _2){ if(_1\u003c_2) return _2; return _1; } int main(){ MAX_VALUE(\"abdcdf\",\"fdf\"); } æˆ‘ä»¬å‘ç°æ¨¡æ¿å¹¶ä¸ä¼šåœ¨é¢„å¤„ç†æ—¶è¢«å±•å¼€ï¼Œå®ƒç”šè‡³ä¸ä¼šå’Œé¢„å¤„ç†çš„è°ƒç”¨éƒ¨åˆ†å½¢æˆä»»ä½•è”ç³»ï¼ çœ‹æ¥æ¨¡æ¿çš„å±•å¼€å¤„ç†è¿‡ç¨‹æ˜¯å‘ç”Ÿåœ¨åç»­çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç”±äºæœ¬äººä¸æ¸…æ¥šå¦‚ä½•åæ±‡ç¼–å’Œåç¼–è¯‘è¿‡ç¨‹ï¼Œæ•…æ²¡æœ‰äº²èº«å®è·µã€‚ ä½†ä»æˆ‘çš„æ—¥å¸¸ä½¿ç”¨ä½“éªŒå’Œå¤§ä½¬ä»¬æ€»ç»“çš„ç»éªŒçœ‹æ¥ï¼Œæ¨¡æ¿ä¹Ÿå’Œå®å®šä¹‰çš„å±•å¼€ç±»ä¼¼ï¼Œå°±æ˜¯ç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œä½†å¯ä»¥åˆ©ç”¨ç¼–è¯‘æ—¶æœŸçš„è¯­æ³•æ£€æŸ¥å’Œç±»å‹åˆ¤æ–­ï¼ˆtype_traitsæŠ€æœ¯ï¼‰ï¼Œæ‰€ä»¥èƒ½å¤Ÿå¯¹ä¸åŒæƒ…å†µçš„å±•å¼€è¿›è¡Œä¸åŒçš„å¤„ç†ã€‚ æ¯”å¦‚ä¸Šé¢çš„ä»£ç åˆ©ç”¨åç‰¹åŒ–è¿›è¡Œä¼˜åŒ–ï¼š #include \u003ciostream\u003e#include \u003ccstring\u003etemplate\u003ctypename T\u003e int MAX_VALUE(T _1, T _2){ if(_1\u003c_2) return _2; return _1; } using type = const char *; template\u003c\u003e int MAX_VALUE\u003ctype\u003e(type _1, type _2){ std::cout \u003c\u003c \"è°ƒç”¨åç‰¹åŒ–\"; return strcmp(_1, _2); } int main(){ MAX_VALUE(\"abdcdf\",\"fdf\"); } ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:1:3","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":"å–„ç”¨ç¼–è¯‘æœŸçš„æ¨¡æ¿ ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:2:0","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":"ä¸ºä»€ä¹ˆå¤§å¤šæ•°æ¨¡æ¿åº“å£°æ˜å’Œå®šä¹‰éƒ½æ”¾åœ¨ä¸€èµ·ï¼Ÿ å£°æ˜å’Œå®šä¹‰åˆ†å¼€å¤„ç†çš„åŸå›  æˆ‘ä»¬æ¸…æ¥šï¼Œå£°æ˜å’Œå®šä¹‰ä¸­ï¼Œå£°æ˜å¯ä»¥æœ‰æ— æ•°ä»½ï¼Œä½†å®šä¹‰åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œåªèƒ½å­˜åœ¨ä¸€ä»½ï¼æ‰€ä»¥æˆ‘ä»¬åœ¨å¤šæ–‡ä»¶é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ include\u003cxxx.h\u003e å¾—åˆ°å¯¹åº”çš„å£°æ˜ï¼Œæœ€åå†æŠŠå¯¹åº”çš„å®ç° xxx.c ç¼–è¯‘å®Œåï¼Œå†é€šè¿‡é“¾æ¥è¿‡ç¨‹è®©å£°æ˜èƒ½å¤Ÿè¿æ¥åˆ°å¯¹åº”çš„å®šä¹‰æ¥è¿›è¡Œä½¿ç”¨ã€‚æ‰€ä»¥åœ¨é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯åœ¨ .h æ–‡ä»¶é‡Œé¢è¿›è¡Œå£°æ˜ï¼Œå†å†™ä¸€ä¸ª .c æ–‡ä»¶å®ç°å®šä¹‰ï¼ŒæŠŠå£°æ˜å’Œå®šä¹‰è¿›è¡Œåˆ†å¼€ï¼Œè¿™æ ·æ— è®ºä½ åœ¨å…¶ä»–çš„ .c æ–‡ä»¶é‡Œä½¿ç”¨å¤šå°‘ä¸ª include æ“ä½œï¼Œæ•´ä¸ªé¡¹ç›®éƒ½åªå­˜åœ¨ä¸€ä»½å®šä¹‰è€Œå·²ã€‚æ•…è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨ include æŠŠå¤šä»½ç›¸åŒçš„å£°æ˜æ”¾åœ¨ä¸€ä¸ªmainå‡½æ•°é‡Œè¿è¡Œä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚ è¯è¯´å›æ¥ï¼Œé‚£ä¸ºä»€ä¹ˆä¸€èˆ¬ä¸ä¼šå»ç›´æ¥æŠŠå®šä¹‰å’Œå£°æ˜å†™åœ¨ä¸€èµ·å‘¢ï¼Ÿ å¾ˆæ˜æ˜¾ï¼Œå®šä¹‰å’Œå£°æ˜åˆ†å¼€ï¼Œæ— è®ºæˆ‘ä»¬æ€ä¹ˆ include éƒ½ä¸ä¼šå› ä¸ºé‡å¤å®šä¹‰è€Œäº§ç”Ÿé”™è¯¯ï¼Œè€Œå¦‚æœæˆ‘ä»¬å†™åœ¨ä¸€ä¸ªè¢« include çš„æ–‡ä»¶é‡Œé¢ï¼Œåˆ™æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œæ¯æ¬¡ include éƒ½ä¼šå¤šäº§ç”Ÿä¸€æ¬¡å®šä¹‰ï¼ ä¸ºä»€ä¹ˆæ¨¡æ¿è¦æŠŠå£°æ˜å’Œå®šä¹‰å†™åœ¨ä¸€èµ·ï¼Ÿ é‚£æ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä»€ä¹ˆå†™æ¨¡æ¿çš„æ—¶å€™å£°æ˜å’Œå®šä¹‰å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å‘¢ï¼Ÿï¼Ÿï¼Ÿ æˆ‘ä»¬å‰é¢å·²ç»æ¸…æ¥šäº†ï¼Œé¢„ç¼–è¯‘å‘½ä»¤ include å°±ä»…ä»…æŠŠé‡Œé¢çš„ä»£ç æ‹·è´åˆ°ä½¿ç”¨å®ƒçš„æ–‡ä»¶é‡Œå»ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ¨¡æ¿çš„å®šä¹‰å’Œå£°æ˜åˆ†å¼€ï¼Œç”»é£å¤§æ¦‚ä¼šåƒä¸‹é¢è¿™æ ·ï¼š //test.h #ifndef TEST_TEMPLATE_TEST_H #define TEST_TEMPLATE_TEST_H template\u003ctypename T\u003e void print(T val); #endif //TEST_TEMPLATE_TEST_H //test.cpp #include \"test.h\"#include \u003ciostream\u003etemplate\u003ctypename T\u003e void print(T val) { std::cout\u003c\u003cval; } ä¸å‡ºæˆ‘æ‰€æ–™ï¼Œå¾ˆå¿«å°±æŠ¥é”™ï¼Œå†…å®¹å¦‚ä¸‹ï¼š undefined reference to `void print\u003cint\u003e(int)'\rå°±æ˜¯é“¾æ¥æ—¶æ‰¾ä¸åˆ°å¯¹åº”çš„å‡½æ•°å®šä¹‰ï¼ŒåŸå› æ˜¯æ¨¡æ¿åªä¼šåœ¨è°ƒç”¨çš„æ—¶å€™å®ä¾‹åŒ–å±•å¼€ä»£ç ï¼Œå¦‚æœ .h åªå­˜åœ¨æ¨¡æ¿çš„å£°æ˜ï¼Œé‚£ä¹ˆè¢«includeåè°ƒç”¨ï¼Œåªä¼šè¢«å®ä¾‹åŒ–ä¸ºä»¥ä¸‹å†…å®¹ï¼š void print([å®ä¾‹åŒ–çš„ç±»å‹å] val); å› ä¸ºå¯¹åº”çš„.cppæ–‡ä»¶é‡Œé¢ï¼Œä¸ä¼šæœ‰ä»»ä½•çš„å˜æ›´ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šæœ‰å¯¹åº”çš„å®šä¹‰äº§ç”Ÿã€‚ æ‰€ä»¥æƒ³è¦æŠŠå£°æ˜å’Œå®šä¹‰åˆ†æ–‡ä»¶ä¸”å®ç°æ¨¡æ¿çš„å®ä¾‹åŒ–å±•å¼€ï¼Œå‡ ä¹æ˜¯ä¸å¯èƒ½çš„ï¼ˆæˆ‘ç›®å‰ä¸æ¸…æ¥šæœ‰å“ªç§æ–¹å¼å¯ä»¥ï¼ˆä¼¼ä¹åœ¨æœ«å°¾å†includeå®šä¹‰çš„æ–‡ä»¶å°±å¯ä»¥ä½†ã€‚ã€‚å’Œç›´æ¥includeæ²¡åŒºåˆ«ï¼‰ï¼‰ æ‰€ä»¥åœ¨å†™æ¨¡æ¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®©ä½¿ç”¨åˆ°å®ƒçš„äººï¼ˆincludeè°ƒç”¨è€…ï¼‰æŠŠå£°æ˜å’Œå®šä¹‰ä¸€å—ç»™å®ƒï¼Œè€Œé˜²æ­¢æ‰¾ä¸åˆ°å®ä¾‹åŒ–å±•å¼€çš„å®šä¹‰ã€‚ å¦‚ä½•é˜²æ­¢æ¨¡æ¿ç±»çš„é‡å¤å®šä¹‰ï¼Ÿ ä»¥ä¸Šæè¿°äº†ï¼Œä¸ºä»€ä¹ˆæ¨¡æ¿å£°æ˜å’Œå®šä¹‰éœ€è¦å†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä½†é—®é¢˜åˆå‡ºç°äº†ï¼Œå¦‚ä½•é¢„é˜²ä¸€ä¸ªé¡¹ç›®ä¸­äº§ç”Ÿå¤šä¸ªå®šä¹‰å‘¢ï¼Ÿ ç®€å•é¢„é˜²ï¼š é€šè¿‡é¢„å¤„ç†çš„å®å®šä¹‰æ§åˆ¶å¯¼å…¥å¯¼å‡ºçš„ä»£ç ï¼Œä½†è¿™æ ·åªèƒ½å¤Ÿä¿è¯ä¸€ä¸ª .cæ–‡ä»¶ ä¸­ä¸ä¼šå‡ºç°ä¸¤æ¬¡ include ç›¸åŒä»£ç æ®µã€‚è€Œæ— æ³•ä¿è¯å…¶ä»– .cæ–‡ä»¶ include åå†æ¬¡äº§ç”Ÿå®šä¹‰ï¼ å¦‚ä¸‹ä»£ç ï¼Œæˆ‘å†™äº†ä¸€ä¸ªttt.hæ–‡ä»¶ï¼Œå¯¼å‡ºä¸€ä¸ª print å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰ï¼ˆç›´æ¥å®šä¹‰å°±åŒ…å«å£°æ˜ï¼‰ã€‚ //ttt.h #ifndef TEST_TEMPLATE_TTT_H #define TEST_TEMPLATE_TTT_H #include \u003ciostream\u003e void print(){ std::cout\u003c\u003c\"hhhh\"; } #endif //TEST_TEMPLATE_TTT_H //test.cpp #include \"ttt.h\"#include \u003ciostream\u003e//main.cpp #include \"ttt.h\"#include \u003ciostream\u003e int main() { print(); return 0; } è¿è¡Œmainå‡½æ•°æ—¶ï¼Œå¾ˆå¿«å°±å‘ç”Ÿäº†é‡å¤å®šä¹‰çš„æŠ¥é”™ï¼ å› ä¸ºæˆ‘ä»¬åœ¨test.cppæ–‡ä»¶é‡Œé¢ä¹Ÿ includeâ€œttt.h\" è¿™å°†å¯¼è‡´é‡å¤å®šä¹‰è·¨æ–‡ä»¶çš„é‡å¤å®šä¹‰æ˜¯ç®€å•çš„å®å®šä¹‰æ²¡æ³•é¿å…çš„ï¼ ä½†æˆ‘ä»¬åˆå‘ç°æˆ‘ä»¬å¯¼å…¥å¤šæ¬¡ \u003ciostream\u003e æ ‡å‡†åº“å´ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘è¯•ç€ç‚¹è¿› iostream é‡Œé¢è§‚å¯Ÿè§‚å¯Ÿï¼Œå‘ç°å†™çš„å…¨æ˜¯å£°æ˜ã€‚ å†è¿›å…¥åˆ°æ›´æ·±å±‚çš„includeç§ä¸€ç§çœ‹çœ‹ï¼š å¥½å®¶ä¼™ï¼Œ\u003cbits/c++config.h\u003e æ˜¯ä¸¤åƒå¤šè¡Œçš„å®å®šä¹‰ï¼ \u003costream\u003e å’Œ \u003cistream\u003e ä¹Ÿéƒ½åªæ˜¯å¤§é‡çš„ç±»å‹å®šä¹‰å’Œå„ç§ç±»çš„å£°æ˜è€Œå·²ï¼Œè¿˜æœ‰æˆ‘çœ‹ä¸æ‡‚çš„å„ç§æ¨¡æ¿è¯­æ³•çš„è¿ç”¨ï¼Œè¿½æº¯åˆ° \u003cios_base.h\u003e æ‰ç»ˆäºå‘ç°å„ç§ç±»å’Œæ–¹æ³•çš„å®ç°ï¼Œä½†çœ‹èµ·æ¥éƒ½å¾ˆçŸ­ï¼Œè¿˜æœ‰å„ç§æ¨¡æ¿æŠ€æœ¯çš„è¿ç”¨ï¼Œæ„Ÿè§‰è¿˜æœ‰å¾ˆå¤šå®ç°æ²¡æœ‰æ”¾åœ¨è¿™ä¸ªåº“é‡Œé¢ã€‚æœ€åæ€»ä¹‹å°±æ˜¯è™½ç„¶æ ‡å‡†åº“ç”¨çš„æ¨¡æ¿ï¼Œä½†å®ƒç”¨å„ç§æŠ€æœ¯é¿å…äº†å£°æ˜å’Œå®šä¹‰æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚ã€‚ã€‚æˆ–è€…è¯´è®©æ–‡ä»¶å¯¼å…¥çš„æ—¶å€™ä¸ä¼šé‡å¤çš„å»å¯¼å…¥äº†ã€‚ ä»¥æˆ‘ç›®å‰çš„æ°´å¹³ï¼Œçœ‹æ ‡å‡†åº“å°±ç­‰äºæ˜¯çœ‹å¤©ä¹¦ã€‚ã€‚ã€‚ å¤§æ¦‚è¿™å°±æ˜¯C++åŠé€€çš„åŸå› ä¹‹ä¸€å§ï¼Œæ¨¡æ¿åº“ä¸ºäº†é˜²æ­¢é‡å¤å®šä¹‰ï¼Œä½¿å¾—å¯è¯»æ€§å˜å¾—æå·®ï¼Œåæ­£æˆ‘æ˜¯å®Œå…¨çœ‹ä¸æ‡‚ã€‚ã€‚ã€‚ ç›¸å¯¹è€Œè¨€ï¼ŒJavaçš„æºä»£ç ç›´æ¥å°±èƒ½ç®€å•ä¸Šæ‰‹çœ‹æ‡‚ï¼Œè€Œä¸”æ¯”è¯»æ–‡æ¡£è¿˜æ¸…æ™°ï¼Œåªèƒ½è¯´C++çš„ç—›ã€‚ã€‚ã€‚ ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:2:1","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++åº•å±‚åŸç†"],"content":"ä¸€äº›ç®€å•ä¸”å¸¸ç”¨çš„æ¨¡æ¿æŠ€æœ¯ template + å‡½æ•°å£°æ˜å°†æ¨¡æ¿æå‰å®ä¾‹åŒ–ä¸€ä»½ ç”±äºæˆ‘ä»¬templateå®šä¹‰åï¼Œåªæœ‰è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œæ‰ä¼šå®ä¾‹åŒ–å±•å¼€ä¸€ä»½ä»£ç ï¼Œä½†æˆ‘ä»¬ä¹Ÿèƒ½è®©ç¼–è¯‘å™¨å…ˆä¸ºæˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä»½ä»£ç ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿæ˜¯æœ€è¿‘æ‰æ¸…æ¥šæœ‰è¿™ä¸ªç”¨æ³•ï¼Œä»¥å‰ä»ç¢°åˆ°è¿‡ã€‚ template\u003ctypename T\u003e int MAX_VALUE(T _1, T _2){ if(_1\u003c_2) return _2; return _1; } using type = const char *; template int MAX_VALUE(type _1, type _2); type_traitsï¼ˆç±»å‹èƒå–æŠ€æœ¯ï¼‰ type_traitsæ˜¯ç¼–è¯‘æœŸå°±å»ç¡®å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œå¦‚ä½•ç¡®å®šçš„å‘¢ï¼Œè¿™ä¸ªåªéœ€è¦ç”¨åˆ°æ¨¡æ¿çš„ç‰¹åŒ–å±•å¼€è¿›è¡Œç‰¹å®šçš„æ ‡è®°å³å¯ã€‚ æ¯”å¦‚å†™ä¸€ä¸ªæ— ç¬¦å·æ•´å‹çš„ç¼–è¯‘æœŸç±»å‹åˆ¤æ–­å·¥å…·å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ï¼š åŸç†å°±æ˜¯åˆ©ç”¨çš„æ¨¡æ¿çš„å®ä¾‹åŒ–å±•å¼€ï¼Œå†åŠ ä¸Šç‰¹å®šçš„åç‰¹åŒ–ï¼Œæ¥å¯¹ç±»å†…å˜é‡çš„å€¼è¿›è¡Œä¸€ä¸ªåŒºåˆ†ï¼Œä¾¿å¯å®ç°ç±»å‹çš„åˆ¤æ–­äº†ã€‚ type_traits + static_assert()çš„è¿ç”¨ æˆ‘ä»¬éƒ½çŸ¥é“Cè¯­è¨€æœ‰ä¸ªassert()å®ï¼Œç”¨äºDEBUGæ¨¡å¼ä¸‹çš„æ–­è¨€ï¼ˆä¸æ¸…æ¥šçš„å¯ä»¥çœ‹çœ‹æˆ‘çš„ assertæºç è§£æï¼‰ï¼Œè€ŒC++ä¹Ÿæœ‰static_assert()è¿›è¡Œæ–­è¨€ï¼Œè¿™ä¸ªæ–­è¨€æ¯”assertå®è¦å¼ºå¤§å¾ˆå¤šã€‚ assertå’Œstatic_assertçš„å¯¹æ¯” å…±åŒç‚¹ï¼š éƒ½æ˜¯ç”¨äºæ–­è¨€ï¼Œæ»¡è¶³æ¡ä»¶åˆ™æ­£å¸¸è¿è¡Œï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚ ä¸åŒç‚¹ï¼š assertæ˜¯åœ¨è¿è¡Œæ—¶ä¸”ä¸ºDEBUGæ¨¡å¼ï¼Œå‡ºé”™åè°ƒç”¨å‡½æ•°æ¥è¿›è¡ŒæŠ¥é”™é€€å‡ºå¤„ç†ã€‚ static_assert()åˆ™æ˜¯åœ¨ç¨‹åºç¼–è¯‘æ—¶ï¼Œåœ¨ç¼–è¯‘æ—¶è¿›è¡Œåˆ¤æ–­ï¼Œå†æŠ›å‡ºç›¸åº”ä¿¡æ¯ã€‚ type_taritsçš„è¿ç”¨ å¦‚ä¸‹å›¾ï¼š é€šè¿‡type_traitå¯ä»¥å®ç°åªæ¥å—floatç±»å‹å’Œintç±»å‹ã€‚ ","date":"2022-03-05","objectID":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/:2:2","tags":["å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡"],"title":"å®å’Œæ¨¡æ¿çš„å¯¹æ¯”â€”â€”é¢„ç¼–è¯‘å’Œç¼–è¯‘çš„è¾ƒé‡","uri":"/posts/%E5%AE%8F%E5%92%8C%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AF%B9%E6%AF%94%E9%A2%84%E7%BC%96%E8%AF%91%E5%92%8C%E7%BC%96%E8%AF%91%E7%9A%84%E8%BE%83%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)","date":"2022-03-02","objectID":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/","tags":["1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)"],"title":"1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)","uri":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"åˆ›å»ºçº¿ç¨‹(thread)åˆ†æç¨‹åºæŠ¥é”™åŸå›  å¤´æ–‡ä»¶ï¼šinclude\u003cthread\u003e ","date":"2022-03-02","objectID":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/:1:0","tags":["1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)"],"title":"1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)","uri":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"ç†è§£çº¿ç¨‹çš„åˆ›å»ºè¿è¡Œè¿‡ç¨‹ ä½ å¯ä»¥è¯•ç€è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼Œä½ ä¼šå‘ç°ï¼Œä»–è‚¯å®šä¼šæŠ¥é”™ï¼ #include\u003cthread\u003e#include\u003ciostream\u003e void task(){ std::cout\u003c\u003c\"çº¿ç¨‹è¿è¡Œå¼€å§‹\" } int main(){ std::thread th1(task); } ä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Ÿ Javaé‡Œçš„å¤šçº¿ç¨‹ï¼Œåˆ›å»ºå¥½çº¿ç¨‹åï¼Œéœ€è¦è°ƒç”¨ run æˆ–è€… start æ–¹æ³•æ¥å¯åŠ¨è¿™ä¸ªçº¿ç¨‹ã€‚è€Œ C++ é‡Œçš„ thread ä¸éœ€è¦è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´æ¥ä¼ å€¼åˆ›å»ºè¿™ä¸ªçº¿ç¨‹çš„å†…å­˜åï¼Œä¼šè‡ªåŠ¨çš„å¼€å§‹è¿è¡Œè¿™ä¸ªçº¿ç¨‹ï¼ˆåº”è¯¥æ˜¯åˆ©ç”¨çš„RAIIç‰¹æ€§åœ¨æ„é€ å‡½æ•°é‡Œé¢è¿è¡Œäº†è¿™ä¸ªçº¿ç¨‹çš„ä»£ç ï¼‰ã€‚ ä½†ä¸Šé¢å¹¶ä¸æ˜¯æŠ¥é”™çš„ç†ç”±ï¼Œåœ¨Javaé‡Œé¢ï¼Œçº¿ç¨‹åˆ›å»ºä¹‹åä¼šè‡ªåŠ¨å’Œä¸»çº¿ç¨‹å½¢æˆè”ç³»ï¼Œstartæ–¹æ³•å¼€å§‹è¿è¡Œåï¼Œè¿™ä¸ªå­çº¿ç¨‹ä¼šå’Œä¸»çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œå¦‚æœå­çº¿ç¨‹åäºä¸»çº¿ç¨‹ç»“æŸï¼Œé‚£ä¹ˆå°±ä¼šé˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°å­çº¿ç¨‹ç»“æŸæ‰ç»ˆæ­¢æ•´ä¸ªç¨‹åºã€‚å½“ç„¶ä¹Ÿå¯ä»¥æŠŠå­çº¿ç¨‹é€šè¿‡ setDaemon(true) è®¾ç½®åï¼Œä½¿å¾—ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ç›´æ¥çš„å…³ç³»åˆ‡æ–­ï¼Œè¿™æ ·ä¸»çº¿ç¨‹å°±ä¸ä¼šå†ç­‰å¾…å­çº¿ç¨‹äº†ï¼Œè¿™æ ·å°±å½¢æˆäº†å®ˆæŠ¤çº¿ç¨‹ã€‚ å¥½äº†ï¼Œç°åœ¨å›å½’åˆ°ä¸Šé¢çš„C++ä»£ç ï¼Œè¯´è¯´ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿé”™è¯¯ã€‚ åŒæ ·ï¼Œåœ¨C++é‡Œåˆ›å»ºçº¿ç¨‹åï¼Œä¹Ÿä¼šå’Œä¸»çº¿ç¨‹äº§ç”Ÿè”ç³»ï¼Œä½†å®ƒå¹¶ä¸ä¼šåƒJavaä¸€æ ·ä¸»çº¿ç¨‹è‡ªåŠ¨çš„ç­‰å¾…å­çº¿ç¨‹ç»“æŸï¼Œè¿™ä¸ªç­‰å¾…ç»“æŸçš„è¿‡ç¨‹éœ€è¦ä½ è‡ªå·±å»è°ƒç”¨è¿™ä¸ªçº¿ç¨‹å¯¹åº”çš„æ–¹æ³•ã€‚å¦‚æœä¸å»è°ƒç”¨æ–¹æ³•ç­‰å¾…å­çº¿ç¨‹ç»“æŸï¼Œæˆ–è€…åˆ‡æ–­ä»–ä»¬ä¹‹é—´çš„è”ç³»ï¼Œé‚£ç¨‹åºå°±ä¼šCrashã€‚è¿™å°±æ˜¯æŠ¥é”™çš„åŸå› äº†ï¼ ","date":"2022-03-02","objectID":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/:1:1","tags":["1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)"],"title":"1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)","uri":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"è§£å†³æŠ¥é”™çš„æ–¹å¼ï¼šjoin()å’Œdetach ä¸ºäº†è§£å†³ä¸Šé¢çš„æŠ¥é”™é—®é¢˜æœ‰ä¸¤ç§æ–¹å¼è§£å†³ã€‚ ","date":"2022-03-02","objectID":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/:2:0","tags":["1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)"],"title":"1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)","uri":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"æ–¹æ³•ä¸€ï¼šè°ƒç”¨join()æ–¹æ³•è¿›è¡Œåˆå¹¶ ç”±äºä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ä¹‹é—´æœ‰è”ç³»ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦æ­£å¸¸æ‰§è¡Œå®Œè¿™ä¸ªç¨‹åºï¼Œåˆ™éœ€è¦ä¿è¯æ•´ä¸ªçº¿ç¨‹ä¸€å¹¶ç»“æŸæˆ–è€…æ˜¯åˆ‡æ–­è”ç³»ã€‚ join() æ–¹æ³•çš„è°ƒç”¨å°±æ˜¯ç­‰å¾…å­çº¿ç¨‹å’Œä¸»çº¿ç¨‹æ±‡èšï¼Œäº§ç”Ÿçš„æ•ˆæœå°±æ˜¯ä¸»çº¿ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°å­çº¿ç¨‹ç»“æŸè¿è¡Œï¼Œé˜»å¡åœæ­¢ã€‚ joinåœ¨è¿™é‡Œæ˜¯æ±‡èšæ±‡é›†ä¹‹æ„ï¼Œä½ å¯ä»¥æƒ³è±¡æœ‰å¤šæ ¹çº¿ï¼Œæœ€ç»ˆç»“æŸçš„æ—¶å€™è¿™å‡ æ ¹çº¿éœ€è¦æ±‡èšåˆ°ä¸€èµ·ï¼Œç„¶åå…¨éƒ¨çš„çº¿ç¨‹å°±ç»“æŸäº†ï¼Œæ•´ä¸ªç¨‹åºæ­£å¸¸é€€å‡ºï¼ ä»£ç å¦‚ä¸‹ï¼šå°±ä»…ä»…åœ¨æœ€ååŠ å…¥äº†ä¸€è¡Œjoinä»£ç ï¼Œç¨‹åºbugè¢«è§£å†³ï¼ #include\u003cthread\u003e#include\u003ciostream\u003e void task(){ std::cout\u003c\u003c\"çº¿ç¨‹è¿è¡Œå¼€å§‹\"; } int main(){ std::thread th1(task); th1.join(); } ","date":"2022-03-02","objectID":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/:2:1","tags":["1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)"],"title":"1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)","uri":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"æ–¹æ³•äºŒï¼šè°ƒç”¨detach()æ–¹æ³•åˆ†ç¦»çº¿ç¨‹è”ç³» å‰é¢ä¹Ÿè®²åˆ°ï¼Œç”±äºä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ä¹‹é—´çš„è”ç³»ï¼Œå¯¼è‡´ä¸»çº¿ç¨‹éœ€è¦ç…§é¡¾å­çº¿ç¨‹ã€‚é‚£ä¹ˆdetachæ–¹æ³•çš„è°ƒç”¨å°±æ˜¯åˆ‡æ–­è¿™ä¸ªè”ç³»ã€‚è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•åï¼Œä¸»çº¿ç¨‹ä¸ä¼šå†ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œè€Œæ˜¯ç›´æ¥æ­£å¸¸ç»“æŸï¼Œè€Œå­çº¿ç¨‹æ˜¯å¦æ‰§è¡Œå®Œæˆå’Œæˆ‘ä¸»çº¿ç¨‹æ²¡æœ‰ä»»ä½•å…³ç³»äº†ã€‚ è°ƒç”¨è¿™ä¸ªæ–¹æ³•åçš„çº¿ç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºå®ˆæŠ¤çº¿ç¨‹äº†ã€‚è¿™ç§æƒ…å†µä¸‹å†…å­˜å®‰å…¨è¦å¼•èµ·é‡è§†ï¼Œå¦‚æœå­çº¿ç¨‹ç”¨åˆ°äº†ä¸»çº¿ç¨‹çš„èµ„æºï¼Œè¿™ä¸ªæƒ…å†µä¸‹å°†ä¼šå¯¼è‡´ æŒ‡é’ˆæ‚¬ç©º è¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸¥é‡çš„å†…å­˜å®‰å…¨é—®é¢˜ï¼ ä»£ç å¦‚ä¸‹ï¼š #include\u003cthread\u003e#include\u003ciostream\u003e void task(){ std::cout\u003c\u003c\"çº¿ç¨‹è¿è¡Œå¼€å§‹\"; } int main(){ std::thread th1(task); th1.detach(); } ","date":"2022-03-02","objectID":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/:2:2","tags":["1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)"],"title":"1.1-åˆ›å»ºçº¿ç¨‹(thread)ã€çº¿ç¨‹çš„æ±‡èš(join)ã€çº¿ç¨‹çš„åˆ†ç¦»(detach)","uri":"/posts/1.1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8Bthread%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%B1%87%E8%81%9Ajoin%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%86%E7%A6%BBdetach/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"èµ„æºç«äº‰å¼•å‘çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ æœ‰å¦‚ä¸‹çš„ä»£ç ï¼š #include\u003cthread\u003e#include\u003ciostream\u003eint globalVariable = 0; void task(){ for (int i = 0; i \u003c 1000000; ++i) { ++globalVariable; } } int main(){ std::thread th1(task); std::thread th2(task); th1.join(); th2.join(); std::cout\u003c\u003cglobalVariable; } æˆ‘ä»¬å¼€äº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€å…±æ‰§è¡Œäº†ä¸¤æ¬¡ task ï¼ŒæŒ‰ç†æ¥è®² globalVariable å˜é‡åº”è¯¥è¢«åŠ åˆ° 2000000 ã€‚äº‹å®ä¸Šï¼Œä½ å¯è·‘ä»¥ä¸Šä»£ç è¿›è¡ŒéªŒè¯ï¼Œè‚¯å®šæ˜¯è¾¾ä¸åˆ° 2000000 çš„ï¼ è¿™åˆæ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿ èµ„æºç«äº‰çš„äº§ç”Ÿï¼š åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œç”±äºç±»ä¼¼äºå¹¶è¡Œçš„é€»è¾‘å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œåˆ° th1 è°ƒç”¨ task å‡½æ•°ï¼Œä¸”æ­£åœ¨ä¸º globalVariable å˜é‡åšåŠ æ³•æ“ä½œçš„æ—¶å€™ï¼Œå¯èƒ½æ­¤æ—¶ th2 ä¹Ÿæ­£åœ¨ä¸ºå®ƒåšåŠ æ³•æ“ä½œï¼Œçº¿ç¨‹ä¸­ä¹Ÿæ˜¯å­˜åœ¨å¯¹åº”çš„å·¥ä½œå†…å­˜ï¼Œä¸æ˜¯ç›´æ¥æ›´æ”¹åŸå†…å­˜çš„å€¼ï¼Œè€Œæ˜¯ç»è¿‡ è¯»å–-\u003eæ‰§è¡Œ-\u003eå†™å…¥ çš„è¿‡ç¨‹ã€‚æ•…æ­¤æ—¶å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œè¯»å–å¹¶å†™å…¥ï¼Œé‚£ä¹ˆå®é™…ä¸Š globalVariable åªåŠ äº†1ï¼Œè€Œä¸æ˜¯2ã€‚ æ•…ç”±äºèµ„æºç«äº‰çš„å­˜åœ¨ï¼Œå¯¼è‡´ç»“æœå°äºæ­£ç¡®çš„ç»“æœï¼ ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:1:0","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"å¦‚ä½•è§£å†³èµ„æºç«äº‰é—®é¢˜ï¼Ÿ æ­£å¦‚æ ‡é¢˜æ‰€ç¤ºï¼Œå¦‚ä½•è§£å†³èµ„æºç«äº‰é—®é¢˜å‘¢ï¼Ÿ æˆ‘ä»¬ç»è¿‡å‰é¢çš„åˆ†æï¼Œå¯çŸ¥ï¼Œèµ„æºç«äº‰é—®é¢˜æ˜¯å› ä¸ºå¹¶è¡Œé€»è¾‘çš„å­˜åœ¨ï¼Œæ‰°ä¹±äº†åŸæœ¬éœ€è¦çš„æœ‰åºé€»è¾‘ã€‚æ€ä¹ˆç†è§£å‘¢ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å¤„ç†åŒä¸€ä¸ªå˜é‡æ—¶æ˜¯ä¸å®‰å…¨çš„ï¼Œæˆ‘ä»¬åªè¦è®©åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†è¿™ä¸ªå˜é‡å³å¯ã€‚ ä¸Šé¢æ‰€è¯´çš„æ­£æ˜¯å¤šçº¿ç¨‹çš„ åŸå­æ€§ï¼Œæ‰§è¡Œä¸€ä¸ªæ“ä½œçš„æ—¶å€™ä¸ä¼šè¢«å…¶ä»–çš„çº¿ç¨‹æ‰“æ–­ï¼Œæˆ–è€…è¯´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚è€Œä¹‹å‰çš„ä»£ç ä¸­ ++globalVarible è¿™å¥æ­£éœ€è¦è¿™æ ·çš„åŸå­æ€§æ“ä½œï¼ è€ŒC++é‡Œé¢ä¹Ÿæœ‰ä¸¤ç±»æ–¹æ³•å»å®ç°è¿™æ ·çš„æ•ˆæœã€‚ ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:2:0","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"æ³•ä¸€ï¼šåŠ äº’æ–¥é”mutexï¼ˆæ€§èƒ½è¾ƒä½ï¼‰ ä»£ç å¦‚ä¸‹ï¼š #include\u003cthread\u003e#include\u003ciostream\u003e int globalVariable = 0; std::mutex mtx; void task(){ for (int i = 0; i \u003c 1000000; ++i) { mtx.lock(); //ä¸Šé” ++globalVariable; mtx.unlock();//è§£é” } } int main(){ std::thread th1(task); std::thread th2(task); th1.join(); th2.join(); std::cout\u003c\u003cglobalVariable; } è¿™ä¸‹ç»ˆäºå¯ä»¥æ­£ç¡®çš„å¾—åˆ° 2000000 è¿™ä¸ªç»“æœäº†ã€‚ æˆ‘ä»¬æ¥è®²è®²äº’æ–¥é‡è§£é”å’Œä¸Šé”çš„åŸç†ï¼š lock()ï¼šå½¢è±¡çš„æè¿°å°±æ˜¯ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šå»äº’æ–¥é‡é‡Œé¢æ‹¿å–è¿™æŠŠé”ï¼Œå¦‚æœè¿™ä¸ªé”å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œåˆ™é˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹æŠŠè¿™æŠŠé”é‡Šæ”¾ï¼Œæ¯ä¸ªäº’æ–¥é‡éƒ½æ˜¯ä¸€æŠŠç›¸åŒçš„é”ã€‚ unlock()ï¼šå­—é¢æ„æ€ï¼ŒæŠŠæˆ‘ç°åœ¨æŒæœ‰çš„é”ç»™é‡Šæ”¾æ‰ï¼Œè¿™æ ·å°±å¯ä»¥è®©å…¶ä»–å› ä¸ºæ²¡æœ‰æ‹¿åˆ°é”çš„çº¿ç¨‹åœæ­¢é˜»å¡ï¼Œå¼€å§‹äº‰æŠ¢è¿™æŠŠé”ï¼Œè°æŠ¢åˆ°äº†è°å°±èƒ½å¾—åˆ°ä¸‹ä¸€ä¸ªCPUçš„æ—¶é—´ç‰‡ã€‚ æœ€ç»ˆçš„ç»“æœå°±æ˜¯å“ªä¸ªçº¿ç¨‹å…ˆæ‹¿ä¸‹è¿™æŠŠé”ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹å†è¿è¡Œåˆ°è¿™å—ä»£ç çš„ä½ç½®å°±ä¼šè¢«é˜»å¡ï¼Œè¿™å°±ä½¿å¾—è¢«ä¸Šé”çš„åŒºåŸŸæ˜¯å…·æœ‰åŸå­æ€§çš„ï¼è¿™æ ·å°±ä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨ã€‚ ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:2:1","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"æ³•äºŒï¼šè½¬ç”¨åŸå­å˜é‡ï¼ˆæ•ˆç‡æ›´é«˜ï¼‰ C++ä¸­å¯ç”¨æ¨¡æ¿ç±»ï¼ŒæŠŠç±»å‹è½¬ä¸ºåŸå­ç±»å‹ï¼ŒåŸå­å˜é‡çš„å®ç°æ–¹å¼å®é™…ä¸Šå’Œä¸Šé”çš„è¿‡ç¨‹æ˜¯ç±»ä¼¼ï¼Œä½†å¯èƒ½ç”±äºä¸åŒç¼–è¯‘å™¨çš„å®ç°æ–¹å¼ï¼Œå¯èƒ½ä¼šè°ƒç”¨è®¡ç®—æœºçš„ç¡¬ä»¶å»ä¼˜åŒ–è¿™ä¸ªåŠ é”è§£é”çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥æ•ˆç‡ä¼šæ›´é«˜ã€‚ å¦‚ä¸‹ä»£ç ï¼š(è¿™æ—¶å°±ä¸éœ€è¦åŠ è§£é”äº†ï¼Œå˜é‡æœ¬èº«å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„) #include\u003cthread\u003e#include\u003ciostream\u003e std::atomic\u003cint\u003e globalVariable = 0; void task(){ for (int i = 0; i \u003c 1000000; ++i) { ++globalVariable; } } int main(){ std::thread th1(task); std::thread th2(task); th1.join(); th2.join(); std::cout\u003c\u003cglobalVariable; } ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:2:2","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"ä¸‰ä¸ªå¸¸ç”¨çš„äº’æ–¥é‡è£…é¥°å™¨ ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:3:0","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"std::lock_guard (C++11) è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„äº’æ–¥é‡è£…é¥°å™¨ï¼Œå°±æ˜¯ç®€å•çš„åˆ©ç”¨C++æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„RAIIç‰¹æ€§ï¼Œåœ¨æ„é€ çš„æ—¶å€™ä¸Šé”å’Œææ„çš„æ—¶å€™è§£é”ï¼Œå¹¶ä¸ä¼šç»´æŒä¼ å…¥çš„äº’æ–¥å™¨çŠ¶æ€ã€‚ æ•…å‰é¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥æ”¹ä½œï¼š #include\u003cthread\u003e#include\u003ciostream\u003e int globalVariable = 0; std::mutex mtx; void task(){ for (int i = 0; i \u003c 1000000; ++i) { std::lock_guard\u003cstd::mutex\u003e lock(mtx); ++globalVariable; } } int main(){ std::thread th1(task); std::thread th2(task); th1.join(); th2.join(); std::cout\u003c\u003cglobalVariable; } std::lock_guard è¿˜æœ‰ç¬¬äºŒä¸ªå¯é€‰å‚æ•°ç”¨äºå‘ŠçŸ¥å®ƒæ­¤ä¼ å…¥çš„äº’æ–¥å™¨å·²ç»è¢«é”ä¸Šï¼Œä½ æ— éœ€å†æ¬¡ä¸Šé”ï¼Œè¿™ç§ä¸»è¦ç”¨åœ¨ä¸Šé”è¿‡ç¨‹è‡ªå·±å®Œæˆçš„æƒ…å†µä¸‹ã€‚ä¾‹å¦‚å¾ˆå¤šæƒ…å†µæˆ‘ä»¬ä¸ºäº†é˜²æ­¢äº§ç”Ÿæ­»é”ï¼Œéœ€è¦è°ƒç”¨ std::lock() å‡½æ•°è¿›è¡Œç»Ÿä¸€çš„ä¸Šé”ã€‚ æ­»é”çš„äº§ç”Ÿ å¦‚ä¸‹ä»£ç ï¼š #include\u003cthread\u003e#include\u003ciostream\u003e#include \u003cmutex\u003e int globalVariable = 0; std::mutex mtx1; std::mutex mtx2; void task1(){ mtx1.lock(); for (int i = 0; i \u003c 10; ++i) { std::cout\u003c\u003c\"test2\"\u003c\u003c'\\n'; } mtx2.lock(); mtx1.unlock(); mtx2.unlock(); } void task2(){ mtx2.lock(); mtx1.lock(); mtx2.unlock(); mtx1.unlock(); } int main(){ std::thread th1(task1); std::thread th2(task2); th1.join(); th2.join(); std::cout\u003c\u003cglobalVariable; } ä»¥ä¸Šä»£ç çš„è¿è¡Œç»“æœå¤§æ¦‚ç‡æ˜¯ç”±äºæ­»é”äº§ç”Ÿçš„ç¨‹åºé˜»å¡ã€‚ ä½ æƒ³æƒ³ä¸€ä¸ªè¿‡ç¨‹ï¼šå¦‚æœ mtx1 åœ¨ th1 çº¿ç¨‹å…ˆè¢«ä¸Šé”ï¼Œè€Œä¸æ­¤åŒæ—¶ mtx2 åœ¨ th2 çº¿ç¨‹è¢«ä¸Šé”ï¼Œåœ¨ th1 çº¿ç¨‹è¿è¡Œå®Œ for å¾ªç¯ä»£ç åï¼Œé‡åˆ°å°† mtx2 ä¸Šé”çš„ä»£ç åï¼Œç”±äºæ­¤æ—¶ th2 çº¿ç¨‹æ­£æŒæœ‰æ­¤é”ï¼Œè€Œ th1 ä¹Ÿæ­£æŒæœ‰ mtx1 è¿™æ ·çš„äº’ç›¸æŒæœ‰å¯¹æ–¹æ‰€éœ€çš„é”çš„æ—¶å€™ï¼Œå°†ä¼šå‘ç”Ÿæ­»é”ç°è±¡ï¼Œå³ä¸¤ä¸ªçº¿ç¨‹éƒ½è¢«æ°¸è¿œçš„é˜»å¡äº†ï¼ åˆ©ç”¨std::lockæ‰¹é‡ä¸Šé”é˜²æ­¢æ­»é”å‘ç”Ÿ ä»¥ä¸Šçš„æ­»é”å‘ç”Ÿçš„åŸå› å°±æ˜¯å› ä¸ºä¸Šé”çš„é¡ºåºæ‰€å¯¼è‡´çš„ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–å¤šä¸ªçº¿ç¨‹ä¸Šå¤šä¸ªé”æ—¶é‡‡ç”¨ç›¸åŒçš„é¡ºåºï¼Œä¾¿å¯é˜²æ­¢æ­»é”çš„å‘ç”Ÿï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æ ‡å‡†åº“æä¾›çš„ std::lock å‡½æ•°æ‰¹é‡ä¸Šé”ï¼Œæ¥é˜²æ­¢ä¸Šé”é¡ºåºå¯¼è‡´çš„æ­»é”ï¼ å¦‚ä¸‹ä»£ç ï¼šï¼ˆlockå‡½æ•°æ‰¹é‡ä¸Šé”æ˜¯å…·æœ‰åŸå­æ€§çš„ï¼Œä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­ï¼‰ #include\u003cthread\u003e#include\u003ciostream\u003e#include \u003cmutex\u003e std::mutex mtx1; std::mutex mtx2; void task1(){ std::lock(mtx1,mtx2); std::lock_guard\u003cstd::mutex\u003e _1(mtx1,std::adopt_lock); //adopt_lockä»£è¡¨ä¸€ä¸ªæ ‡å¿—ï¼Œè¡¨ç¤ºå·²ç»è¢«ä¸Šé”äº†ï¼Œåˆ«å†è°ƒç”¨lockæ–¹æ³•äº† std::lock_guard\u003cstd::mutex\u003e _2(mtx2,std::adopt_lock); for (int i = 0; i \u003c 5; ++i) { std::cout\u003c\u003c\"test1\\n\"; } } void task2(){ std::lock(mtx1,mtx2); std::lock_guard\u003cstd::mutex\u003e _1(mtx1,std::adopt_lock); //adopt_lockä»£è¡¨ä¸€ä¸ªæ ‡å¿—ï¼Œè¡¨ç¤ºå·²ç»è¢«ä¸Šé”äº†ï¼Œåˆ«å†è°ƒç”¨lockæ–¹æ³•äº† std::lock_guard\u003cstd::mutex\u003e _2(mtx2,std::adopt_lock); for (int i = 0; i \u003c 5; ++i) { std::cout\u003c\u003c\"test2\\n\"; } } int main(){ std::thread th1(task1); std::thread th2(task2); th1.join(); th2.join(); } ä»£ç æ‰§è¡Œç»“æœï¼š ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:3:1","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"std::unique_lock (C++11) å’Œ lock_guard ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨çš„ RAII æ‰‹æ³•è¿›è¡Œä¸Šé”å’Œè§£é”ã€‚ä½†å®ƒè¿˜ä¼šç»´æŒäº’æ–¥é‡çš„çŠ¶æ€ï¼Œä½ å¯ä»¥é€šè¿‡ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°å‘Šè¯‰å®ƒçŠ¶æ€ã€‚ä¸”å®ƒæ˜¯æ”¯æŒæ— å‚æ„é€ çš„ã€‚ æ³¨æ„ï¼šè¿™ä¸‰ä¸ªè£…é¥°å™¨åªæœ‰ unique_lock å«æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°ç®€åŒ–åˆå§‹åŒ–è¿‡ç¨‹ã€‚ä»–ä»¬éƒ½æ²¡æœ‰å¤åˆ¶æ„é€ å™¨ï¼ å¦‚ï¼š std::unique_lock\u003cstd::mutex\u003e lock(mtx2,std::defer_lock); ä¼ å…¥çš„ defer_lock è¡¨ç¤ºä¸Šé”è¿‡ç¨‹æš‚æ—¶ä¸è°ƒç”¨ï¼Œå°†åœ¨åé¢ç”±æˆ‘è‡ªå·±ä¸Šé”ã€‚ç»Ÿæ ·ä¹Ÿæ”¯æŒ adopt_lock é€‰é¡¹è¡¨ç¤ºå·²ç»ä¸Šäº†é”ã€‚ ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:3:2","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["C++å¤šçº¿ç¨‹"],"content":"std::scoped_lockï¼ˆC++17ï¼‰ è¿™ä¸ªè£…é¥°å™¨ï¼Œæ”¯æŒåŒæ—¶è£…é¥°å¤šä¸ªäº’æ–¥é‡ï¼Œä¸”ä¹Ÿæ˜¯é€šè¿‡ RAII æ‰‹æ³•è¿›è¡Œè§£é”å’Œä¸Šé”è¿‡ç¨‹ã€‚ åˆ›å»º scoped_lock å¯¹è±¡æ—¶ï¼Œå®ƒè¯•å›¾å–å¾—ç»™å®šäº’æ–¥çš„æ‰€æœ‰æƒã€‚æ§åˆ¶ç¦»å¼€åˆ›å»º scoped_lock å¯¹è±¡çš„ä½œç”¨åŸŸæ—¶ï¼Œææ„ scoped_lock å¹¶ä»¥é€†åºé‡Šæ”¾äº’æ–¥ã€‚è‹¥ç»™å‡ºæ•°ä¸ªäº’æ–¥ï¼Œåˆ™ä½¿ç”¨å…æ­»é”ç®—æ³•ï¼Œå¦‚åŒä»¥ std::lock ã€‚ scoped_lock ç±»ä¸å¯å¤åˆ¶ã€‚ å¦‚ä¸‹ä»£ç ï¼š std::scoped_lock lock(e1.m, e2.m); // ç­‰ä»·ä»£ç  1 ï¼ˆç”¨ std::lock å’Œ std::lock_guard ï¼‰ // std::lock(e1.m, e2.m); // std::lock_guard\u003cstd::mutex\u003e lk1(e1.m, std::adopt_lock); // std::lock_guard\u003cstd::mutex\u003e lk2(e2.m, std::adopt_lock); // ç­‰ä»·ä»£ç  2 ï¼ˆè‹¥éœ€è¦ unique_lock ï¼Œä¾‹å¦‚å¯¹äºæ¡ä»¶å˜é‡ï¼‰ // std::unique_lock\u003cstd::mutex\u003e lk1(e1.m, std::defer_lock); // std::unique_lock\u003cstd::mutex\u003e lk2(e2.m, std::defer_lock); // std::lock(lk1, lk2); ","date":"2022-03-02","objectID":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/:3:3","tags":["1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡(é”)å’ŒåŸå­å˜é‡"],"title":"1.2-çº¿ç¨‹å®‰å…¨çš„ä¿è¯â€”â€”äº’æ–¥é‡mutex(é”)å’ŒåŸå­å˜é‡atomic","uri":"/posts/1.2-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E4%BF%9D%E8%AF%81%E4%BA%92%E6%96%A5%E9%87%8F%E9%94%81%E5%92%8C%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp","date":"2022-02-26","objectID":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/","tags":["å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp"],"title":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp","uri":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-26","objectID":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/:1:0","tags":["å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp"],"title":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp","uri":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"é¢˜ç›®è§£æ ","date":"2022-02-26","objectID":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/:2:0","tags":["å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp"],"title":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp","uri":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"æ³•ä¸€ï¼šæš´åŠ›æšä¸¾ æ­¤é¢˜ç”±äºæ˜¯ç®€å•é¢˜ï¼Œæ‰€ä»¥ç›´æ¥å¯ä»¥æš´åŠ›æšä¸¾ã€‚æš´åŠ›æšä¸¾çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥è€ƒè™‘ä¼˜åŒ–ä¸€ä¸‹ï¼Œæ¯”å¦‚å¤–å±‚æšä¸¾ $nums[i]$ çš„æ—¶å€™ï¼Œå†…å±‚ç›´æ¥æ‰¾å³è¾¹çš„æœ€å¤§å€¼ã€‚ ä»£ç å¦‚ä¸‹ï¼š class Solution { public: int maximumDifference(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); int ret = INT_MIN,mx; for(int i=0;i\u003cn;i++){ mx = *max_element(nums.begin()+i,nums.begin()+n); if(mx\u003enums[i]) ret = max(ret,mx-nums[i]); } if(ret==INT_MIN)return -1; return ret; } }; ","date":"2022-02-26","objectID":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/:2:1","tags":["å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp"],"title":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp","uri":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"æ³•äºŒï¼šdpä¼˜åŒ– å¾ˆæ˜æ˜¾ï¼Œæ—¶é—´å¤æ‚åº¦å®é™…ä¸Šè¿˜æ˜¯ $O(n^2)$ ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ¨æ€è§„åˆ’ï¼Œæå‰æ±‚å‡º $nums[i]$ ä¹‹å‰çš„æœ€å°å€¼ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é€šè¿‡ $nums[i]-dp_{min}[i-1]$ æ±‚å¾—ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦è¢«ä¼˜åŒ–ä¸ºäº† $O(n)$ ï¼Œä½†ç©ºé—´å¤æ‚åº¦ä¹Ÿä¸Šå‡åˆ°äº† $O(n)$ ã€‚ ä»£ç å¦‚ä¸‹ï¼š class Solution { public: const int maxn = 0x3f3f3f3f; int maximumDifference(vector\u003cint\u003e\u0026 nums) { //è®¡ç®—dpå€¼ int n = nums.size(); int dp_min[n]; memset(dp_min,0x3f,sizeof(dp_min)); dp_min[0] = nums[0]; int ret = INT_MIN; for(int i=1;i\u003cn;i++) dp_min[i] = min(dp_min[i-1],nums[i]); //å¾—å‡ºç­”æ¡ˆ for(int i=0;i\u003cn;i++){ if(i\u003e0\u0026\u0026nums[i]\u003edp_min[i-1]){ ret = max(ret,nums[i]-dp_min[i-1]); } } if(ret==INT_MIN)return -1; return ret; } }; ","date":"2022-02-26","objectID":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/:2:2","tags":["å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp"],"title":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp","uri":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"æ³•ä¸‰ï¼šè¿›ä¸€æ­¥ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ æˆ‘ä»¬åœ¨ $dp$ æ±‚è§£çš„æ—¶å€™å‘ç°ï¼Œæˆ‘ä»¬è½¬ç§»çš„çŠ¶æ€ä¾èµ–å¹¶æœªè·¨ç»´åº¦ï¼Œè€Œä»…ä»…åªå’Œä¸Šä¸€ä¸ªçŠ¶æ€ $dp[i-1]$ ç›¸å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬å®é™…ä¸Šåªéœ€è¦ä¸€ä¸ªå˜é‡æ¥è®°å½• $nums[i]$ å‰çš„æœ€å°å€¼ï¼Œæ•…æŠŠæ‰€æœ‰çš„å¤„ç†æ”¾åˆ°ä¸€ä¸ªå¾ªç¯ä¸­å®ç°å³å¯ã€‚ ä»£ç å¦‚ä¸‹ï¼š class Solution { public: int maximumDifference(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); int ret = -1, premin = nums[0]; for (int i = 1; i \u003c n; ++i) { if (nums[i] \u003e premin) { ret = max(ret, nums[i] - premin); } else { premin = nums[i]; } } return ret; } }; ","date":"2022-02-26","objectID":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/:2:3","tags":["å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp"],"title":"å¢é‡å…ƒç´ ä¹‹é—´çš„æœ€å¤§å·®å€¼â€”â€”å‰ç¼€dp","uri":"/posts/%E5%A2%9E%E9%87%8F%E5%85%83%E7%B4%A0%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%B7%AE%E5%80%BC%E5%89%8D%E7%BC%80dp/"},{"categories":["C++å®æˆ˜"],"content":"bitsetä¸åŸƒæ°ç­›","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"bitset ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:0:0","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"ä»‹ç» std::bitset æ˜¯æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªå­˜å‚¨ 0/1 çš„å¤§å°ä¸å¯å˜å®¹å™¨ã€‚ä¸¥æ ¼æ¥è®²ï¼Œå®ƒå¹¶ä¸å±äº STLã€‚ bitset å¹¶ä¸å±äº STLï¼Œè€Œæ˜¯ä¸€ç§æ ‡å‡†åº“ä¸­çš„ â€œSpecial Containerâ€ã€‚äº‹å®ä¸Šï¼Œå®ƒä½œä¸ºä¸€ç§å®¹å™¨ï¼Œä¹Ÿå¹¶ä¸æ»¡è¶³ STL å®¹å™¨çš„è¦æ±‚ã€‚è¯´å®ƒæ˜¯é€‚é…å™¨ï¼Œå®ƒä¹Ÿå¹¶ä¸ä¾èµ–äºå…¶å®ƒ STL å®¹å™¨ä½œä¸ºåº•å±‚å®ç°ã€‚â€”â€”æ‘˜è‡ªã€ŠThe C++ Standard Library 2nd Editionã€‹ ç”±äºå†…å­˜åœ°å€æ˜¯æŒ‰å­—èŠ‚å³ byte å¯»å€ï¼Œè€Œéæ¯”ç‰¹ bitï¼Œä¸€ä¸ª bool ç±»å‹çš„å˜é‡ï¼Œè™½ç„¶åªèƒ½è¡¨ç¤º 0/1, ä½†æ˜¯ä¹Ÿå äº† 1 byte çš„å†…å­˜ã€‚ bitset å°±æ˜¯é€šè¿‡å›ºå®šçš„ä¼˜åŒ–ï¼Œä½¿å¾—ä¸€ä¸ªå­—èŠ‚çš„å…«ä¸ªæ¯”ç‰¹èƒ½åˆ†åˆ«å‚¨å­˜ 8 ä½çš„ 0/1ã€‚ å¯¹äºä¸€ä¸ª 4 å­—èŠ‚çš„ int å˜é‡ï¼Œåœ¨åªå­˜ 0/1 çš„æ„ä¹‰ä¸‹ï¼Œbitset å ç”¨ç©ºé—´åªæ˜¯å…¶ ï¼Œè®¡ç®—ä¸€äº›ä¿¡æ¯æ—¶ï¼Œæ‰€éœ€æ—¶é—´ä¹Ÿæ˜¯å…¶ ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹é€šè¿‡ bitset å¯ä»¥ä¼˜åŒ–ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚è‡³äºå…¶ä¼˜åŒ–çš„æ˜¯å¤æ‚åº¦è¿˜æ˜¯å¸¸æ•°ï¼Œè¦çœ‹è®¡ç®—å¤æ‚åº¦çš„è§’åº¦ã€‚ä¸€èˆ¬ bitset çš„å¤æ‚åº¦æœ‰ä»¥ä¸‹å‡ ç§è®°æ³•ï¼šï¼ˆè®¾åŸå¤æ‚åº¦ä¸º ï¼‰ $O(n)$ï¼Œè¿™ç§è®°æ³•è®¤ä¸º bitset å®Œå…¨æ²¡æœ‰ä¼˜åŒ–å¤æ‚åº¦ã€‚ $O(n/32)$ï¼Œè¿™ç§è®°æ³•ä¸å¤ªä¸¥è°¨ï¼ˆå¤æ‚åº¦ä¸­ä¸åº”å‡ºç°å¸¸æ•°ï¼‰ï¼Œä½†ä½“ç°äº† bitset èƒ½å°†æ‰€éœ€æ—¶é—´ä¼˜åŒ–è‡³ $1/32$ã€‚ $O(n/w)$ï¼Œå…¶ä¸­ $w=32$ï¼ˆè®¡ç®—æœºçš„ä½æ•°ï¼‰ï¼Œè¿™ç§è®°æ³•è¾ƒä¸ºæ™®éæ¥å—ã€‚ $O(n/logw)$ï¼Œå…¶ä¸­ $w$ ä¸ºè®¡ç®—æœºä¸€ä¸ªæ•´å‹å˜é‡çš„å¤§å°ã€‚ å½“ç„¶ï¼Œvector çš„ä¸€ä¸ªç‰¹åŒ– vector\u003cbool\u003e çš„å‚¨å­˜æ–¹å¼åŒ bitset ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºå…¶æ”¯æŒåŠ¨æ€å¼€ç©ºé—´ï¼Œbitset åˆ™å’Œæˆ‘ä»¬ä¸€èˆ¬çš„é™æ€æ•°ç»„ä¸€æ ·ï¼Œæ˜¯åœ¨ç¼–è¯‘æ—¶å°±å¼€å¥½äº†çš„ã€‚ ç„¶è€Œï¼Œbitset æœ‰ä¸€äº›å¥½ç”¨çš„åº“å‡½æ•°ï¼Œä¸ä»…æ–¹ä¾¿ï¼Œè€Œä¸”æœ‰æ—¶å¯ä»¥é¿å…ä½¿ç”¨ for å¾ªç¯è€Œæ²¡æœ‰å®è´¨çš„é€Ÿåº¦ä¼˜åŒ–ã€‚å› æ­¤ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ vector\u003cbool\u003eã€‚ ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:1:0","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"ä½¿ç”¨Â¶ ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:2:0","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"å¤´æ–‡ä»¶Â¶ #include \u003cbitset\u003e ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:2:1","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"æŒ‡å®šå¤§å°Â¶ bitset\u003c1000\u003e bs; // a bitset with 1000 bits ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:2:2","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"æ„é€ å‡½æ•°Â¶ bitset(): æ¯ä¸€ä½éƒ½æ˜¯ falseã€‚ bitset(unsigned long val): è®¾ä¸º val çš„äºŒè¿›åˆ¶å½¢å¼ã€‚ bitset(const string\u0026 str): è®¾ä¸º ä¸² strã€‚ ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:2:3","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"è¿ç®—ç¬¦Â¶ operator []: è®¿é—®å…¶ç‰¹å®šçš„ä¸€ä½ã€‚ operator ==/!=: æ¯”è¾ƒä¸¤ä¸ª bitset å†…å®¹æ˜¯å¦å®Œå…¨ä¸€æ ·ã€‚ operator \u0026/\u0026=/|/| =/^/^=/~: è¿›è¡ŒæŒ‰ä½ä¸/æˆ–/å¼‚æˆ–/å–åæ“ä½œã€‚bitset åªèƒ½ä¸ bitset è¿›è¡Œä½è¿ç®—ï¼Œè‹¥è¦å’Œæ•´å‹è¿›è¡Œä½è¿ç®—ï¼Œè¦å…ˆå°†æ•´å‹è½¬æ¢ä¸º bitsetã€‚ operator \u003c\u003e/\u003c\u003c=/\u003e\u003e=: è¿›è¡ŒäºŒè¿›åˆ¶å·¦ç§»/å³ç§»ã€‚ operator \u003c\u003e: æµè¿ç®—ç¬¦ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡ cin/cout è¿›è¡Œè¾“å…¥è¾“å‡ºã€‚ ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:2:4","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"æˆå‘˜å‡½æ•°Â¶ count(): è¿”å› true çš„æ•°é‡ã€‚ size(): è¿”å› bitset çš„å¤§å°ã€‚ test(pos): å®ƒå’Œ vector ä¸­çš„ at() çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œå’Œ [] è¿ç®—ç¬¦çš„åŒºåˆ«å°±æ˜¯è¶Šç•Œæ£€æŸ¥ã€‚ any(): è‹¥å­˜åœ¨æŸä¸€ä½æ˜¯ true åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ none(): è‹¥æ‰€æœ‰ä½éƒ½æ˜¯ false åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ all():C++11ï¼Œè‹¥æ‰€æœ‰ä½éƒ½æ˜¯ true åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ set(): å°†æ•´ä¸ª bitset è®¾ç½®æˆ trueã€‚ set(pos, val = true): å°†æŸä¸€ä½è®¾ç½®æˆ true/falseã€‚ reset(): å°†æ•´ä¸ª bitset è®¾ç½®æˆ falseã€‚ reset(pos): å°†æŸä¸€ä½è®¾ç½®æˆ falseã€‚ç›¸å½“äº set(pos, false)ã€‚ flip(): ç¿»è½¬æ¯ä¸€ä½ã€‚ï¼ˆç›¸å½“äºå¼‚æˆ–ä¸€ä¸ªå…¨æ˜¯ 1 çš„ bitsetï¼‰ flip(pos): ç¿»è½¬æŸä¸€ä½ã€‚ to_string(): è¿”å›è½¬æ¢æˆçš„å­—ç¬¦ä¸²è¡¨è¾¾ã€‚ to_ulong(): è¿”å›è½¬æ¢æˆçš„ unsigned long è¡¨è¾¾ (long åœ¨ NT åŠ 32 ä½ POSIX ç³»ç»Ÿä¸‹ä¸ int ä¸€æ ·ï¼Œåœ¨ 64 ä½ POSIX ä¸‹ä¸ long long ä¸€æ ·ï¼‰ã€‚ to_ullong():C++11ï¼Œè¿”å›è½¬æ¢æˆçš„ unsigned long long è¡¨è¾¾ã€‚ ä¸€äº›æ–‡æ¡£ä¸­æ²¡æœ‰çš„æˆå‘˜å‡½æ•°ï¼š _Find_first(): è¿”å› bitset ç¬¬ä¸€ä¸ª true çš„ä¸‹æ ‡ï¼Œè‹¥æ²¡æœ‰ true åˆ™è¿”å› bitset çš„å¤§å°ã€‚ _Find_next(pos): è¿”å› pos åé¢ï¼ˆä¸‹æ ‡ä¸¥æ ¼å¤§äº pos çš„ä½ç½®ï¼‰ç¬¬ä¸€ä¸ª true çš„ä¸‹æ ‡ï¼Œè‹¥ pos åé¢æ²¡æœ‰ true åˆ™è¿”å› bitset çš„å¤§å°ã€‚ ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:2:5","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"åº”ç”¨Â¶ ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:3:0","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"ã€ŒLibreOJ Î² Round #2ã€è´ªå¿ƒåªèƒ½è¿‡æ ·ä¾‹Â¶ è¿™é¢˜å¯ä»¥ç”¨ dp åšï¼Œè½¬ç§»æ–¹ç¨‹å¾ˆç®€å•ï¼š è¡¨ç¤ºå‰ ä¸ªæ•°çš„å¹³æ–¹å’Œèƒ½å¦ä¸º ï¼Œé‚£ä¹ˆ ï¼ˆæˆ–èµ·æ¥ï¼‰ã€‚ ä½†å¦‚æœç›´æ¥åšçš„è¯æ˜¯ çš„ï¼Œï¼ˆçœ‹èµ·æ¥ï¼‰è¿‡ä¸äº†ã€‚ å‘ç°å¯ä»¥ç”¨ bitset ä¼˜åŒ–ï¼Œå·¦ç§»å†æˆ–èµ·æ¥å°±å¥½äº†ï¼šstd::bitset ç„¶åå‘ç°â€¦â€¦è¢«åŠ äº†å‡ ä¸ªå‰ªæçš„æš´åŠ›è‰¹äº†ï¼šåŠ äº†å‡ ä¸ªå‰ªæçš„æš´åŠ› ç„¶è€Œï¼Œå¯ä»¥æ‰‹å†™ bitsetï¼ˆåªéœ€è¦æ”¯æŒå·¦ç§»åæˆ–èµ·æ¥è¿™ä¸€ç§æ“ä½œï¼‰å‹ ä½ï¼ˆunsigned long longï¼‰æ¥è‰¹æ‰æš´åŠ›ï¼šæ‰‹å†™ bitset ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:3:1","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"ä¸åŸƒæ°ç­›ç»“åˆ ç”±äº bitset å¿«é€Ÿçš„è¿ç»­è¯»å†™æ•ˆç‡ï¼ˆå‰ææ˜¯å¼€O2ä¼˜åŒ–ï¼‰ï¼Œä½¿å¾—å®ƒéå¸¸é€‚åˆç”¨äºä¸åŸƒæ°ç­›ç»“åˆæ‰“è´¨æ•°è¡¨ã€‚ ä½¿ç”¨çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å°†åŸƒæ°ç­›ä¸­çš„å¸ƒå°”æ•°ç»„æ›¿æ¢æˆ bitset å³å¯ã€‚ å‚è€ƒä»£ç  bitset\u003cN\u003e vis; void Prime(int n) { vis.set(); vis[0] = vis[1] = 0; for (int i = 2; i * i \u003c= n; i++) { if (vis[i]) { for (int j = i \u003c\u003c 1; j \u003c= n; j += i) vis[j] = 0; } } } ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:3:2","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["C++å®æˆ˜"],"content":"åŸƒæ°ç­›é€Ÿåº¦æµ‹è¯• æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š #include\u003ccstdio\u003e#include \"../BenchMark/Timer.h\"using namespace std; #define BIT_SET //é€šè¿‡æ˜¯å¦å®šä¹‰BIT_SETå®æ¥æ§åˆ¶æµ‹è¯•å¯¹è±¡ #ifdef BIT_SET #include\u003cbitset\u003e bitset\u003c100001000\u003e vis; #else bool vis[100001000]; #endif int n, ans; #ifdef BIT_SET void Prime() { vis.set(); vis[0] = vis[1] = 0; for (int i = 2; i * i \u003c= n; i++) { if (vis[i]) { for (int j = i \u003c\u003c 1; j \u003c= n; j += i) vis[j] = 0; } } } #else void GetPrimes() { fill(vis,vis+100001000, true); vis[0] = vis[1] = 0; for (int i = 2; i * i \u003c= n; i++) { if (vis[i]) { for (int j = i \u003c\u003c 1; j \u003c= n; j += i) vis[j] = 0; } } } #endif int main() { scanf(\"%d\", \u0026n); { ans = 0; Timer c; #ifdef BIT_SET Prime(); #else GetPrimes(); #endif for (int i = 2; i \u003c= n; i++) if (vis[i]) ans++; printf(\"%d \", ans); } return 0; } å…¶ä¸­çš„è®¡æ—¶å™¨Timeræ˜¯æˆ‘å°è£…çš„ä¸€ä¸ªç”¨äºæµ‹è¯•é€Ÿåº¦çš„ç±»ï¼Œåˆ©ç”¨çš„C++ RAIIç‰¹æ€§å†™çš„ã€‚ ä»£ç å¦‚ä¸‹ï¼š // // Created by Alone on 2022-1-31. // #ifndef BENCHMARK_TIMER_H #define BENCHMARK_TIMER_H #include \u003cchrono\u003e#include \u003ciostream\u003eclass Timer { public: Timer(){ m_StartTimepoint = std::chrono::high_resolution_clock::now(); } ~Timer(){ Stop(); } void Stop(){ auto endTimepoint = std::chrono::high_resolution_clock::now(); auto start = std::chrono::time_point_cast\u003cstd::chrono::microseconds\u003e(m_StartTimepoint).time_since_epoch().count(); auto end = std::chrono::time_point_cast\u003cstd::chrono::microseconds\u003e(endTimepoint).time_since_epoch().count(); auto duration = end-start; //ä»¥å¾®ç§’ä¸ºå•ä½ double ms = duration * 0.001;//å¾—åˆ°æ¯«ç§’ printf(\"%lld us (%lf ms)\\n\",duration,ms); } private: std::chrono::time_point\u003cstd::chrono::high_resolution_clock\u003em_StartTimepoint; }; #endif //BENCHMARK_TIMER_H æµ‹è¯•ç»“æœï¼š æµ‹è¯•ä¸­ä½¿ç”¨çš„ç¯å¢ƒä¸ºmingwï¼Œä½¿ç”¨äº† $o2$ çº§åˆ«çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥ bitset æ˜æ˜¾ä¼šå¿«å¾ˆå¤šï¼ åœ¨ n==1e8 çš„æƒ…å†µä¸‹ï¼Œè½®ç•ªä¸‰æ¬¡ bool vs bitset ç»“æœå¦‚ä¸‹ï¼š ç¬¬ä¸€æ¬¡ï¼š1351532 us (1351.532000 ms) vs 1171797 us (1171.797000 ms) ç¬¬äºŒæ¬¡ï¼š1814639 us (1814.639000 ms) vs 1236894 us (1236.894000 ms) ç¬¬ä¸‰æ¬¡ï¼š1812811 us (1812.811000 ms) vs 5761455 1188555 us (1188.555000 ms) éš¾é“ä»¥åéƒ½ä¼˜å…ˆä½¿ç”¨bitsetï¼Ÿåˆ«é«˜å…´çš„å¤ªæ—©ï¼åœ¨æˆ‘ä»¬é»˜è®¤çš„debugæ¨¡å¼ä¸‹bitsetæ ¹æœ¬å°±å®Œå…¨ä¸æ˜¯boolæ•°ç»„çš„å¯¹æ‰‹ï¼Œéšæ‰‹ä¸€æµ‹ï¼Œç›´æ¥å°±æ˜¯ 2397002 us (2397.002000 ms) vs 8512716 us (8512.716000 ms) bitsetå¤§è´¥ï¼ï¼ï¼ æ‰€ä»¥ï¼Œåœ¨ä¸€èˆ¬çš„ç®—æ³•é¢˜æƒ…å†µä¸‹ï¼Œå†™è´¨æ•°ç­›è¿˜æ˜¯ç”¨boolæ•°ç»„å§ï¼å› ä¸ºç®—æ³•é¢˜çš„ojä¸ä¼šç»™ä½ å¼€ä¼˜åŒ–çš„ï¼æ•…åŸå§‹boolæ•°ç»„æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼ ","date":"2022-02-22","objectID":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/:3:3","tags":["bitsetä¸åŸƒæ°ç­›"],"title":"bitsetä¸åŸƒæ°ç­›","uri":"/posts/bitset%E4%B8%8E%E5%9F%83%E6%B0%8F%E7%AD%9B/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ ","date":"2022-02-22","objectID":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/","tags":["kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ "],"title":"kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ ","uri":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"é¢˜ç›® ojå¹³å° ","date":"2022-02-22","objectID":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/:1:0","tags":["kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ "],"title":"kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ ","uri":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"BellmanFordç®—æ³•çš„åŠ¨æ€è§„åˆ’è§£å†³(æ•ˆç‡ä¸€èˆ¬) çœ‹åˆ°kç«™å†…ï¼Œè‚¯å®šä¼šæƒ³åˆ° BellmanFord ç®—æ³•çš„åŠ¨æ€è§„åˆ’è§£æ³•ï¼Œæœ¬æ¥ä¼˜åŒ–æˆæŒ‰è¾¹éå†çš„åŠ¨æ€è§„åˆ’å¯ä»¥ä¸ç”¨è®¡è¾ƒå¤šå°‘æ¬¡ï¼Œä½†è¿™é‡Œå¿…é¡»è¦è®¡è¾ƒç”¨äº†å¤šå°‘æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨åŒä¸€æ¬¡è¾¹çš„é€‰æ‹©ä¸­ï¼Œä¿è¯å¦ä¸€ä¸ªè¾¹ç”¨çš„æ˜¯ä¸Šä¸€æ¬¡çš„ç»“æœï¼Œæ•…é€šè¿‡äºŒç»´æ•°ç»„è¿›è¡Œdpå³å¯å†™å‡ºï¼Œè¦å‹ç¼©æˆä¸€ç»´æ•°ç»„ä¹Ÿä¸éš¾ï¼Œæ¯•ç«Ÿç”¨çš„ä»…ä»…åªæ˜¯ä¸Šä¸€è¡Œçš„ç»“æœï¼Œæ‰€ä»¥åŠ¨æ€è§„åˆ’è§£å†³æ˜¯éå¸¸ç®€å•çš„ã€‚ class Solution { public: int findCheapestPrice(int n, vector\u003cvector\u003cint\u003e\u003e\u0026 flights, int src, int dst, int k) { const int INF = 0x3f3f3f3f; //ç”¨ä¸´æ—¶æ•°ç»„å­˜å‚¨ï¼Œè¿™æ ·æ”¹å˜äº†distä¹Ÿä¸ä¼šæ”¹å˜temp,è¿™æ ·ä¾¿è¾¾åˆ°äº†æ§åˆ¶éå†æ¬¡æ•°çš„ç›®çš„ int* dist = new int[n]; memset(dist,0x3f,sizeof(int)*n); dist[src] = 0; int sz = flights.size(); for(int i=0;i\u003c=k;i++){ int* temp = new int[n]; memcpy(temp,dist,n*sizeof(int)); for(int j=0;j\u003csz;j++){ if(temp[flights[j][0]]!=INF){ dist[flights[j][1]] = min(dist[flights[j][1]],temp[flights[j][0]] + flights[j][2]); } } delete[] temp; } return dist[dst]==INF?-1:dist[dst]; } }; ","date":"2022-02-22","objectID":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/:2:0","tags":["kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ "],"title":"kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ ","uri":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"SPFAç®—æ³•æ”¹é€ æˆä¸ºç»å…¸BFSè§£å†³(æ•ˆç‡é«˜) ä¸ºäº†æ•ˆç‡ï¼Œæˆ‘å»ºå›¾æ—¶å€™ç”¨äº†é“¾å¼å‰å‘æ˜Ÿã€‚ è¿™é“é¢˜å¼€å§‹æ‹¿åˆ°çš„æ—¶å€™ï¼Œæˆ‘å°±å†æƒ³è¿™ä¸ªSPFAç±»ä¼¼äºBFSï¼Œé‚£è‚¯å®šæ˜¯å¯ä»¥æ§åˆ¶æ¬¡æ•°çš„ï¼Œç„¶åå°±å¼€å§‹è¡ŒåŠ¨äº†ï¼ŒSPFAé˜Ÿåˆ—éå†çš„æ—¶å€™éœ€è¦åˆ¤æ–­è¯¥ç»“ç‚¹æ˜¯å¦å­˜åœ¨äºé˜Ÿåˆ—ä¸­ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ä¸èƒ½å…¥é˜Ÿï¼Œä½¿ç”¨çš„æ•°æ®éƒ½æ˜¯é€šè¿‡ dist æ•°ç»„æ¥æ›´æ–°ï¼Œè¿™æ ·å¯¼è‡´å®Œå…¨ä¸§å¤±äº†BFSçš„éå†æ¬¡æ•°ä¿¡æ¯ï¼Œä½¿å¾—ç­”æ¡ˆæ›´æ–°çš„å¾ˆå¿«æ˜¯æ²¡é”™ï¼Œä½†æ— æ³•æ§åˆ¶åœ¨ä¸€å®šçš„éå†æ¬¡æ•°èŒƒå›´å†…(å› ä¸ºå¯èƒ½ä½ æœ¬æ¬¡æ‰€ç”¨åˆ°çš„ dist å¯èƒ½ä¸æ˜¯ä¸Šä¸€æ¬¡çš„)ã€‚ é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ª BFS éå†æ¬¡æ•°çš„é™åˆ¶é—®é¢˜å‘¢ï¼Ÿ ä¸ºäº†è§£å†³ SPFA ç®—æ³•çš„è¿™ä¸ªé—®é¢˜æˆ‘è¯•äº†ä¸¤ç§æ–¹å¼ï¼Œåªæœ‰æœ€åæœ‰ä¸€ç§æ˜¯å¯è¡Œçš„ï¼š (é”™è¯¯)åˆ©ç”¨åŒç­‰é•¿åº¦çš„ä¸´æ—¶æ•°ç»„è®°å½•æ­¤æ¬¡éå†ådistæ•°ç»„æ›´æ–°çš„ç»“æœï¼Œç„¶ååœ¨éå†å®Œçš„å°¾éƒ¨åˆ©ç”¨è¯¥æ•°ç»„å¯¹ dist æ•°ç»„è¿›è¡Œæ›´æ–°ã€‚ å°±åƒè¿™æ ·ï¼š ä½†å¾ˆå¿«ä¼šå‘ç°å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šä¸€æ¬¡éå†é€”ä¸­å¯èƒ½ä¸€ä¸ªç»“ç‚¹æ›´æ–°å¤šæ¬¡ï¼Œé‚£ä¹ˆè¿™æ ·å°±æ— æ³•ä¿è¯æŠŠæ‰€æœ‰kæ¬¡ä¸­è½¬å†…çš„æƒ…å†µéƒ½åˆ—ä¸¾å‡ºæ¥ã€‚ (æ­£ç¡®)åˆ©ç”¨é˜Ÿåˆ—çš„å‚æ•°å¯¹distè¿›è¡Œæ›´æ–°ï¼Œå¦‚ä½•æ›´æ–°å‘¢ï¼Ÿé˜Ÿåˆ—ä¸­è®°å½•æ¯ä¸ªç»“ç‚¹çš„ç¼–å·å’Œåˆ°srcçš„è·ç¦»,æ¯æ¬¡æ›´æ–°æ–°çš„ dist çš„æ—¶å€™ç›´æ¥ç”¨æ­£åœ¨éå†çš„ç¼–å·åˆ°srcçš„è·ç¦»æ›¿ä»£ç›´æ¥ä½¿ç”¨distæ•°ç»„(è¿™æ ·ä¾¿é˜²æ­¢äº†æ›´æ–°distæ•°ç»„åå½±å“åç»­æ›´æ–°)ã€‚ å¦‚å›¾ï¼š è§£é¢˜ä»£ç ï¼š class Solution { public: //ç”¨äºå»ºå›¾çš„ç»“æ„ä½“ struct { int to; int len; int next; }edge[5000]; int findCheapestPrice(int n, vector\u003cvector\u003cint\u003e\u003e\u0026 flights, int src, int dst, int k) { const int INF = 0x3f3f3f3f; memset(head, 0xff, sizeof head); int dist[n];memset(dist,0x3f,sizeof dist); dist[src] = 0; queue\u003cpair\u003cint,int\u003e\u003eQ; int sz = flights.size(); for(int i=0;i\u003csz;i++){ add(flights[i][0],flights[i][1],flights[i][2]); } Q.push({src,dist[src]}); int step = 0; while(!Q.empty()){ if(step\u003ek) break; for(int i=Q.size();i\u003e0;i--){ auto idx = move(Q.front());Q.pop(); for(int j=head[idx.first];j!=-1;j=edge[j].next){ if(idx.second+edge[j].len\u003cdist[edge[j].to]){ dist[edge[j].to] = idx.second+edge[j].len; Q.push({edge[j].to,dist[edge[j].to]}); } } } step++; } if(dist[dst]!=INF)return dist[dst]; return -1; } private: //ç”¨äºé“¾å¼å‰å‘æ˜Ÿå»ºå›¾çš„å‡½æ•°å’Œæ•°æ® int tot = 0; int head[100]; void add(int node,int to,int len){ edge[tot].to = to; edge[tot].len = len; edge[tot].next = head[node]; head[node] = tot; tot++; } }; ","date":"2022-02-22","objectID":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/:3:0","tags":["kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ "],"title":"kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­--BellmanFordç®—æ³•å’ŒSPFAç®—æ³•çš„æ”¹é€ ","uri":"/posts/k%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD-bellmanford%E7%AE%97%E6%B3%95%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E9%80%A0/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPåè®®è¯¦è§£","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":" æœ¬æ–‡ç« ä¸ºã€ŠLinuxé«˜æ€§èƒ½æœåŠ¡å™¨ç¼–ç¨‹ã€‹ç¬¬å››ç« çš„ç¬”è®°ï¼Œè¯¥ä¹¦æè¿°è¯¥ç« çš„å„ç§å†…å®¹çš„æ—¶å€™ï¼Œå‡ ä¹éƒ½ä½¿ç”¨äº†å®è·µçš„å·¥å…·æ¥æŠ“åŒ…éªŒè¯å¹¶è§£é‡Šçš„æ–¹å¼æ¥é“ºå¼€çŸ¥è¯†ç‚¹ã€‚æˆ‘è¿™é‡Œå‡ ä¹æ˜¯ç…§æ¬äº†ä¹¦æœ¬çš„çŸ¥è¯†ç‚¹ï¼Œä½†åšäº†ä¸ªåˆ†ç±»å¤„ç†ã€‚ TCPåè®® åœ¨è¯¦ç»†è®¨è®ºTCPåè®®ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹TCPæœåŠ¡çš„ç‰¹ç‚¹ï¼Œä»¥åŠå®ƒå’ŒUDPæœåŠ¡çš„åŒºåˆ«ã€‚ ä¼ è¾“å±‚åè®®ä¸»è¦æœ‰ä¸¤ä¸ªï¼šTCPåè®®å’ŒUDPåè®®ã€‚TCPåè®®ç›¸å¯¹äºUDPåè®®çš„ç‰¹ç‚¹æ˜¯ï¼šé¢å‘è¿æ¥ã€å­—èŠ‚æµå’Œå¯é ä¼ è¾“ã€‚ é¢å‘è¿æ¥ï¼š ä½¿ç”¨TCPåè®®é€šä¿¡çš„åŒæ–¹å¿…é¡»å…ˆå»ºç«‹è¿æ¥ï¼Œç„¶åæ‰èƒ½å¼€å§‹æ•°æ®çš„è¯»å†™ã€‚åŒæ–¹éƒ½å¿…é¡»ä¸ºè¯¥è¿æ¥åˆ†é…å¿…è¦çš„å†…æ ¸èµ„æºï¼Œä»¥ç®¡ç†è¿æ¥çš„çŠ¶æ€å’Œè¿æ¥ä¸Šæ•°æ®çš„ä¼ è¾“ã€‚TCPè¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå³åŒæ–¹çš„æ•°æ®è¯»å†™å¯ä»¥é€šè¿‡ä¸€ä¸ªè¿æ¥è¿›è¡Œã€‚å®Œæˆæ•°æ®äº¤æ¢ä¹‹åï¼Œé€šä¿¡åŒæ–¹éƒ½å¿…é¡»æ–­å¼€è¿æ¥ä»¥é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚ å­—èŠ‚æµï¼š å­—èŠ‚æµæœåŠ¡å’Œæ•°æ®æŠ¥æœåŠ¡çš„æ¥æ”¶åŒæ–¹çš„æœ€ç»ˆè¡¨ç°å‡ºæ¥çš„åŒºåˆ«æ˜¯ï¼Œé€šä¿¡åŒæ–¹æ˜¯å¦å¿…é¡»æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„è¯»ã€å†™æ“ä½œã€‚å…·ä½“åŸå› åœ¨äºï¼ŒTCPé€šä¿¡æ˜¯æœ‰æ¥æ”¶å’Œå‘é€ç¼“å†²åŒºçš„ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä¸€æ¬¡æ€§å°†TCPæ¥æ”¶ç¼“å†²åŒºä¸­çš„æ•°æ®å…¨éƒ¨è¯»å‡ºï¼Œä¹Ÿå¯ä»¥åˆ†å¤šæ¬¡è¯»å–ï¼Œè¿™å–å†³äºç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åºè¯»ç¼“å†²åŒºçš„å¤§å°ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºæ‰§è¡Œçš„è¯»æ“ä½œæ¬¡æ•°å’ŒTCPæ¨¡å—æ¥æ”¶åˆ°çš„TCPæŠ¥æ–‡æ®µä¸ªæ•°ä¹‹é—´ä¹Ÿæ²¡æœ‰å›ºå®šçš„æ•°é‡å…³ç³»ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œå‘é€ç«¯æ‰§è¡Œçš„å†™æ“ä½œæ¬¡æ•°å’Œæ¥æ”¶ç«¯æ‰§è¡Œçš„è¯»æ“ä½œæ¬¡æ•°ä¹‹é—´æ²¡æœ‰ä»»ä½•æ•°é‡å…³ç³»ï¼Œè¿™å°±æ˜¯å­—èŠ‚æµçš„æ¦‚å¿µï¼šåº”ç”¨ç¨‹åºå¯¹æ•°æ®çš„å‘é€å’Œæ¥æ”¶æ˜¯æ²¡æœ‰è¾¹ç•Œé™åˆ¶çš„ã€‚UDPåˆ™ä¸ç„¶ã€‚å‘é€ç«¯åº”ç”¨ç¨‹åºæ¯æ‰§è¡Œä¸€æ¬¡å†™æ“ä½œï¼ŒUDPæ¨¡å—å°±å°†å…¶å°è£…æˆä¸€ä¸ªUDPæ•°æ®æŠ¥å¹¶å‘é€ä¹‹ã€‚æ¥æ”¶ç«¯å¿…é¡»åŠæ—¶é’ˆå¯¹æ¯ä¸€ä¸ªUDPæ•°æ®æŠ¥æ‰§è¡Œè¯»æ“ä½œï¼ˆé€šè¿‡recvfromç³»ç»Ÿè°ƒç”¨ï¼‰ï¼Œå¦åˆ™å°±ä¼šä¸¢åŒ…ï¼ˆè¿™ç»å¸¸å‘ç”Ÿåœ¨è¾ƒæ…¢çš„æœåŠ¡å™¨ä¸Šï¼‰ã€‚å¹¶ä¸”ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šè¶³å¤Ÿçš„åº”ç”¨ç¨‹åºç¼“å†²åŒºï¼ˆç¨‹åºå¼€å‘è€…è‡ªå»ºçš„ï¼‰æ¥è¯»å–UDPæ•°æ®ï¼Œåˆ™UDPæ•°æ®å°†è¢«æˆªæ–­ã€‚ å›¾3-1å’Œå›¾3-2æ˜¾ç¤ºäº†TCPå­—èŠ‚æµæœåŠ¡å’ŒUDPæ•°æ®æŠ¥æœåŠ¡çš„ä¸Šè¿°åŒºåˆ«ã€‚ä¸¤å›¾ä¸­çœç•¥äº†ä¼ è¾“å±‚ä»¥ä¸‹çš„é€šä¿¡ç»†èŠ‚ã€‚ å¯é ä¼ è¾“ï¼š TCPåè®®é‡‡ç”¨å‘é€åº”ç­”æœºåˆ¶ï¼Œå³å‘é€ç«¯å‘é€çš„æ¯ä¸ªTCPæŠ¥æ–‡æ®µéƒ½å¿…é¡»å¾—åˆ°æ¥æ”¶æ–¹çš„åº”ç­”ï¼Œæ‰è®¤ä¸ºè¿™ä¸ªTCPæŠ¥æ–‡æ®µä¼ è¾“æˆåŠŸã€‚ TCPåè®®é‡‡ç”¨è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œå‘é€ç«¯åœ¨å‘é€å‡ºä¸€ä¸ªTCPæŠ¥æ–‡æ®µä¹‹åå¯åŠ¨å®šæ—¶å™¨ï¼Œå¦‚æœåœ¨å®šæ—¶æ—¶é—´å†…æœªæ”¶åˆ°åº”ç­”ï¼Œå®ƒå°†é‡å‘è¯¥æŠ¥æ–‡æ®µã€‚ å› ä¸ºTCPæŠ¥æ–‡æ®µæœ€ç»ˆæ˜¯ä»¥IPæ•°æ®æŠ¥å‘é€çš„ï¼Œè€ŒIPæ•°æ®æŠ¥åˆ°è¾¾æ¥æ”¶ç«¯å¯èƒ½ä¹±åºã€é‡å¤ï¼Œæ‰€ä»¥TCPåè®®è¿˜ä¼šå¯¹æ¥æ”¶åˆ°çš„TCPæŠ¥æ–‡æ®µé‡æ’ã€æ•´ç†ï¼Œå†äº¤ä»˜ç»™åº”ç”¨å±‚ã€‚ UDPåè®®åˆ™å’ŒIPåè®®ä¸€æ ·ï¼Œæä¾›ä¸å¯é æœåŠ¡ã€‚å®ƒä»¬éƒ½éœ€è¦ä¸Šå±‚åè®®æ¥å¤„ç†æ•°æ®ç¡®è®¤å’Œè¶…æ—¶é‡ä¼ ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:0:0","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPå¤´éƒ¨ä¿¡æ¯ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:1:0","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPå¤´éƒ¨ä¿¡æ¯æ¸…å• TCPå¤´éƒ¨ç»“æ„å¦‚å›¾3-3æ‰€ç¤ºï¼Œå…¶ä¸­çš„è¯¸å¤šå­—æ®µä¸ºç®¡ç†TCPè¿æ¥å’Œæ§åˆ¶æ•°æ®æµæä¾›äº†è¶³å¤Ÿçš„ä¿¡æ¯ã€‚ 16ä½ç«¯å£å·ï¼ˆport numberï¼‰ å‘ŠçŸ¥ä¸»æœºè¯¥æŠ¥æ–‡æ®µæ˜¯æ¥è‡ªå“ªé‡Œï¼ˆæºç«¯å£ï¼‰ä»¥åŠä¼ ç»™å“ªä¸ªä¸Šå±‚åè®®æˆ–åº”ç”¨ç¨‹åºï¼ˆç›®çš„ç«¯å£ï¼‰çš„ã€‚ è¿›è¡ŒTCPé€šä¿¡æ—¶ï¼Œå®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©çš„ä¸´æ—¶ç«¯å£å·ï¼Œè€ŒæœåŠ¡å™¨åˆ™ä½¿ç”¨çŸ¥åæœåŠ¡ç«¯å£å·ã€‚ 32ä½åºå·ï¼ˆsequence numberï¼‰ ä¸€æ¬¡TCPé€šä¿¡ï¼ˆä»TCPè¿æ¥å»ºç«‹åˆ°æ–­å¼€ï¼‰è¿‡ç¨‹ä¸­æŸä¸€ä¸ªä¼ è¾“æ–¹å‘ä¸Šçš„å­—èŠ‚æµçš„æ¯ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚ å‡è®¾ä¸»æœºAå’Œä¸»æœºBè¿›è¡ŒTCPé€šä¿¡ï¼ŒAå‘é€ç»™Bçš„ç¬¬ä¸€ä¸ªTCPæŠ¥æ–‡æ®µä¸­ï¼Œåºå·å€¼è¢«ç³»ç»Ÿåˆå§‹åŒ–ä¸ºæŸä¸ªéšæœºå€¼ISNï¼ˆInitialSequence Numberï¼Œåˆå§‹åºå·å€¼ï¼‰ã€‚é‚£ä¹ˆåœ¨è¯¥ä¼ è¾“æ–¹å‘ä¸Šï¼ˆä»Aåˆ°Bï¼‰ï¼Œåç»­çš„TCPæŠ¥æ–‡æ®µä¸­åºå·å€¼å°†è¢«ç³»ç»Ÿè®¾ç½®æˆISNåŠ ä¸Šè¯¥æŠ¥æ–‡æ®µæ‰€æºå¸¦æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨æ•´ä¸ªå­—èŠ‚æµä¸­çš„åç§»ã€‚ä¾‹å¦‚ï¼ŒæŸä¸ªTCPæŠ¥æ–‡æ®µä¼ é€çš„æ•°æ®æ˜¯å­—èŠ‚æµä¸­çš„ç¬¬1025ï½2048å­—èŠ‚ï¼Œé‚£ä¹ˆè¯¥æŠ¥æ–‡æ®µçš„åºå·å€¼å°±æ˜¯ISN+1025ã€‚å¦å¤–ä¸€ä¸ªä¼ è¾“æ–¹å‘ï¼ˆä»Båˆ°Aï¼‰çš„TCPæŠ¥æ–‡æ®µçš„åºå·å€¼ä¹Ÿå…·æœ‰ç›¸åŒçš„å«ä¹‰ã€‚ 32ä½ç¡®è®¤å·ï¼ˆacknowledgement numberï¼‰ ç”¨ä½œå¯¹å¦ä¸€æ–¹å‘é€æ¥çš„TCPæŠ¥æ–‡æ®µçš„å“åº”ã€‚å…¶å€¼æ˜¯æ”¶åˆ°çš„TCPæŠ¥æ–‡æ®µçš„åºå·å€¼åŠ 1ã€‚ å‡è®¾ä¸»æœºAå’Œä¸»æœºBè¿›è¡ŒTCPé€šä¿¡ï¼Œé‚£ä¹ˆAå‘é€å‡ºçš„TCPæŠ¥æ–‡æ®µä¸ä»…æºå¸¦è‡ªå·±çš„åºå·ï¼Œè€Œä¸”åŒ…å«å¯¹Bå‘é€æ¥çš„TCPæŠ¥æ–‡æ®µçš„ç¡®è®¤å·ã€‚åä¹‹ï¼ŒBå‘é€å‡ºçš„TCPæŠ¥æ–‡æ®µä¹ŸåŒæ—¶æºå¸¦è‡ªå·±çš„åºå·å’Œå¯¹Aå‘é€æ¥çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤å·ã€‚ 4ä½å¤´éƒ¨é•¿åº¦ï¼ˆheader lengthï¼‰ æ ‡è¯†è¯¥TCPå¤´éƒ¨æœ‰å¤šå°‘ä¸ª32bitå­—ï¼ˆ4å­—èŠ‚ï¼‰ã€‚å› ä¸º4ä½æœ€å¤§èƒ½è¡¨ç¤º15ï¼Œæ‰€ä»¥TCPå¤´éƒ¨æœ€é•¿æ˜¯60å­—èŠ‚ã€‚ 6ä½æ ‡å¿—ä½ â‘URGæ ‡å¿—ï¼Œè¡¨ç¤ºç´§æ€¥æŒ‡é’ˆï¼ˆurgent pointerï¼‰æ˜¯å¦æœ‰æ•ˆã€‚ â‘ACKæ ‡å¿—ï¼Œè¡¨ç¤ºç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆã€‚æˆ‘ä»¬ç§°æºå¸¦ACKæ ‡å¿—çš„TCPæŠ¥æ–‡æ®µä¸ºç¡®è®¤æŠ¥æ–‡æ®µã€‚ â‘PSHæ ‡å¿—ï¼Œæç¤ºæ¥æ”¶ç«¯åº”ç”¨ç¨‹åºåº”è¯¥ç«‹å³ä»TCPæ¥æ”¶ç¼“å†²åŒºä¸­è¯»èµ°æ•°æ®ï¼Œä¸ºæ¥æ”¶åç»­æ•°æ®è…¾å‡ºç©ºé—´ï¼ˆå¦‚æœåº”ç”¨ç¨‹åºä¸å°†æ¥æ”¶åˆ°çš„æ•°æ®è¯»èµ°ï¼Œå®ƒä»¬å°±ä¼šä¸€ç›´åœç•™åœ¨TCPæ¥æ”¶ç¼“å†²åŒºä¸­ï¼‰ã€‚ â‘RSTæ ‡å¿—ï¼Œè¡¨ç¤ºè¦æ±‚å¯¹æ–¹é‡æ–°å»ºç«‹è¿æ¥ã€‚æˆ‘ä»¬ç§°æºå¸¦RSTæ ‡å¿—çš„TCPæŠ¥æ–‡æ®µä¸ºå¤ä½æŠ¥æ–‡æ®µã€‚ â‘SYNæ ‡å¿—ï¼Œè¡¨ç¤ºè¯·æ±‚å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚æˆ‘ä»¬ç§°æºå¸¦SYNæ ‡å¿—çš„TCPæŠ¥æ–‡æ®µä¸ºåŒæ­¥æŠ¥æ–‡æ®µã€‚ â‘FINæ ‡å¿—ï¼Œè¡¨ç¤ºé€šçŸ¥å¯¹æ–¹æœ¬ç«¯è¦å…³é—­è¿æ¥äº†ã€‚æˆ‘ä»¬ç§°æºå¸¦FINæ ‡å¿—çš„TCPæŠ¥æ–‡æ®µä¸ºç»“æŸæŠ¥æ–‡æ®µã€‚ 16ä½çª—å£å¤§å°ï¼ˆwindow sizeï¼‰ æ˜¯TCPæµé‡æ§åˆ¶çš„ä¸€ä¸ªæ‰‹æ®µã€‚è¿™é‡Œè¯´çš„çª—å£ï¼ŒæŒ‡çš„æ˜¯æ¥æ”¶é€šå‘Šçª—å£ï¼ˆReceiver Windowï¼ŒRWNDï¼‰æ³¨æ„è¿™ä¸ªåè¯ï¼Œåé¢TCPæ•°æ®æµçš„æ§åˆ¶ä¼šå†ç¢°åˆ°ã€‚å®ƒå‘Šè¯‰å¯¹æ–¹æœ¬ç«¯çš„TCPæ¥æ”¶ç¼“å†²åŒºè¿˜èƒ½å®¹çº³å¤šå°‘å­—èŠ‚çš„æ•°æ®ï¼Œè¿™æ ·å¯¹æ–¹å°±å¯ä»¥æ§åˆ¶å‘é€æ•°æ®çš„é€Ÿåº¦ã€‚ 16ä½æ ¡éªŒå’Œï¼ˆTCP checksumï¼‰ ç”±å‘é€ç«¯å¡«å……ï¼Œæ¥æ”¶ç«¯å¯¹TCPæŠ¥æ–‡æ®µæ‰§è¡ŒCRCç®—æ³•ä»¥æ£€éªŒTCPæŠ¥æ–‡æ®µåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦æŸåã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ ¡éªŒä¸ä»…åŒ…æ‹¬TCPå¤´éƒ¨ï¼Œä¹ŸåŒ…æ‹¬æ•°æ®éƒ¨åˆ†ã€‚è¿™ä¹Ÿæ˜¯TCPå¯é ä¼ è¾“çš„ä¸€ä¸ªé‡è¦ä¿éšœã€‚ 16ä½ç´§æ€¥æŒ‡é’ˆï¼ˆurgent pointerï¼‰ æ˜¯ä¸€ä¸ªæ­£çš„åç§»é‡ã€‚å®ƒå’Œåºå·å­—æ®µçš„å€¼ç›¸åŠ è¡¨ç¤ºæœ€åä¸€ä¸ªç´§æ€¥æ•°æ®çš„ä¸‹ä¸€å­—èŠ‚çš„åºå·ã€‚å› æ­¤ï¼Œç¡®åˆ‡åœ°è¯´ï¼Œè¿™ä¸ªå­—æ®µæ˜¯ç´§æ€¥æŒ‡é’ˆç›¸å¯¹å½“å‰åºå·çš„åç§»ï¼Œä¸å¦¨ç§°ä¹‹ä¸ºç´§æ€¥åç§»ã€‚TCPçš„ç´§æ€¥æŒ‡é’ˆæ˜¯å‘é€ç«¯å‘æ¥æ”¶ç«¯å‘é€ç´§æ€¥æ•°æ®çš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºTCPç´§æ€¥æ•°æ®ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:1:1","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPå¤´éƒ¨é€‰é¡¹ TCPå¤´éƒ¨çš„æœ€åä¸€ä¸ªé€‰é¡¹å­—æ®µï¼ˆoptionsï¼‰æ˜¯å¯å˜é•¿çš„å¯é€‰ä¿¡æ¯ã€‚è¿™éƒ¨åˆ†æœ€å¤šåŒ…å«40å­—èŠ‚ï¼Œå› ä¸ºTCPå¤´éƒ¨æœ€é•¿æ˜¯60å­—èŠ‚ï¼ˆå…¶ä¸­è¿˜åŒ…å«å‰é¢è®¨è®ºçš„20å­—èŠ‚çš„å›ºå®šéƒ¨åˆ†ï¼‰ã€‚å…¸å‹çš„TCPå¤´éƒ¨é€‰é¡¹ç»“æ„å¦‚å›¾3-4æ‰€ç¤ºã€‚ é€‰é¡¹çš„ç¬¬ä¸€ä¸ªå­—æ®µkindè¯´æ˜é€‰é¡¹çš„ç±»å‹ã€‚æœ‰çš„TCPé€‰é¡¹æ²¡æœ‰åé¢ä¸¤ä¸ªå­—æ®µï¼Œä»…åŒ…å«1å­—èŠ‚çš„kindå­—æ®µã€‚ç¬¬äºŒä¸ªå­—æ®µlengthï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æŒ‡å®šè¯¥é€‰é¡¹çš„æ€»é•¿åº¦ï¼Œè¯¥é•¿åº¦åŒ…æ‹¬kindå­—æ®µå’Œlengthå­—æ®µå æ®çš„2å­—èŠ‚ã€‚ç¬¬ä¸‰ä¸ªå­—æ®µinfoï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ˜¯é€‰é¡¹çš„å…·ä½“ä¿¡æ¯ã€‚ å¸¸è§çš„TCPé€‰é¡¹æœ‰7ç§ï¼Œå¦‚å›¾3-5æ‰€ç¤ºã€‚ kind=0æ˜¯é€‰é¡¹è¡¨ç»“æŸé€‰é¡¹ã€‚ kind=1æ˜¯ç©ºæ“ä½œï¼ˆnopï¼‰é€‰é¡¹ï¼Œæ²¡æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä¸€èˆ¬ç”¨äºå°†TCPé€‰é¡¹çš„æ€»é•¿åº¦å¡«å……ä¸º4å­—èŠ‚çš„æ•´æ•°å€ã€‚ kind=2æ˜¯æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦é€‰é¡¹ã€‚é‡è¦ TCPè¿æ¥åˆå§‹åŒ–æ—¶ï¼Œé€šä¿¡åŒæ–¹ä½¿ç”¨è¯¥é€‰é¡¹æ¥åå•†æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼ˆMax Segment Sizeï¼ŒMSSï¼‰ã€‚TCPæ¨¡å—é€šå¸¸å°†MSSè®¾ç½®ä¸ºï¼ˆMTU-40ï¼‰å­—èŠ‚ï¼ˆå‡æ‰çš„è¿™40å­—èŠ‚åŒ…æ‹¬20å­—èŠ‚çš„TCPå¤´éƒ¨å’Œ20å­—èŠ‚çš„IPå¤´éƒ¨ï¼‰ã€‚è¿™æ ·æºå¸¦TCPæŠ¥æ–‡æ®µçš„IPæ•°æ®æŠ¥çš„é•¿åº¦å°±ä¸ä¼šè¶…è¿‡MTUï¼ˆå‡è®¾TCPå¤´éƒ¨å’ŒIPå¤´éƒ¨éƒ½ä¸åŒ…å«é€‰é¡¹å­—æ®µï¼Œå¹¶ä¸”è¿™ä¹Ÿæ˜¯ä¸€èˆ¬æƒ…å†µï¼‰ï¼Œä»è€Œé¿å…æœ¬æœºå‘ç”ŸIPåˆ†ç‰‡ã€‚å¯¹ä»¥å¤ªç½‘è€Œè¨€ï¼ŒMSSå€¼æ˜¯1460ï¼ˆ1500-40ï¼‰å­—èŠ‚ã€‚ kind=3æ˜¯çª—å£æ‰©å¤§å› å­é€‰é¡¹ã€‚é‡è¦ TCPè¿æ¥åˆå§‹åŒ–æ—¶ï¼Œé€šä¿¡åŒæ–¹ä½¿ç”¨è¯¥é€‰é¡¹æ¥åå•†æ¥æ”¶é€šå‘Šçª—å£çš„æ‰©å¤§å› å­ã€‚åœ¨TCPçš„å¤´éƒ¨ä¸­ï¼Œæ¥æ”¶é€šå‘Šçª—å£å¤§å°æ˜¯ç”¨16ä½è¡¨ç¤ºçš„ï¼Œæ•…æœ€å¤§ä¸º65 535å­—èŠ‚ï¼Œä½†å®é™…ä¸ŠTCPæ¨¡å—å…è®¸çš„æ¥æ”¶é€šå‘Šçª—å£å¤§å°è¿œä¸æ­¢è¿™ä¸ªæ•°ï¼ˆä¸ºäº†æé«˜TCPé€šä¿¡çš„ååé‡ï¼‰ã€‚çª—å£æ‰©å¤§å› å­è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å‡è®¾TCPå¤´éƒ¨ä¸­çš„æ¥æ”¶é€šå‘Šçª—å£å¤§å°æ˜¯Nï¼Œçª—å£æ‰©å¤§å› å­ï¼ˆç§»ä½æ•°ï¼‰æ˜¯Mï¼Œé‚£ä¹ˆTCPæŠ¥æ–‡æ®µçš„å®é™…æ¥æ”¶é€šå‘Šçª—å£å¤§å°æ˜¯Nä¹˜2M ï¼Œæˆ–è€…è¯´Nå·¦ç§»Mä½ã€‚æ³¨æ„ï¼ŒMçš„å–å€¼èŒƒå›´æ˜¯0ï½14ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹/proc/sys/net/ipv4/tcp_window_scalingå†…æ ¸å˜é‡æ¥å¯ç”¨æˆ–å…³é—­çª—å£æ‰©å¤§å› å­é€‰é¡¹ã€‚ å’ŒMSSé€‰é¡¹ä¸€æ ·ï¼Œçª—å£æ‰©å¤§å› å­é€‰é¡¹åªèƒ½å‡ºç°åœ¨åŒæ­¥æŠ¥æ–‡æ®µä¸­ï¼Œå¦åˆ™å°†è¢«å¿½ç•¥ã€‚ä½†åŒæ­¥æŠ¥æ–‡æ®µæœ¬èº«ä¸æ‰§è¡Œçª—å£æ‰©å¤§æ“ä½œï¼Œå³åŒæ­¥æŠ¥æ–‡æ®µå¤´éƒ¨çš„æ¥æ”¶é€šå‘Šçª—å£å¤§å°å°±æ˜¯è¯¥TCPæŠ¥æ–‡æ®µçš„å®é™…æ¥æ”¶é€šå‘Šçª—å£å¤§å°ã€‚å½“è¿æ¥å»ºç«‹å¥½ä¹‹åï¼Œæ¯ä¸ªæ•°æ®ä¼ è¾“æ–¹å‘çš„çª—å£æ‰©å¤§å› å­å°±å›ºå®šä¸å˜äº†ã€‚ kind=4æ˜¯é€‰æ‹©æ€§ç¡®è®¤ï¼ˆSelective Acknowledgmentï¼ŒSACKï¼‰é€‰é¡¹ã€‚ TCPé€šä¿¡æ—¶ï¼Œå¦‚æœæŸä¸ªTCPæŠ¥æ–‡æ®µä¸¢å¤±ï¼Œåˆ™TCPæ¨¡å—ä¼šé‡ä¼ æœ€åè¢«ç¡®è®¤çš„TCPæŠ¥æ–‡æ®µåç»­çš„æ‰€æœ‰æŠ¥æ–‡æ®µï¼Œè¿™æ ·åŸå…ˆå·²ç»æ­£ç¡®ä¼ è¾“çš„TCPæŠ¥æ–‡æ®µä¹Ÿå¯èƒ½é‡å¤å‘é€ï¼Œä»è€Œé™ä½äº†TCPæ€§èƒ½ã€‚SACKæŠ€æœ¯æ­£æ˜¯ä¸ºæ”¹å–„è¿™ç§æƒ…å†µè€Œäº§ç”Ÿçš„ï¼Œå®ƒä½¿TCPæ¨¡å—åªé‡æ–°å‘é€ä¸¢å¤±çš„TCPæŠ¥æ–‡æ®µï¼Œä¸ç”¨å‘é€æ‰€æœ‰æœªè¢«ç¡®è®¤çš„TCPæŠ¥æ–‡æ®µã€‚é€‰æ‹©æ€§ç¡®è®¤é€‰é¡¹ç”¨åœ¨è¿æ¥åˆå§‹åŒ–æ—¶ï¼Œè¡¨ç¤ºæ˜¯å¦æ”¯æŒSACKæŠ€æœ¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹/proc/sys/net/ipv4/tcp_sackå†…æ ¸å˜é‡æ¥å¯ç”¨æˆ–å…³é—­é€‰æ‹©æ€§ç¡®è®¤é€‰é¡¹ã€‚ kind=5æ˜¯SACKå®é™…å·¥ä½œçš„é€‰é¡¹ã€‚ è¯¥é€‰é¡¹çš„å‚æ•°å‘Šè¯‰å‘é€æ–¹æœ¬ç«¯å·²ç»æ”¶åˆ°å¹¶ç¼“å­˜çš„ä¸è¿ç»­çš„æ•°æ®å—ï¼Œä»è€Œè®©å‘é€ç«¯å¯ä»¥æ®æ­¤æ£€æŸ¥å¹¶é‡å‘ä¸¢å¤±çš„æ•°æ®å—ã€‚æ¯ä¸ªå—è¾¹æ²¿ï¼ˆedge of blockï¼‰å‚æ•°åŒ…å«ä¸€ä¸ª4å­—èŠ‚çš„åºå·ã€‚å…¶ä¸­å—å·¦è¾¹æ²¿è¡¨ç¤ºä¸è¿ç»­å—çš„ç¬¬ä¸€ä¸ªæ•°æ®çš„åºå·ï¼Œè€Œå—å³è¾¹æ²¿åˆ™è¡¨ç¤ºä¸è¿ç»­å—çš„æœ€åä¸€ä¸ªæ•°æ®çš„åºå·çš„ä¸‹ä¸€ä¸ªåºå·ã€‚è¿™æ ·ä¸€å¯¹å‚æ•°ï¼ˆå—å·¦è¾¹æ²¿å’Œå—å³è¾¹æ²¿ï¼‰ä¹‹é—´çš„æ•°æ®æ˜¯æ²¡æœ‰æ”¶åˆ°çš„ã€‚å› ä¸ºä¸€ä¸ªå—ä¿¡æ¯å ç”¨8å­—èŠ‚ï¼Œæ‰€ä»¥TCPå¤´éƒ¨é€‰é¡¹ä¸­å®é™…ä¸Šæœ€å¤šå¯ä»¥åŒ…å«4ä¸ªè¿™æ ·çš„ä¸è¿ç»­æ•°æ®å—ï¼ˆè€ƒè™‘é€‰é¡¹ç±»å‹å’Œé•¿åº¦å ç”¨çš„2å­—èŠ‚ï¼‰ã€‚ kind=8æ˜¯æ—¶é—´æˆ³é€‰é¡¹ã€‚ è¯¥é€‰é¡¹æä¾›äº†è¾ƒä¸ºå‡†ç¡®çš„è®¡ç®—é€šä¿¡åŒæ–¹ä¹‹é—´çš„å›è·¯æ—¶é—´ï¼ˆRound Trip Timeï¼ŒRTTï¼‰çš„æ–¹æ³•ï¼Œä»è€Œä¸ºTCPæµé‡æ§åˆ¶æä¾›é‡è¦ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹/proc/sys/net/ipv4/tcp_timestampså†…æ ¸å˜é‡æ¥å¯ç”¨æˆ–å…³é—­æ—¶é—´æˆ³é€‰é¡¹ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:1:2","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"ä¸€ä¸ªçœŸå®çš„æŠ“åŒ…éªŒè¯è¿‡ç¨‹ tcpdumpæŠ“å–æ•°æ®åŒ… tcpdumpè¾“å‡ºFlags[S]ï¼Œè¡¨ç¤ºè¯¥TCPæŠ¥æ–‡æ®µåŒ…å«SYNæ ‡å¿—ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªåŒæ­¥æŠ¥æ–‡æ®µã€‚å¦‚æœTCPæŠ¥æ–‡æ®µåŒ…å«å…¶ä»–æ ‡å¿—ï¼Œåˆ™tcpdumpä¹Ÿä¼šå°†è¯¥æ ‡å¿—çš„é¦–å­—æ¯æ˜¾ç¤ºåœ¨â€œFlagsâ€åçš„æ–¹æ‹¬å·ä¸­ã€‚ seqæ˜¯åºå·å€¼ã€‚å› ä¸ºè¯¥åŒæ­¥æŠ¥æ–‡æ®µæ˜¯ä»127.0.0.1.41621ï¼ˆå®¢æˆ·ç«¯IPåœ°å€å’Œç«¯å£å·ï¼‰åˆ°127.0.0.1.23ï¼ˆæœåŠ¡å™¨IPåœ°å€å’Œç«¯å£å·ï¼‰è¿™ä¸ªä¼ è¾“æ–¹å‘ä¸Šçš„ç¬¬ä¸€ä¸ªTCPæŠ¥æ–‡æ®µï¼Œæ‰€ä»¥è¿™ä¸ªåºå·å€¼ä¹Ÿå°±æ˜¯æ­¤æ¬¡é€šä¿¡è¿‡ç¨‹ä¸­è¯¥ä¼ è¾“æ–¹å‘çš„ISNå€¼ã€‚å¹¶ä¸”ï¼Œå› ä¸ºè¿™æ˜¯æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­çš„ç¬¬ä¸€ä¸ªTCPæŠ¥æ–‡æ®µï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰é’ˆå¯¹å¯¹æ–¹å‘é€æ¥çš„TCPæŠ¥æ–‡æ®µçš„ç¡®è®¤å€¼ï¼ˆå°šæœªæ”¶åˆ°ä»»ä½•å¯¹æ–¹å‘é€æ¥çš„TCPæŠ¥æ–‡æ®µï¼‰ã€‚ winæ˜¯æ¥æ”¶é€šå‘Šçª—å£çš„å¤§å°ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªåŒæ­¥æŠ¥æ–‡æ®µï¼Œæ‰€ä»¥winå€¼åæ˜ çš„æ˜¯å®é™…çš„æ¥æ”¶é€šå‘Šçª—å£å¤§å°ã€‚ optionsæ˜¯TCPé€‰é¡¹ï¼Œå…¶å…·ä½“å†…å®¹åˆ—åœ¨æ–¹æ‹¬å·ä¸­ã€‚mssæ˜¯å‘é€ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰é€šå‘Šçš„æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ã€‚é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹å›è·¯æ¥å£çš„MTUä¸º16436å­—èŠ‚ï¼Œå› æ­¤å¯ä»¥é¢„æƒ³åˆ°TCPæŠ¥æ–‡æ®µçš„MSSä¸º16396ï¼ˆ16436-40ï¼‰å­—èŠ‚ã€‚sackOKè¡¨ç¤ºå‘é€ç«¯æ”¯æŒå¹¶åŒæ„ä½¿ç”¨SACKé€‰é¡¹ã€‚TS valæ˜¯å‘é€ç«¯çš„æ—¶é—´æˆ³ã€‚ecræ˜¯æ—¶é—´æˆ³å›æ˜¾åº”ç­”ã€‚å› ä¸ºè¿™æ˜¯ä¸€æ¬¡TCPé€šä¿¡çš„ç¬¬ä¸€ä¸ªTCPæŠ¥æ–‡æ®µï¼Œæ‰€ä»¥å®ƒé’ˆå¯¹å¯¹æ–¹çš„æ—¶é—´æˆ³çš„åº”ç­”ä¸º0ï¼ˆå°šæœªæ”¶åˆ°å¯¹æ–¹çš„æ—¶é—´æˆ³ï¼‰ã€‚ç´§æ¥ç€çš„nopæ˜¯ä¸€ä¸ªç©ºæ“ä½œé€‰é¡¹ã€‚wscaleæŒ‡å‡ºå‘é€ç«¯ä½¿ç”¨çš„çª—å£æ‰©å¤§å› å­ä¸º6ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:1:3","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPçš„å»ºç«‹å’Œå…³é—­ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:2:0","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ ä¸‰æ¬¡æ¡æ‰‹ ç¬¬1ä¸ªTCPæŠ¥æ–‡æ®µåŒ…å«SYNæ ‡å¿—ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªåŒæ­¥æŠ¥æ–‡æ®µï¼Œå³ernest-laptopï¼ˆå®¢æˆ·ç«¯ï¼‰å‘Kongming20ï¼ˆæœåŠ¡å™¨ï¼‰å‘èµ·è¿æ¥è¯·æ±‚ã€‚åŒæ—¶ï¼Œè¯¥åŒæ­¥æŠ¥æ–‡æ®µåŒ…å«ä¸€ä¸ªISNå€¼ä¸º535734930çš„åºå·ã€‚ ç¬¬2ä¸ªTCPæŠ¥æ–‡æ®µä¹Ÿæ˜¯åŒæ­¥æŠ¥æ–‡æ®µï¼Œè¡¨ç¤ºKongming20åŒæ„ä¸ernest-laptopå»ºç«‹è¿æ¥ã€‚åŒæ—¶å®ƒå‘é€è‡ªå·±çš„ISNå€¼ä¸º2159701207çš„åºå·ï¼Œå¹¶å¯¹ç¬¬1ä¸ªåŒæ­¥æŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ã€‚ç¡®è®¤å€¼æ˜¯535734931ï¼Œå³ç¬¬1ä¸ªåŒæ­¥æŠ¥æ–‡æ®µçš„åºå·å€¼åŠ 1ã€‚åºå·å€¼æ˜¯ç”¨æ¥æ ‡è¯†TCPæ•°æ®æµä¸­çš„æ•°æ®éƒ¨åˆ†çš„èµ·å§‹å­—èŠ‚åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­çš„åºå·ã€‚ä½†åŒæ­¥æŠ¥æ–‡æ®µæ¯”è¾ƒç‰¹æ®Šï¼Œå³ä½¿å®ƒå¹¶æ²¡æœ‰æºå¸¦ä»»ä½•åº”ç”¨ç¨‹åºæ•°æ®ï¼Œå®ƒä¹Ÿè¦å ç”¨ä¸€ä¸ªåºå·å€¼ã€‚ ç¬¬3ä¸ªTCPæŠ¥æ–‡æ®µæ˜¯ernest-laptopå¯¹ç¬¬2ä¸ªåŒæ­¥æŠ¥æ–‡æ®µçš„ç¡®è®¤ã€‚è‡³æ­¤ï¼ŒTCPè¿æ¥å°±å»ºç«‹èµ·æ¥äº†ã€‚å»ºç«‹TCPè¿æ¥çš„è¿™3ä¸ªæ­¥éª¤è¢«ç§°ä¸ºTCPä¸‰æ¬¡æ¡æ‰‹ã€‚ å››æ¬¡æŒ¥æ‰‹ åé¢4ä¸ªTCPæŠ¥æ–‡æ®µæ˜¯å…³é—­è¿æ¥çš„è¿‡ç¨‹ã€‚ç¬¬4ä¸ªTCPæŠ¥æ–‡æ®µåŒ…å«FINæ ‡å¿—ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªç»“æŸæŠ¥æ–‡æ®µï¼Œå³ernest-laptopè¦æ±‚å…³é—­è¿æ¥ã€‚ç»“æŸæŠ¥æ–‡æ®µå’ŒåŒæ­¥æŠ¥æ–‡æ®µä¸€æ ·ï¼Œä¹Ÿè¦å ç”¨ä¸€ä¸ªåºå·å€¼ã€‚ Kongming20ç”¨TCPæŠ¥æ–‡æ®µ5æ¥ç¡®è®¤è¯¥ç»“æŸæŠ¥æ–‡æ®µã€‚ç´§æ¥ç€Kongming20å‘é€è‡ªå·±çš„ç»“æŸæŠ¥æ–‡æ®µ6ï¼Œernest-laptopåˆ™ç”¨TCPæŠ¥æ–‡æ®µ7ç»™äºˆç¡®è®¤ã€‚å®é™…ä¸Šï¼Œä»…ç”¨äºç¡®è®¤ç›®çš„çš„ç¡®è®¤æŠ¥æ–‡æ®µ5æ˜¯å¯ä»¥çœç•¥çš„ï¼Œå› ä¸ºç»“æŸæŠ¥æ–‡æ®µ6ä¹Ÿæºå¸¦äº†è¯¥ç¡®è®¤ä¿¡æ¯ã€‚ç¡®è®¤æŠ¥æ–‡æ®µ5æ˜¯å¦å‡ºç°åœ¨è¿æ¥æ–­å¼€çš„è¿‡ç¨‹ä¸­ï¼Œå–å†³äºTCPçš„å»¶è¿Ÿç¡®è®¤ç‰¹æ€§ï¼ˆé™¤äº†å»¶è¿Ÿç¡®è®¤ç‰¹æ€§å¤–æˆ‘è§‰å¾—è¿˜èƒ½ç”¨æ¥å®ç°åŠå…³é—­çŠ¶æ€ï¼‰ã€‚ åœ¨è¿æ¥çš„å…³é—­è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºernest-laptopå…ˆå‘é€ç»“æŸæŠ¥æ–‡æ®µï¼ˆtelnetå®¢æˆ·ç«¯ç¨‹åºä¸»åŠ¨é€€å‡ºï¼‰ï¼Œæ•…ç§°ernest-laptopæ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œè€Œç§°Kongming20æ‰§è¡Œè¢«åŠ¨å…³é—­ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:2:1","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"åŠå…³é—­çŠ¶æ€ TCPé€šä¿¡çš„ä¸€ç«¯å¯ä»¥å‘é€ç»“æŸæŠ¥æ–‡æ®µç»™å¯¹æ–¹ï¼Œå‘Šè¯‰å®ƒæœ¬ç«¯å·²ç»å®Œæˆäº†æ•°æ®çš„å‘é€ï¼Œä½†å…è®¸ç»§ç»­æ¥æ”¶æ¥è‡ªå¯¹æ–¹çš„æ•°æ®ï¼Œç›´åˆ°å¯¹æ–¹ä¹Ÿå‘é€ç»“æŸæŠ¥æ–‡æ®µä»¥å…³é—­è¿æ¥ã€‚TCPè¿æ¥çš„è¿™ç§çŠ¶æ€ç§°ä¸ºåŠå…³é—­ï¼ˆhalf closeï¼‰çŠ¶æ€ï¼Œå¦‚å›¾3-7æ‰€ç¤ºã€‚ socketç½‘ç»œç¼–ç¨‹æ¥å£é€šè¿‡shutdownå‡½æ•°æä¾›äº†å¯¹åŠå…³é—­çš„æ”¯æŒï¼Œæˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚è®¨è®ºå®ƒã€‚è¿™é‡Œå¼ºè°ƒä¸€ä¸‹ï¼Œè™½ç„¶æˆ‘ä»¬ä»‹ç»äº†åŠå…³é—­çŠ¶æ€ï¼Œä½†æ˜¯ä½¿ç”¨åŠå…³é—­çš„åº”ç”¨ç¨‹åºå¾ˆå°‘è§ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:2:2","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"è¶…æ—¶é‡è¿çš„æŠ“åŒ…æ¢ç´¢ å‰é¢æˆ‘ä»¬è®¨è®ºçš„æ˜¯å¾ˆå¿«å»ºç«‹è¿æ¥çš„æƒ…å†µã€‚å¦‚æœå®¢æˆ·ç«¯è®¿é—®ä¸€ä¸ªè·ç¦»å®ƒå¾ˆè¿œçš„æœåŠ¡å™¨ï¼Œæˆ–è€…ç”±äºç½‘ç»œç¹å¿™ï¼Œå¯¼è‡´æœåŠ¡å™¨å¯¹äºå®¢æˆ·ç«¯å‘é€å‡ºçš„åŒæ­¥æŠ¥æ–‡æ®µæ²¡æœ‰åº”ç­”ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯ç¨‹åºå°†äº§ç”Ÿä»€ä¹ˆæ ·çš„è¡Œä¸ºå‘¢ï¼Ÿæ˜¾ç„¶ï¼Œå¯¹äºæä¾›å¯é æœåŠ¡çš„TCPæ¥è¯´ï¼Œå®ƒå¿…ç„¶æ˜¯å…ˆè¿›è¡Œé‡è¿ï¼ˆå¯èƒ½æ‰§è¡Œå¤šæ¬¡ï¼‰ï¼Œå¦‚æœé‡è¿ä»ç„¶æ— æ•ˆï¼Œåˆ™é€šçŸ¥åº”ç”¨ç¨‹åºè¿æ¥è¶…æ—¶ã€‚ ä½œè€…æŠ“åŒ…Linuxç³»ç»Ÿåè¾“å‡ºåŒ…çš„æ—¶é—´æˆ³ï¼Œå¾—åˆ°ä»¥ä¸‹ç»“æœï¼š æˆ‘ä»¬ä¸€å…±æŠ“å–åˆ°6ä¸ªTCPæŠ¥æ–‡æ®µï¼Œå®ƒä»¬éƒ½æ˜¯åŒæ­¥æŠ¥æ–‡æ®µï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„åºå·å€¼ï¼Œè¿™è¯´æ˜åé¢5ä¸ªåŒæ­¥æŠ¥æ–‡æ®µéƒ½æ˜¯è¶…æ—¶é‡è¿æŠ¥æ–‡æ®µã€‚è§‚å¯Ÿè¿™äº›TCPæŠ¥æ–‡æ®µè¢«å‘é€çš„æ—¶é—´é—´éš”ï¼Œå®ƒä»¬åˆ†åˆ«ä¸º1sã€2sã€4sã€8så’Œ16sï¼ˆç”±äºå®šæ—¶å™¨ç²¾åº¦çš„é—®é¢˜ï¼Œè¿™äº›æ—¶é—´é—´éš”éƒ½æœ‰ä¸€å®šåå·®ï¼‰ï¼Œå¯ä»¥æ¨æ–­æœ€åä¸€ä¸ªTCPæŠ¥æ–‡æ®µçš„è¶…æ—¶æ—¶é—´æ˜¯32sï¼ˆ63s-16s-8s-4s-2s-1sï¼‰ã€‚å› æ­¤ï¼ŒTCPæ¨¡å—ä¸€å…±æ‰§è¡Œäº†5æ¬¡é‡è¿æ“ä½œï¼Œè¿™æ˜¯ç”±/proc/sys/net/ipv4/tcp_syn_retrieså†…æ ¸å˜é‡æ‰€å®šä¹‰çš„ã€‚æ¯æ¬¡é‡è¿çš„è¶…æ—¶æ—¶é—´éƒ½å¢åŠ ä¸€å€ã€‚åœ¨5æ¬¡é‡è¿å‡å¤±è´¥çš„æƒ…å†µä¸‹ï¼ŒTCPæ¨¡å—æ”¾å¼ƒè¿æ¥å¹¶é€šçŸ¥åº”ç”¨ç¨‹åºã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:2:3","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPçŠ¶æ€è½¬ç§»è¿‡ç¨‹ TCPè¿æ¥çš„ä»»æ„ä¸€ç«¯åœ¨ä»»ä¸€æ—¶åˆ»éƒ½å¤„äºæŸç§çŠ¶æ€ï¼Œå½“å‰çŠ¶æ€å¯ä»¥é€šè¿‡netstatå‘½ä»¤æŸ¥çœ‹ã€‚æœ¬èŠ‚æˆ‘ä»¬è¦è®¨è®ºçš„æ˜¯TCPè¿æ¥ä»å»ºç«‹åˆ°å…³é—­çš„æ•´ä¸ªè¿‡ç¨‹ä¸­é€šä¿¡ä¸¤ç«¯çŠ¶æ€çš„å˜åŒ–ã€‚å›¾3-8æ˜¯å®Œæ•´çš„çŠ¶æ€è½¬ç§»å›¾ï¼Œå®ƒæç»˜äº†æ‰€æœ‰çš„TCPçŠ¶æ€ä»¥åŠå¯èƒ½çš„çŠ¶æ€è½¬æ¢ã€‚ å›¾3-8ä¸­çš„ç²—è™šçº¿è¡¨ç¤ºå…¸å‹çš„æœåŠ¡å™¨ç«¯è¿æ¥çš„çŠ¶æ€è½¬ç§»ï¼›ç²—å®çº¿è¡¨ç¤ºå…¸å‹çš„å®¢æˆ·ç«¯è¿æ¥çš„çŠ¶æ€è½¬ç§»ã€‚CLOSEDæ˜¯ä¸€ä¸ªå‡æƒ³çš„èµ·å§‹ç‚¹ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå®é™…çš„çŠ¶æ€ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:3:0","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPçŠ¶æ€è½¬ç§»æ€»å›¾æ–‡å­—è¯¦è§£ æœåŠ¡å™¨çŠ¶æ€è½¬ç§»è¿‡ç¨‹ æœåŠ¡å™¨é€šè¿‡listenç³»ç»Ÿè°ƒç”¨è¿›å…¥ LISTEN çŠ¶æ€ï¼Œè¢«åŠ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯æ‰€è°“çš„è¢«åŠ¨æ‰“å¼€ã€‚æœåŠ¡å™¨ä¸€æ—¦ç›‘å¬åˆ°æŸä¸ªè¿æ¥è¯·æ±‚ï¼ˆæ”¶åˆ°åŒæ­¥æŠ¥æ–‡æ®µï¼‰ï¼Œå°±å°†è¯¥è¿æ¥æ”¾å…¥å†…æ ¸ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¹¶å‘å®¢æˆ·ç«¯å‘é€å¸¦SYNæ ‡å¿—çš„ç¡®è®¤æŠ¥æ–‡æ®µã€‚æ­¤æ—¶è¯¥è¿æ¥å¤„äº SYN_RCVD çŠ¶æ€ã€‚å¦‚æœæœåŠ¡å™¨æˆåŠŸåœ°æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€å›çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œåˆ™è¯¥è¿æ¥è½¬ç§»åˆ° ESTABLISHED çŠ¶æ€ã€‚ESTABLISHEDçŠ¶æ€æ˜¯è¿æ¥åŒæ–¹èƒ½å¤Ÿè¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“çš„çŠ¶æ€ã€‚ å½“å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥æ—¶ï¼ˆé€šè¿‡closeæˆ–shutdownç³»ç»Ÿè°ƒç”¨å‘æœåŠ¡å™¨å‘é€ç»“æŸæŠ¥æ–‡æ®µï¼‰ï¼ŒæœåŠ¡å™¨é€šè¿‡è¿”å›ç¡®è®¤æŠ¥æ–‡æ®µä½¿è¿æ¥è¿›å…¥ CLOSE_WAIT çŠ¶æ€ã€‚è¿™ä¸ªçŠ¶æ€çš„å«ä¹‰å¾ˆæ˜ç¡®ï¼šç­‰å¾…æœåŠ¡å™¨åº”ç”¨ç¨‹åºå…³é—­è¿æ¥ã€‚é€šå¸¸ï¼ŒæœåŠ¡å™¨æ£€æµ‹åˆ°å®¢æˆ·ç«¯å…³é—­è¿æ¥åï¼Œä¹Ÿä¼šç«‹å³ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªç»“æŸæŠ¥æ–‡æ®µæ¥å…³é—­è¿æ¥ã€‚è¿™å°†ä½¿è¿æ¥è½¬ç§»åˆ° LAST_ACK çŠ¶æ€ï¼Œä»¥ç­‰å¾…å®¢æˆ·ç«¯å¯¹ç»“æŸæŠ¥æ–‡æ®µçš„æœ€åä¸€æ¬¡ç¡®è®¤ã€‚ä¸€æ—¦ç¡®è®¤å®Œæˆï¼Œè¿æ¥å°±å½»åº•å…³é—­äº†ã€‚ å®¢æˆ·ç«¯çŠ¶æ€è½¬ç§»è¿‡ç¨‹ å®¢æˆ·ç«¯é€šè¿‡connectç³»ç»Ÿè°ƒç”¨ä¸»åŠ¨ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚connectç³»ç»Ÿè°ƒç”¨é¦–å…ˆç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªåŒæ­¥æŠ¥æ–‡æ®µï¼Œä½¿è¿æ¥è½¬ç§»åˆ° SYN_SENT çŠ¶æ€ã€‚æ­¤åï¼Œconnectç³»ç»Ÿè°ƒç”¨å¯èƒ½å› ä¸ºå¦‚ä¸‹ä¸¤ä¸ªåŸå› å¤±è´¥è¿”å›ï¼š â‘å¦‚æœconnectè¿æ¥çš„ç›®æ ‡ç«¯å£ä¸å­˜åœ¨ï¼ˆæœªè¢«ä»»ä½•è¿›ç¨‹ç›‘å¬ï¼‰ï¼Œæˆ–è€…è¯¥ç«¯å£ä»è¢«å¤„äºTIME_WAITçŠ¶æ€çš„è¿æ¥æ‰€å ç”¨ï¼ˆè§åæ–‡ï¼‰ï¼Œåˆ™æœåŠ¡å™¨å°†ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¤ä½æŠ¥æ–‡æ®µï¼Œconnectè°ƒç”¨å¤±è´¥ã€‚ â‘å¦‚æœç›®æ ‡ç«¯å£å­˜åœ¨ï¼Œä½†connectåœ¨è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°æœåŠ¡å™¨çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œåˆ™connectè°ƒç”¨å¤±è´¥ã€‚ connectè°ƒç”¨å¤±è´¥å°†ä½¿è¿æ¥ç«‹å³è¿”å›åˆ°åˆå§‹çš„CLOSEDçŠ¶æ€ã€‚å¦‚æœå®¢æˆ·ç«¯æˆåŠŸæ”¶åˆ°æœåŠ¡å™¨çš„åŒæ­¥æŠ¥æ–‡æ®µå’Œç¡®è®¤ï¼Œåˆ™connectè°ƒç”¨æˆåŠŸè¿”å›ï¼Œè¿æ¥è½¬ç§»è‡³ ESTABLISHED çŠ¶æ€ã€‚ å½“å®¢æˆ·ç«¯æ‰§è¡Œä¸»åŠ¨å…³é—­æ—¶ï¼Œå®ƒå°†å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªç»“æŸæŠ¥æ–‡æ®µï¼ŒåŒæ—¶è¿æ¥è¿›å…¥ FIN_WAIT_1 çŠ¶æ€ã€‚è‹¥æ­¤æ—¶å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨ä¸“é—¨ç”¨äºç¡®è®¤ç›®çš„çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼ˆæ¯”å¦‚å›¾3-6ä¸­çš„TCPæŠ¥æ–‡æ®µ5ï¼‰ï¼Œåˆ™è¿æ¥è½¬ç§»è‡³ FIN_WAIT_2 çŠ¶æ€ã€‚å½“å®¢æˆ·ç«¯å¤„äº FIN_WAIT_2 çŠ¶æ€æ—¶ï¼ŒæœåŠ¡å™¨å¤„äº CLOSE_WAIT çŠ¶æ€ï¼Œè¿™ä¸€å¯¹çŠ¶æ€æ˜¯å¯èƒ½å‘ç”ŸåŠå…³é—­çš„çŠ¶æ€ã€‚æ­¤æ—¶å¦‚æœæœåŠ¡å™¨ä¹Ÿå…³é—­è¿æ¥ï¼ˆå‘é€ç»“æŸæŠ¥æ–‡æ®µï¼‰ï¼Œåˆ™å®¢æˆ·ç«¯å°†ç»™äºˆç¡®è®¤å¹¶è¿›å…¥TIME_WAITçŠ¶æ€ã€‚ å›¾3-8è¿˜ç»™å‡ºäº†å®¢æˆ·ç«¯ä» FIN_WAIT_1 çŠ¶æ€ç›´æ¥è¿›å…¥ TIME_WAIT çŠ¶æ€çš„ä¸€æ¡çº¿è·¯ï¼ˆä¸ç»è¿‡ FIN_WAIT_2 çŠ¶æ€ï¼‰ï¼Œå‰ææ˜¯å¤„äºFIN_WAIT_1 çŠ¶æ€çš„æœåŠ¡å™¨ç›´æ¥æ”¶åˆ°å¸¦ç¡®è®¤ä¿¡æ¯çš„ç»“æŸæŠ¥æ–‡æ®µï¼ˆè€Œä¸æ˜¯å…ˆæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡æ®µï¼Œå†æ”¶åˆ°ç»“æŸæŠ¥æ–‡æ®µï¼‰ã€‚è¿™ç§æƒ…å†µå¯¹åº”äºå›¾3-6ä¸­çš„æœåŠ¡å™¨ä¸å‘é€TCPæŠ¥æ–‡æ®µ5ã€‚ å‰é¢è¯´è¿‡ï¼Œå¤„äº FIN_WAIT_2 çŠ¶æ€çš„å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…æœåŠ¡å™¨å‘é€ç»“æŸæŠ¥æ–‡æ®µï¼Œæ‰èƒ½è½¬ç§»è‡³ TIME_WAIT çŠ¶æ€ï¼Œå¦åˆ™å®ƒå°†ä¸€ç›´åœç•™åœ¨è¿™ä¸ªçŠ¶æ€ã€‚å¦‚æœä¸æ˜¯ä¸ºäº†åœ¨åŠå…³é—­çŠ¶æ€ä¸‹ç»§ç»­æ¥æ”¶æ•°æ®ï¼Œè¿æ¥é•¿æ—¶é—´åœ°åœç•™åœ¨ FIN_WAIT_2 çŠ¶æ€å¹¶æ— ç›Šå¤„ï¼ˆæ‰€ä»¥å®¢æˆ·ç«¯å¤„äº FIN_WAIT_2 æœåŠ¡ç«¯å¤„äº CLOSE_WAIT çŠ¶æ€æ—¶ä¸€èˆ¬æ˜¯ä¸ºäº†ä¿æŒåŠå…³é—­çŠ¶æ€ï¼‰ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šå®¢æˆ·ç«¯æ‰§è¡ŒåŠå…³é—­åï¼Œæœªç­‰æœåŠ¡å™¨å…³é—­è¿æ¥å°±å¼ºè¡Œé€€å‡ºäº†ã€‚æ­¤æ—¶å®¢æˆ·ç«¯è¿æ¥ç”±å†…æ ¸æ¥æ¥ç®¡ï¼Œå¯ç§°ä¹‹ä¸ºå­¤å„¿è¿æ¥ï¼ˆå’Œå­¤å„¿è¿›ç¨‹ç±»ä¼¼ï¼‰ã€‚Linuxä¸ºäº†é˜²æ­¢å­¤å„¿è¿æ¥é•¿æ—¶é—´å­˜ç•™åœ¨å†…æ ¸ä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªå†…æ ¸å˜é‡ï¼š/proc/sys/net/ipv4/tcp_max_orphanså’Œ/proc/sys/net/ipv4/tcp_fin_timeoutã€‚å‰è€…æŒ‡å®šå†…æ ¸èƒ½æ¥ç®¡çš„å­¤å„¿è¿æ¥æ•°ç›®ï¼Œåè€…æŒ‡å®šå­¤å„¿è¿æ¥åœ¨å†…æ ¸ä¸­ç”Ÿå­˜çš„æ—¶é—´ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬ç®€å•åœ°è®¨è®ºäº†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç¨‹åºçš„å…¸å‹TCPçŠ¶æ€è½¬ç§»è·¯çº¿ã€‚å¯¹åº”äºå›¾3-6æ‰€ç¤ºçš„TCPè¿æ¥çš„å»ºç«‹ä¸æ–­å¼€è¿‡ç¨‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„çŠ¶æ€è½¬ç§»å¦‚å›¾3-9æ‰€ç¤ºã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:3:1","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TIME_WAITçŠ¶æ€ å®¢æˆ·ç«¯å¤„äº TIME_WAIT çŠ¶æ€ã€‚åœ¨è¿™ä¸ªçŠ¶æ€ï¼Œå®¢æˆ·ç«¯è¿æ¥è¦ç­‰å¾…ä¸€æ®µé•¿ä¸º2MSLï¼ˆMaximum Segment Lifeï¼ŒæŠ¥æ–‡æ®µæœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼‰çš„æ—¶é—´ï¼Œæ‰èƒ½å®Œå…¨å…³é—­ã€‚MSLæ˜¯TCPæŠ¥æ–‡æ®µåœ¨ç½‘ç»œä¸­çš„æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œæ ‡å‡†æ–‡æ¡£RFC 1122çš„å»ºè®®å€¼æ˜¯2 minã€‚ TIME_WAIT çŠ¶æ€å­˜åœ¨çš„åŸå› æœ‰ä¸¤ç‚¹ï¼š â‘å¯é åœ°ç»ˆæ­¢TCPè¿æ¥ã€‚ â‘ä¿è¯è®©è¿Ÿæ¥çš„TCPæŠ¥æ–‡æ®µæœ‰è¶³å¤Ÿçš„æ—¶é—´è¢«è¯†åˆ«å¹¶ä¸¢å¼ƒã€‚ ç¬¬ä¸€ä¸ªåŸå› å¾ˆå¥½ç†è§£ã€‚å‡è®¾å›¾3-9ä¸­ç”¨äºç¡®è®¤æœåŠ¡å™¨ç»“æŸæŠ¥æ–‡æ®µ6çš„TCPæŠ¥æ–‡æ®µ7ä¸¢å¤±ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°†é‡å‘ç»“æŸæŠ¥æ–‡æ®µã€‚å› æ­¤å®¢æˆ·ç«¯éœ€è¦åœç•™åœ¨æŸä¸ªçŠ¶æ€ä»¥å¤„ç†é‡å¤æ”¶åˆ°çš„ç»“æŸæŠ¥æ–‡æ®µï¼ˆå³å‘æœåŠ¡å™¨å‘é€ç¡®è®¤æŠ¥æ–‡æ®µï¼‰ã€‚å¦åˆ™ï¼Œå®¢æˆ·ç«¯å°†ä»¥å¤ä½æŠ¥æ–‡æ®µæ¥å›åº”æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨åˆ™è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå®ƒæœŸæœ›çš„æ˜¯ä¸€ä¸ªåƒTCPæŠ¥æ–‡æ®µ7é‚£æ ·çš„ç¡®è®¤æŠ¥æ–‡æ®µã€‚ TIME_WAITçŠ¶æ€æŒç»­2MSLçš„åŸå›  åœ¨Linuxç³»ç»Ÿä¸Šï¼Œä¸€ä¸ªTCPç«¯å£ä¸èƒ½è¢«åŒæ—¶æ‰“å¼€å¤šæ¬¡ï¼ˆä¸¤æ¬¡åŠä»¥ä¸Šï¼‰ã€‚å½“ä¸€ä¸ªTCPè¿æ¥å¤„äº TIME_WAIT çŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬å°†æ— æ³•ç«‹å³ä½¿ç”¨è¯¥è¿æ¥å ç”¨ç€çš„ç«¯å£æ¥å»ºç«‹ä¸€ä¸ªæ–°è¿æ¥ã€‚åè¿‡æ¥æ€è€ƒï¼Œå¦‚æœä¸å­˜åœ¨ TIME_WAIT çŠ¶æ€ï¼Œåˆ™åº”ç”¨ç¨‹åºèƒ½å¤Ÿç«‹å³å»ºç«‹ä¸€ä¸ªå’Œåˆšå…³é—­çš„è¿æ¥ç›¸ä¼¼çš„è¿æ¥ï¼ˆè¿™é‡Œè¯´çš„ç›¸ä¼¼ï¼Œæ˜¯æŒ‡å®ƒä»¬å…·æœ‰ç›¸åŒçš„IPåœ°å€å’Œç«¯å£å·ï¼‰ã€‚è¿™ä¸ªæ–°çš„ã€å’ŒåŸæ¥ç›¸ä¼¼çš„è¿æ¥è¢«ç§°ä¸ºåŸæ¥çš„è¿æ¥çš„åŒ–èº«ï¼ˆincarnationï¼‰ã€‚æ–°çš„åŒ–èº«å¯èƒ½æ¥æ”¶åˆ°å±äºåŸæ¥çš„è¿æ¥çš„ã€æºå¸¦åº”ç”¨ç¨‹åºæ•°æ®çš„TCPæŠ¥æ–‡æ®µï¼ˆè¿Ÿåˆ°çš„æŠ¥æ–‡æ®µï¼‰ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åº”è¯¥å‘ç”Ÿçš„ã€‚è¿™å°±æ˜¯TIME_WAITçŠ¶æ€å­˜åœ¨çš„ç¬¬äºŒä¸ªåŸå› ã€‚ å¦å¤–ï¼Œå› ä¸ºTCPæŠ¥æ–‡æ®µçš„æœ€å¤§ç”Ÿå­˜æ—¶é—´æ˜¯MSLï¼Œæ‰€ä»¥åšæŒ2MSLæ—¶é—´çš„TIME_WAITçŠ¶æ€èƒ½å¤Ÿç¡®ä¿ç½‘ç»œä¸Šä¸¤ä¸ªä¼ è¾“æ–¹å‘ä¸Šå°šæœªè¢«æ¥æ”¶åˆ°çš„ã€è¿Ÿåˆ°çš„TCPæŠ¥æ–‡æ®µéƒ½å·²ç»æ¶ˆå¤±ï¼ˆè¢«ä¸­è½¬è·¯ç”±å™¨ä¸¢å¼ƒï¼‰ã€‚ å› æ­¤ï¼Œä¸€ä¸ªè¿æ¥çš„æ–°çš„åŒ–èº«å¯ä»¥åœ¨2MSLæ—¶é—´ä¹‹åå®‰å…¨åœ°å»ºç«‹ï¼Œè€Œç»å¯¹ä¸ä¼šæ¥æ”¶åˆ°å±äºåŸæ¥è¿æ¥çš„åº”ç”¨ç¨‹åºæ•°æ®ï¼Œè¿™å°±æ˜¯ TIME_WAIT çŠ¶æ€è¦æŒç»­2MSLæ—¶é—´çš„åŸå› ã€‚ TIME_WAITå¼•å‘çš„ç«¯å£å ç”¨é—®é¢˜ å…³äºå®¢æˆ·ç«¯ æ—¢ç„¶ä¸€ä¸ªå®¢æˆ·ç«¯å¤„äº TIME_WAIT çŠ¶æ€æ—¶ä¼šå ç”¨ç«¯å£å·ï¼Œé‚£æˆ‘ä»¬ä¸‹æ¬¡é‡å¯ç¨‹åºä¸ä¹…æ²¡æ³•å†å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡äº†ï¼Ÿ å®é™…ä¸Šå®¢æˆ·ç«¯å¹¶ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸€èˆ¬ä½¿ç”¨ç³»ç»Ÿè‡ªåŠ¨åˆ†é…çš„ä¸´æ—¶ç«¯å£å·æ¥å»ºç«‹è¿æ¥ï¼Œè€Œç”±äºéšæœºæ€§ï¼Œä¸´æ—¶ç«¯å£å·ä¸€èˆ¬å’Œç¨‹åºä¸Šä¸€æ¬¡ä½¿ç”¨çš„ç«¯å£å·ï¼ˆè¿˜å¤„äºTIME_WAITçŠ¶æ€çš„é‚£ä¸ªè¿æ¥ä½¿ç”¨çš„ç«¯å£å·ï¼‰ä¸åŒï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ç¨‹åºä¸€èˆ¬å¯ä»¥ç«‹å³é‡å¯ã€‚ å…³äºæœåŠ¡ç«¯ ä½†å¦‚æœæ˜¯æœåŠ¡å™¨ä¸»åŠ¨å…³é—­è¿æ¥åå¼‚å¸¸ç»ˆæ­¢ï¼Œåˆ™å› ä¸ºå®ƒæ€»æ˜¯ä½¿ç”¨åŒä¸€ä¸ªçŸ¥åæœåŠ¡ç«¯å£å·ï¼Œæ‰€ä»¥è¿æ¥çš„ TIME_WAIT çŠ¶æ€å°†å¯¼è‡´å®ƒä¸èƒ½ç«‹å³é‡å¯ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡socketé€‰é¡¹SO_REUSEADDRæ¥å¼ºåˆ¶è¿›ç¨‹ç«‹å³ä½¿ç”¨å¤„äºTIME_WAITçŠ¶æ€çš„è¿æ¥å ç”¨çš„ç«¯å£ã€‚ï¼ˆå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªç«¯å£å·å¯¹åº”çš„è¿›ç¨‹æ€æ­»ï¼‰ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:3:2","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"å¤ä½æŠ¥æ–‡æ®µ åœ¨æŸäº›ç‰¹æ®Šæ¡ä»¶ä¸‹ï¼ŒTCPè¿æ¥çš„ä¸€ç«¯ä¼šå‘å¦ä¸€ç«¯å‘é€æºå¸¦RSTæ ‡å¿—çš„æŠ¥æ–‡æ®µï¼Œå³å¤ä½æŠ¥æ–‡æ®µï¼Œä»¥é€šçŸ¥å¯¹æ–¹å…³é—­è¿æ¥æˆ–é‡æ–°å»ºç«‹è¿æ¥ã€‚ æˆ‘ä»¬è®¨è®ºäº§ç”Ÿå¤ä½æŠ¥æ–‡æ®µçš„3ç§æƒ…å†µã€‚ æƒ…å†µä¸€ï¼šè®¿é—®ä¸å­˜åœ¨çš„ç«¯å£ æŠ“åŒ…æµ‹è¯•å¦‚ä¸‹ï¼š ç”±æ­¤å¯è§ï¼Œernest-laptopé’ˆå¯¹Kongming20çš„è¿æ¥è¯·æ±‚ï¼ˆåŒæ­¥æŠ¥æ–‡æ®µï¼‰å›åº”äº†ä¸€ä¸ªå¤ä½æŠ¥æ–‡æ®µï¼ˆtcpdumpè¾“å‡ºRæ ‡å¿—ï¼‰ã€‚å› ä¸ºå¤ä½æŠ¥æ–‡æ®µçš„æ¥æ”¶é€šå‘Šçª—å£å¤§å°ä¸º0ï¼Œæ‰€ä»¥å¯ä»¥é¢„è§ï¼šæ”¶åˆ°å¤ä½æŠ¥æ–‡æ®µçš„ä¸€ç«¯åº”è¯¥å…³é—­è¿æ¥æˆ–è€…é‡æ–°è¿æ¥ï¼Œè€Œä¸èƒ½å›åº”è¿™ä¸ªå¤ä½æŠ¥æ–‡æ®µã€‚ å®é™…ä¸Šï¼Œå½“å®¢æˆ·ç«¯ç¨‹åºå‘æœåŠ¡å™¨çš„æŸä¸ªç«¯å£å‘èµ·è¿æ¥ï¼Œè€Œè¯¥ç«¯å£ä»è¢«å¤„äºTIME_WAITçŠ¶æ€çš„è¿æ¥æ‰€å ç”¨æ—¶ï¼Œå®¢æˆ·ç«¯ç¨‹åºä¹Ÿå°†æ”¶åˆ°å¤ä½æŠ¥æ–‡æ®µã€‚ æƒ…å†µäºŒï¼šå¼‚å¸¸ç»ˆæ­¢è¿æ¥ å‰é¢è®¨è®ºçš„è¿æ¥ç»ˆæ­¢æ–¹å¼éƒ½æ˜¯æ­£å¸¸çš„ç»ˆæ­¢æ–¹å¼ï¼šæ•°æ®äº¤æ¢å®Œæˆä¹‹åï¼Œä¸€æ–¹ç»™å¦ä¸€æ–¹å‘é€ç»“æŸæŠ¥æ–‡æ®µã€‚TCPæä¾›äº†å¼‚å¸¸ç»ˆæ­¢ä¸€ä¸ªè¿æ¥çš„æ–¹æ³•ï¼Œå³ç»™å¯¹æ–¹å‘é€ä¸€ä¸ªå¤ä½æŠ¥æ–‡æ®µã€‚ä¸€æ—¦å‘é€äº†å¤ä½æŠ¥æ–‡æ®µï¼Œå‘é€ç«¯æ‰€æœ‰æ’é˜Ÿç­‰å¾…å‘é€çš„æ•°æ®éƒ½å°†è¢«ä¸¢å¼ƒã€‚ åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨socketé€‰é¡¹SO_LINGERæ¥å‘é€å¤ä½æŠ¥æ–‡æ®µï¼Œä»¥å¼‚å¸¸ç»ˆæ­¢ä¸€ä¸ªè¿æ¥ã€‚ æƒ…å†µä¸‰ï¼šå¤„ç†åŠæ‰“å¼€è¿æ¥ è€ƒè™‘ä¸‹é¢çš„æƒ…å†µï¼šæœåŠ¡å™¨ï¼ˆæˆ–å®¢æˆ·ç«¯ï¼‰å…³é—­æˆ–è€…å¼‚å¸¸ç»ˆæ­¢äº†è¿æ¥ï¼Œè€Œå¯¹æ–¹æ²¡æœ‰æ¥æ”¶åˆ°ç»“æŸæŠ¥æ–‡æ®µï¼ˆæ¯”å¦‚å‘ç”Ÿäº†ç½‘ç»œæ•…éšœï¼‰ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯ï¼ˆæˆ–æœåŠ¡å™¨ï¼‰è¿˜ç»´æŒç€åŸæ¥çš„è¿æ¥ï¼Œè€ŒæœåŠ¡å™¨ï¼ˆæˆ–å®¢æˆ·ç«¯ï¼‰å³ä½¿é‡å¯ï¼Œä¹Ÿå·²ç»æ²¡æœ‰è¯¥è¿æ¥çš„ä»»ä½•ä¿¡æ¯äº†ã€‚æˆ‘ä»¬å°†è¿™ç§çŠ¶æ€ç§°ä¸ºåŠæ‰“å¼€çŠ¶æ€ï¼Œå¤„äºè¿™ç§çŠ¶æ€çš„è¿æ¥ç§°ä¸ºåŠæ‰“å¼€è¿æ¥ã€‚å¦‚æœå®¢æˆ·ç«¯ï¼ˆæˆ–æœåŠ¡å™¨ï¼‰å¾€å¤„äºåŠæ‰“å¼€çŠ¶æ€çš„è¿æ¥å†™å…¥æ•°æ®ï¼Œåˆ™å¯¹æ–¹å°†å›åº”ä¸€ä¸ªå¤ä½æŠ¥æ–‡æ®µã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨Kongming20ä¸Šä½¿ç”¨ncå‘½ä»¤æ¨¡æ‹Ÿä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºï¼Œä½¿ä¹‹ç›‘å¬12345ç«¯å£ï¼Œç„¶åä»ernest-laptopè¿è¡Œtelnetå‘½ä»¤ç™»å½•åˆ°è¯¥ç«¯å£ä¸Šï¼Œæ¥ç€æ‹”æ‰ernest-laptopçš„ç½‘çº¿ï¼Œå¹¶åœ¨Kongming20ä¸Šè¯·æ±‚è¿æ¥ä¸­æ–­ã€‚æ˜¾ç„¶ï¼Œæ­¤æ—¶ernest-laptopä¸Šè¿è¡Œçš„telnetå®¢æˆ·ç«¯ç¨‹åºç»´æŒç€ä¸€ä¸ªåŠæ‰“å¼€è¿æ¥ã€‚ç„¶åæ¥ä¸Šernest-laptopçš„ç½‘çº¿ï¼Œå¹¶ä»å®¢æˆ·ç«¯ç¨‹åºå¾€åŠæ‰“å¼€è¿æ¥å†™å…¥1å­—èŠ‚çš„æ•°æ®â€œaâ€ã€‚ å…·ä½“çš„å®è·µæŠ“åŒ…ï¼š è¯¥è¾“å‡ºå†…å®¹ä¸­ï¼Œå‰3ä¸ªTCPæŠ¥æ–‡æ®µæ˜¯æ­£å¸¸å»ºç«‹TCPè¿æ¥çš„3æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ç¬¬4ä¸ªTCPæŠ¥æ–‡æ®µç”±å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨ï¼Œå®ƒæºå¸¦äº†3å­—èŠ‚çš„åº”ç”¨ç¨‹åºæ•°æ®ï¼Œè¿™3å­—èŠ‚ä¾æ¬¡æ˜¯ï¼šå­—æ¯â€œaâ€ã€å›è½¦ç¬¦â€œ\\râ€å’Œæ¢è¡Œç¬¦â€œ\\nâ€ã€‚ä¸è¿‡å› ä¸ºæœåŠ¡å™¨ç¨‹åºå·²ç»è¢«ä¸­æ–­ï¼Œæ‰€ä»¥Kongming20å¯¹å®¢æˆ·ç«¯å‘é€çš„æ•°æ®å›åº”äº†ä¸€ä¸ªå¤ä½æŠ¥æ–‡æ®µ5ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:3:3","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPæ•°æ®æµ TCPæŠ¥æ–‡æ®µæ‰€æºå¸¦çš„åº”ç”¨ç¨‹åºæ•°æ®æŒ‰ç…§é•¿åº¦åˆ†ä¸ºä¸¤ç§ï¼šäº¤äº’æ•°æ®å’Œæˆå—æ•°æ®ã€‚äº¤äº’æ•°æ®ä»…åŒ…å«å¾ˆå°‘çš„å­—èŠ‚ã€‚ä½¿ç”¨äº¤äº’æ•°æ®çš„åº”ç”¨ç¨‹åºï¼ˆæˆ–åè®®ï¼‰å¯¹å®æ—¶æ€§è¦æ±‚é«˜ï¼Œæ¯”å¦‚telnetã€sshç­‰ã€‚æˆå—æ•°æ®çš„é•¿åº¦åˆ™é€šå¸¸ä¸ºTCPæŠ¥æ–‡æ®µå…è®¸çš„æœ€å¤§æ•°æ®é•¿åº¦ã€‚ä½¿ç”¨æˆå—æ•°æ®çš„åº”ç”¨ç¨‹åºï¼ˆæˆ–åè®®ï¼‰å¯¹ä¼ è¾“æ•ˆç‡è¦æ±‚é«˜ï¼Œæ¯”å¦‚ftpã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:4:0","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"äº¤äº’æ•°æ®æµæŠ“åŒ…è®²è§£ è€ƒè™‘å¦‚ä¸‹æƒ…å†µï¼šåœ¨ernest-laptopä¸Šæ‰§è¡Œtelnetå‘½ä»¤ç™»å½•åˆ°æœ¬æœºï¼Œç„¶ååœ¨shellå‘½ä»¤æç¤ºç¬¦åæ‰§è¡Œlså‘½ä»¤ï¼ŒåŒæ—¶ç”¨tcpdumpæŠ“å–è¿™ä¸€è¿‡ç¨‹ä¸­telnetå®¢æˆ·ç«¯å’ŒtelnetæœåŠ¡å™¨äº¤æ¢çš„TCPæŠ¥æ–‡æ®µã€‚ TCPæŠ¥æ–‡æ®µ1ç”±å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨ï¼Œå®ƒæºå¸¦1ä¸ªå­—èŠ‚çš„åº”ç”¨ç¨‹åºæ•°æ®ï¼Œå³å­—æ¯â€œlâ€ã€‚ TCPæŠ¥æ–‡æ®µ2æ˜¯æœåŠ¡å™¨å¯¹TCPæŠ¥æ–‡æ®µ1çš„ç¡®è®¤ï¼ŒåŒæ—¶å›æ˜¾å­—æ¯â€œlâ€ã€‚ TCPæŠ¥æ–‡æ®µ3æ˜¯å®¢æˆ·ç«¯å¯¹TCPæŠ¥æ–‡æ®µ2çš„ç¡®è®¤ã€‚ ç¬¬4ï½6ä¸ªTCPæŠ¥æ–‡æ®µæ˜¯é’ˆå¯¹å­—æ¯â€œsâ€çš„ä¸Šè¿°è¿‡ç¨‹ã€‚ TCPæŠ¥æ–‡æ®µ7ä¼ é€çš„2å­—èŠ‚æ•°æ®åˆ†åˆ«æ˜¯ï¼šå®¢æˆ·ç«¯é”®å…¥çš„å›è½¦ç¬¦å’Œæµç»“æŸç¬¦ï¼ˆEOFï¼Œæœ¬ä¾‹ä¸­æ˜¯0x00ï¼‰ã€‚ TCPæŠ¥æ–‡æ®µ8æºå¸¦æœåŠ¡å™¨è¿”å›çš„å®¢æˆ·æŸ¥è¯¢çš„ç›®å½•çš„å†…å®¹ï¼ˆlså‘½ä»¤çš„è¾“å‡ºï¼‰ï¼ŒåŒ…æ‹¬è¯¥ç›®å½•ä¸‹æ–‡ä»¶çš„æ–‡ä»¶ååŠå…¶æ˜¾ç¤ºæ§åˆ¶å‚æ•°ã€‚ TCPæŠ¥æ–‡æ®µ9æ˜¯å®¢æˆ·ç«¯å¯¹TCPæŠ¥æ–‡æ®µ8çš„ç¡®è®¤ã€‚ TCPæŠ¥æ–‡æ®µ10æºå¸¦çš„ä¹Ÿæ˜¯æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå›è½¦ç¬¦ã€ä¸€ä¸ªæ¢è¡Œç¬¦ã€å®¢æˆ·ç«¯ç™»å½•ç”¨æˆ·çš„PS1ç¯å¢ƒå˜é‡ï¼ˆç¬¬ä¸€çº§å‘½ä»¤æç¤ºç¬¦ï¼‰ã€‚ TCPæŠ¥æ–‡æ®µ11æ˜¯å®¢æˆ·ç«¯å¯¹TCPæŠ¥æ–‡æ®µ10çš„ç¡®è®¤ã€‚ å»¶è¿Ÿç¡®è®¤ åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯é’ˆå¯¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ‰€å‘é€çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼ˆTCPæŠ¥æ–‡æ®µ6ã€9å’Œ11ï¼‰éƒ½ä¸æºå¸¦ä»»ä½•åº”ç”¨ç¨‹åºæ•°æ®ï¼ˆé•¿åº¦ä¸º0ï¼‰ï¼Œè€ŒæœåŠ¡å™¨æ¯æ¬¡å‘é€çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼ˆTCPæŠ¥æ–‡æ®µ2ã€5ã€8å’Œ10ï¼‰éƒ½åŒ…å«å®ƒéœ€è¦å‘é€çš„åº”ç”¨ç¨‹åºæ•°æ®ã€‚ æœåŠ¡å™¨çš„è¿™ç§å¤„ç†æ–¹å¼ç§°ä¸ºå»¶è¿Ÿç¡®è®¤ï¼Œå³å®ƒä¸é©¬ä¸Šç¡®è®¤ä¸Šæ¬¡æ”¶åˆ°çš„æ•°æ®ï¼Œè€Œæ˜¯åœ¨ä¸€æ®µå»¶è¿Ÿæ—¶é—´åæŸ¥çœ‹æœ¬ç«¯æ˜¯å¦æœ‰æ•°æ®éœ€è¦å‘é€ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å’Œç¡®è®¤ä¿¡æ¯ä¸€èµ·å‘å‡ºã€‚å› ä¸ºæœåŠ¡å™¨å¯¹å®¢æˆ·è¯·æ±‚å¤„ç†å¾—å¾ˆå¿«ï¼Œæ‰€ä»¥å®ƒå‘é€ç¡®è®¤æŠ¥æ–‡æ®µçš„æ—¶å€™æ€»æ˜¯æœ‰æ•°æ®ä¸€èµ·å‘é€ã€‚å»¶è¿Ÿç¡®è®¤å¯ä»¥å‡å°‘å‘é€TCPæŠ¥æ–‡æ®µçš„æ•°é‡ã€‚è€Œç”±äºç”¨æˆ·çš„è¾“å…¥é€Ÿåº¦æ˜æ˜¾æ…¢äºå®¢æˆ·ç«¯ç¨‹åºçš„å¤„ç†é€Ÿåº¦ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯çš„ç¡®è®¤æŠ¥æ–‡æ®µæ€»æ˜¯ä¸æºå¸¦ä»»ä½•åº”ç”¨ç¨‹åºæ•°æ®ã€‚ Nagleç®—æ³• ä¸Šä¾‹æ˜¯åœ¨æœ¬åœ°å›è·¯è¿è¡Œçš„ç»“æœï¼Œåœ¨å±€åŸŸç½‘ä¸­ä¹Ÿèƒ½å¾—åˆ°åŸºæœ¬ç›¸åŒçš„ç»“æœï¼Œä½†åœ¨å¹¿åŸŸç½‘å°±æœªå¿…å¦‚æ­¤äº†ã€‚å¹¿åŸŸç½‘ä¸Šçš„äº¤äº’æ•°æ®æµå¯èƒ½ç»å—å¾ˆå¤§çš„å»¶è¿Ÿï¼Œå¹¶ä¸”ï¼Œæºå¸¦äº¤äº’æ•°æ®çš„å¾®å°TCPæŠ¥æ–‡æ®µæ•°é‡ä¸€èˆ¬å¾ˆå¤šï¼ˆä¸€ä¸ªæŒ‰é”®è¾“å…¥å°±å¯¼è‡´ä¸€ä¸ªTCPæŠ¥æ–‡æ®µï¼‰ï¼Œè¿™äº›å› ç´ éƒ½å¯èƒ½å¯¼è‡´æ‹¥å¡å‘ç”Ÿã€‚è§£å†³è¯¥é—®é¢˜çš„ä¸€ä¸ªç®€å•æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ä½¿ç”¨Nagleç®—æ³•ã€‚ Nagleç®—æ³•è¦æ±‚ä¸€ä¸ªTCPè¿æ¥çš„é€šä¿¡åŒæ–¹åœ¨ä»»æ„æ—¶åˆ»éƒ½æœ€å¤šåªèƒ½å‘é€ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„TCPæŠ¥æ–‡æ®µï¼Œåœ¨è¯¥TCPæŠ¥æ–‡æ®µçš„ç¡®è®¤åˆ°è¾¾ä¹‹å‰ä¸èƒ½å‘é€å…¶ä»–TCPæŠ¥æ–‡æ®µã€‚å¦ä¸€æ–¹é¢ï¼Œå‘é€æ–¹åœ¨ç­‰å¾…ç¡®è®¤çš„åŒæ—¶æ”¶é›†æœ¬ç«¯éœ€è¦å‘é€çš„å¾®é‡æ•°æ®ï¼Œå¹¶åœ¨ç¡®è®¤åˆ°æ¥æ—¶ä»¥ä¸€ä¸ªTCPæŠ¥æ–‡æ®µå°†å®ƒä»¬å…¨éƒ¨å‘å‡ºã€‚è¿™æ ·å°±æå¤§åœ°å‡å°‘äº†ç½‘ç»œä¸Šçš„å¾®å°TCPæŠ¥æ–‡æ®µçš„æ•°é‡ã€‚è¯¥ç®—æ³•çš„å¦ä¸€ä¸ªä¼˜ç‚¹åœ¨äºå…¶è‡ªé€‚åº”æ€§ï¼šç¡®è®¤åˆ°è¾¾å¾—è¶Šå¿«ï¼Œæ•°æ®ä¹Ÿå°±å‘é€å¾—è¶Šå¿«ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:4:1","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPæˆå—æ•°æ®æµæŠ“åŒ…è®²è§£ ä¸‹é¢è€ƒè™‘ç”¨FTPåè®®ä¼ è¾“ä¸€ä¸ªå¤§æ–‡ä»¶ã€‚åœ¨ernest-laptopä¸Šå¯åŠ¨ä¸€ä¸ªvsftpdæœåŠ¡å™¨ç¨‹åºï¼ˆå‡çº§çš„ã€å®‰å…¨ç‰ˆçš„ftpæœåŠ¡å™¨ç¨‹åºï¼‰ï¼Œå¹¶æ‰§è¡Œftpå‘½ä»¤ç™»å½•è¯¥æœåŠ¡å™¨ä¸Šï¼Œç„¶ååœ¨ftpå‘½ä»¤æç¤ºç¬¦åè¾“å…¥getå‘½ä»¤ï¼Œä»æœåŠ¡å™¨ä¸‹è½½ä¸€ä¸ªå‡ ç™¾å…†çš„å¤§æ–‡ä»¶ã€‚ æ³¨æ„ï¼Œå®¢æˆ·ç«¯å‘é€çš„æœ€åä¸¤ä¸ªTCPæŠ¥æ–‡æ®µ17å’Œ18ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯å¯¹TCPæŠ¥æ–‡æ®µ2å’Œ16çš„ç¡®è®¤ï¼ˆä»åºå·å€¼å’Œç¡®è®¤å€¼æ¥åˆ¤æ–­ï¼‰ã€‚ç”±æ­¤å¯è§ï¼Œå½“ä¼ è¾“å¤§é‡å¤§å—æ•°æ®çš„æ—¶å€™ï¼Œå‘é€æ–¹ä¼šè¿ç»­å‘é€å¤šä¸ªTCPæŠ¥æ–‡æ®µï¼Œæ¥æ”¶æ–¹å¯ä»¥ä¸€æ¬¡ç¡®è®¤æ‰€æœ‰è¿™äº›æŠ¥æ–‡æ®µã€‚é‚£ä¹ˆå‘é€æ–¹åœ¨æ”¶åˆ°ä¸Šä¸€æ¬¡ç¡®è®¤åï¼Œèƒ½è¿ç»­å‘é€å¤šå°‘ä¸ªTCPæŠ¥æ–‡æ®µå‘¢ï¼Ÿè¿™æ˜¯ç”±æ¥æ”¶é€šå‘Šçª—å£ï¼ˆè¿˜éœ€è¦è€ƒè™‘æ‹¥å¡çª—å£ï¼Œè§åæ–‡ï¼‰çš„å¤§å°å†³å®šçš„ã€‚TCPæŠ¥æ–‡æ®µ17è¯´æ˜å®¢æˆ·ç«¯è¿˜èƒ½æ¥æ”¶30 084Ã—64å­—èŠ‚ï¼ˆæœ¬ä¾‹ä¸­çª—å£æ‰©å¤§å› å­ä¸º6ï¼‰ï¼Œå³1 925 376å­—èŠ‚çš„æ•°æ®ã€‚è€Œåœ¨TCPæŠ¥æ–‡æ®µ18ä¸­ï¼Œæ¥æ”¶é€šå‘Šçª—å£å¤§å°ä¸º1 748 288å­—èŠ‚ï¼Œå³å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„æ•°æ®é‡å˜å°äº†ã€‚è¿™è¡¨æ˜å®¢æˆ·ç«¯çš„TCPæ¥æ”¶ç¼“å†²åŒºæœ‰æ›´å¤šçš„æ•°æ®æœªè¢«åº”ç”¨ç¨‹åºè¯»å–è€Œåœç•™åœ¨å…¶ä¸­ï¼Œè¿™äº›æ•°æ®éƒ½æ¥è‡ªTCPæŠ¥æ–‡æ®µ3ï½16ä¸­çš„ä¸€éƒ¨åˆ†ã€‚æœåŠ¡å™¨æ”¶åˆ°TCPæŠ¥æ–‡æ®µ18åï¼Œå®ƒè‡³å°‘ï¼ˆå› ä¸ºæ¥æ”¶é€šå‘Šçª—å£å¯èƒ½æ‰©å¤§ï¼‰è¿˜èƒ½è¿ç»­å‘é€çš„æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µæ•°é‡æ˜¯1 748 288/16 384ä¸ªï¼Œå³106ä¸ªï¼ˆä½†ä¸€èˆ¬ä¸ä¼šè¿ç»­å‘é€è¿™ä¹ˆå¤šï¼‰ã€‚å…¶ä¸­ï¼Œ16 384æ˜¯æˆå—æ•°æ®çš„é•¿åº¦ï¼ˆè§TCPæŠ¥æ–‡æ®µ1ï½16çš„lengthå€¼ï¼‰ï¼Œå¾ˆæ˜¾ç„¶å®ƒå°äºä½†æ¥è¿‘MSSè§„å®šçš„16 396å­—èŠ‚ã€‚ å¦å¤–ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼ŒæœåŠ¡å™¨æ¯å‘é€4ä¸ªTCPæŠ¥æ–‡æ®µå°±ä¼ é€ä¸€ä¸ªPSHæ ‡å¿—ï¼ˆtcpdumpè¾“å‡ºæ ‡å¿—Pï¼‰ç»™å®¢æˆ·ç«¯ï¼Œä»¥é€šçŸ¥å®¢æˆ·ç«¯çš„åº”ç”¨ç¨‹åºå°½å¿«è¯»å–æ•°æ®ã€‚ä¸è¿‡è¿™å¯¹æœåŠ¡å™¨æ¥è¯´æ˜¾ç„¶ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå®ƒçŸ¥é“å®¢æˆ·ç«¯çš„TCPæ¥æ”¶ç¼“å†²åŒºä¸­è¿˜æœ‰ç©ºé—²ç©ºé—´ï¼ˆæ¥æ”¶é€šå‘Šçª—å£å¤§å°ä¸ä¸º0ï¼‰ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:4:2","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"å¸¦å¤–æ•°æ® æœ‰äº›ä¼ è¾“å±‚åè®®å…·æœ‰å¸¦å¤–ï¼ˆOut Of Bandï¼ŒOOBï¼‰æ•°æ®çš„æ¦‚å¿µï¼Œç”¨äºè¿…é€Ÿé€šå‘Šå¯¹æ–¹æœ¬ç«¯å‘ç”Ÿçš„é‡è¦äº‹ä»¶ã€‚å› æ­¤ï¼Œå¸¦å¤–æ•°æ®æ¯”æ™®é€šæ•°æ®ï¼ˆä¹Ÿç§°ä¸ºå¸¦å†…æ•°æ®ï¼‰æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œå®ƒåº”è¯¥æ€»æ˜¯ç«‹å³è¢«å‘é€ï¼Œè€Œä¸è®ºå‘é€ç¼“å†²åŒºä¸­æ˜¯å¦æœ‰æ’é˜Ÿç­‰å¾…å‘é€çš„æ™®é€šæ•°æ®ã€‚ å¸¦å¤–æ•°æ®çš„ä¼ è¾“å¯ä»¥ä½¿ç”¨ä¸€æ¡ç‹¬ç«‹çš„ä¼ è¾“å±‚è¿æ¥ï¼Œä¹Ÿå¯ä»¥æ˜ å°„åˆ°ä¼ è¾“æ™®é€šæ•°æ®çš„è¿æ¥ä¸­ã€‚ UDPæ²¡æœ‰å®ç°å¸¦å¤–æ•°æ®ä¼ è¾“ï¼ŒTCPä¹Ÿæ²¡æœ‰çœŸæ­£çš„å¸¦å¤–æ•°æ®ã€‚ä¸è¿‡TCPåˆ©ç”¨å…¶å¤´éƒ¨ä¸­çš„ç´§æ€¥æŒ‡é’ˆæ ‡å¿—å’Œç´§æ€¥æŒ‡é’ˆä¸¤ä¸ªå­—æ®µï¼Œç»™åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§ç´§æ€¥æ–¹å¼ã€‚ TCPå‘é€å¸¦å¤–æ•°æ®çš„è¿‡ç¨‹ å‡è®¾ä¸€ä¸ªè¿›ç¨‹å·²ç»å¾€æŸä¸ªTCPè¿æ¥çš„å‘é€ç¼“å†²åŒºä¸­å†™å…¥äº†Nå­—èŠ‚çš„æ™®é€šæ•°æ®ï¼Œå¹¶ç­‰å¾…å…¶å‘é€ã€‚åœ¨æ•°æ®è¢«å‘é€å‰ï¼Œè¯¥è¿›ç¨‹åˆå‘è¿™ä¸ªè¿æ¥å†™å…¥äº†3å­—èŠ‚çš„å¸¦å¤–æ•°æ®â€œabcâ€ã€‚ æ­¤æ—¶ï¼Œå¾…å‘é€çš„TCPæŠ¥æ–‡æ®µçš„å¤´éƒ¨å°†è¢«è®¾ç½®URGæ ‡å¿—ï¼Œå¹¶ä¸”ç´§æ€¥æŒ‡é’ˆè¢«è®¾ç½®ä¸ºæŒ‡å‘æœ€åä¸€ä¸ªå¸¦å¤–æ•°æ®çš„ä¸‹ä¸€å­—èŠ‚ï¼ˆè¿›ä¸€æ­¥å‡å»å½“å‰TCPæŠ¥æ–‡æ®µçš„åºå·å€¼å¾—åˆ°å…¶å¤´éƒ¨ä¸­çš„ç´§æ€¥åç§»å€¼ï¼‰ï¼Œå¦‚å›¾3-10æ‰€ç¤ºã€‚ ç”±å›¾3-10å¯è§ï¼Œå‘é€ç«¯ä¸€æ¬¡å‘é€çš„å¤šå­—èŠ‚çš„å¸¦å¤–æ•°æ®ä¸­åªæœ‰æœ€åä¸€å­—èŠ‚è¢«å½“ä½œå¸¦å¤–æ•°æ®ï¼ˆå­—æ¯cï¼‰ï¼Œè€Œå…¶ä»–æ•°æ®ï¼ˆå­—æ¯aå’Œbï¼‰è¢«å½“æˆäº†æ™®é€šæ•°æ®ã€‚ å¦‚æœTCPæ¨¡å—ä»¥å¤šä¸ªTCPæŠ¥æ–‡æ®µæ¥å‘é€å›¾3-10æ‰€ç¤ºTCPå‘é€ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œåˆ™æ¯ä¸ªTCPæŠ¥æ–‡æ®µéƒ½å°†è®¾ç½®URGæ ‡å¿—ï¼Œå¹¶ä¸”å®ƒä»¬çš„ç´§æ€¥æŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªä½ç½®ï¼ˆæ•°æ®æµä¸­å¸¦å¤–æ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼‰ï¼Œä½†åªæœ‰ä¸€ä¸ªTCPæŠ¥æ–‡æ®µçœŸæ­£æºå¸¦å¸¦å¤–æ•°æ®ã€‚ TCPæ¥æ”¶å¸¦å¤–æ•°æ®çš„è¿‡ç¨‹ TCPæ¥æ”¶ç«¯åªæœ‰åœ¨æ¥æ”¶åˆ°ç´§æ€¥æŒ‡é’ˆæ ‡å¿—æ—¶æ‰æ£€æŸ¥ç´§æ€¥æŒ‡é’ˆï¼Œç„¶åæ ¹æ®ç´§æ€¥æŒ‡é’ˆæ‰€æŒ‡çš„ä½ç½®ç¡®å®šå¸¦å¤–æ•°æ®çš„ä½ç½®ï¼Œå¹¶å°†å®ƒè¯»å…¥ä¸€ä¸ªç‰¹æ®Šçš„ç¼“å­˜ä¸­ã€‚è¿™ä¸ªç¼“å­˜åªæœ‰1å­—èŠ‚ï¼Œç§°ä¸ºå¸¦å¤–ç¼“å­˜ã€‚å¦‚æœä¸Šå±‚åº”ç”¨ç¨‹åºæ²¡æœ‰åŠæ—¶å°†å¸¦å¤–æ•°æ®ä»å¸¦å¤–ç¼“å­˜ä¸­è¯»å‡ºï¼Œåˆ™åç»­çš„å¸¦å¤–æ•°æ®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å°†è¦†ç›–å®ƒã€‚ å‰é¢è®¨è®ºçš„å¸¦å¤–æ•°æ®çš„æ¥æ”¶è¿‡ç¨‹æ˜¯TCPæ¨¡å—æ¥æ”¶å¸¦å¤–æ•°æ®çš„é»˜è®¤æ–¹å¼ã€‚å¦‚æœæˆ‘ä»¬ç»™TCPè¿æ¥è®¾ç½®äº† SO_OOBINLINE é€‰é¡¹ï¼Œåˆ™å¸¦å¤–æ•°æ®å°†å’Œæ™®é€šæ•°æ®ä¸€æ ·è¢«TCPæ¨¡å—å­˜æ”¾åœ¨TCPæ¥æ”¶ç¼“å†²åŒºä¸­ã€‚æ­¤æ—¶åº”ç”¨ç¨‹åºéœ€è¦åƒè¯»å–æ™®é€šæ•°æ®ä¸€æ ·æ¥è¯»å–å¸¦å¤–æ•°æ®ã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹å¦‚ä½•åŒºåˆ†å¸¦å¤–æ•°æ®å’Œæ™®é€šæ•°æ®å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œç´§æ€¥æŒ‡é’ˆå¯ä»¥ç”¨æ¥æŒ‡å‡ºå¸¦å¤–æ•°æ®çš„ä½ç½®ï¼Œsocketç¼–ç¨‹æ¥å£ä¹Ÿæä¾›äº†ç³»ç»Ÿè°ƒç”¨æ¥è¯†åˆ«å¸¦å¤–æ•°æ®ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:4:3","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPæ•°æ®æµçš„æ§åˆ¶ï¼ˆæ‹¥å¡æ§åˆ¶ï¼‰ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:5:0","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"è¶…æ—¶é‡ä¼ æœºåˆ¶ åœ¨æ­£å¼è¿›å…¥æ‹¥å¡æ§åˆ¶ä¹‹å‰ï¼Œå…ˆèŠèŠè¶…æ—¶é‡ä¼ æœºåˆ¶ã€‚ æŠ“åŒ…æˆªå›¾å°±çœç•¥äº†ï¼Œç›´æ¥å¼€å§‹åˆ†æï¼š è§‚å¯ŸTCPæŠ¥æ–‡æ®µ6ï½11è¢«å‘é€çš„æ—¶é—´é—´éš”ï¼Œå®ƒä»¬åˆ†åˆ«ä¸º0.2 sã€0.4 sã€0.8 sã€1.6 så’Œ3.2 sã€‚ç”±æ­¤å¯è§ï¼ŒTCPä¸€å…±æ‰§è¡Œ5æ¬¡é‡ä¼ ï¼Œæ¯æ¬¡é‡ä¼ è¶…æ—¶æ—¶é—´éƒ½å¢åŠ ä¸€å€ï¼ˆå› æ­¤ï¼Œå’ŒTCPè¶…æ—¶é‡è¿çš„ç­–ç•¥ç›¸ä¼¼ï¼‰ã€‚åœ¨5æ¬¡é‡ä¼ å‡å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œåº•å±‚çš„IPå’ŒARPå¼€å§‹æ¥ç®¡ï¼Œç›´åˆ°telnetå®¢æˆ·ç«¯æ”¾å¼ƒè¿æ¥ä¸ºæ­¢ã€‚ Linuxæœ‰ä¸¤ä¸ªé‡è¦çš„å†…æ ¸å‚æ•°ä¸TCPè¶…æ—¶é‡ä¼ ç›¸å…³ï¼š/proc/sys/net/ipv4/tcp_retries1å’Œ/proc/sys/net/ipv4/tcp_retries2ã€‚å‰è€…æŒ‡å®šåœ¨åº•å±‚IPæ¥ç®¡ä¹‹å‰TCPæœ€å°‘æ‰§è¡Œçš„é‡ä¼ æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯3ã€‚åè€…æŒ‡å®šè¿æ¥æ”¾å¼ƒå‰TCPæœ€å¤šå¯ä»¥æ‰§è¡Œçš„é‡ä¼ æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯15ï¼ˆä¸€èˆ¬å¯¹åº”13ï½30 minï¼‰ã€‚åœ¨æˆ‘ä»¬çš„å®ä¾‹ä¸­ï¼ŒTCPè¶…æ—¶é‡ä¼ å‘ç”Ÿäº†5æ¬¡ï¼Œè¿æ¥åšæŒçš„æ—¶é—´æ˜¯15 minï¼ˆå¯ä»¥ç”¨dateå‘½ä»¤æ¥æµ‹é‡ï¼‰ã€‚ è™½ç„¶è¶…æ—¶ä¼šå¯¼è‡´TCPæŠ¥æ–‡æ®µé‡ä¼ ï¼Œä½†TCPæŠ¥æ–‡æ®µçš„é‡ä¼ å¯ä»¥å‘ç”Ÿåœ¨è¶…æ—¶ä¹‹å‰ï¼Œå³å¿«é€Ÿé‡ä¼ ï¼ˆæ¥æ”¶åˆ°é‡å¤çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼‰ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:5:1","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"æ‹¥å¡æ§åˆ¶ æ‹¥å¡æ§åˆ¶ç®—æ³•åœ¨Linuxä¸‹æœ‰å¤šç§å®ç°ï¼Œæ¯”å¦‚renoç®—æ³•ã€vegasç®—æ³•å’Œcubicç®—æ³•ç­‰ã€‚å®ƒä»¬æˆ–è€…éƒ¨åˆ†æˆ–è€…å…¨éƒ¨å®ç°äº†ä¸Šè¿°å››ä¸ªéƒ¨åˆ†ã€‚/proc/sys/net/ipv4/tcp_congestion_controlæ–‡ä»¶æŒ‡ç¤ºæœºå™¨å½“å‰æ‰€ä½¿ç”¨çš„æ‹¥å¡æ§åˆ¶ç®—æ³•ã€‚ æ‹¥å¡æ§åˆ¶çš„æœ€ç»ˆå—æ§å˜é‡æ˜¯å‘é€ç«¯å‘ç½‘ç»œä¸€æ¬¡è¿ç»­å†™å…¥ï¼ˆæ”¶åˆ°å…¶ä¸­ç¬¬ä¸€ä¸ªæ•°æ®çš„ç¡®è®¤ä¹‹å‰ï¼‰çš„æ•°æ®é‡ï¼Œæˆ‘ä»¬ç§°ä¸ºSWNDï¼ˆSend Windowï¼Œå‘é€çª—å£[1]ï¼‰ã€‚ä¸è¿‡ï¼Œå‘é€ç«¯æœ€ç»ˆä»¥TCPæŠ¥æ–‡æ®µæ¥å‘é€æ•°æ®ï¼Œæ‰€ä»¥SWNDé™å®šäº†å‘é€ç«¯èƒ½è¿ç»­å‘é€çš„TCPæŠ¥æ–‡æ®µæ•°é‡ã€‚è¿™äº›TCPæŠ¥æ–‡æ®µçš„æœ€å¤§é•¿åº¦ï¼ˆä»…æŒ‡æ•°æ®éƒ¨åˆ†ï¼‰ç§°ä¸ºSMSSï¼ˆSenderMaximum Segment Sizeï¼Œå‘é€è€…æœ€å¤§æ®µå¤§å°ï¼‰ï¼Œå…¶å€¼ä¸€èˆ¬ç­‰äºMSSã€‚ å‘é€ç«¯éœ€è¦åˆç†åœ°é€‰æ‹©SWNDçš„å¤§å°ã€‚å¦‚æœSWNDå¤ªå°ï¼Œä¼šå¼•èµ·æ˜æ˜¾çš„ç½‘ç»œå»¶è¿Ÿï¼›åä¹‹ï¼Œå¦‚æœSWNDå¤ªå¤§ï¼Œåˆ™å®¹æ˜“å¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚å‰æ–‡æåˆ°ï¼Œæ¥æ”¶æ–¹å¯é€šè¿‡å…¶æ¥æ”¶é€šå‘Šçª—å£ï¼ˆRWNDï¼‰æ¥æ§åˆ¶å‘é€ç«¯çš„SWNDã€‚ä½†è¿™æ˜¾ç„¶ä¸å¤Ÿï¼Œæ‰€ä»¥å‘é€ç«¯å¼•å…¥äº†ä¸€ä¸ªç§°ä¸ºæ‹¥å¡çª—å£ï¼ˆCongestion Windowï¼ŒCWNDï¼‰çš„çŠ¶æ€å˜é‡ã€‚å®é™…çš„SWNDå€¼æ˜¯RWNDå’ŒCWNDä¸­çš„è¾ƒå°è€…ã€‚å›¾3-11æ˜¾ç¤ºäº†æ‹¥å¡æ§åˆ¶çš„è¾“å…¥å’Œè¾“å‡ºï¼ˆå¯è§ï¼Œå®ƒæ˜¯ä¸€ä¸ªé—­ç¯åé¦ˆæ§åˆ¶ï¼‰ã€‚ æ…¢å¯åŠ¨å’Œæ‹¥å¡é¿å… TCPè¿æ¥å»ºç«‹å¥½ä¹‹åï¼ŒCWNDå°†è¢«è®¾ç½®æˆåˆå§‹å€¼IWï¼ˆInitial Windowï¼‰ï¼Œå…¶å¤§å°ä¸º2ï½4ä¸ªSMSSã€‚ä½†æ–°çš„Linuxå†…æ ¸æé«˜äº†è¯¥åˆå§‹å€¼ï¼Œä»¥å‡å°ä¼ è¾“æ»åã€‚æ­¤æ—¶å‘é€ç«¯æœ€å¤šèƒ½å‘é€IWå­—èŠ‚çš„æ•°æ®ã€‚æ­¤åå‘é€ç«¯æ¯æ”¶åˆ°æ¥æ”¶ç«¯çš„ä¸€ä¸ªç¡®è®¤ï¼Œå…¶CWNDå°±æŒ‰ç…§å¼ï¼ˆ3-1ï¼‰å¢åŠ ï¼š å…¶ä¸­Næ˜¯æ­¤æ¬¡ç¡®è®¤ä¸­åŒ…å«çš„ä¹‹å‰æœªè¢«ç¡®è®¤çš„å­—èŠ‚æ•°ã€‚è¿™æ ·ä¸€æ¥ï¼ŒCWNDå°†æŒ‰ç…§æŒ‡æ•°å½¢å¼æ‰©å¤§ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æ…¢å¯åŠ¨ã€‚æ…¢å¯åŠ¨ç®—æ³•çš„ç†ç”±æ˜¯ï¼ŒTCPæ¨¡å—åˆšå¼€å§‹å‘é€æ•°æ®æ—¶å¹¶ä¸çŸ¥é“ç½‘ç»œçš„å®é™…æƒ…å†µï¼Œéœ€è¦ç”¨ä¸€ç§è¯•æ¢çš„æ–¹å¼å¹³æ»‘åœ°å¢åŠ CWNDçš„å¤§å°ã€‚ ä½†æ˜¯å¦‚æœä¸æ–½åŠ å…¶ä»–æ‰‹æ®µï¼Œæ…¢å¯åŠ¨å¿…ç„¶ä½¿å¾—CWNDå¾ˆå¿«è†¨èƒ€ï¼ˆå¯è§æ…¢å¯åŠ¨å…¶å®ä¸æ…¢ï¼‰å¹¶æœ€ç»ˆå¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚å› æ­¤TCPæ‹¥å¡æ§åˆ¶ä¸­å®šä¹‰äº†å¦ä¸€ä¸ªé‡è¦çš„çŠ¶æ€å˜é‡ï¼šæ…¢å¯åŠ¨é—¨é™ï¼ˆslow start threshold sizeï¼Œssthreshï¼‰ã€‚å½“CWNDçš„å¤§å°è¶…è¿‡è¯¥å€¼æ—¶ï¼ŒTCPæ‹¥å¡æ§åˆ¶å°†è¿›å…¥æ‹¥å¡é¿å…é˜¶æ®µã€‚ æ‹¥å¡é¿å…ç®—æ³•ä½¿å¾—CWNDæŒ‰ç…§çº¿æ€§æ–¹å¼å¢åŠ ï¼Œä»è€Œå‡ç¼“å…¶æ‰©å¤§ã€‚RFC 5681ä¸­æåˆ°äº†å¦‚ä¸‹ä¸¤ç§å®ç°æ–¹å¼ï¼š â‘æ¯ä¸ªRTTæ—¶é—´å†…æŒ‰ç…§å¼ï¼ˆ3-1ï¼‰è®¡ç®—æ–°çš„CWNDï¼Œè€Œä¸è®ºè¯¥RTTæ—¶é—´å†…å‘é€ç«¯æ”¶åˆ°å¤šå°‘ä¸ªç¡®è®¤ã€‚ â‘æ¯æ”¶åˆ°ä¸€ä¸ªå¯¹æ–°æ•°æ®çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œå°±æŒ‰ç…§å¼ï¼ˆ3-2ï¼‰æ¥æ›´æ–°CWNDã€‚ å›¾3-12ç²—ç•¥åœ°æè¿°äº†æ…¢å¯åŠ¨å’Œæ‹¥å¡é¿å…å‘ç”Ÿçš„æ—¶æœºå’ŒåŒºåˆ«ã€‚è¯¥å›¾ä¸­ï¼Œæˆ‘ä»¬ä»¥SMSSä¸ºå•ä½æ¥æ˜¾ç¤ºCWNDï¼ˆå®é™…ä¸Šå®ƒæ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„ï¼‰ï¼Œä»¥æ¬¡æ•°ä¸ºå•ä½æ¥æ˜¾ç¤ºRTTï¼Œè¿™åªæ˜¯ä¸ºäº†æ–¹ä¾¿è®¨è®ºé—®é¢˜ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å‡è®¾å½“å‰çš„ssthreshæ˜¯16SMSSå¤§å°ï¼ˆå½“ç„¶ï¼Œå®é™…çš„ssthreshæ˜¾ç„¶è¿œä¸æ­¢è¿™ä¹ˆå¤§ï¼‰ã€‚ åˆ¤æ–­æ‹¥å¡æ˜¯å¦å‘ç”Ÿ ä»¥ä¸Šæˆ‘ä»¬è®¨è®ºäº†å‘é€ç«¯åœ¨æœªæ£€æµ‹åˆ°æ‹¥å¡æ—¶æ‰€é‡‡ç”¨çš„ç§¯æé¿å…æ‹¥å¡çš„æ–¹æ³•ã€‚æ¥ä¸‹æ¥ä»‹ç»æ‹¥å¡å‘ç”Ÿæ—¶ï¼ˆå¯èƒ½å‘ç”Ÿåœ¨æ…¢å¯åŠ¨é˜¶æ®µæˆ–è€…æ‹¥å¡é¿å…é˜¶æ®µï¼‰æ‹¥å¡æ§åˆ¶çš„è¡Œä¸ºã€‚ä¸è¿‡æˆ‘ä»¬å…ˆè¦ææ¸…æ¥šå‘é€ç«¯æ˜¯å¦‚ä½•åˆ¤æ–­æ‹¥å¡å·²ç»å‘ç”Ÿçš„ã€‚å‘é€ç«¯åˆ¤æ–­æ‹¥å¡å‘ç”Ÿçš„ä¾æ®æœ‰å¦‚ä¸‹ä¸¤ä¸ªï¼š â‘ä¼ è¾“è¶…æ—¶ï¼Œæˆ–è€…è¯´TCPé‡ä¼ å®šæ—¶å™¨æº¢å‡ºã€‚ â‘æ¥æ”¶åˆ°é‡å¤çš„ç¡®è®¤æŠ¥æ–‡æ®µã€‚ æ‹¥å¡æ§åˆ¶å¯¹è¿™ä¸¤ç§æƒ…å†µæœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚å¯¹ç¬¬ä¸€ç§æƒ…å†µä»ç„¶ä½¿ç”¨æ…¢å¯åŠ¨å’Œæ‹¥å¡é¿å…ã€‚å¯¹ç¬¬äºŒç§æƒ…å†µåˆ™ä½¿ç”¨å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ï¼ˆå¦‚æœæ˜¯çœŸçš„å‘ç”Ÿæ‹¥å¡çš„è¯ï¼‰ï¼Œè¿™ç§æƒ…å†µå°†åœ¨åé¢è®¨è®ºã€‚æ³¨æ„ï¼Œç¬¬äºŒç§æƒ…å†µå¦‚æœå‘ç”Ÿåœ¨é‡ä¼ å®šæ—¶å™¨æº¢å‡ºä¹‹åï¼Œåˆ™ä¹Ÿè¢«æ‹¥å¡æ§åˆ¶å½“æˆç¬¬ä¸€ç§æƒ…å†µæ¥å¯¹å¾…ã€‚ å¦‚æœå‘é€ç«¯æ£€æµ‹åˆ°æ‹¥å¡å‘ç”Ÿæ˜¯ç”±äºä¼ è¾“è¶…æ—¶ï¼Œå³ä¸Šè¿°ç¬¬ä¸€ç§æƒ…å†µï¼Œé‚£ä¹ˆå®ƒå°†æ‰§è¡Œé‡ä¼ å¹¶åšå¦‚ä¸‹è°ƒæ•´ï¼š å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå‘é€ç«¯éƒ½å¯èƒ½æ¥æ”¶åˆ°é‡å¤çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œæ¯”å¦‚TCPæŠ¥æ–‡æ®µä¸¢å¤±ï¼Œæˆ–è€…æ¥æ”¶ç«¯æ”¶åˆ°ä¹±åºTCPæŠ¥æ–‡æ®µå¹¶é‡æ’ä¹‹ç­‰ã€‚æ‹¥å¡æ§åˆ¶ç®—æ³•éœ€è¦åˆ¤æ–­å½“æ”¶åˆ°é‡å¤çš„ç¡®è®¤æŠ¥æ–‡æ®µæ—¶ï¼Œç½‘ç»œæ˜¯å¦çœŸçš„å‘ç”Ÿäº†æ‹¥å¡ï¼Œæˆ–è€…è¯´TCPæŠ¥æ–‡æ®µæ˜¯å¦çœŸçš„ä¸¢å¤±äº†ã€‚å…·ä½“åšæ³•æ˜¯ï¼šå‘é€ç«¯å¦‚æœè¿ç»­æ”¶åˆ°3ä¸ªé‡å¤çš„ç¡®è®¤æŠ¥æ–‡æ®µï¼Œå°±è®¤ä¸ºæ˜¯æ‹¥å¡å‘ç”Ÿäº†ã€‚ç„¶åå®ƒå¯ç”¨å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ç®—æ³•æ¥å¤„ç†æ‹¥å¡ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š 1ï¼‰å½“æ”¶åˆ°ç¬¬3ä¸ªé‡å¤çš„ç¡®è®¤æŠ¥æ–‡æ®µæ—¶ï¼ŒæŒ‰ç…§å¼ï¼ˆ3-3ï¼‰è®¡ç®—ssthreshï¼Œç„¶åç«‹å³é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µï¼Œå¹¶æŒ‰ç…§ä»¥ä¸‹å¼å­è®¾ç½®CWNDã€‚ $$CWND=ssthresh+3*SMSS$$ 2ï¼‰æ¯æ¬¡æ”¶åˆ°1ä¸ªé‡å¤çš„ç¡®è®¤æ—¶ï¼Œè®¾ç½®CWND=CWND+SMSSã€‚æ­¤æ—¶å‘é€ç«¯å¯ä»¥å‘é€æ–°çš„TCPæŠ¥æ–‡æ®µï¼ˆå¦‚æœæ–°çš„CWNDå…è®¸çš„è¯ï¼‰ã€‚ 3ï¼‰å½“æ”¶åˆ°æ–°æ•°æ®çš„ç¡®è®¤æ—¶ï¼Œè®¾ç½®CWND=ssthreshï¼ˆssthreshæ˜¯æ–°çš„æ…¢å¯åŠ¨é—¨é™å€¼ï¼Œç”±ç¬¬ä¸€æ­¥è®¡ç®—å¾—åˆ°ï¼‰ã€‚ å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤å®Œæˆä¹‹åï¼Œæ‹¥å¡æ§åˆ¶å°†æ¢å¤åˆ°æ‹¥å¡é¿å…é˜¶æ®µï¼Œè¿™ä¸€ç‚¹ç”±ç¬¬3æ­¥æ“ä½œå¯å¾—çŸ¥ã€‚ ","date":"2022-02-21","objectID":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/:5:2","tags":["TCPåè®®è¯¦è§£"],"title":"TCPåè®®è¯¦è§£","uri":"/posts/tcp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æ¨¡æ‹Ÿé¢˜"],"content":"1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜","date":"2022-02-20","objectID":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/","tags":["1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜"],"title":"1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜","uri":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”æ¨¡æ‹Ÿé¢˜"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-20","objectID":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/:1:0","tags":["1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜"],"title":"1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜","uri":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”æ¨¡æ‹Ÿé¢˜"],"content":"é¢˜ç›®è¯¦è§£ è¯»æ‡‚é¢˜ï¼š æ­¤é¢˜æ˜¯ä¸ºäº†è®©æœ€åä»¥ä¸€ä¸ªå­—ç¬¦è§£ç ï¼Œä¹Ÿå°±æ˜¯ $0$ ï¼Œè€Œå« $1$ çš„åªèƒ½æ˜¯ä¸¤ä¸ªå­—ç¬¦è¿›è¡Œè§£ç ï¼Œæ‰€ä»¥é‡åˆ° $1$ å°±å¿…é¡»ç¡®ä¿åé¢æœ‰ $0$ æˆ– $1$ æ¥ç”¨äºæŠµæ¶ˆã€‚ è§£é¢˜æ³•ï¼š æ³•ä¸€ï¼šæ­£å‘éå†æ³• ç›´æ¥é€šè¿‡é‡åˆ° $0$ èµ°ä¸€æ­¥ï¼Œé‡åˆ° $1$ èµ°ä¸¤æ­¥ï¼Œå†çœ‹æœ€åæ˜¯å¦èƒ½æ°å¥½èµ°åˆ°æœ€åä¸€ä¸ª $0$ çš„ä½ç½®ï¼Œå¦‚æœèƒ½åˆ™ $true$ å¦åˆ™ $false$ ã€‚ æ³•äºŒï¼šåå‘éå†æ³• ç”±äºé‡åˆ° $0$ èƒ½ç›´æ¥è·³è¿‡ï¼Œè€Œé‡åˆ° $1$ åˆ™åé¢å¿…é¡»å«æœ‰ä¸€ä¸ªå­—ç¬¦è¢«æŠµæ¶ˆï¼Œæ‰€ä»¥ä¸ºäº†è®©æœ€åä¸€ä¸ª $0$ ä¸è¢«æŠµæ¶ˆï¼Œå®ƒå‰é¢çš„è¿ç»­ $1$ åº”è¯¥è¦ä¸ºå¶æ•°ä¸ªï¼Œå¦åˆ™ $0$ å°†ä¼šè¢«æŠµæ¶ˆã€‚æ•…å…·ä½“åšæ³•ç›´æ¥è®°å½•æœ€åä¸€ä¸ª $0$ å‰é¢çš„ $1$ çš„ä¸ªæ•°å³å¯å¾—å‡ºç­”æ¡ˆã€‚ ","date":"2022-02-20","objectID":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/:2:0","tags":["1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜"],"title":"1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜","uri":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”æ¨¡æ‹Ÿé¢˜"],"content":"è§£é¢˜ä»£ç  æ³•ä¸€ï¼š class Solution { public: bool isOneBitCharacter(vector\u003cint\u003e\u0026 bits) { int sz = bits.size(); if(sz\u003c2) return true; int start = 0; while(start\u003csz-1){ if(bits[start]==0) start++; else{ start += 2; } } return start==sz-1; } }; æ³•äºŒï¼š class Solution { public: bool isOneBitCharacter(vector\u003cint\u003e\u0026 bits) { return find(rbegin(bits)+1, rend(bits), 0) - rbegin(bits) \u0026 1; } }; ","date":"2022-02-20","objectID":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/:3:0","tags":["1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜"],"title":"1bitä¸2bitå­—ç¬¦â€”â€”ç®€å•æ¨¡æ‹Ÿé¢˜","uri":"/posts/1bit%E4%B8%8E2bit%E5%AD%97%E7%AC%A6%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E9%A2%98/"},{"categories":["Javaåº•å±‚åŸç†"],"content":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["Javaåº•å±‚åŸç†"],"content":" åœ¨ä»‹ç»åŠ¨æ€ä»£ç†ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ¥èŠèŠé™æ€ä»£ç†ã€‚ ","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/:0:0","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["Javaåº•å±‚åŸç†"],"content":"é™æ€ä»£ç†ä»‹ç» å‡è®¾ç°åœ¨é¡¹ç›®ç»ç†æœ‰ä¸€ä¸ªéœ€æ±‚ï¼šåœ¨é¡¹ç›®ç°æœ‰æ‰€æœ‰ç±»çš„æ–¹æ³•å‰åæ‰“å°æ—¥å¿—ã€‚ ä½ å¦‚ä½•åœ¨ä¸ä¿®æ”¹å·²æœ‰ä»£ç çš„å‰æä¸‹ï¼Œå®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Ÿ æˆ‘é¦–å…ˆæƒ³åˆ°çš„æ˜¯é™æ€ä»£ç†ã€‚å…·ä½“åšæ³•æ˜¯ï¼š ä¸€ã€ä¸ºç°æœ‰çš„æ¯ä¸€ä¸ªç±»éƒ½ç¼–å†™ä¸€ä¸ªå¯¹åº”çš„ä»£ç†ç±»ï¼Œå¹¶ä¸”è®©å®ƒå®ç°å’Œç›®æ ‡ç±»ç›¸åŒçš„æ¥å£ï¼ˆå‡è®¾éƒ½æœ‰ï¼‰ äºŒã€åœ¨åˆ›å»ºä»£ç†å¯¹è±¡æ—¶ï¼Œé€šè¿‡æ„é€ å™¨å¡å…¥ä¸€ä¸ªç›®æ ‡å¯¹è±¡ï¼Œç„¶ååœ¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•å†…éƒ¨è°ƒç”¨ç›®æ ‡å¯¹è±¡åŒåæ–¹æ³•ï¼Œå¹¶åœ¨è°ƒç”¨å‰åæ‰“å°æ—¥å¿—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»£ç†å¯¹è±¡ = å¢å¼ºä»£ç  + ç›®æ ‡å¯¹è±¡ï¼ˆåŸå¯¹è±¡ï¼‰ã€‚æœ‰äº†ä»£ç†å¯¹è±¡åï¼Œå°±ä¸ç”¨åŸå¯¹è±¡äº† é™æ€ä»£ç†çš„ç¼ºé™· ç¨‹åºå‘˜è¦æ‰‹åŠ¨ä¸ºæ¯ä¸€ä¸ªç›®æ ‡ç±»ç¼–å†™å¯¹åº”çš„ä»£ç†ç±»ã€‚å¦‚æœå½“å‰ç³»ç»Ÿå·²ç»æœ‰æˆç™¾ä¸Šåƒä¸ªç±»ï¼Œå·¥ä½œé‡å¤ªå¤§äº†ã€‚æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬çš„åŠªåŠ›æ–¹å‘æ˜¯ï¼šå¦‚ä½•å°‘å†™æˆ–è€…ä¸å†™ä»£ç†ç±»ï¼Œå´èƒ½å®Œæˆä»£ç†åŠŸèƒ½ï¼Ÿ å¤ä¹ å¯¹è±¡çš„åˆ›å»º å¾ˆå¤šåˆå­¦Javaçš„æœ‹å‹çœ¼ä¸­åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ å®é™…ä¸Šå¯ä»¥æ¢ä¸ªè§’åº¦ï¼Œä¹Ÿè¯´å¾—é€š æ‰€è°“çš„Classå¯¹è±¡ï¼Œæ˜¯Classç±»çš„å®ä¾‹ï¼Œè€ŒClassç±»æ˜¯æè¿°æ‰€æœ‰ç±»çš„ï¼Œæ¯”å¦‚Personç±»ï¼ŒStudentç±» å¯ä»¥çœ‹å‡ºï¼Œè¦åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæœ€å…³é”®çš„å°±æ˜¯å¾—åˆ°å¯¹åº”çš„Classå¯¹è±¡ã€‚åªä¸è¿‡å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œnewè¿™ä¸ªå…³é”®å­—é…åˆæ„é€ æ–¹æ³•ï¼Œå®åœ¨å¤ªå¥½ç”¨äº†ï¼Œåº•å±‚éšè—äº†å¤ªå¤šç»†èŠ‚ï¼Œä¸€å¥ Person p = new Person();ç›´æ¥æŠŠå¯¹è±¡è¿”å›ç»™ä½ äº†ã€‚æˆ‘è‡ªå·±åˆšå¼€å§‹å­¦Javaæ—¶ï¼Œä¹Ÿæ²¡æ„è¯†åˆ°Classå¯¹è±¡çš„å­˜åœ¨ã€‚ åˆ†æåˆ°è¿™é‡Œï¼Œè²Œä¼¼æœ‰äº†æ€è·¯ï¼š èƒ½å¦ä¸å†™ä»£ç†ç±»ï¼Œè€Œç›´æ¥å¾—åˆ°ä»£ç†Classå¯¹è±¡ï¼Œç„¶åæ ¹æ®å®ƒåˆ›å»ºä»£ç†å®ä¾‹ï¼ˆåå°„ï¼‰ã€‚ Classå¯¹è±¡åŒ…å«äº†ä¸€ä¸ªç±»çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ¯”å¦‚æ„é€ å™¨ã€æ–¹æ³•ã€å­—æ®µç­‰ã€‚å¦‚æœæˆ‘ä»¬ä¸å†™ä»£ç†ç±»ï¼Œè¿™äº›ä¿¡æ¯ä»å“ªè·å–å‘¢ï¼Ÿè‹¦æ€å†¥æƒ³ï¼Œçªç„¶çµå…‰ä¸€ç°ï¼šä»£ç†ç±»å’Œç›®æ ‡ç±»ç†åº”å®ç°åŒä¸€ç»„æ¥å£ã€‚ä¹‹æ‰€ä»¥å®ç°ç›¸åŒæ¥å£ï¼Œæ˜¯ä¸ºäº†å°½å¯èƒ½ä¿è¯ä»£ç†å¯¹è±¡çš„å†…éƒ¨ç»“æ„å’Œç›®æ ‡å¯¹è±¡ä¸€è‡´ï¼Œè¿™æ ·æˆ‘ä»¬å¯¹ä»£ç†å¯¹è±¡çš„æ“ä½œæœ€ç»ˆéƒ½å¯ä»¥è½¬ç§»åˆ°ç›®æ ‡å¯¹è±¡èº«ä¸Šï¼Œä»£ç†å¯¹è±¡åªéœ€ä¸“æ³¨äºå¢å¼ºä»£ç çš„ç¼–å†™ã€‚è¿˜æ˜¯ä¸Šé¢è¿™å¹…å›¾ï¼š æ‰€ä»¥ï¼Œå¯ä»¥è¿™æ ·è¯´ï¼šæ¥å£æ‹¥æœ‰ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å…±åŒçš„ç±»ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ¥å£é‚£å¾—åˆ°ç†åº”ç”±ä»£ç†ç±»æä¾›çš„ä¿¡æ¯ã€‚ä½†æ˜¯åˆ«å¿˜äº†ï¼Œæ¥å£æ˜¯æ— æ³•åˆ›å»ºå¯¹è±¡çš„ï¼Œæ€ä¹ˆåŠï¼Ÿ ","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/:1:0","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["Javaåº•å±‚åŸç†"],"content":"èµ°è¿›åŠ¨æ€ä»£ç† JDKæä¾›äº†java.lang.reflect.InvocationHandleræ¥å£å’Œ java.lang.reflect.Proxyç±»ï¼Œè¿™ä¸¤ä¸ªç±»ç›¸äº’é…åˆï¼Œå…¥å£æ˜¯Proxyï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆèŠå®ƒã€‚ Proxyæœ‰ä¸ªé™æ€æ–¹æ³•ï¼šgetProxyClass(ClassLoader, interfaces)ï¼Œåªè¦ä½ ç»™å®ƒä¼ å…¥ç±»åŠ è½½å™¨å’Œä¸€ç»„æ¥å£ï¼Œå®ƒå°±ç»™ä½ è¿”å›ä»£ç†Classå¯¹è±¡ã€‚ ç”¨é€šä¿—çš„è¯è¯´ï¼ŒgetProxyClass() è¿™ä¸ªæ–¹æ³•ï¼Œä¼šä»ä½ ä¼ å…¥çš„æ¥å£Classä¸­ï¼Œâ€œæ‹·è´â€ç±»ç»“æ„ä¿¡æ¯åˆ°ä¸€ä¸ªæ–°çš„Classå¯¹è±¡ä¸­ï¼Œä½†æ–°çš„Classå¯¹è±¡å¸¦æœ‰æ„é€ å™¨ï¼Œæ˜¯å¯ä»¥åˆ›å»ºå¯¹è±¡çš„ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œä¸€ä¸ªå¤§å†…å¤ªç›‘ï¼ˆæ¥å£Classï¼‰ï¼Œç©ºæœ‰ä¸€èº«æ­¦è‰ºï¼ˆç±»ä¿¡æ¯ï¼‰ï¼Œä½†æ˜¯æ— æ³•ä¼ ç»™åäººã€‚ç°åœ¨æ±Ÿæ¹–ä¸Šæœ‰ä¸ªå¦™æ‰‹ç¥åŒ»ï¼ˆProxyç±»ï¼‰ï¼Œå‘æ˜äº†å…‹éš†å¤§æ³•ï¼ˆgetProxyClassï¼‰ï¼Œä¸ä»…èƒ½å…‹éš†å¤ªç›‘çš„ä¸€èº«æ­¦è‰ºï¼Œè¿˜ä¿ç•™äº†å°DDï¼ˆæ„é€ å™¨ï¼‰â€¦ï¼ˆè¿™åˆ°åº•æ˜¯é“å¾·ã®æ²¦ä¸§ï¼Œè¿˜æ˜¯äººæ€§çš„æ‰­æ›²ï¼Œæ¬¢è¿èµ°è¿›åŠ¨æ€ä»£ç†ï¼‰ æ‰€ä»¥ï¼Œä¸€æ—¦æˆ‘ä»¬æ˜ç¡®æ¥å£ï¼Œå®Œå…¨å¯ä»¥é€šè¿‡æ¥å£çš„Classå¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªä»£ç†Classï¼Œé€šè¿‡ä»£ç†Classå³å¯åˆ›å»ºä»£ç†å¯¹è±¡ã€‚ æ‰€ä»¥ï¼ŒæŒ‰æˆ‘ç†è§£ï¼ŒProxy.getProxyClass()è¿™ä¸ªæ–¹æ³•çš„æœ¬è´¨å°±æ˜¯ï¼šä»¥Classé€ Classã€‚ æœ‰äº†Classå¯¹è±¡ï¼Œå°±å¾ˆå¥½åŠäº†ï¼Œå…·ä½“çœ‹ä»£ç ï¼š æ ¹æ®ä»£ç†Classçš„æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œéœ€è¦ä¼ å…¥InvocationHandlerã€‚æ¯æ¬¡è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä¼šè°ƒç”¨InvocationHandlerçš„invoke()æ–¹æ³•ï¼š æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ ä¸Šé¢ä¸æ˜¯è¯´äº†å—ï¼Œæ ¹æ®ä»£ç†Classçš„æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œéœ€è¦ä¼ å…¥InvocationHandlerã€‚é€šè¿‡æ„é€ å™¨ä¼ å…¥ä¸€ä¸ªå¼•ç”¨ï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰ä¸ªæˆå‘˜å˜é‡å»æ¥æ”¶ã€‚æ²¡é”™ï¼Œä»£ç†å¯¹è±¡çš„å†…éƒ¨ç¡®å®æœ‰ä¸ªæˆå‘˜å˜é‡invocationHandlerï¼Œè€Œä¸”ä»£ç†å¯¹è±¡çš„æ¯ä¸ªæ–¹æ³•å†…éƒ¨éƒ½ä¼šè°ƒç”¨handler.invoke()ï¼ InvocationHandlerå¯¹è±¡æˆäº†ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡çš„æ¡¥æ¢ï¼Œä¸åƒé™æ€ä»£ç†è¿™ä¹ˆç›´æ¥ã€‚ å¤§å®¶ä»”ç»†çœ‹ä¸Šå›¾å³ä¾§çš„åŠ¨æ€ä»£ç†ï¼Œæˆ‘åœ¨invocationHandlerçš„invoke()æ–¹æ³•ä¸­å¹¶æ²¡æœ‰å†™ç›®æ ‡å¯¹è±¡ã€‚å› ä¸ºä¸€å¼€å§‹invocationHandlerçš„invoke()é‡Œç¡®å®æ²¡æœ‰ç›®æ ‡å¯¹è±¡ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨newã€‚ ä½†è¿™ç§å†™æ³•ä¸å¤Ÿä¼˜é›…ï¼Œå±äºç¡¬ç¼–ç ã€‚æˆ‘è¿™æ¬¡ä»£ç†Aå¯¹è±¡ï¼Œä¸‹æ¬¡æƒ³ä»£ç†Bå¯¹è±¡è¿˜è¦è¿›æ¥æ”¹invoke()æ–¹æ³•ï¼Œå¤ªå·®åŠ²äº†ã€‚æ”¹è¿›ä¸€ä¸‹ï¼Œè®©è°ƒç”¨è€…æŠŠç›®æ ‡å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ è¿›æ¥ï¼š public class ProxyTest { public static void main(String[] args) throws Throwable { CalculatorImpl target = new CalculatorImpl(); //ä¼ å…¥ç›®æ ‡å¯¹è±¡ //ç›®çš„ï¼š1.æ ¹æ®å®ƒå®ç°çš„æ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ 2.ä»£ç†å¯¹è±¡è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³• Calculator calculatorProxy = (Calculator) getProxy(target); calculatorProxy.add(1, 2); calculatorProxy.subtract(2, 1); } private static Object getProxy(final Object target) throws Exception { //å‚æ•°1ï¼šéšä¾¿æ‰¾ä¸ªç±»åŠ è½½å™¨ç»™å®ƒï¼Œ å‚æ•°2ï¼šç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£ï¼Œè®©ä»£ç†å¯¹è±¡å®ç°ç›¸åŒæ¥å£ Class proxyClazz = Proxy.getProxyClass(target.getClass().getClassLoader(), target.getClass().getInterfaces()); Constructor constructor = proxyClazz.getConstructor(InvocationHandler.class); Object proxy = constructor.newInstance(new InvocationHandler() { @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { System.out.println(method.getName() + \"æ–¹æ³•å¼€å§‹æ‰§è¡Œ...\"); Object result = method.invoke(target, args); System.out.println(result); System.out.println(method.getName() + \"æ–¹æ³•æ‰§è¡Œç»“æŸ...\"); return result; } }); return proxy; } } è¿™æ ·å°±éå¸¸çµæ´»ï¼Œéå¸¸ä¼˜é›…äº†ã€‚æ— è®ºç°åœ¨ç³»ç»Ÿæœ‰å¤šå°‘ç±»ï¼Œåªè¦ä½ æŠŠå®ä¾‹ä¼ è¿›æ¥ï¼ŒgetProxy()éƒ½èƒ½ç»™ä½ è¿”å›å¯¹åº”çš„ä»£ç†å¯¹è±¡ã€‚å°±è¿™æ ·ï¼Œæˆ‘ä»¬å®Œç¾åœ°è·³è¿‡äº†ä»£ç†ç±»ï¼Œç›´æ¥åˆ›å»ºäº†ä»£ç†å¯¹è±¡ï¼ ä¸è¿‡å®é™…ç¼–ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¸ç”¨getProxyClass()ï¼Œè€Œæ˜¯ä½¿ç”¨Proxyç±»çš„å¦ä¸€ä¸ªé™æ€æ–¹æ³•ï¼šProxy.newProxyInstance()ï¼Œç›´æ¥è¿”å›ä»£ç†å®ä¾‹ï¼Œè¿ä¸­é—´å¾—åˆ°ä»£ç†Classå¯¹è±¡çš„è¿‡ç¨‹éƒ½å¸®ä½ éšè—ï¼š public class ProxyTest { public static void main(String[] args) throws Throwable { CalculatorImpl target = new CalculatorImpl(); Calculator calculatorProxy = (Calculator) getProxy(target); calculatorProxy.add(1, 2); calculatorProxy.subtract(2, 1); } private static Object getProxy(final Object target) throws Exception { Object proxy = Proxy.newProxyInstance( target.getClass().getClassLoader(),/*ç±»åŠ è½½å™¨*/ target.getClass().getInterfaces(),/*è®©ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å®ç°ç›¸åŒæ¥å£*/ new InvocationHandler(){/*ä»£ç†å¯¹è±¡çš„æ–¹æ³•æœ€ç»ˆéƒ½ä¼šè¢«JVMå¯¼å‘å®ƒçš„invokeæ–¹æ³•*/ public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { System.out.println(method.getName() + \"æ–¹æ³•å¼€å§‹æ‰§è¡Œ...\"); Object result = method.invoke(target, args); System.out.println(result); System.out.println(method.getName() + \"æ–¹æ³•æ‰§è¡Œç»“æŸ...\"); return result; } } ); return proxy; } } ç°åœ¨ï¼Œæˆ‘æƒ³å¤§å®¶åº”è¯¥èƒ½çœ‹æ‡‚åŠ¨æ€ä»£ç†äº†ã€‚ é‚£ä¹ˆæ¥å¼ å°å›¾åšæ€»ç»“ï¼š ","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/:2:0","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["Javaåº•å±‚åŸç†"],"content":"ä»£ç†çš„çœŸæ­£ä½œç”¨ï¼ˆå®è·µï¼‰ ","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/:3:0","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["Javaåº•å±‚åŸç†"],"content":"é™æ€ä»£ç†çš„ä½œç”¨ å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—ä½“æä¾›ç±»ï¼Œæœ‰å¤šç§å®ç°ï¼ˆä»ç£ç›˜ï¼Œä»ç½‘ç»œï¼Œä»ç³»ç»Ÿï¼‰ public interface FontProvider { Font getFont(String name); } public abstract class ProviderFactory { public static FontProvider getFontProvider() { return new FontProviderFromDisk(); } } public class Main() { public static void main(String[] args) { FontProvider fontProvider = ProviderFactory.getFontProvider(); Font font = fontProvider.getFont(\"å¾®è½¯é›…é»‘\"); ...... } } ç°åœ¨æˆ‘ä»¬å¸Œæœ›ç»™ä»–åŠ ä¸Šä¸€ä¸ªç¼“å­˜åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨é™æ€ä»£ç†æ¥å®Œæˆã€‚ public class CachedFontProvider implements FontProvider { private FontProvider fontProvider; private Map\u003cString, Font\u003e cached; public CachedFontProvider(FontProvider fontProvider) { this.fontProvider = fontProvider; } public Font getFont(String name) { Font font = cached.get(name); if (font == null) { font = fontProvider.getFont(name); cached.put(name, font); } return font; } } /* å¯¹å·¥å‚ç±»è¿›è¡Œç›¸åº”ä¿®æ”¹ï¼Œä»£ç ä½¿ç”¨å¤„ä¸å¿…è¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚ è¿™ä¹Ÿæ˜¯é¢å‘æ¥å£ç¼–ç¨‹ä»¥åŠå·¥å‚æ¨¡å¼çš„ä¸€ä¸ªå¥½å¤„ */ public abstract class ProviderFactory { public static FontProvider getFontProvider() { return new CachedFontProvider(new FontProviderFromDisk()); } } å½“ç„¶ï¼Œæˆ‘ä»¬ç›´æ¥ä¿®æ”¹FontProviderFromDiskç±»ä¹Ÿå¯ä»¥å®ç°ç›®çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æœ‰FontProviderFromNet, FontProviderFromSystemç­‰å¤šç§å®ç°ç±»ï¼Œä¸€ä¸€ä¿®æ”¹å¤ªè¿‡ç¹çä¸”æ˜“å‡ºé”™ã€‚ å†µä¸”å°†æ¥è¿˜å¯èƒ½æ·»åŠ æ—¥å¿—ï¼Œæƒé™æ£€æŸ¥ï¼Œå¼‚å¸¸å¤„ç†ç­‰åŠŸèƒ½æ˜¾ç„¶ç”¨ä»£ç†ç±»æ›´å¥½ä¸€ç‚¹ã€‚ ","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/:3:1","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["Javaåº•å±‚åŸç†"],"content":"åŠ¨æ€ä»£ç†çš„è¿ç”¨åœºæ™¯ï¼ˆå‡å°‘é‡å¤åŠ³ä½œï¼‰ æ¯”å¦‚ï¼šè€ƒè™‘ä»¥ä¸‹å„ç§æƒ…å†µï¼Œæœ‰å¤šä¸ªæä¾›ç±»ï¼Œæ¯ä¸ªç±»éƒ½æœ‰getXxx(String name)æ–¹æ³•ï¼Œæ¯ä¸ªç±»éƒ½è¦åŠ å…¥ç¼“å­˜åŠŸèƒ½ï¼Œä½¿ç”¨é™æ€ä»£ç†è™½ç„¶ä¹Ÿèƒ½å®ç°ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ç•¥æ˜¾ç¹çï¼Œéœ€è¦æ‰‹åŠ¨ä¸€ä¸€åˆ›å»ºä»£ç†ç±»ã€‚ public abstract class ProviderFactory { public static FontProvider getFontProvider() {...} public static ImageProvider getImageProvider() {...} public static MusicProvider getMusicProvider() {...} ...... } ä½¿ç”¨åŠ¨æ€ä»£ç†æ€ä¹ˆå®Œæˆå‘¢ï¼Ÿ(åªéœ€ä¸€ä»½ç¼“å­˜ç‰ˆæœ¬å®ç°å³å¯) public class CachedProviderHandler implements InvocationHandler { private Map\u003cString, Object\u003e cached = new HashMap\u003c\u003e(); private Object target; public CachedProviderHandler(Object target) { this.target = target; } public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { Type[] types = method.getParameterTypes(); //å…³é”®é€»è¾‘ï¼šå½“è°ƒç”¨çš„æ˜¯getæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å°±æ¥å‘æŒ¥ç¼“å†²åŒºçš„ä½œç”¨ if (method.getName().matches(\"get.+\") \u0026\u0026 (types.length == 1) \u0026\u0026 (types[0] == String.class)) { String key = (String) args[0]; Object value = cached.get(key); if (value == null) { value = method.invoke(target, args); cached.put(key, value); } return value; } return method.invoke(target, args); } } public abstract class ProviderFactory { public static FontProvider getFontProvider() { Class\u003cFontProvider\u003e targetClass = FontProvider.class; return (FontProvider) Proxy.newProxyInstance(targetClass.getClassLoader(), new Class[] { targetClass }, new CachedProviderHandler(new FontProviderFromDisk())); } } ","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/:3:2","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["Javaåº•å±‚åŸç†"],"content":"æ€»ç»“ å¾ˆæ˜æ˜¾ï¼ŒåŠ¨æ€ä»£ç†åœ¨éœ€è¦å¤§é‡é™æ€ä»£ç†çš„æƒ…å†µä¸‹ï¼Œå¤§å¤§å‡å°‘äº†é‡å¤åŠ³ä½œï¼ŒåŠ¨æ€ä»£ç†yydsï¼(ä¸çŸ¥é“C++å¦‚ä½•å»å®ç°åŠ¨æ€ä»£ç†ã€‚ã€‚) ","date":"2022-02-20","objectID":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/:3:3","tags":["JavaåŠ¨æ€ä»£ç†è¯¦è§£"],"title":"JavaåŠ¨æ€ä»£ç†è¯¦è§£","uri":"/posts/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"PATç”²çº§--Insertion-or-Heap-Sort","date":"2022-02-19","objectID":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/","tags":["PATç”²çº§--Insertion-or-Heap-Sort"],"title":"PATç”²çº§--Insertion-or-Heap-Sort","uri":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"é¢˜ç›® OJå¹³å° ","date":"2022-02-19","objectID":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/:1:0","tags":["PATç”²çº§--Insertion-or-Heap-Sort"],"title":"PATç”²çº§--Insertion-or-Heap-Sort","uri":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"é¢˜ç›®å¤§æ„ æœ‰å¾ˆå¤šé¢˜ç›®å®é™…ä¸éœ€è¦çœ‹æ‡‚é¢˜ç›®ï¼Œåªéœ€è¦çœ‹æ‡‚è¾“å…¥å’Œè¾“å‡ºï¼Œæ¯”å¦‚è¿™é¢˜ã€‚ æ­¤é¢˜è™½ç„¶é¢˜ç›®è¾ƒä¸ºå­¦æœ¯ï¼Œä¸”æ¯”è¾ƒé•¿ï¼Œå®é™…æ€»ç»“ä¸‹æ¥å°±æ˜¯ï¼Œé€šè¿‡ç»™ä½ ä¸€ä¸ªåŸæ•°ç»„åºåˆ—ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨æ’å…¥æ’åºæˆ–è€…æ˜¯å †æ’åºæ’äº†å‡ è½®çš„æ•°ç»„åºåˆ—ï¼Œä½ è¦æ ¹æ®è¿™ä¸ªåºåˆ—åˆ¤æ–­æ‰€ä½¿ç”¨çš„æ’åºæ–¹å¼ï¼Œå¹¶ä¸”å†ä»¥è¯¥æ’åºæ–¹å¼å¾€ä¸‹æ’ä¸€è½®ã€‚ ","date":"2022-02-19","objectID":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/:2:0","tags":["PATç”²çº§--Insertion-or-Heap-Sort"],"title":"PATç”²çº§--Insertion-or-Heap-Sort","uri":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"è§£é¢˜ä»£ç æ‹†è§£ è¿™æ¬¡ç”±äºæˆ‘ä½¿ç”¨çš„æ¥å£åŒ–å‡½æ•°è®¾è®¡ï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥æŒ‡é’ˆè¿›è¡Œæ“ä½œï¼Œæ²¡æœ‰é‡‡ç”¨å…¨å±€å˜é‡ï¼Œæ‰€ä»¥ç›´æ¥inputæ“ä½œå†™åœ¨mainå‡½æ•°é‡Œé¢ï¼Œçœç©ºé—´ã€‚ ","date":"2022-02-19","objectID":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/:3:0","tags":["PATç”²çº§--Insertion-or-Heap-Sort"],"title":"PATç”²çº§--Insertion-or-Heap-Sort","uri":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"å…³é”®çš„åˆ¤æ–­å‡½æ•° isInsert() è®¾è®¡æ€è·¯ï¼šå‡è®¾ä¸ºæ’å…¥æ’åºåçš„åºåˆ—ï¼Œé€šè¿‡ä¸€æ¬¡å¾ªç¯ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªè¦è¢«æ’åºçš„å…ƒç´ ä½ç½®ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œæ²¡æœ‰è¢«æ’åºçš„ä½ç½®åº”è¯¥å’ŒåŸæ•°ç»„çš„åºåˆ—æƒ…å†µä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™ä¸æ˜¯æ’å…¥æ’åºã€‚ //ç”¨äºç¡®å®šæ˜¯å¦ä¸ºæ’å…¥æ’åºï¼Œé¡ºä¾¿è¿”å›æ­¤æ—¶å¾…æ’å…¥å¤„ç†çš„ä½ç½® int isInsert(int* nums, int len) { int i = 1; for (; i \u003c len; i++) { if (nums[i - 1] \u003e nums[i]) break; } for (int j = i; j \u003c len; j++) { if (original[j] != nums[j]) return -1; } return i; } ","date":"2022-02-19","objectID":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/:3:1","tags":["PATç”²çº§--Insertion-or-Heap-Sort"],"title":"PATç”²çº§--Insertion-or-Heap-Sort","uri":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"å †æ’åºå’Œæ’å…¥æ’åº æ’å…¥æ’åº æ’å…¥æ’åºå¾ˆç®€å•ï¼Œæˆ‘è¿™é‡Œç›´æ¥å†™æ’å…¥æ’åºçš„æ¯ä¸€è½®å¤„ç†å‡½æ•°æ¥ä»£æ›¿ã€‚ //æ’å…¥æ’åºçš„å•æ­¥å¤„ç† void InsertSort(int* nums, int numSize, int i) { int j = i; int temp = nums[i]; for (; j \u003e 0 \u0026\u0026 nums[j - 1] \u003e temp; j--) { nums[j] = nums[j - 1]; } nums[j] = temp; } å †æ’åº å †æ’åºçš„åŸç†ï¼š å¯¹äºä¸€ä¸ªå®Œæ•´çš„å †æ’åºï¼Œåˆ†ä¸ºä¸¤ä¸ªè¿‡ç¨‹ï¼šå †åŒ–+ç»´æŒå †åŒ–ã€‚ å»ºç«‹å¤§æ ¹å †ï¼Œæ¯æ¬¡å †åŒ–æ‰¾åˆ°æœ€å¤§å€¼ï¼Œä¸ºäº†ç»´æŒå †çš„ç»“æ„å’Œæ’åºï¼Œå°†å †é¡¶ä¸æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œç„¶åæ›´æ–°å †çš„èŒƒå›´åˆ° 0~i-1 å†æ¬¡å †åŒ–ï¼Œåˆèƒ½æ‰¾åˆ°è¿™ä¸ªå †ä¸­çš„æœ€å¤§å€¼ï¼Œé•¿æ­¤ä»¥å¾€ï¼Œä¾¿å®Œæˆäº†æ’åºã€‚ å¯¹äºå †æ’åºä¸­çš„æ¯ä¸€è½®ï¼šå †æ’ä¸­çš„æ¯ä¸€è½®éƒ½æ˜¯ç¼©å°å †çš„èŒƒå›´ï¼Œå¹¶ç»§ç»­ç»´æŒå¤§æ ¹å †ï¼Œåœ¨å †èŒƒå›´ä»¥å¤–çš„å…ƒç´ å°±æ˜¯è¢«æ’å¥½çš„å…ƒç´ ã€‚æ‰€ä»¥é‡ç‚¹åœ¨äºä»åå¾€å‰æ‰¾åˆ°å·²ç»æ’åˆ°äº†å“ªä¸ªä½ç½®ï¼Œå†è¿›è¡Œä¸€æ¬¡äº¤æ¢å’Œå †åŒ–ä¾¿å¯å®Œæˆä¸€è½®æ’åºã€‚ å †æ’çš„è¿‡ç¨‹ï¼š å‘ä¸‹å †åŒ–çš„å‡½æ•°ï¼šsift_down() //å †åŒ–ï¼Œå¾—åˆ°å¤§æ ¹å † //å¯¹äºä»0å¼€å§‹ç¼–å·çš„äºŒå‰å †: /* iparent = (i-1)/2, ilchild = i*2+1, irchild = i*2+2 */ void sift_down(int arr[], int start, int end) { // è®¡ç®—çˆ¶ç»“ç‚¹å’Œå­ç»“ç‚¹çš„ä¸‹æ ‡ int parent = start; int child = parent * 2 + 1; while (child \u003c= end) { // å­ç»“ç‚¹ä¸‹æ ‡åœ¨èŒƒå›´å†…æ‰åšæ¯”è¾ƒ // å…ˆæ¯”è¾ƒä¸¤ä¸ªå­ç»“ç‚¹å¤§å°ï¼Œé€‰æ‹©æœ€å¤§çš„ if (child + 1 \u003c= end \u0026\u0026 arr[child] \u003c arr[child + 1]) child++; // å¦‚æœçˆ¶ç»“ç‚¹æ¯”å­ç»“ç‚¹å¤§ï¼Œä»£è¡¨è°ƒæ•´å®Œæ¯•ï¼Œç›´æ¥è·³å‡ºå‡½æ•° if (arr[parent] \u003e= arr[child]) return; else { // å¦åˆ™äº¤æ¢çˆ¶å­å†…å®¹ï¼Œå­ç»“ç‚¹å†å’Œå­™ç»“ç‚¹æ¯”è¾ƒ swap(arr[parent], arr[child]); parent = child; child = parent * 2 + 1; } } } å…ˆå®Œå…¨å †åŒ–ï¼Œå†åˆ©ç”¨å®ƒæŒ‘é€‰æœ€å¤§å€¼ç»´æŒå †åŒ–çš„è¿‡ç¨‹ï¼šheap_sort() void heap_sort(int arr[], int len) { // ä»æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å¼€å§‹ sift down ä»¥å®Œæˆå †åŒ– (heapify) for (int i = (len - 1 - 1) / 2; i \u003e= 0; i--) sift_down(arr, i, len - 1); // å…ˆå°†ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå·²ç»æ’å¥½çš„å…ƒç´ å‰ä¸€ä½åšäº¤æ¢ï¼Œå†é‡æ–°è°ƒæ•´ï¼ˆåˆšè°ƒæ•´çš„å…ƒç´ ä¹‹å‰çš„å…ƒç´ ï¼‰ï¼Œç›´åˆ°æ’åºå®Œæ¯• for (int i = len - 1; i \u003e 0; i--) { swap(arr[0], arr[i]); sift_down(arr, 0, i - 1); } } æ–¹ä¾¿æ›´æ–°ä¸‹ä¸€è½®å †æ’çš„å·¥å…·ï¼š ç¡®å®šå †æ’åºåˆ°å“ªä¸ªä½ç½®çš„å‡½æ•°ï¼šfindP //ç”±äºå †æ’æ˜¯ä»åå¾€å‰å…ˆå¾—å‡ºæœ€å¤§å€¼ï¼Œæ‰€ä»¥ç›´æ¥ä»åå¾€å‰åˆ¤æ–­æœ€å¤§å€¼ä½ç½®å³å¯å¾—å‡ºå †æ’æ’åˆ°äº†å“ªä¸€è½® int findP(int* nums, int len) { int i = 0; for (; i \u003c len; i++) { int val = *max_element(nums, nums + len - i); if (nums[len - 1 - i] != val) break; } return len - 1 - i; } ","date":"2022-02-19","objectID":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/:3:2","tags":["PATç”²çº§--Insertion-or-Heap-Sort"],"title":"PATç”²çº§--Insertion-or-Heap-Sort","uri":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"æ•´åˆä»£ç è¿›è¡Œæäº¤ æ•ˆç‡è¿˜è¡Œï¼ #include \u003cbits/stdc++.h\u003eusing namespace std; int* original = nullptr; //æ’å…¥æ’åºçš„å•æ­¥å¤„ç† void InsertSort(int* nums, int numSize, int i) { int j = i; int temp = nums[i]; for (; j \u003e 0 \u0026\u0026 nums[j - 1] \u003e temp; j--) { nums[j] = nums[j - 1]; } nums[j] = temp; } //å †æ’åº void sift_down(int arr[], int start, int end) { // è®¡ç®—çˆ¶ç»“ç‚¹å’Œå­ç»“ç‚¹çš„ä¸‹æ ‡ int parent = start; int child = parent * 2 + 1; while (child \u003c= end) { // å­ç»“ç‚¹ä¸‹æ ‡åœ¨èŒƒå›´å†…æ‰åšæ¯”è¾ƒ // å…ˆæ¯”è¾ƒä¸¤ä¸ªå­ç»“ç‚¹å¤§å°ï¼Œé€‰æ‹©æœ€å¤§çš„ if (child + 1 \u003c= end \u0026\u0026 arr[child] \u003c arr[child + 1]) child++; // å¦‚æœçˆ¶ç»“ç‚¹æ¯”å­ç»“ç‚¹å¤§ï¼Œä»£è¡¨è°ƒæ•´å®Œæ¯•ï¼Œç›´æ¥è·³å‡ºå‡½æ•° if (arr[parent] \u003e= arr[child]) return; else { // å¦åˆ™äº¤æ¢çˆ¶å­å†…å®¹ï¼Œå­ç»“ç‚¹å†å’Œå­™ç»“ç‚¹æ¯”è¾ƒ swap(arr[parent], arr[child]); parent = child; child = parent * 2 + 1; } } } //ç”¨äºæ‰¾å‡ºå †æ’å·²ç»æ‹åˆ°äº†å“ªä¸ªä½ç½®çš„æœ€å¤§å€¼ã€‚ int findP(int* nums, int len) { int i = 0; for (; i \u003c len; i++) { int val = *max_element(nums, nums + len - i); if (nums[len - 1 - i] != val) break; } return len - 1 - i; } //ç”¨äºç¡®å®šæ˜¯å¦ä¸ºæ’å…¥æ’åºï¼Œé¡ºä¾¿è¿”å›æ­¤æ—¶å¾…æ’å…¥å¤„ç†çš„ä½ç½® int isInsert(int* nums, int len) { int i = 1; for (; i \u003c len; i++) { if (nums[i - 1] \u003e nums[i]) break; } for (int j = i; j \u003c len; j++) { if (original[j] != nums[j]) return -1; } return i; } //ç»Ÿä¸€æ‰“å°ç»“æœå‡½æ•° void print(int* nums, int len) { cout \u003c\u003c nums[0]; for (int i = 1; i \u003c len; i++) { cout \u003c\u003c ' ' \u003c\u003c nums[i]; } } int main() { //@è¾“å…¥å¤„ç† ios::sync_with_stdio(false); int N; cin \u003e\u003e N; int org[N], nums[N]; for (int i = 0; i \u003c N; ++i) { cin \u003e\u003e org[i]; } for (int i = 0; i \u003c N; ++i) { cin \u003e\u003e nums[i]; } //@æ ¹æ®ä¸åŒçš„æ’åºæ–¹å¼è¿›è¡Œç­”æ¡ˆçš„æ‰“å° original = org; int flag = isInsert(nums, N); if (flag != -1) { cout \u003c\u003c \"Insertion Sort\" \u003c\u003c endl; InsertSort(nums, N, flag); print(nums, N); } else { cout \u003c\u003c \"Heap Sort\" \u003c\u003c endl; int pos = findP(nums, N); swap(nums[0], nums[pos]); sift_down(nums, 0, pos - 1); print(nums, N); } return 0; } ","date":"2022-02-19","objectID":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/:3:3","tags":["PATç”²çº§--Insertion-or-Heap-Sort"],"title":"PATç”²çº§--Insertion-or-Heap-Sort","uri":"/posts/pat%E7%94%B2%E7%BA%A7-insertion-or-heap-sort/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","date":"2022-02-19","objectID":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/","tags":["å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜"],"title":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","uri":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"é¢˜ç›®ä¸€ï¼šæœ‰åºçŸ©é˜µç¬¬kå°çš„å…ƒç´ (æç‚¼å‡ºåšé¢˜æ–¹æ³•) é¢˜ç›®é“¾æ¥ ","date":"2022-02-19","objectID":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/:1:0","tags":["å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜"],"title":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","uri":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"è§£é¢˜æŠ€æ³• æ„Ÿè§‰è¿™å¼ å›¾åŸºæœ¬å°±æ¸…æ¥šäº†è¿™é¢˜ç›®å¦‚ä½•è§£ã€‚ å…·ä½“è¯¦è§£è¿‡ç¨‹è¯·çœ‹lcå¤§ç¥ï¼šé¢˜ç›®è¯¦è§£ ","date":"2022-02-19","objectID":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/:2:0","tags":["å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜"],"title":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","uri":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"è§£é¢˜ä»£ç  class Solution { public: //TODO å¤šè·¯å½’å¹¶ int kthSmallest(vector\u003cvector\u003cint\u003e\u003e\u0026 matrix, int k) { auto cmp = [\u0026](pair\u003cint,int\u003e\u0026a,pair\u003cint,int\u003e\u0026b){ return matrix[a.first][a.second]\u003ematrix[b.first][b.second]; }; priority_queue\u003cpair\u003cint,int\u003e,vector\u003cpair\u003cint,int\u003e\u003e,decltype(cmp)\u003epq(cmp); int n = matrix.size(); for(int i=0;i\u003cmin(k,n);i++){ pq.push({i,0});//TODO å¾—åˆ°ç¬¬ä¸€æ¬¡çš„è¡Œé¦–å…ƒç´  } int ret = INT_MAX; while(k--\u0026\u0026!pq.empty()){ auto [x,y] = pq.top();pq.pop(); if(y+1\u003cn)//TODO æ›´æ–°è¿™ä¸€è¡Œçš„ä¸‹ä¸€ä¸ªå…ƒç´ åˆ°å †ä¸­ pq.push({x,y+1}); ret = matrix[x][y]; } return ret; } }; ","date":"2022-02-19","objectID":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/:3:0","tags":["å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜"],"title":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","uri":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"(è¿›é˜¶è¿ç”¨)é¢˜ç›®äºŒï¼šæŸ¥æ‰¾å’Œæœ€å°çš„Kå¯¹æ•°å­— é¢˜ç›®é“¾æ¥ ","date":"2022-02-19","objectID":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/:4:0","tags":["å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜"],"title":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","uri":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"é¢˜ç›®è§£æ å’Œå‰é¢é‚£é“é¢˜çš„åšæ³•ä¸€æ ·ï¼Œè¿™é“é¢˜æ˜¯ç”±äºè€…å‡æœ‰åºï¼Œæ‰€ä»¥å¦‚æœæ˜¯ç›´æ¥è¿›è¡Œä¸¤å±‚å¾ªç¯çš„æšä¸¾çš„è¯ï¼Œå¾—åˆ°çš„æ•°å­—å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå’Œä¸Šé¢˜ä¸€æ¨¡ä¸€æ ·çš„çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯æŠŠ nums1[0...]+nums2[0] çœ‹ä½œæ˜¯ä¸€è¡Œçš„é¦–å…ƒç´ å³å¯ï¼Œç„¶åå¤„ç†è¿‡ç¨‹å°±å’Œå‰é¢çš„å¤„ç†è¿‡ç¨‹æ˜¯å®Œå…¨ä¸€è‡´ã€‚å’Œå‰é¢ä¸€é¢˜çš„åŒºåˆ«ä»…ä»…åœ¨äºæœªæœ‰ç¡®å®šçŸ©é˜µçš„å†…å®¹è€Œå·²ï¼Œè€Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ç¡®å®šè¿™ä¸ªçŸ©é˜µçš„å†…å®¹ï¼ ç»†èŠ‚ä¼˜åŒ–ï¼šç”±äºçŸ©é˜µçš„å†…å®¹ç”±æˆ‘ä»¬æ¥ç¡®å®šï¼Œä¸ºäº†é˜²æ­¢åˆå§‹åŒ–çŸ©é˜µé¦–è¡Œå…ƒç´ è¿‡å¤šï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–æŠŠé•¿åº¦å°çš„ nums ä½œä¸ºè¡Œçš„æ ‡å‡†ï¼Œé‚£ä¹ˆä¸ºäº†è®©æ¯æ¬¡çš„ç­”æ¡ˆé¡ºåºä¸å˜ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ ‡è®°ã€‚ ","date":"2022-02-19","objectID":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/:5:0","tags":["å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜"],"title":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","uri":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"è§£é¢˜ä»£ç  class Solution { public: bool flag = true; vector\u003cvector\u003cint\u003e\u003e kSmallestPairs(vector\u003cint\u003e\u0026 nums1, vector\u003cint\u003e\u0026 nums2, int k) { vector\u003cvector\u003cint\u003e\u003e ans; int n = nums1.size(), m = nums2.size(); if(n \u003e m) { //å§‹ç»ˆç¡®ä¿nums1ä¸ºä¸¤æ•°ç»„ä¸­é•¿åº¦è¾ƒå°‘çš„é‚£ä¸ª(è¿™æ ·åšå¯ä»¥é€‚å½“çš„å‡å°‘å †çš„åˆå§‹å¤§å°)ï¼Œè¿™ä¸ªä¸å¤„ç†ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯ç®€å•çš„ä¼˜åŒ– swap(nums1, nums2); swap(m,n); flag = false;//ç¡®ä¿åŸæœ¬çš„ç¬¬ä¸€ä¸ªå–æ•°çš„æ•°å­—æ—¶nums1åŸæœ¬çš„æ•°å­— } //å®šä¹‰æ¯”è¾ƒè§„åˆ™ auto cmp = [\u0026](const auto\u0026 a, const auto\u0026 b){ return nums1[a.first] + nums2[a.second] \u003e nums1[b.first] + nums2[b.second]; }; priority_queue\u003c pair\u003cint,int\u003e, vector\u003cpair\u003cint,int\u003e\u003e, decltype(cmp) \u003e q(cmp); for(int i = 0; i \u003c min(n,k); i++){ q.push( {i, 0} ); } while(k-- and !q.empty()){ auto [a,b] = q.top(); q.pop(); flag ? ans.push_back( {nums1[a], nums2[b]}) : ans.push_back( {nums2[b], nums1[a]}); //TODO å¾—åˆ°è¿™ä¸€è¡Œçš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœè¶…è¿‡åˆ™ä¸å…¥ if(b + 1 \u003c m) q.push( {a, b + 1} ); } return ans; } }; ","date":"2022-02-19","objectID":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/:6:0","tags":["å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜"],"title":"å †çš„è¿ç”¨â€”â€”æœ‰åºå…ƒç´ çš„å¤šè·¯å½’å¹¶topké—®é¢˜","uri":"/posts/%E5%A0%86%E7%9A%84%E8%BF%90%E7%94%A8%E6%9C%89%E5%BA%8F%E5%85%83%E7%B4%A0%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%BD%92%E5%B9%B6topk%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºå¯¹","date":"2022-02-19","objectID":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/","tags":["å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°"],"title":"å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°","uri":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-19","objectID":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/:1:0","tags":["å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°"],"title":"å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°","uri":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"é¢˜ç›®è§£æ å¾ˆæ˜æ˜¾æ­¤é¢˜çš„é—®é¢˜è§„æ¨¡æ¥åˆ°äº† 1e5 çš„çº§åˆ«ï¼Œæ˜¾ç„¶ä¸æ˜¯ O(n^2) çš„æš´åŠ›æ–¹å¼èƒ½å¤Ÿè§£å†³çš„ã€‚ å…·ä½“çš„è¯¦ç»†è§£æï¼Œè¿™é‡Œæœ‰åŠ›æ‰£å¤§ç¥åœ¨ï¼šé¢˜ç›®è§£æ æˆ‘è¿™é‡ŒæŠŠæœ€å…³é”®çš„å›¾è§£è¿‡ç¨‹æ‰£äº†ä¸‹æ¥ï¼š ","date":"2022-02-19","objectID":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/:2:0","tags":["å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°"],"title":"å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°","uri":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"è§£é¢˜ä»£ç  é…ä¸Šè¿™ç®€æ´æ¸…æ™°çš„è§£é¢˜ä»£ç ï¼š class Solution { public: int reversePairs(vector\u003cint\u003e\u0026 nums) { vector\u003cint\u003e tmp(nums.size()); return mergeSort(0, nums.size() - 1, nums, tmp); } private: int mergeSort(int l, int r, vector\u003cint\u003e\u0026 nums, vector\u003cint\u003e\u0026 tmp) { // ç»ˆæ­¢æ¡ä»¶ if (l \u003e= r) return 0; // é€’å½’åˆ’åˆ† int m = (l + r) / 2; int res = mergeSort(l, m, nums, tmp) + mergeSort(m + 1, r, nums, tmp); // åˆå¹¶é˜¶æ®µ int i = l, j = m + 1; for (int k = l; k \u003c= r; k++) tmp[k] = nums[k]; for (int k = l; k \u003c= r; k++) { if (i == m + 1) nums[k] = tmp[j++]; else if (j == r + 1 || tmp[i] \u003c= tmp[j]) nums[k] = tmp[i++]; else { nums[k] = tmp[j++]; res += m - i + 1; // ç»Ÿè®¡é€†åºå¯¹ } } return res; } }; ","date":"2022-02-19","objectID":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/:3:0","tags":["å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°"],"title":"å½’å¹¶çš„è¿ç”¨â€”â€”è®¡ç®—é€†åºæ•°","uri":"/posts/%E5%BD%92%E5%B9%B6%E7%9A%84%E8%BF%90%E7%94%A8%E8%AE%A1%E7%AE%97%E9%80%86%E5%BA%8F%E5%AF%B9/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨","date":"2022-02-19","objectID":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/","tags":["ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨"],"title":"ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨","uri":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-19","objectID":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/:1:0","tags":["ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨"],"title":"ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨","uri":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"è§£é¢˜æ€è·¯ è¯»æ‡‚é¢˜ç›®ï¼š æ­¤é¢˜å¹¶ä¸æ˜¯è¦æˆ‘ä»¬æ±‚å‡ºç±»ä¼¼äºç¤ºä¾‹æ‰€ç»™çš„æœ€ä¼˜æƒ…å†µçš„æ–¹å¼å¾—å‡ºç­”æ¡ˆã€‚ ä»–åªè¦èƒ½å¤Ÿç¿»è½¬æˆæœ‰åºçš„æ“ä½œåºåˆ—å³å¯ã€‚ æ•…æˆ‘ä»¬å¯ä»¥æŒ‰ç…§é€‰æ‹©æ’åºçš„æ€è·¯ï¼Œåˆ©ç”¨ç¿»è½¬èƒ½å¤Ÿå°†é¦–å°¾äº¤æ¢ï¼Œæ¥è¿›è¡Œä¸¤æ¬¡ç¿»è½¬æŠŠæœ€å¤§å€¼ç§»åŠ¨åˆ°æœ€åçš„ä½ç½®ï¼Œç¬¬ä¸€æ¬¡ç¿»è½¬åˆ°é¦–ä½ï¼Œç¬¬äºŒæ¬¡ç¿»è½¬åˆ°åé¢çš„ä½ç½®å³å¯ã€‚ å…·ä½“ä¾‹å­ï¼š ä¾‹å¦‚:[3,2,4,1]â€”-\u003e[?,?,?,4] æˆ‘ä»¬å¯ä»¥å…ˆæ‰¾åˆ°æ•°å­—4çš„ä½ç½®,å°†æ•°å­—4å‰è¿›è¡Œç¿»è½¬å˜æˆ[4,2,3,1],æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨æ•´ä½“ç¿»è½¬[1,3,2,4],è¿™æ ·æˆ‘ä»¬æŠŠæ•°å­—4ç§»åŠ¨åˆ—è¡¨åº•. ç„¶å,æˆ‘ä»¬[1,3,2,4]â€”\u003e[?,?,3,4],è¿˜æ˜¯ç”¨åˆšæ‰æ–¹æ³•,é¦–å…ˆæ‰¾åˆ°æ•°å­—3,ç¿»è½¬æ•°å­—3å‰é¢çš„,å†ç¿»è½¬å·²ç»æ’å¥½æ•°å­—(è¿™é‡ŒæŒ‡æ•°å­—4)å‰å°±å¯ä»¥äº†. ","date":"2022-02-19","objectID":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/:2:0","tags":["ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨"],"title":"ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨","uri":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"è§£é¢˜ä»£ç  class Solution { public: vector\u003cint\u003e pancakeSort(vector\u003cint\u003e \u0026arr) { int n = arr.size(); vector\u003cint\u003e ret; while (n \u003e 1) { if (arr[n - 1] != n) { int index = find_if(arr.begin(), arr.end(), [n](auto \u0026num) { if (num == n) return true; return false; }) - arr.begin(); ret.push_back(index + 1); ret.push_back(n); reverse(arr.begin(), arr.begin() + index + 1); reverse(arr.begin(), arr.begin() + n); } --n; } return ret; } }; ","date":"2022-02-19","objectID":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/:3:0","tags":["ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨"],"title":"ç…é¥¼æ’åºâ€”â€”é€‰æ‹©æ’åºçš„è¿ç”¨","uri":"/posts/%E7%85%8E%E9%A5%BC%E6%8E%92%E5%BA%8F%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%9A%84%E8%BF%90%E7%94%A8/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"é«˜é¢‘é¢è¯•è€ƒç‚¹(è€ƒå¯Ÿåˆ†æ²»æ€æƒ³)ï¼šåˆå¹¶kä¸ªæ’åºé“¾è¡¨","date":"2022-02-19","objectID":"/posts/%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E8%80%83%E7%82%B9%E8%80%83%E5%AF%9F%E5%88%86%E6%B2%BB%E6%80%9D%E6%83%B3%E5%90%88%E5%B9%B6k%E4%B8%AA%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8/","tags":["é«˜é¢‘é¢è¯•è€ƒç‚¹(è€ƒå¯Ÿåˆ†æ²»æ€æƒ³)ï¼šåˆå¹¶kä¸ªæ’åºé“¾è¡¨"],"title":"é«˜é¢‘é¢è¯•è€ƒç‚¹(è€ƒå¯Ÿåˆ†æ²»æ€æƒ³)ï¼šåˆå¹¶kä¸ªæ’åºé“¾è¡¨","uri":"/posts/%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E8%80%83%E7%82%B9%E8%80%83%E5%AF%9F%E5%88%86%E6%B2%BB%E6%80%9D%E6%83%B3%E5%90%88%E5%B9%B6k%E4%B8%AA%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•â€”â€”æ’åºåŸç†è¿ç”¨"],"content":"é¢˜ç›® é¢˜ç›®è§£æ å¾ˆæ˜æ˜¾ï¼Œè¿™ç§å¤šä¸ªæœ‰åºé“¾è¡¨çš„æ’åºå¯ä»¥åˆ†è§£ä¸ºï¼Œä¸¤ä¸ªè¿‡ç¨‹ï¼š åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„å‡½æ•°ã€‚ å®ç°å¤šæ¬¡è°ƒç”¨åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ã€‚ å…³äºåˆ†æ²»æ³•å¦‚ä½•ä¼˜åŒ–è¯¥è¿‡ç¨‹çš„ï¼Ÿå¾ˆæ˜æ˜¾å¦‚æœç›´æ¥ä»å·¦å¾€å³è°ƒç”¨å¤šæ¬¡åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨æ¥å®ç°éœ€è¦è°ƒç”¨n-1æ¬¡ï¼Œè€Œåˆ†æ²»æ³•é€šè¿‡å…ˆæŠŠæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªæ•°ç»„å…ƒç´ ä¸ºä¸€ä¸ªåŸºæœ¬çš„æ“ä½œå¯¹è±¡ï¼Œé‚£ä¹ˆå¾ˆæ˜æ˜¾å¯ä»¥ä¼˜åŒ–ä¸ºè°ƒç”¨lognæ¬¡ã€‚ ä»¥ä¸‹æ˜¯ä¸¤ç§æ–¹å¼çš„æ—¶é—´å·®è·ï¼š è§£é¢˜ä»£ç  æœ´ç´ è§£æ³• class Solution { public: ListNode* mergeKLists(vector\u003cListNode*\u003e\u0026 lists) { int size = lists.size(); if(size==0) return nullptr; ListNode* res = lists[0]; for(int i=1;i\u003csize;i++){ res = mergeTwo(res,lists[i]); } return res; } private: ListNode* mergeTwo(ListNode* a,ListNode* b){ ListNode h; ListNode * head = \u0026h; ListNode* res = head; while(a\u0026\u0026b){ if(a-\u003eval\u003eb-\u003eval){ head-\u003enext = b; b = b-\u003enext; head = head-\u003enext; }else{ head-\u003enext = a; a = a-\u003enext; head = head-\u003enext; } } if(b){ head-\u003enext = b; }else{ head-\u003enext = a; } return res-\u003enext; } }; åˆ†æ²»æ³• class Solution { public: ListNode* mergeKLists(vector\u003cListNode*\u003e\u0026 lists) { return merge(lists,0,lists.size()-1); } private: ListNode* merge(vector \u003cListNode*\u003e \u0026lists, int l, int r) { if (l == r) return lists[l]; if (l \u003e r) return nullptr; int mid = (l + r) \u003e\u003e 1; //å¼€å§‹åˆ†æ²» return mergeTwo(merge(lists, l, mid), merge(lists, mid + 1, r)); } ListNode* mergeTwo(ListNode* a,ListNode* b){ ListNode h; ListNode * head = \u0026h; ListNode* res = head; while(a\u0026\u0026b){ if(a-\u003eval\u003eb-\u003eval){ head-\u003enext = b; b = b-\u003enext; head = head-\u003enext; }else{ head-\u003enext = a; a = a-\u003enext; head = head-\u003enext; } } if(b){ head-\u003enext = b; }else{ head-\u003enext = a; } return res-\u003enext; } }; ","date":"2022-02-19","objectID":"/posts/%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E8%80%83%E7%82%B9%E8%80%83%E5%AF%9F%E5%88%86%E6%B2%BB%E6%80%9D%E6%83%B3%E5%90%88%E5%B9%B6k%E4%B8%AA%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8/:0:0","tags":["é«˜é¢‘é¢è¯•è€ƒç‚¹(è€ƒå¯Ÿåˆ†æ²»æ€æƒ³)ï¼šåˆå¹¶kä¸ªæ’åºé“¾è¡¨"],"title":"é«˜é¢‘é¢è¯•è€ƒç‚¹(è€ƒå¯Ÿåˆ†æ²»æ€æƒ³)ï¼šåˆå¹¶kä¸ªæ’åºé“¾è¡¨","uri":"/posts/%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E8%80%83%E7%82%B9%E8%80%83%E5%AF%9F%E5%88%86%E6%B2%BB%E6%80%9D%E6%83%B3%E5%90%88%E5%B9%B6k%E4%B8%AA%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜","date":"2022-02-18","objectID":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/","tags":["éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜"],"title":"éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜","uri":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-18","objectID":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/:1:0","tags":["éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜"],"title":"éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜","uri":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"é¢˜ç›®è¯¦è§£ ä¸€ä¸ªéª‘å£«æœ‰ $8$ ç§å¯èƒ½çš„èµ°æ³•ï¼Œéª‘å£«ä¼šä»ä¸­ä»¥ç­‰æ¦‚ç‡éšæœºé€‰æ‹©ä¸€ç§ã€‚éƒ¨åˆ†èµ°æ³•å¯èƒ½ä¼šè®©éª‘å£«ç¦»å¼€æ£‹ç›˜ï¼Œå¦å¤–çš„èµ°æ³•åˆ™ä¼šè®©éª‘å£«ç§»åŠ¨åˆ°æ£‹ç›˜çš„å…¶ä»–ä½ç½®ï¼Œå¹¶ä¸”å‰©ä½™çš„ç§»åŠ¨æ¬¡æ•°ä¼šå‡å°‘ 1ã€‚ å®šä¹‰ $dp[step][i][j]$ è¡¨ç¤ºå…¶å®ä»æ£‹ç›˜å•†åº—çš„ç‚¹ $(i,j)$ å‡ºå‘ï¼Œèµ°äº† $step$ æ­¥æ—¶ä»ç„¶ç•™åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡ã€‚ å½“ç‚¹ $(i,j)$ ä¸åœ¨æ£‹ç›˜ä¸Šçš„æ—¶å€™ï¼Œ$dp[step][i][j] = 0;$ å½“ç‚¹ $(i,j)$ åœ¨æ£‹ç›˜ä¸Šä¸” $step = 0$ æ—¶ï¼Œ$dp[step][i][j]=1$ ã€‚ å¯¹äºå…¶ä»–æƒ…å†µï¼Œ$dp[step][i][j]=1/8Ã—âˆ‘dp[step-1][i+di][j+dj]$ã€‚ å…¶ä¸­$(di,dj)$ è¡¨ç¤ºèµ°æ³•å¯¹åæ ‡çš„åç§»é‡ï¼Œå…·ä½“ä¸º $(âˆ’2,âˆ’1),(âˆ’2,1),(2,âˆ’1),(2,1),(âˆ’1,âˆ’2),(âˆ’1,2),(1,âˆ’2),(1,2)$ å…± $8$ ç§ã€‚ ","date":"2022-02-18","objectID":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/:2:0","tags":["éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜"],"title":"éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜","uri":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"è§£é¢˜ä»£ç  class Solution { public: vector\u003cvector\u003cint\u003e\u003e dirs = {{-2, -1}, {-2, 1}, {2, -1}, {2, 1}, {-1, -2}, {-1, 2}, {1, -2}, {1, 2}}; double knightProbability(int n, int k, int row, int column) { vector\u003cvector\u003cvector\u003cdouble\u003e\u003e\u003e dp(k + 1, vector\u003cvector\u003cdouble\u003e\u003e(n, vector\u003cdouble\u003e(n))); for (int step = 0; step \u003c= k; step++) { for (int i = 0; i \u003c n; i++) { for (int j = 0; j \u003c n; j++) { if (step == 0) { dp[step][i][j] = 1; } else { for (auto \u0026 dir : dirs) { int ni = i + dir[0], nj = j + dir[1]; if (ni \u003e= 0 \u0026\u0026 ni \u003c n \u0026\u0026 nj \u003e= 0 \u0026\u0026 nj \u003c n) { dp[step][i][j] += dp[step - 1][ni][nj] / 8; } } } } } } return dp[k][row][column]; } }; ","date":"2022-02-18","objectID":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/:3:0","tags":["éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜"],"title":"éª‘å£«åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡â€”â€”dpæ£‹ç›˜æ¦‚ç‡é¢˜","uri":"/posts/%E9%AA%91%E5%A3%AB%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87dp%E6%A3%8B%E7%9B%98%E6%A6%82%E7%8E%87%E9%A2%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å…³äºå®ç°æºç  å®ç°æºç ä»“åº“åœ¨çº¿æŸ¥çœ‹é“¾æ¥ï¼š Cè¯­è¨€å®ç° C++å®ç° ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:0","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å“ˆå¸Œè¡¨çš„ç†è®ºçŸ¥è¯† ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:1:0","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å“ˆå¸Œè¡¨çš„å®šä¹‰ å“ˆå¸Œè¡¨ä¹Ÿå«æ•£åˆ—è¡¨ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å“ˆå¸Œè¡¨çš„å®šä¹‰ï¼š å“ˆå¸Œè¡¨æ˜¯ä¿å­˜é”®å€¼æ˜ å°„å…³ç³»çš„æŸ¥æ‰¾è¡¨ï¼Œé€šè¿‡å…³é”®å­—å¯ä»¥å¾ˆå¿«æ‰¾åˆ°å¯¹åº”çš„å€¼ã€‚ ç®€å•è¯´æ¥è¯´ï¼Œå“ˆå¸Œè¡¨ç”±ä¸¤ä¸ªè¦ç´ æ„æˆï¼šæ¡¶æ•°ç»„ å’Œ æ•£åˆ—å‡½æ•°ï¼ˆå“ˆå¸Œå‡½æ•°ï¼‰ã€‚ æ¡¶æ•°ç»„ï¼šç”¨äºå­˜å‚¨é”®å€¼å¯¹çš„ç©ºé—´ã€‚ æ•£åˆ—å‡½æ•°ï¼šç”¨äºç»™é”®å€¼å¯¹åœ¨æ¡¶æ•°ç»„ä¸­çš„ä½ç½®æŒ‡è·¯ã€‚ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:1:1","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ¡¶æ•°ç»„ æˆ‘ä»¬å¯èƒ½çŸ¥é“ï¼Œæœ‰ä¸€ç±»åŸºç¡€çš„æ•°æ®ç»“æ„ çº¿æ€§è¡¨ï¼Œè€Œçº¿æ€§è¡¨åˆåˆ†ä¸¤ç§ï¼Œæ•°ç»„ å’Œ é“¾è¡¨ã€‚ å“ˆå¸Œè¡¨æ•°æ®ç»“æ„é‡Œï¼Œå­˜å‚¨å…ƒç´ çš„æ•°æ®ç»“æ„å°±æ˜¯æ•°ç»„ï¼Œæ•°ç»„é‡Œçš„æ¯ä¸ªå•å…ƒéƒ½å¯ä»¥æƒ³è±¡æˆä¸€ä¸ª æ¡¶ï¼ˆBucketï¼‰ã€‚ è€Œæˆ‘ä»¬æ¯æ¬¡éƒ½æ˜¯æŠŠæˆ‘ä»¬éœ€è¦å­˜å…¥çš„é”®å€¼å¯¹åŠ å…¥åˆ°è¿™æ ·çš„æ¡¶å­ä¸­ã€‚ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:1:2","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ•£åˆ—å‡½æ•° æˆ‘ä»¬éœ€è¦åœ¨å…ƒç´ å’Œ æ¡¶æ•°ç»„ å¯¹åº”ä½ç½®å»ºç«‹ä¸€ç§æ˜ å°„æ˜ å°„å…³ç³»ï¼Œè¿™ç§æ˜ å°„å…³ç³»å°±æ˜¯ æ•£åˆ—å‡½æ•° ï¼Œä¹Ÿå¯ä»¥å«å“ˆå¸Œå‡½æ•°ã€‚ æ¯”å¦‚æˆ‘ä»¬å¹³æ—¶ç”Ÿæ´»ä¸­ï¼Œç¢°åˆ°æ’é˜Ÿå‹çš„æ—¶å€™ï¼Œéƒ½éœ€è¦æ ¹æ®é«˜çŸ®æ¥è¿›è¡Œä¸€å®šçš„é˜Ÿå½¢è°ƒæ•´ï¼Œè¿™ä¸ªè°ƒæ•´è¿‡ç¨‹ä¹Ÿå¯ä»¥çœ‹åšæ˜¯æ•£åˆ—å‡½æ•°çš„ä¸€ç§ä½“ç°ã€‚ æ•£åˆ—å‡½æ•°çš„æ„é€  æ•£åˆ—å‡½æ•°æœ‰å¾ˆå¤šç±»ï¼Œè¿™å…¶ä¸­çš„å¥¥å¦™æ¥è‡ªäºæ•°å­¦ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ç¨‹åºå‘˜éœ€è¦è¿‡äºæ“å¿ƒçš„äº‹æƒ…ã€‚ åœ¨Javaè¯­è¨€ä¸­åªè¦æ˜¯ç»§æ‰¿è‡ªObjectç±»çš„æ‰€æœ‰ç±»éƒ½æœ‰é»˜è®¤çš„ä¸€ä¸ª hashcode() æ–¹æ³•ï¼Œè€Œå¯¹äºå…·ä½“è¿‡ç¨‹æˆ‘ä»¬ä¸éœ€è¦å¤šæƒ³ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æœ€å¸¸ç”¨çš„å­—ç¬¦ä¸²çš„å“ˆå¸Œè¿‡ç¨‹ï¼š static inline size_t strHashcode(char *key) { size_t hash = 0; size_t index = 0; while (key[index] != '\\0') { hash = hash * 31 + key[index++]; } return hash; } å¾ˆæ˜æ˜¾å¾—å‡ºçš„ hashcode æ˜¯ä¸€ä¸ªä»¥31ä¸ºåº•çš„æ¬¡æ–¹æ•°ï¼Œå…³äºä¸ºä»€ä¹ˆä»¥31ä¸ºåº•ï¼Œæˆ‘è¿™é‡Œç®€å•çš„æè¿°ä¸€ä¸‹ï¼š ä»¥31ä¸ºåº•èƒ½å¾ˆå¿«å¾—å‡ºæ¯”è¾ƒæ•£ä¸”æ¯”è¾ƒå¤§çš„äºŒè¿›åˆ¶ç ï¼ˆåº•å±‚çš„01ä¸²ï¼‰ï¼Œè¿™æ ·ç»“åˆå­æ©ç çš„ä¸è¿ç®—æœ‰åˆ©äºå‡å°‘å“ˆå¸Œå†²çªçš„äº§ç”Ÿã€‚ 31 * i == (i \u003c\u003c 5) - i å› ä¸ºè¿™ä¸ªç­‰å¼çš„æˆç«‹ä½¿å¾—è¿ç®—æ€§èƒ½ä¹Ÿæœ‰å¾ˆå¤§çš„æå‡ã€‚ï¼ˆç¼–è¯‘å™¨ä¸€èˆ¬ä¼šå¯¹ 31*i è¿›è¡Œä¼˜åŒ–çš„ï¼‰ æ›´å¤šç»†èŠ‚çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼šå…³äºä¸ºä»€ä¹ˆé€‰31 æ‰°åŠ¨å‡½æ•° å’Œ æŒ‰ä½ä¸ æˆ‘ä»¬é€šè¿‡æ•£åˆ—å‡½æ•°å¾—åˆ°ä¸€å † 01 ä¸²åï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåšï¼Ÿ æ¥ä¸‹æ¥ä¸€èˆ¬å°±æ˜¯é€šè¿‡å’Œæ¡¶æ•°ç»„çš„é•¿åº¦å–ä½™ç„¶åå¾—åˆ°å¯¹åº”çš„ä½ç½®è¿›è¡Œæ’å…¥ã€‚è¿™æ ·è™½ç„¶ä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘ä»¬æœ‰æ›´å¥½çš„æ–¹å¼è¿›è¡Œæ›¿ä»£ï¼Œé‚£å°±æ˜¯ä½è¿ç®—ã€‚ æ—¢ç„¶è¦è®²ä½è¿ç®—ï¼Œé‚£ä¹ˆæˆ‘å…ˆè®²è®²ä¸€ä¸ªäºŒè¿›åˆ¶ä¸²ã€‚ åœ¨åªæœ‰ä¸€ä¸ª 1 çš„äºŒè¿›åˆ¶ä¸²é‡Œé¢ï¼Œæˆ‘ä»¬å¯¹å®ƒå†å‡å» 1 çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾ˆå¿«å¾—åˆ°å®ƒçš„ä½ä½æ©ç ã€‚ æ¯”å¦‚ï¼š 0001000 - 1 = 0000111ï¼Œå¾—åˆ°çš„ 0000111 æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿ å¦‚æœæˆ‘ä»¬æŠŠä¸€ä¸ª hashcode å’Œè¿™ä¸ªæ•°è¿›è¡ŒæŒ‰ä½ä¸ï¼Œåˆ™å¾—åˆ°çš„ç»“æœè‚¯å®šæ˜¯ä»‹äº 000~111 ä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯ 0~7 ä¹‹é—´ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæŠŠè¿™ä¸ª 0001000 çœ‹åšæ˜¯æ¡¶æ•°ç»„çš„é•¿åº¦ï¼Œé‚£ä¹ˆè¿™ä¸ªæŒ‰ä½ä¸çš„ç»“æœå°±å¯ä»¥å½“åšéœ€è¦å­˜å…¥çš„æ¡¶çš„å…·ä½“ä½ç½®äº†ã€‚ åŸºäºè¿™ä¸ªç†è®ºï¼Œæˆ‘ä»¬åªè¦æ¡¶æ•°ç»„é•¿åº¦æ˜¯ 2çš„å€æ•° åˆ™ hashcode%size å¯ç”¨ hashcode\u0026(size-1) æ¥æ›¿ä»£ã€‚ è¿™æ ·åšæœ‰ä»¥ä¸‹å¥½å¤„ï¼š ä½è¿ç®—çš„æ€§èƒ½æ›´å¥½ã€‚ ä¾¿äºæ§åˆ¶ hashcode æœ€ç»ˆå¾—å‡ºçš„ç»“æœï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬å¾—åˆ°çš„ hashcodeä¸å¤Ÿå‡åŒ€ é«˜ä½çš„1æ¯”è¾ƒå¤šï¼Œè€Œä½ä½çš„1æ¯”è¾ƒå°‘ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åˆ©ç”¨ hashcode^(hashcode\u003e\u003e16) è¿›è¡Œä¸€å®šç¨‹åº¦çš„æ‰“æ•£ï¼Œè€Œè¿™ä¸ªæ‰“æ•£çš„è¿‡ç¨‹æˆ‘ä»¬ä¸€èˆ¬æŠŠå®ƒå«åš æ‰°åŠ¨å‡½æ•° ã€‚ å“ˆå¸Œå†²çª å½“å‡ºç°é”®å€¼è¿ç®—ç»“æœå¾—åˆ°çš„æ¡¶å­ä½ç½®æ˜¯åŒä¸€ä¸ªçš„æ—¶å€™ä¾¿äº§ç”Ÿäº†å“ˆå¸Œå†²çªã€‚ è€Œè§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ¡ˆä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š é“¾åœ°å€æ³• ä¸€æ—¦å‘ç”Ÿå“ˆå¸Œå†²çªï¼Œç›´æ¥ç”Ÿæˆé“¾è¡¨å¾€åç»§ç»­å»¶ä¼¸ã€‚ å¼€æ”¾åœ°å€æ³• ç®€å•æ¥è¯´å°±æ˜¯ç»™å†²çªçš„å…ƒç´ å†åœ¨æ¡¶æ•°ç»„é‡Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„ä½ç½®ã€‚ è€Œå¸¸ç”¨é‡‡ç”¨çš„æ–¹æ³•æœ‰ï¼š çº¿æ€§æ¢æŸ¥æ³•: ä»å†²çªçš„ä½ç½®å¼€å§‹ï¼Œä¾æ¬¡åˆ¤æ–­ä¸‹ä¸€ä¸ªä½ç½®æ˜¯å¦ç©ºé—²ï¼Œç›´è‡³æ‰¾åˆ°ç©ºé—²ä½ç½®ã€‚ å¹³æ–¹æ¢æŸ¥æ³•: ä»å†²çªçš„ä½ç½®xå¼€å§‹ï¼Œç¬¬ä¸€æ¬¡å¢åŠ  1^2 ä¸ªä½ç½®ï¼Œç¬¬äºŒæ¬¡å¢åŠ  2^2â€¦ï¼Œç›´è‡³æ‰¾åˆ°ç©ºé—²çš„ä½ç½®ã€‚ åŒæ•£åˆ—å‡½æ•°æ¢æŸ¥æ³• â€¦â€¦ å†å“ˆå¸Œæ³• å†å“ˆå¸Œæ³•å®Œå…¨å¯ä»¥é…å¤‡ä»¥ä¸Šä¸¤ç±»æ–¹æ³•è¿›è¡Œä½¿ç”¨ã€‚ å½“ç„¶ä¹Ÿå¯å•ç‹¬ä½¿ç”¨ï¼Œå•ç‹¬ä½¿ç”¨çš„è¯å°±è¡Œé…å¤‡å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Œä¸€ä¸ªä¸è¡Œçš„è¯æ¢å¦ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œç›´åˆ°ä¸äº§ç”Ÿå“ˆå¸Œå†²çªä¸ºæ­¢ã€‚ æœ€ç»ˆçš„é€‰æ‹©ï¼š è€Œæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯ é“¾åœ°å€æ³• + å†å“ˆå¸Œ ï¼Œä¸ºäº†èƒ½å¤Ÿå°½é‡å‡å°‘å†…å­˜ç©ºé—´çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬é»˜è®¤ä»å®¹é‡ä¸º 16 çš„æ¡¶æ•°ç»„å¼€å§‹ï¼Œä¸€æ—¦è£…å…¥çš„é”®å€¼å¯¹è¶…è¿‡ capacity * factor ä¸ªæ—¶ï¼Œæˆ‘ä»¬è¿›è¡Œä¸€æ¬¡ä¸¤å€çš„ï¼ˆå·¦ç§»1ä½ï¼‰æ‰©å®¹ï¼Œè€Œç”±äºæ‰©å®¹ä¼šå¯¼è‡´ capacity æ”¹å˜ï¼Œæ‰€ä»¥é€šè¿‡ å“ˆå¸Œå‡½æ•° + ä¸è¿ç®— å¾—å‡ºçš„ä½ç½®ä¹Ÿä¼šå‡ºé”™ï¼Œæ•…éœ€è¦ç»è¿‡ å†å“ˆå¸Œ ã€‚ æˆ‘ä»¬å…¶å®å¯ä»¥ç»§ç»­ç»†æƒ³ï¼Œæˆ‘ä»¬å·¦ç§»ä¸€ä½åï¼Œå¾—å‡ºçš„ç»“æœå†å‡ä¸€ï¼Œå®ƒä¹Ÿä»…ä»…å¤šå‡ºä¸€ä½æ©ç ï¼Œè€Œæˆ‘ä»¬çš„ hashcode åªè¦åœ¨è¿™ä¸€ä½ä¸Šä¸º 0 åˆ™æœ€åå¾—åˆ°çš„æ¡¶ä½ç½®ä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œåªæœ‰åœ¨è¿™ä¸€ä½ä¸Šä¸º 1 çš„æ‰ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æ ¹æ®è¿™ä¸ªç‰¹ç‚¹ï¼ŒJava 8 è¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–ï¼Œæ›´å‰å®³çš„ä¼˜åŒ–æ–¹å¼åœ¨äºï¼Œåªè¦é“¾æ¯”è¾ƒé•¿ï¼Œå®ƒè¿˜ä¼šè½¬çº¢é»‘æ ‘ï¼ˆè¿™å°±åœ¨æˆ‘çš„èƒ½åŠ›èŒƒå›´ä¹‹å¤–äº†ï¼‰ã€‚ ä»¥ä¸Šå†…å®¹å‚è€ƒçš„æ–‡ç« ä¸ºï¼šä¸€ä¸ªHashMapå’Œé¢è¯•å®˜æ‰¯äº†åŠå°æ—¶ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:1:3","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"HashMapå®ç° ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:0","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"ç±»å‹å®šä¹‰ï¼ˆé”®å€¼å¯¹ä»¥åŠå¯¹åº”èŠ‚ç‚¹ï¼‰ C #define DEFAULT_CAPACITY 16 //åˆå§‹çš„è¡¨é•¿ #define DEFAULT_FACTOR 0.75f //åˆå§‹çš„è£…è½½å› å­ /*ç±»å‹å®šä¹‰ å’Œ è£…è½½å› å­åˆå§‹åŒ–*/ typedef int key_t; typedef int val_t; static const float factor = DEFAULT_FACTOR; //è£…è½½å› å­ typedef struct node {//æ¯ä¸ªå“ˆå¸Œè¡¨çš„é”®å€¼å¯¹ key_t key; val_t val; struct node *next; } Node; C++ å…¨ç¨‹ç”¨çš„æ³›å‹æ¨¡æ¿ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:1","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å“ˆå¸Œè¡¨çš„æ•°æ® C typedef struct { size_t size; //è®°å½•å·²ç»å­˜ä¸‹çš„é”®å€¼å¯¹æ•°ç›® size_t capacity; //è®°å½•è¡¨é•¿ Node **buckets; //æ¡¶å­ï¼šç”¨äºè®°å½•çš„å“ˆå¸Œæ¡¶ï¼Œæ¡¶å­ä¸­æ¯ä¸ªå…ƒç´ æ˜¯Node* } HashMap; C++ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:2","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"åˆå§‹åŒ–æ–¹æ³•ï¼ˆæ„é€ æ–¹æ³•ï¼‰ C HashMap *init() { //åˆå§‹åŒ–å¾—åˆ°ä¸€ä¸ªå“ˆå¸Œè¡¨ HashMap *ret = (HashMap *) malloc(sizeof(HashMap)); assert(ret != NULL); ret-\u003esize = 0; ret-\u003ecapacity = DEFAULT_CAPACITY; ret-\u003ebuckets = (Node **) calloc(DEFAULT_CAPACITY, sizeof(Node *)); assert(ret-\u003ebuckets != NULL); return ret; } C++ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:3","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ ¹æ®æ•£åˆ—å‡½æ•°å¾—åˆ°ä½ç½® C static inline size_t getHashcode(key_t key) { return key ^ (key \u003e\u003e 16);//è¿™æ˜¯32ä½æ•°çš„æ‰°åŠ¨å‡½æ•° } static inline size_t getIndex(key_t key, size_t bucket_size) {//ç”±äºbucketsizeä¸€å®šæ˜¯2çš„æ¬¡æ–¹ï¼Œæ‰€ä»¥size-1å’Œkeyç›¸ä¸å¾—åˆ°çš„å°±æ˜¯ä¸‹æ ‡ return getHashcode(key) \u0026 (bucket_size - 1); } C++ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:4","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"putæ–¹æ³• C void put(HashMap *map, key_t key, val_t val) { assert(map != NULL); //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ if (map-\u003esize \u003e= map-\u003ecapacity * factor) resize(map); putVal(key, val, map-\u003ebuckets, \u0026map-\u003esize, map-\u003ecapacity); } static void putVal(key_t key, val_t val, Node **buckets, size_t *returnSize, size_t bucketSize) { //è·å–ä½ç½® size_t index = getIndex(key, bucketSize); Node *node = buckets[index]; if (node == NULL) {//æ’å…¥ä½ç½®ä¸ºç©º node = (Node *) malloc(sizeof(Node)); assert(node != NULL); node-\u003eval = val; node-\u003ekey = key; node-\u003enext = NULL; buckets[index] = node; (*returnSize)++; //å“ˆå¸Œè¡¨å†…çš„å…ƒç´ å¢åŠ  return; } //æ’å…¥ä½ç½®ä¸ä¸ºç©ºï¼Œè¯´æ˜å‘ç”Ÿå†²çªï¼Œä½¿ç”¨é“¾åœ°å€æ³•ï¼Œéå†é“¾è¡¨ while (node != NULL) { //å¦‚æœkeyç›¸åŒå°±è¦†ç›– if (node-\u003ekey == key) { node-\u003eval = val; return; } node = node-\u003enext; } //å½“å‰çš„keyä¸åœ¨é“¾è¡¨ä¸­ï¼Œåˆ™æ’å…¥é“¾è¡¨å¤´éƒ¨ Node *newNode = (Node *) malloc(sizeof(Node)); assert(newNode != NULL); newNode-\u003enext = buckets[index]; buckets[index] = newNode; (*returnSize)++; //å“ˆå¸Œè¡¨å†…å…ƒç´ å¢åŠ  } C++ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:5","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ‰©å®¹æ–¹æ³• C static void resize(HashMap *map) { map-\u003ecapacity \u003c\u003c= 1; //æ‰©å¤§ä¸¤å€å®¹é‡ï¼Œç›¸å½“äºå·¦ç§»ä¸€ä½ Node **tmp = map-\u003ebuckets; //å­˜ä¸‹ä¹‹å‰çš„å†…å­˜åœ°å€ map-\u003ebuckets = (Node **) calloc(map-\u003ecapacity, sizeof(Node *)); //é‡æ–°åˆ†é… assert(map-\u003ebuckets != NULL); rehash(map, tmp);//é‡æ–°å“ˆå¸Œå¤„ç† free(tmp); //é‡Šæ”¾ä¹‹å‰çš„å†…å­˜ } static void rehash(HashMap *map, Node **preTable) {//é‡‡å–java1.7çš„æ–¹å¼è¿›è¡Œrehashä¹Ÿå°±æ˜¯æœ€ç®€å•ç›´æ¥çš„ç›´æ¥é‡æ–°å“ˆå¸Œæ’å…¥ size_t preCap = map-\u003ecapacity / 2; //æ”¹å˜å‰çš„æœ‰æ•ˆåŒºåŸŸ for (size_t i = 0; i \u003c preCap; i++) { if (preTable[i] != NULL) {//åˆ¤æ–­å¯¹åº”çš„keyæ˜¯å¦éœ€è¦é‡æ–°æ¢ä½ç½®,å¦‚æœå¯¹æœ€æ–°æ©ç å¤šå‡ºæ¥çš„1æ•æ„Ÿåˆ™éœ€è¦rehash Node *preNode; Node *curNode = preTable[i]; while (curNode != NULL) { preNode = curNode; curNode = curNode-\u003enext; insert(map, preNode); } } } } C++ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:6","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"getæ–¹æ³• C val_t *get(HashMap *map, key_t key) {//å‰é¢çš„å†™å¥½åï¼Œé‚£ä¹ˆgetå°±å¾ˆå¥½å†™äº† int index = getIndex(key, map-\u003ecapacity); Node *node = map-\u003ebuckets[index]; while (node != NULL) { if (node-\u003ekey == key) { return \u0026(node-\u003eval); } node = node-\u003enext; } return NULL;//æ²¡æ‰¾åˆ°è¿”å›NULLæŒ‡é’ˆ } C++ C++æ ‡å‡†ä¸­ä¸»è¦é‡‡ç”¨é‡è½½ä¸‹æ ‡è¿ç®—ç¬¦çš„æ–¹å¼è¿›è¡Œgetã€‚ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:7","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å®Œæ•´ä»£ç  Cå®Œæ•´ä»£ç  C++å®Œæ•´ä»£ç  ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:8","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æµ‹è¯•ï¼šLeetCode 1.ä¸¤æ•°ä¹‹å’Œ è¿™æ•ˆç‡åœ¨ç”¨Cè¯­è¨€å“ˆå¸Œè¡¨çš„æ–¹æ³•é‡Œé¢åº”è¯¥æ˜¯æ— æ•Œçš„å­˜åœ¨äº†ã€‚ã€‚ã€‚è¯•äº†ä¸‹æ¯”UT_HASHè¿˜è¦å¿«ä¸€äº›â˜º å†çœ‹çœ‹ä¹‹å‰å†™çš„æ¯”è¾ƒçƒ‚çš„å“ˆå¸Œè¡¨çš„æ•ˆç‡ğŸ˜‚ æµ‹è¯•æºç ï¼š // // Created by L_B__ on 2021/11/24. // //åº•å±‚çš„è¡¨é•¿éƒ½ç”¨2çš„æ¬¡æ–¹ï¼Œç„¶å-1åå¯ä»¥å¾—åˆ°ä½ä½æ©ç  //è¯¥è®¾è®¡ç†å¿µæ€¥äºjava1.7çš„æºä»£ç ï¼Œæœ¬æ¥æ˜¯æƒ³åŸºäº1.8çš„å®ç°ï¼Œ // å› ä¸º1.8å·§å¦™å¤ªå¤šï¼Œæ¯”å¦‚å¯¹rehashå°½é‡èƒ½ä¸åŠ¨çš„å°±ä¸åŠ¨ï¼Œå†æ¯”å¦‚å¯¹äºé“¾æ¯”è¾ƒé•¿çš„ç»“æ„ç›´æ¥è½¬çº¢é»‘æ ‘ã€‚å¯æƒœèƒ½åŠ›ä¸èƒ½åŠ /** * ç®€å•è¯´æ˜ï¼šstaticä¿®é¥°çš„å‡½æ•°ä¸ºå•æ–‡ä»¶çš„ä¸­é—´å§”æ‰˜åŠŸèƒ½å‡½æ•°ï¼Œä¸å¯¹å¤–å…¬å¼€ * ç®€å•çš„åŠŸèƒ½å‡½æ•°ä»‹ç»ï¼š * init()å¾—åˆ°ä¸€ä¸ªé»˜è®¤è¡¨é•¿çš„å“ˆå¸Œè¡¨ * put()æ’å…¥é”®å€¼ï¼Œå†…éƒ¨è‡ªåŠ¨è¿›è¡Œå†…å­˜çš„ç”³è¯· * get()å¾—åˆ°keyå¯¹åº”çš„valçš„åœ°å€ï¼Œè‹¥ä¸å­˜åœ¨è¯¥é”®å€¼å¯¹è¿”å›NULL * insert()å¤–ç•Œå·²ç»åˆ†é…å¥½nodeçš„å†…å­˜å’Œkey\u0026valå¯¹ï¼Œè¿›è¡Œå“ˆå¸Œè¿ç®—åç›´æ¥æ’å…¥å³å¯ * destroy()æŠŠæ•´ä¸ªå“ˆå¸Œè¡¨ç‰µæ‰¯çš„æ‰€æœ‰å†…å­˜é‡Šæ”¾ * **/ #include \u003cassert.h\u003e#include \u003cstdlib.h\u003e#ifndef MY_TINY_STL_HASHMAP_C_H #define MY_TINY_STL_HASHMAP_C_H #define DEFAULT_CAPACITY 128 //åˆå§‹çš„è¡¨é•¿ #define DEFAULT_FACTOR 0.75f //åˆå§‹çš„è£…è½½å› å­ /*ç±»å‹å®šä¹‰ å’Œ è£…è½½å› å­åˆå§‹åŒ–*/ typedef int key_t; typedef int val_t ; static const float factor = DEFAULT_FACTOR; //è£…è½½å› å­ typedef struct node{//æ¯ä¸ªå“ˆå¸Œè¡¨çš„é”®å€¼å¯¹ key_t key; val_t val; struct node* next; }Node; typedef struct { size_t size; //è®°å½•å·²ç»å­˜ä¸‹çš„é”®å€¼å¯¹æ•°ç›® size_t capacity; //è®°å½•è¡¨é•¿ Node** buckets; //æ¡¶å­ï¼šç”¨äºè®°å½•çš„å“ˆå¸Œæ¡¶ï¼Œæ¡¶å­ä¸­æ¯ä¸ªå…ƒç´ æ˜¯Node* }HashMap; /*å‡½æ•°çš„å£°æ˜*/ HashMap* init(); void put(HashMap*,key_t,val_t); void insert(HashMap*,Node*); //ç›´æ¥æŠŠå·²ç»åˆ†é…å¥½çš„å†…å­˜æ’å…¥å“ˆå¸Œè¡¨ static void putVal(key_t,val_t,Node**,size_t*,size_t); //è¿™ä¸ªæ˜¯putçš„å§”æ‰˜å‡½æ•°,ç”¨äºç›´æ¥æ›´æ–°æ¡¶å­ï¼Œå¹¶æ›´æ–°HashMapçš„size static inline size_t getHashcode(key_t ); //å¾—åˆ°keyå¯¹åº”çš„hashcode static inline size_t getIndex(key_t,size_t); //é€šè¿‡æ¡¶çš„å¤§å°å’Œkeyæ˜ å°„ä½ç½®ï¼Œç®—æ˜¯åŒ…å«äº†å…³é”®çš„å“ˆå¸Œå‡½æ•°ï¼šç”±äºCä¸æ”¯æŒæ³›å‹ä¹Ÿå°±æ— æ³•é’ˆå¯¹ä¸åŒç±»å‹ä½œå‡ºä¸åŒçš„å“ˆå¸Œäº†ï¼Œæˆ‘è¿™é‡Œé»˜è®¤keyä¸ºint static void resize(HashMap*); //å¦‚æœæ’å…¥çš„å…ƒç´ è¿‡å¤šï¼Œ*2è¿›è¡Œé‡æ–°å“ˆå¸Œåˆ†é… static void rehash(HashMap*,Node**); //é‡æ–°è®¾ç½®é•¿åº¦åˆ™éœ€è¦é‡æ–°å“ˆå¸Œä¸€äº›keyçš„ä½ç½® val_t* get(HashMap*,key_t); //å¾—åˆ°keyå¯¹åº”çš„val static void del_nodes(Node*); //æŠŠå•ä¸ªé“¾è¡¨é”€æ¯ void destroy(HashMap*); //æŠŠå“ˆå¸Œè¡¨çš„å†…å­˜é”€æ¯ /*å‡½æ•°å®ç°*/ HashMap* init(){ //åˆå§‹åŒ–å¾—åˆ°ä¸€ä¸ªå“ˆå¸Œè¡¨ HashMap * ret = (HashMap*)malloc(sizeof(HashMap)); assert(ret!=NULL); ret-\u003esize = 0; ret-\u003ecapacity = DEFAULT_CAPACITY; ret-\u003ebuckets = (Node**)calloc(DEFAULT_CAPACITY,sizeof(Node*)); assert(ret-\u003ebuckets!=NULL); return ret; } void insert(HashMap* map,Node* node){ assert(map!=NULL\u0026\u0026node!=NULL); size_t index = getIndex(node-\u003ekey,map-\u003ecapacity); if(map-\u003ebuckets[index]==NULL){ node-\u003enext = NULL; map-\u003ebuckets[index] = node; }else{ node-\u003enext = map-\u003ebuckets[index]; map-\u003ebuckets[index] = node; } } void put(HashMap* map,key_t key,val_t val){ assert(map != NULL); //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ if(map-\u003esize \u003e= map-\u003ecapacity*factor) resize(map); putVal(key,val,map-\u003ebuckets,\u0026map-\u003esize,map-\u003ecapacity); } static inline size_t getHashcode(key_t key){ return key ^ (key\u003e\u003e16);//è¿™æ˜¯32ä½æ•°çš„æ‰°åŠ¨å‡½æ•° } static inline size_t getIndex(key_t key,size_t bucket_size){//ç”±äºbucketsizeä¸€å®šæ˜¯2çš„æ¬¡æ–¹ï¼Œæ‰€ä»¥size-1å’Œkeyç›¸ä¸å¾—åˆ°çš„å°±æ˜¯ä¸‹æ ‡ return getHashcode(key)\u0026(bucket_size-1); } static void putVal(key_t key,val_t val,Node** buckets,size_t* returnSize,size_t bucketSize){ //è·å–ä½ç½® size_t index = getIndex(key,bucketSize); Node * node = buckets[index]; if(node==NULL){//æ’å…¥ä½ç½®ä¸ºç©º node = (Node*)malloc(sizeof(Node)); assert(node!=NULL); node-\u003eval = val; node-\u003ekey = key; node-\u003enext = NULL; buckets[index] = node; (*returnSize)++; //å“ˆå¸Œè¡¨å†…çš„å…ƒç´ å¢åŠ  return; } //æ’å…¥ä½ç½®ä¸ä¸ºç©ºï¼Œè¯´æ˜å‘ç”Ÿå†²çªï¼Œä½¿ç”¨é“¾åœ°å€æ³•ï¼Œéå†é“¾è¡¨ while (node!=NULL){ //å¦‚æœkeyç›¸åŒå°±è¦†ç›– if(node-\u003ekey==key){ node-\u003eval = val; return; } node = node-\u003enext; } //å½“å‰çš„keyä¸åœ¨é“¾è¡¨ä¸­ï¼Œåˆ™æ’å…¥é“¾è¡¨å¤´éƒ¨ Node* newNode = (Node*)malloc(sizeof(Node)); assert(newNode != NULL); newNode-\u003enext = buckets[index]; buckets[index] = newNode; (*returnSize)++; //å“ˆå¸Œè¡¨å†…å…ƒç´ å¢åŠ  } static void resize(HashMap* map){ map-\u003ecapacity \u003c\u003c= 1; //æ‰©å¤§ä¸¤å€å®¹é‡ï¼Œç›¸å½“äºå·¦ç§»ä¸€ä½ Node ** tmp = map-\u003ebuckets; //å­˜ä¸‹ä¹‹å‰çš„å†…å­˜åœ°å€ map-\u003ebuckets = (Node**)calloc(map-\u003ecapacity,sizeof(Node*)); //é‡æ–°åˆ†é… assert(map-\u003ebuckets!=NULL); rehash(map,tmp);//é‡æ–°å“ˆå¸Œå¤„ç† free(tmp); //é‡Šæ”¾ä¹‹å‰çš„å†…å­˜ } static void rehash(HashMap* map,Node** preTable){//é‡‡å–java1.7çš„æ–¹å¼è¿›è¡Œrehashä¹Ÿå°±æ˜¯æœ€ç®€å•ç›´æ¥çš„ç›´æ¥é‡æ–°å“ˆå¸Œæ’å…¥ size_t preCap = map-\u003ecapacity / 2; //æ”¹å˜å‰çš„æœ‰æ•ˆåŒºåŸŸ for(size_t i=0;i\u003cpreCap;i++){ if(preTable[i] != NULL){//åˆ¤æ–­å¯¹åº”çš„keyæ˜¯å¦éœ€è¦é‡æ–°æ¢ä½ç½®,å¦‚æœå¯¹æœ€æ–°æ©ç å¤šå‡ºæ¥çš„1æ•æ„Ÿåˆ™éœ€è¦rehash Node *preNode; Node *curNode = preTable[i]; while (curNode!=NULL){ preNode = curNode; curNode = curNode-\u003enext; insert(map,preNode); } } } } val_t* get(HashMap* map,key_t key){//å‰é¢çš„å†™å¥½åï¼Œé‚£ä¹ˆgetå°±å¾ˆå¥½å†™äº† int index = getIndex(key,map-\u003ecapacity); Node * node = map-\u003ebuckets[index]; while (node != NULL){ if(node-\u003ekey==key){ retur","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:2:9","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ€»ç»“ é€šè¿‡è¿™æ¬¡æ‰‹æ’•æ¯”è¾ƒè§„èŒƒçš„å“ˆå¸Œè¡¨çš„æ”¶è·ï¼š æ›´åŠ æ·±å…¥çš„ç†è§£äº†å“ˆå¸Œè¡¨çš„åŸºæœ¬å®ç°æ€æƒ³ã€‚ ä»LeetCodeåˆ·é¢˜æ— ç”¨çš„æ„Ÿè§‰åˆ°æœ‰ç”¨ï¼Œæ¯”å¦‚æ—¶åˆ»éœ€è¦çš„é“¾è¡¨å¢åˆ æ“ä½œã€‚ æœ‰ç‚¹é—æ†¾ï¼Œæ²¡èƒ½æŒ‰ç…§java1.8çš„æ€è·¯å†è¿›ä¸€æ­¥ä¼˜åŒ–å“ˆå¸Œè¡¨ã€‚ çœ‹äº†å¾ˆå¤šå¤§å‚çš„é¢è¯•é¢˜ï¼Œç°åœ¨å¯¹å“ˆå¸Œè¡¨è¿™å—æ•°æ®ç»“æ„çš„è€ƒé‡æ˜¯è¶Šæ¥è¶Šä¸¥è‹›äº†ï¼Œæ¯”å¦‚ä½ å¦‚æœèµ°çš„ java åç«¯å²—ä½ï¼Œé¢è¯•å¯èƒ½éœ€è¦ä½ å›ç­” java HashMap æºç çš„ç›¸å…³å®ç°éƒ¨åˆ†ï¼Œæ·±æŒ–åŸç†ï¼Œè€Œä¸æ˜¯æ­»è®°ç¡¬èƒŒäº†ï¼Œæ‰€ä»¥æœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯å­¦ä¹ æºç ï¼Œç„¶åæ ¹æ®å­¦åˆ°çš„æ€æƒ³è‡ªå·±å®ç°ä¸€äº›åŠŸèƒ½ã€‚ å‚è€ƒï¼š [1]. ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹ [2]. HashMapè·Ÿé¢è¯•å®˜æ‰¯äº†åŠä¸ªå°æ—¶ [3]. hashCode ä¸ºä»€ä¹ˆä¹˜ä»¥ 31ï¼Ÿ ","date":"2022-02-16","objectID":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/:3:0","tags":["C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£"],"title":"C/C++æ‰‹æ’•å“ˆå¸Œè¡¨è¯¦è§£","uri":"/posts/c++%E6%89%8B%E6%92%95%E5%93%88%E5%B8%8C%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["JavaWebç¬”è®°"],"content":"Javaè¿æ¥æ•°æ®åº“","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Javaä¸æ•°æ®åº“ é€šè¿‡Javaå¦‚ä½•å»ä½¿ç”¨æ•°æ®åº“æ¥å¸®åŠ©æˆ‘ä»¬å­˜å‚¨æ•°æ®å‘¢ï¼Œè¿™å°†æ˜¯æœ¬ç« èŠ‚è®¨è®ºçš„é‡ç‚¹ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:0:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆè¯†JDBC JDBCæ˜¯ä»€ä¹ˆï¼ŸJDBCè‹±æ–‡åä¸ºï¼šJava Data Base Connectivity(Javaæ•°æ®åº“è¿æ¥)ï¼Œå®˜æ–¹è§£é‡Šå®ƒæ˜¯Javaç¼–ç¨‹è¯­è¨€å’Œå¹¿æ³›çš„æ•°æ®åº“ä¹‹é—´ç‹¬ç«‹äºæ•°æ®åº“çš„è¿æ¥æ ‡å‡†çš„Java APIï¼Œæ ¹æœ¬ä¸Šè¯´JDBCæ˜¯ä¸€ç§è§„èŒƒï¼Œå®ƒæä¾›çš„æ¥å£ï¼Œä¸€å¥—å®Œæ•´çš„ï¼Œå…è®¸ä¾¿æ·å¼è®¿é—®åº•å±‚æ•°æ®åº“ã€‚å¯ä»¥ç”¨JAVAæ¥å†™ä¸åŒç±»å‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼šJAVAåº”ç”¨ç¨‹åºã€JAVA Appletsã€Java Servletã€JSPç­‰ï¼Œä¸åŒçš„å¯æ‰§è¡Œæ–‡ä»¶éƒ½èƒ½é€šè¿‡JDBCè®¿é—®æ•°æ®åº“ï¼Œåˆå…¼å¤‡å­˜å‚¨çš„ä¼˜åŠ¿ã€‚ç®€å•è¯´å®ƒå°±æ˜¯Javaä¸æ•°æ®åº“çš„è¿æ¥çš„æ¡¥æ¢æˆ–è€…æ’ä»¶ï¼Œç”¨Javaä»£ç å°±èƒ½æ“ä½œæ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ã€å­˜å‚¨è¿‡ç¨‹ã€äº‹åŠ¡ç­‰ã€‚ æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒJDKè‡ªå¸¦äº†ä¸€ä¸ªjava.sqlåŒ…ï¼Œè€Œè¿™é‡Œé¢å°±å®šä¹‰äº†å¤§é‡çš„æ¥å£ï¼Œä¸åŒç±»å‹çš„æ•°æ®åº“ï¼Œéƒ½å¯ä»¥é€šè¿‡å®ç°æ­¤æ¥å£ï¼Œç¼–å†™é€‚ç”¨äºè‡ªå·±æ•°æ®åº“çš„å®ç°ç±»ã€‚è€Œä¸åŒçš„æ•°æ®åº“å‚å•†å®ç°çš„è¿™å¥—æ ‡å‡†ï¼Œæˆ‘ä»¬ç§°ä¸ºæ•°æ®åº“é©±åŠ¨ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"å‡†å¤‡å·¥ä½œ é‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæ¥è¿›è¡Œä¸€äº›å‡†å¤‡å·¥ä½œï¼Œä»¥ä¾¿å¼€å§‹JDBCçš„å­¦ä¹ ï¼š å°†ideaè¿æ¥åˆ°æˆ‘ä»¬çš„æ•°æ®åº“ï¼Œä»¥ä¾¿ä»¥åè°ƒè¯•ã€‚ å°†mysqlé©±åŠ¨jarä¾èµ–å¯¼å…¥åˆ°é¡¹ç›®ä¸­ï¼ˆæ¨è6.0ç‰ˆæœ¬ä»¥ä¸Šï¼Œè¿™é‡Œç”¨åˆ°æ˜¯8.0ï¼‰ å‘Jetbriansç”³è¯·ä¸€ä¸ªå­¦ç”Ÿ/æ•™å¸ˆæˆæƒï¼Œç”¨äºæ¿€æ´»ideaç»ˆæç‰ˆï¼ˆè¿›è¡ŒJavaWebå¼€å‘éœ€è¦ç”¨åˆ°ï¼Œä¸€èˆ¬ç”³è¯·éœ€è¦3-7å¤©æ—¶é—´å®¡æ ¸ï¼‰ä¸æ˜¯å¤§å­¦ç”Ÿçš„è¯â€¦emmmâ€¦æ‡‚çš„éƒ½æ‡‚ã€‚ æ•™è‚²æˆæƒç”³è¯·åœ°å€ï¼šhttps://www.jetbrains.com/shop/eform/students ä¸€ä¸ªJavaç¨‹åºå¹¶ä¸æ˜¯ä¸€ä¸ªäººçš„æˆ˜æ–—ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ«äººå¼€å‘çš„åŸºç¡€ä¸Šç»§ç»­å‘ä¸Šå¼€å‘ï¼Œå…¶ä»–çš„å¼€å‘è€…å¯ä»¥å°†è‡ªå·±ç¼–å†™çš„Javaä»£ç æ‰“åŒ…ä¸ºjarï¼Œæˆ‘ä»¬åªéœ€è¦å¯¼å…¥è¿™ä¸ªjarä½œä¸ºä¾èµ–ï¼Œå³å¯ç›´æ¥ä½¿ç”¨åˆ«äººçš„ä»£ç ï¼Œå°±åƒæˆ‘ä»¬ç›´æ¥å»ä½¿ç”¨JDKæä¾›çš„ç±»ä¸€æ ·ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:1","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨JDBCè¿æ¥æ•°æ®åº“ **æ³¨æ„ï¼š**6.0ç‰ˆæœ¬ä»¥ä¸Šï¼Œä¸ç”¨æ‰‹åŠ¨åŠ è½½é©±åŠ¨ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å³å¯ï¼ //1. é€šè¿‡DriverManageræ¥è·å¾—æ•°æ®åº“è¿æ¥ try (Connection connection = DriverManager.getConnection(\"è¿æ¥URL\",\"ç”¨æˆ·å\",\"å¯†ç \"); //2. åˆ›å»ºä¸€ä¸ªç”¨äºæ‰§è¡ŒSQLçš„Statementå¯¹è±¡ Statement statement = connection.createStatement()){ //æ³¨æ„å‰ä¸¤æ­¥éƒ½æ”¾åœ¨try()ä¸­ï¼Œå› ä¸ºåœ¨æœ€åéœ€è¦é‡Šæ”¾èµ„æºï¼ //3. æ‰§è¡ŒSQLè¯­å¥ï¼Œå¹¶å¾—åˆ°ç»“æœé›† ResultSet set = statement.executeQuery(\"select * from è¡¨å\"); //4. æŸ¥çœ‹ç»“æœ while (set.next()){ ... } }catch (SQLException e){ e.printStackTrace(); } //5. é‡Šæ”¾èµ„æºï¼Œtry-with-resourceè¯­æ³•ä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬close å…¶ä¸­ï¼Œè¿æ¥çš„URLå¦‚æœè®°ä¸ä½æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€ideaçš„æ•°æ®åº“è¿æ¥é…ç½®ï¼Œå¤åˆ¶ä¸€ä»½å³å¯ã€‚ï¼ˆå…¶å®ideaæœ¬è´¨ä¹Ÿæ˜¯ä½¿ç”¨çš„JDBCï¼Œæ•´ä¸ªideaç¨‹åºéƒ½æ˜¯ç”±Javaç¼–å†™çš„ï¼Œå®é™…ä¸Šideaå°±æ˜¯ä¸€ä¸ªJavaç¨‹åºï¼‰ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:2","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"äº†è§£DriverManager æˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹DriverManageræ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå®ƒå…¶å®å°±æ˜¯ç®¡ç†æˆ‘ä»¬çš„æ•°æ®åº“é©±åŠ¨çš„ï¼š public static synchronized void registerDriver(java.sql.Driver driver, DriverAction da) throws SQLException { /* Register the driver if it has not already been added to our list */ if(driver != null) { registeredDrivers.addIfAbsent(new DriverInfo(driver, da)); //åœ¨åˆšå¯åŠ¨æ—¶ï¼Œmysqlå®ç°çš„é©±åŠ¨ä¼šè¢«åŠ è½½ï¼Œæˆ‘ä»¬å¯ä»¥æ–­ç‚¹è°ƒè¯•ä¸€ä¸‹ã€‚ } else { // This is for compatibility with the original DriverManager throw new NullPointerException(); } println(\"registerDriver: \" + driver); } æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨getConnection()æ¥è¿›è¡Œæ•°æ®åº“çš„é“¾æ¥ï¼š @CallerSensitive public static Connection getConnection(String url, String user, String password) throws SQLException { java.util.Properties info = new java.util.Properties(); if (user != null) { info.put(\"user\", user); } if (password != null) { info.put(\"password\", password); } return (getConnection(url, info, Reflection.getCallerClass())); //å†…éƒ¨æœ‰å®ç° } æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¸ºé©±åŠ¨ç®¡ç†å™¨æ·»åŠ ä¸€ä¸ªæ—¥å¿—æ‰“å°ï¼š static { DriverManager.setLogWriter(new PrintWriter(System.out)); //è¿™é‡Œç›´æ¥è®¾å®šä¸ºæ§åˆ¶å°è¾“å‡º } ç°åœ¨æˆ‘ä»¬æ‰§è¡Œçš„æ•°æ®åº“æ“ä½œæ—¥å¿—ä¼šåœ¨æ§åˆ¶å°å®æ—¶æ‰“å°ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:3","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"äº†è§£Connection Connectionæ˜¯æ•°æ®åº“çš„è¿æ¥å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡è¿æ¥å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªStatementç”¨äºæ‰§è¡ŒSQLè¯­å¥ï¼š Statement createStatement() throws SQLException; æˆ‘ä»¬å‘ç°é™¤äº†æ™®é€šçš„Statementï¼Œè¿˜å­˜åœ¨PreparedStatementï¼š PreparedStatement prepareStatement(String sql) throws SQLException; åœ¨åé¢æˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç»PreparedStatementçš„ä½¿ç”¨ï¼Œå®ƒèƒ½å¤Ÿæœ‰æ•ˆåœ°é¢„é˜²SQLæ³¨å…¥å¼æ”»å‡»ã€‚ å®ƒè¿˜æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œä¹Ÿæ”¾åˆ°åé¢æ¥è¯¦ç»†è¿›è¡Œè®²è§£ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:4","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"äº†è§£Statement æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨äº†executeQuery()æ–¹æ³•æ¥æ‰§è¡Œselectè¯­å¥ï¼Œæ­¤æ–¹æ³•è¿”å›ç»™æˆ‘ä»¬ä¸€ä¸ªResultSetå¯¹è±¡ï¼ŒæŸ¥è¯¢å¾—åˆ°çš„æ•°æ®ï¼Œå°±å­˜æ”¾åœ¨ResultSetä¸­ï¼ Statementé™¤äº†æ‰§è¡Œè¿™æ ·çš„DQLè¯­å¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨executeUpdate()æ–¹æ³•æ¥æ‰§è¡Œä¸€ä¸ªDMLæˆ–æ˜¯DDLè¯­å¥ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªintç±»å‹ï¼Œè¡¨ç¤ºæ‰§è¡Œåå—å½±å“çš„è¡Œæ•°ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥åˆ¤æ–­DMLè¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚ ä¹Ÿå¯ä»¥é€šè¿‡excute()æ¥æ‰§è¡Œä»»æ„çš„SQLè¯­å¥ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªbooleanæ¥è¡¨ç¤ºæ‰§è¡Œç»“æœæ˜¯ä¸€ä¸ªResultSetè¿˜æ˜¯ä¸€ä¸ªintï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨getResultSet()æˆ–æ˜¯getUpdateCount()æ¥è·å–ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:5","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"æ‰§è¡ŒDMLæ“ä½œ æˆ‘ä»¬é€šè¿‡å‡ ä¸ªä¾‹å­æ¥å‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:6","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"æ‰§è¡ŒDQLæ“ä½œ æ‰§è¡ŒDQLæ“ä½œä¼šè¿”å›ä¸€ä¸ªResultSetå¯¹è±¡ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä»ResultSetä¸­å»è·å–æ•°æ®ï¼š //é¦–å…ˆè¦æ˜ç¡®ï¼Œselectè¿”å›çš„æ•°æ®ç±»ä¼¼äºä¸€ä¸ªexcelè¡¨æ ¼ while (set.next()){ //æ¯è°ƒç”¨ä¸€æ¬¡next()å°±ä¼šå‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼Œé¦–æ¬¡è°ƒç”¨ä¼šç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œ } æˆ‘ä»¬åœ¨ç§»åŠ¨è¡Œæ•°åï¼Œå°±å¯ä»¥é€šè¿‡setä¸­æä¾›çš„æ–¹æ³•ï¼Œæ¥è·å–æ¯ä¸€åˆ—çš„æ•°æ®ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:7","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"æ‰§è¡Œæ‰¹å¤„ç†æ“ä½œ å½“æˆ‘ä»¬è¦æ‰§è¡Œå¾ˆå¤šæ¡è¯­å¥æ—¶ï¼Œå¯ä»¥ä¸ç”¨ä¸€æ¬¡ä¸€æ¬¡åœ°æäº¤ï¼Œè€Œæ˜¯ä¸€å£æ°”å…¨éƒ¨äº¤ç»™æ•°æ®åº“å¤„ç†ï¼Œè¿™æ ·ä¼šèŠ‚çœå¾ˆå¤šçš„æ—¶é—´ã€‚ public static void main(String[] args) throws ClassNotFoundException { try (Connection connection = DriverManager.getConnection(); Statement statement = connection.createStatement()){ statement.addBatch(\"insert into user values ('f', 1234)\"); statement.addBatch(\"insert into user values ('e', 1234)\"); //æ·»åŠ æ¯ä¸€æ¡æ‰¹å¤„ç†è¯­å¥ statement.executeBatch(); //ä¸€èµ·æ‰§è¡Œ }catch (SQLException e){ e.printStackTrace(); } } ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:8","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"å°†æŸ¥è¯¢ç»“æœæ˜ å°„ä¸ºå¯¹è±¡ æ—¢ç„¶æˆ‘ä»¬ç°åœ¨å¯ä»¥ä»æ•°æ®åº“ä¸­è·å–æ•°æ®äº†ï¼Œé‚£ä¹ˆç°åœ¨å°±å¯ä»¥å°†è¿™äº›æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªç±»æ¥è¿›è¡Œæ“ä½œï¼Œé¦–å…ˆå®šä¹‰æˆ‘ä»¬çš„å®ä½“ç±»ï¼š public class Student { Integer sid; String name; String sex; public Student(Integer sid, String name, String sex) { this.sid = sid; this.name = name; this.sex = sex; } public void say(){ System.out.println(\"æˆ‘å«ï¼š\"+name+\"ï¼Œå­¦å·ä¸ºï¼š\"+sid+\"ï¼Œæˆ‘çš„æ€§åˆ«æ˜¯ï¼š\"+sex); } } ç°åœ¨æˆ‘ä»¬æ¥è¿›è¡Œä¸€ä¸ªè½¬æ¢ï¼š while (set.next()){ Student student = new Student(set.getInt(1), set.getString(2), set.getString(3)); student.say(); } **æ³¨æ„ï¼š**åˆ—çš„ä¸‹æ ‡æ˜¯ä»1å¼€å§‹çš„ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨åå°„æœºåˆ¶æ¥å°†æŸ¥è¯¢ç»“æœæ˜ å°„ä¸ºå¯¹è±¡ï¼Œä½¿ç”¨åå°„çš„å¥½å¤„æ˜¯ï¼Œæ— è®ºä»€ä¹ˆç±»å‹éƒ½å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„æ–¹æ³•æ¥è¿›è¡Œå®ä½“ç±»å‹æ˜ å°„ï¼š private static \u003cT\u003e T convert(ResultSet set, Class\u003cT\u003e clazz){ try { Constructor\u003cT\u003e constructor = clazz.getConstructor(clazz.getConstructors()[0].getParameterTypes()); //é»˜è®¤è·å–ç¬¬ä¸€ä¸ªæ„é€ æ–¹æ³• Class\u003c?\u003e[] param = constructor.getParameterTypes(); //è·å–å‚æ•°åˆ—è¡¨ Object[] object = new Object[param.length]; //å­˜æ”¾å‚æ•° for (int i = 0; i \u003c param.length; i++) { //æ˜¯ä»1å¼€å§‹çš„ object[i] = set.getObject(i+1); if(object[i].getClass() != param[i]) throw new SQLException(\"é”™è¯¯çš„ç±»å‹è½¬æ¢ï¼š\"+object[i].getClass()+\" -\u003e \"+param[i]); } return constructor.newInstance(object); } catch (ReflectiveOperationException | SQLException e) { e.printStackTrace(); return null; } } ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„æ–¹æ³•æ¥å°†æŸ¥è¯¢ç»“æœè½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡äº†ï¼š while (set.next()){ Student student = convert(set, Student.class); if(student != null) student.say(); } å®é™…ä¸Šï¼Œåœ¨åé¢æˆ‘ä»¬ä¼šå­¦ä¹ Mybatisæ¡†æ¶ï¼Œå®ƒå¯¹JDBCè¿›è¡Œäº†æ·±å±‚æ¬¡çš„å°è£…ï¼Œè€Œå®ƒå°±è¿›è¡Œç±»ä¼¼ä¸Šé¢åå°„çš„æ“ä½œæ¥ä¾¿äºæˆ‘ä»¬å¯¹æ•°æ®åº“æ•°æ®ä¸å®ä½“ç±»çš„è½¬æ¢ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:9","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"å®ç°ç™»é™†ä¸SQLæ³¨å…¥æ”»å‡» åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚æœæˆ‘ä»¬æƒ³æ¨¡æ‹Ÿç™»é™†ä¸€ä¸ªç”¨æˆ·ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆå»å†™ï¼š try (Connection connection = DriverManager.getConnection(\"URL\",\"ç”¨æˆ·å\",\"å¯†ç \"); Statement statement = connection.createStatement(); Scanner scanner = new Scanner(System.in)){ ResultSet res = statement.executeQuery(\"select * from user where username='\"+scanner.nextLine()+\"'and pwd='\"+scanner.nextLine()+\"';\"); while (res.next()){ String username = res.getString(1); System.out.println(username+\" ç™»é™†æˆåŠŸï¼\"); } }catch (SQLException e){ e.printStackTrace(); } ç”¨æˆ·å¯ä»¥é€šè¿‡è‡ªå·±è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ¥ç™»é™†ï¼Œä¹ä¸€çœ‹å¥½åƒæ²¡å•¥é—®é¢˜ï¼Œé‚£å¦‚æœæˆ‘è¾“å…¥çš„æ˜¯ä»¥ä¸‹å†…å®¹å‘¢ï¼š Test1111' or 1=1; -- # Test ç™»é™†æˆåŠŸï¼ 1=1ä¸€å®šæ˜¯trueï¼Œé‚£ä¹ˆæˆ‘ä»¬åŸæœ¬çš„SQLè¯­å¥ä¼šå˜ä¸ºï¼š select*fromuserwhereusername='Test'andpwd='1111'or1=1;-- ' æˆ‘ä»¬å‘ç°ï¼Œå¦‚æœå…è®¸è¿™æ ·çš„æ•°æ®æ’å…¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŸæœ‰çš„SQLè¯­å¥ç»“æ„å°±é­åˆ°äº†ç ´åï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿéšæ„ç™»é™†åˆ«äººçš„è´¦å·ã€‚å› æ­¤æˆ‘ä»¬å¯èƒ½éœ€è¦é™åˆ¶ç”¨æˆ·çš„è¾“å…¥æ¥é˜²æ­¢ç”¨æˆ·è¾“å…¥ä¸€äº›SQLè¯­å¥å…³é”®å­—ï¼Œä½†æ˜¯å…³é”®å­—éå¸¸å¤šï¼Œè¿™å¹¶ä¸æ˜¯è§£å†³é—®é¢˜çš„æœ€å¥½åŠæ³•ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:10","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨PreparedStatement æˆ‘ä»¬å‘ç°ï¼Œå¦‚æœå•çº¯åœ°ä½¿ç”¨Statementæ¥æ‰§è¡ŒSQLå‘½ä»¤ï¼Œä¼šå­˜åœ¨ä¸¥é‡çš„SQLæ³¨å…¥æ”»å‡»æ¼æ´ï¼è€Œè¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨PreparedStatementæ¥è§£å†³ï¼š public static void main(String[] args) throws ClassNotFoundException { try (Connection connection = DriverManager.getConnection(\"URL\",\"ç”¨æˆ·å\",\"å¯†ç \"); PreparedStatement statement = connection.prepareStatement(\"select * from user where username= ? and pwd=?;\"); Scanner scanner = new Scanner(System.in)){ statement.setString(1, scanner.nextLine()); statement.setString(2, scanner.nextLine()); System.out.println(statement); //æ‰“å°æŸ¥çœ‹ä¸€ä¸‹æœ€ç»ˆæ‰§è¡Œçš„ ResultSet res = statement.executeQuery(); while (res.next()){ String username = res.getString(1); System.out.println(username+\" ç™»é™†æˆåŠŸï¼\"); } }catch (SQLException e){ e.printStackTrace(); } } æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬éœ€è¦æå‰ç»™åˆ°PreparedStatementä¸€ä¸ªSQLè¯­å¥ï¼Œå¹¶ä¸”ä½¿ç”¨?ä½œä¸ºå ä½ç¬¦ï¼Œå®ƒä¼šé¢„ç¼–è¯‘ä¸€ä¸ªSQLè¯­å¥ï¼Œé€šè¿‡ç›´æ¥å°†æˆ‘ä»¬çš„å†…å®¹è¿›è¡Œæ›¿æ¢çš„æ–¹å¼æ¥å¡«å†™æ•°æ®ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¹‹å‰çš„ä¾‹å­å°±å¤±æ•ˆäº†ï¼æˆ‘ä»¬æ¥çœ‹çœ‹å®é™…æ‰§è¡Œçš„SQLè¯­å¥æ˜¯ä»€ä¹ˆï¼š com.mysql.cj.jdbc.ClientPreparedStatement: select * from user where username= 'Test' and pwd='123456'' or 1=1; -- ';\ræˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬è¾“å…¥çš„å‚æ•°ä¸€æ—¦å‡ºç°'æ—¶ï¼Œä¼šè¢«å˜ä¸ºè½¬ä¹‰å½¢å¼\\'ï¼Œè€Œæœ€å¤–å±‚æœ‰ä¸€ä¸ªçœŸæ­£çš„'æ¥å°†æˆ‘ä»¬è¾“å…¥çš„å†…å®¹è¿›è¡ŒåŒ…è£¹ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿæœ‰æ•ˆåœ°é˜²æ­¢SQLæ³¨å…¥æ”»å‡»ï¼ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:11","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ç®¡ç†äº‹åŠ¡ JDBCé»˜è®¤çš„äº‹åŠ¡å¤„ç†è¡Œä¸ºæ˜¯è‡ªåŠ¨æäº¤ï¼Œæ‰€ä»¥å‰é¢æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªSQLè¯­å¥å°±ä¼šè¢«ç›´æ¥æäº¤ï¼ˆç›¸å½“äºæ²¡æœ‰å¯åŠ¨äº‹åŠ¡ï¼‰ï¼Œæ‰€ä»¥JDBCéœ€è¦è¿›è¡Œäº‹åŠ¡ç®¡ç†æ—¶ï¼Œé¦–å…ˆè¦é€šè¿‡Connectionå¯¹è±¡è°ƒç”¨setAutoCommit(false) æ–¹æ³•, å°†SQLè¯­å¥çš„æäº¤ï¼ˆcommitï¼‰ç”±é©±åŠ¨ç¨‹åºè½¬äº¤ç»™åº”ç”¨ç¨‹åºè´Ÿè´£ã€‚ con.setAutoCommit(); //å…³é—­è‡ªåŠ¨æäº¤åç›¸å½“äºå¼€å¯äº‹åŠ¡ã€‚ // SQLè¯­å¥ // SQLè¯­å¥ // SQLè¯­å¥ con.commit();æˆ– con.rollback(); ä¸€æ—¦å…³é—­è‡ªåŠ¨æäº¤ï¼Œé‚£ä¹ˆç°åœ¨æ‰§è¡Œæ‰€æœ‰çš„æ“ä½œå¦‚æœåœ¨æœ€åä¸è¿›è¡Œcommit()æ¥æäº¤äº‹åŠ¡çš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ“ä½œéƒ½ä¼šä¸¢å¤±ï¼Œåªæœ‰æäº¤ä¹‹åï¼Œæ‰€æœ‰çš„æ“ä½œæ‰ä¼šè¢«ä¿å­˜ï¼ä¹Ÿå¯ä»¥ä½¿ç”¨rollback()æ¥æ‰‹åŠ¨å›æ»šä¹‹å‰çš„å…¨éƒ¨æ“ä½œï¼ public static void main(String[] args) throws ClassNotFoundException { try (Connection connection = DriverManager.getConnection(\"URL\",\"ç”¨æˆ·å\",\"å¯†ç \"); Statement statement = connection.createStatement()){ connection.setAutoCommit(false); //å…³é—­è‡ªåŠ¨æäº¤ï¼Œç°åœ¨å°†å˜ä¸ºæˆ‘ä»¬æ‰‹åŠ¨æäº¤ statement.executeUpdate(\"insert into user values ('a', 1234)\"); statement.executeUpdate(\"insert into user values ('b', 1234)\"); statement.executeUpdate(\"insert into user values ('c', 1234)\"); connection.commit(); //å¦‚æœå‰é¢ä»»ä½•æ“ä½œå‡ºç°å¼‚å¸¸ï¼Œå°†ä¸ä¼šæ‰§è¡Œcommit()ï¼Œä¹‹å‰çš„æ“ä½œä¹Ÿå°±ä¸ä¼šç”Ÿæ•ˆ }catch (SQLException e){ e.printStackTrace(); } } æˆ‘ä»¬æ¥æ¥ç€å°è¯•ä¸€ä¸‹ä½¿ç”¨å›æ»šæ“ä½œï¼š public static void main(String[] args) throws ClassNotFoundException { try (Connection connection = DriverManager.getConnection(\"URL\",\"ç”¨æˆ·å\",\"å¯†ç \"); Statement statement = connection.createStatement()){ connection.setAutoCommit(false); //å…³é—­è‡ªåŠ¨æäº¤ï¼Œç°åœ¨å°†å˜ä¸ºæˆ‘ä»¬æ‰‹åŠ¨æäº¤ statement.executeUpdate(\"insert into user values ('a', 1234)\"); statement.executeUpdate(\"insert into user values ('b', 1234)\"); connection.rollback(); //å›æ»šï¼Œæ’¤é”€å‰é¢å…¨éƒ¨æ“ä½œ statement.executeUpdate(\"insert into user values ('c', 1234)\"); connection.commit(); //æäº¤äº‹åŠ¡ï¼ˆæ³¨æ„ï¼Œå›æ»šä¹‹å‰çš„å†…å®¹éƒ½æ²¡äº†ï¼‰ }catch (SQLException e){ e.printStackTrace(); } } åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å»åˆ›å»ºä¸€ä¸ªå›æ»šç‚¹æ¥å®ç°å®šç‚¹å›æ»šï¼š public static void main(String[] args) throws ClassNotFoundException { try (Connection connection = DriverManager.getConnection(\"URL\",\"ç”¨æˆ·å\",\"å¯†ç \"); Statement statement = connection.createStatement()){ connection.setAutoCommit(false); //å…³é—­è‡ªåŠ¨æäº¤ï¼Œç°åœ¨å°†å˜ä¸ºæˆ‘ä»¬æ‰‹åŠ¨æäº¤ statement.executeUpdate(\"insert into user values ('a', 1234)\"); Savepoint savepoint = connection.setSavepoint(); //åˆ›å»ºå›æ»šç‚¹ statement.executeUpdate(\"insert into user values ('b', 1234)\"); connection.rollback(savepoint); //å›æ»šåˆ°å›æ»šç‚¹ï¼Œæ’¤é”€å‰é¢å…¨éƒ¨æ“ä½œ statement.executeUpdate(\"insert into user values ('c', 1234)\"); connection.commit(); //æäº¤äº‹åŠ¡ï¼ˆæ³¨æ„ï¼Œå›æ»šä¹‹å‰çš„å†…å®¹éƒ½æ²¡äº†ï¼‰ }catch (SQLException e){ e.printStackTrace(); } } é€šè¿‡å¼€å¯äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´åŠ è°¨æ…åœ°è¿›è¡Œä¸€äº›æ“ä½œäº†ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä»äº‹åŠ¡æ¨¡å¼åˆ‡æ¢ä¸ºåŸæœ‰çš„è‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å…¶è®¾ç½®å›å»ï¼š public static void main(String[] args) throws ClassNotFoundException { try (Connection connection = DriverManager.getConnection(\"URL\",\"ç”¨æˆ·å\",\"å¯†ç \"); Statement statement = connection.createStatement()){ connection.setAutoCommit(false); //å…³é—­è‡ªåŠ¨æäº¤ï¼Œç°åœ¨å°†å˜ä¸ºæˆ‘ä»¬æ‰‹åŠ¨æäº¤ statement.executeUpdate(\"insert into user values ('a', 1234)\"); connection.setAutoCommit(true); //é‡æ–°å¼€å¯è‡ªåŠ¨æäº¤ï¼Œå¼€å¯æ—¶æŠŠä¹‹å‰çš„äº‹åŠ¡æ¨¡å¼ä¸‹çš„å†…å®¹ç»™æäº¤äº† statement.executeUpdate(\"insert into user values ('d', 1234)\"); //æ²¡æœ‰commitä¹ŸæˆåŠŸäº†ï¼ }catch (SQLException e){ e.printStackTrace(); } é€šè¿‡å­¦ä¹ JDBCï¼Œæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥é€šè¿‡Javaæ¥è®¿é—®å’Œæ“ä½œæˆ‘ä»¬çš„æ•°æ®åº“äº†ï¼ä¸ºäº†æ›´å¥½åœ°è¡”æ¥ï¼Œæˆ‘ä»¬è¿˜ä¼šæ¥ç€è®²è§£ä¸»æµæŒä¹…å±‚æ¡†æ¶â€”â€”Mybatisï¼ŒåŠ æ·±JDBCçš„è®°å¿†ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:1:12","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨Lombok æˆ‘ä»¬å‘ç°ï¼Œåœ¨ä»¥å¾€ç¼–å†™é¡¹ç›®æ—¶ï¼Œå°¤å…¶æ˜¯åœ¨ç±»è¿›è¡Œç±»å†…éƒ¨æˆå‘˜å­—æ®µå°è£…æ—¶ï¼Œéœ€è¦ç¼–å†™å¤§é‡çš„get/setæ–¹æ³•ï¼Œè¿™ä¸ä»…ä½¿å¾—æˆ‘ä»¬ç±»å®šä¹‰ä¸­å……æ»¡äº†getå’Œsetæ–¹æ³•ï¼ŒåŒæ—¶å¦‚æœå­—æ®µåç§°å‘ç”Ÿæ”¹å˜ï¼Œåˆè¦æŒ¨ä¸ªè¿›è¡Œä¿®æ”¹ï¼Œç”šè‡³å½“å­—æ®µå˜å¾—å¾ˆå¤šæ—¶ï¼Œæ„é€ æ–¹æ³•çš„ç¼–å†™ä¼šéå¸¸éº»çƒ¦ï¼ é€šè¿‡ä½¿ç”¨Lombokï¼ˆå°è¾£æ¤’ï¼‰å°±å¯ä»¥è§£å†³è¿™æ ·çš„é—®é¢˜ï¼ æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œä½¿ç”¨åŸç”Ÿæ–¹å¼å’Œå°è¾£æ¤’æ–¹å¼ç¼–å†™ç±»çš„åŒºåˆ«ï¼Œé¦–å…ˆæ˜¯ä¼ ç»Ÿæ–¹å¼ï¼š public class Student { private Integer sid; private String name; private String sex; public Student(Integer sid, String name, String sex) { this.sid = sid; this.name = name; this.sex = sex; } public Integer getSid() { //é•¿ï¼ return sid; } public void setSid(Integer sid) { //åˆ°ï¼ this.sid = sid; } public String getName() { //çˆ†ï¼ return name; } public void setName(String name) { //ç‚¸ï¼ this.name = name; } public String getSex() { return sex; } public void setSex(String sex) { this.sex = sex; } } è€Œä½¿ç”¨Lombokä¹‹åï¼š @Getter @Setter @AllArgsConstructor public class Student { private Integer sid; private String name; private String sex; } æˆ‘ä»¬å‘ç°ï¼Œä½¿ç”¨Lombokä¹‹åï¼Œåªéœ€è¦æ·»åŠ å‡ ä¸ªæ³¨è§£ï¼Œå°±èƒ½å¤Ÿè§£å†³æ‰æˆ‘ä»¬ä¹‹å‰é•¿é•¿çš„ä¸€ä¸²ä»£ç ï¼ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:2:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"é…ç½®Lombok é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥Lombokçš„jarä¾èµ–ï¼Œå’Œjdbcä¾èµ–æ˜¯ä¸€æ ·çš„ï¼Œæ”¾åœ¨é¡¹ç›®ç›®å½•ä¸‹ç›´æ¥å¯¼å…¥å°±è¡Œäº†ã€‚å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œä¸‹è½½ï¼šhttps://projectlombok.org/download ç„¶åæˆ‘ä»¬è¦å®‰è£…ä¸€ä¸‹Lombokæ’ä»¶ï¼Œç”±äºIDEAé»˜è®¤éƒ½å®‰è£…äº†Lombokçš„æ’ä»¶ï¼Œå› æ­¤ç›´æ¥å¯¼å…¥ä¾èµ–åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ é‡å¯IDEA Lombokæ˜¯ä¸€ç§æ’ä»¶åŒ–æ³¨è§£APIï¼Œæ˜¯é€šè¿‡æ·»åŠ æ³¨è§£æ¥å®ç°çš„ï¼Œç„¶ååœ¨javacè¿›è¡Œç¼–è¯‘çš„æ—¶å€™ï¼Œè¿›è¡Œå¤„ç†ã€‚ Javaçš„ç¼–è¯‘è¿‡ç¨‹å¯ä»¥åˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼š æ‰€æœ‰æºæ–‡ä»¶ä¼šè¢«è§£ææˆè¯­æ³•æ ‘ã€‚ è°ƒç”¨æ³¨è§£å¤„ç†å™¨ã€‚å¦‚æœæ³¨è§£å¤„ç†å™¨äº§ç”Ÿäº†æ–°çš„æºæ–‡ä»¶ï¼Œæ–°æ–‡ä»¶ä¹Ÿè¦è¿›è¡Œç¼–è¯‘ã€‚ æœ€åï¼Œè¯­æ³•æ ‘ä¼šè¢«åˆ†æå¹¶è½¬åŒ–æˆç±»æ–‡ä»¶ã€‚ å®é™…ä¸Šåœ¨ä¸Šè¿°çš„ç¬¬äºŒé˜¶æ®µï¼Œä¼šæ‰§è¡Œ*lombok.core.AnnotationProcessor*ï¼Œå®ƒæ‰€åšçš„å·¥ä½œå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ï¼Œä¿®æ”¹è¯­æ³•æ ‘ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:2:1","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨Lombok æˆ‘ä»¬é€šè¿‡å®æˆ˜æ¥æ¼”ç¤ºä¸€ä¸‹Lombokçš„å®ç”¨æ³¨è§£ï¼š æˆ‘ä»¬é€šè¿‡æ·»åŠ @Getterå’Œ@Setteræ¥ä¸ºå½“å‰ç±»çš„æ‰€æœ‰å­—æ®µç”Ÿæˆget/setæ–¹æ³•ï¼Œä»–ä»¬å¯ä»¥æ·»åŠ åˆ°ç±»æˆ–æ˜¯å­—æ®µä¸Šï¼Œæ³¨æ„é™æ€å­—æ®µä¸ä¼šç”Ÿæˆï¼Œfinalå­—æ®µæ— æ³•ç”Ÿæˆsetæ–¹æ³•ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨@Accessorsæ¥æ§åˆ¶ç”ŸæˆGetterå’ŒSetterçš„æ ·å¼ã€‚ æˆ‘ä»¬é€šè¿‡æ·»åŠ @ToStringæ¥ä¸ºå½“å‰ç±»ç”Ÿæˆé¢„è®¾çš„toStringæ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ @EqualsAndHashCodeæ¥å¿«é€Ÿç”Ÿæˆæ¯”è¾ƒå’Œå“ˆå¸Œå€¼æ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ @AllArgsConstructorå’Œ@NoArgsConstructoræ¥å¿«é€Ÿç”Ÿæˆå…¨å‚æ„é€ å’Œæ— å‚æ„é€ ã€‚ æˆ‘ä»¬å¯ä»¥æ·»åŠ @RequiredArgsConstructoræ¥å¿«é€Ÿç”Ÿæˆå‚æ•°åªåŒ…å«finalæˆ–è¢«æ ‡è®°ä¸º@NonNullçš„æˆå‘˜å­—æ®µã€‚ ä½¿ç”¨@Dataèƒ½ä»£è¡¨@Setterã€@Getterã€@RequiredArgsConstructorã€@ToStringã€@EqualsAndHashCodeå…¨éƒ¨æ³¨è§£ã€‚ ä¸€æ—¦ä½¿ç”¨@Dataå°±ä¸å»ºè®®æ­¤ç±»æœ‰ç»§æ‰¿å…³ç³»ï¼Œå› ä¸ºequalæ–¹æ³•å¯èƒ½ä¸ç¬¦åˆé¢„æœŸç»“æœï¼ˆå°¤å…¶æ˜¯ä»…æ¯”è¾ƒå­ç±»å±æ€§ï¼‰ã€‚ ä½¿ç”¨@Valueä¸@Dataç±»ä¼¼ï¼Œä½†æ˜¯å¹¶ä¸ä¼šç”Ÿæˆsetterå¹¶ä¸”æˆå‘˜å±æ€§éƒ½æ˜¯finalçš„ã€‚ ä½¿ç”¨@SneakyThrowsæ¥è‡ªåŠ¨ç”Ÿæˆtry-catchä»£ç å—ã€‚ ä½¿ç”¨@Cleanupä½œç”¨ä¸å±€éƒ¨å˜é‡ï¼Œåœ¨æœ€åè‡ªåŠ¨è°ƒç”¨å…¶close()æ–¹æ³•ï¼ˆå¯ä»¥è‡ªç”±æ›´æ¢ï¼‰ ä½¿ç”¨@Builderæ¥å¿«é€Ÿç”Ÿæˆå»ºé€ è€…æ¨¡å¼ã€‚ é€šè¿‡ä½¿ç”¨@Builder.Defaultæ¥æŒ‡å®šé»˜è®¤å€¼ã€‚ é€šè¿‡ä½¿ç”¨@Builder.ObtainViaæ¥æŒ‡å®šé»˜è®¤å€¼çš„è·å–æ–¹å¼ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:2:2","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"è®¤è¯†Mybatis åœ¨å‰é¢JDBCçš„å­¦ä¹ ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡JDBCæ¥è¿æ¥å’Œæ“ä½œæ•°æ®åº“ï¼Œä½†æ˜¯å“ªæ€•åªæ˜¯å®Œæˆä¸€ä¸ªSQLè¯­å¥çš„æ‰§è¡Œï¼Œéƒ½éœ€è¦ç¼–å†™å¤§é‡çš„ä»£ç ï¼Œæ›´ä¸ç”¨è¯´å¦‚æœæˆ‘è¿˜éœ€è¦è¿›è¡Œå®ä½“ç±»æ˜ å°„ï¼Œå°†æ•°æ®è½¬æ¢ä¸ºæˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œçš„å®ä½“ç±»å‹ï¼ŒJDBCå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿæ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ ç®€æ´é«˜æ•ˆçš„æ–¹å¼æ¥å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚ **å†æ¬¡å¼ºè°ƒï¼š**å­¦ä¹ å‰å®³çš„æ¡†æ¶æˆ–æ˜¯å‰å®³çš„æŠ€æœ¯ï¼Œå¹¶ä¸æ˜¯ä¸ºäº†ä¸€å®šè¦å»ä½¿ç”¨å®ƒï¼Œè€Œæ˜¯å®ƒä»¬èƒ½å¤Ÿä½¿å¾—æˆ‘ä»¬åœ¨ä¸åŒçš„å¼€å‘åœºæ™¯ä¸‹ï¼Œåˆç†åœ°ä½¿ç”¨è¿™äº›æŠ€æœ¯ï¼Œä»¥çµæ´»åœ°åº”å¯¹éœ€è¦è§£å†³çš„é—®é¢˜ã€‚ MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Object,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚ æˆ‘ä»¬ä¾ç„¶ä½¿ç”¨ä¼ ç»Ÿçš„jarä¾èµ–æ–¹å¼ï¼Œä»æœ€åŸå§‹å¼€å§‹è®²èµ·ï¼Œä¸ä½¿ç”¨Mavenï¼Œæœ‰å…³Mavenå†…å®¹æˆ‘ä»¬ä¼šåœ¨åé¢ç»Ÿä¸€è®²è§£ï¼å…¨ç¨‹å›´ç»•å®˜æ–¹æ–‡æ¡£è®²è§£ï¼ è¿™ä¸€å—å†…å®¹å¾ˆå¤šå¾ˆæ‚ï¼Œå†æ¬¡å¼ºè°ƒè¦å¤šå®è·µï¼ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"XMLè¯­è¨€æ¦‚è¿° åœ¨å¼€å§‹ä»‹ç»Mybatisä¹‹å‰ï¼ŒXMLè¯­è¨€å‘æ˜æœ€åˆæ˜¯ç”¨äºæ•°æ®çš„å­˜å‚¨å’Œä¼ è¾“ï¼Œå®ƒå¯ä»¥é•¿è¿™æ ·ï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003couter\u003e \u003cname\u003eé˜¿ä¼Ÿ\u003c/name\u003e \u003cdesc\u003eæ€ä¹ˆåˆåœ¨ç©ç”µåŠ¨å•Š\u003c/desc\u003e \u003cinner type=\"1\"\u003e \u003cage\u003e10\u003c/age\u003e \u003csex\u003eç”·\u003c/sex\u003e \u003c/inner\u003e \u003c/outer\u003e å¦‚æœä½ å­¦ä¹ è¿‡å‰ç«¯çŸ¥è¯†ï¼Œä½ ä¼šå‘ç°å®ƒå’ŒHTMLå‡ ä¹é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼ä½†æ˜¯è¯·æ³¨æ„ï¼Œè™½ç„¶å®ƒä»¬é•¿å¾—å·®ä¸å¤šï¼Œä½†æ˜¯ä»–ä»¬çš„æ„ä¹‰å´ä¸åŒï¼ŒHTMLä¸»è¦ç”¨äºé€šè¿‡ç¼–æ’æ¥å±•ç¤ºæ•°æ®ï¼Œè€ŒXMLä¸»è¦æ˜¯å­˜æ”¾æ•°æ®ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼å½“ç„¶ï¼Œæµè§ˆå™¨ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥æ‰“å¼€XMLæ–‡ä»¶çš„ã€‚ ä¸€ä¸ªXMLæ–‡ä»¶å­˜åœ¨ä»¥ä¸‹çš„æ ¼å¼è§„èŒƒï¼š å¿…é¡»å­˜åœ¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå°†æ‰€æœ‰çš„å­æ ‡ç­¾å…¨éƒ¨åŒ…å«ã€‚ å¯ä»¥ä½†ä¸å¿…é¡»åŒ…å«ä¸€ä¸ªå¤´éƒ¨å£°æ˜ï¼ˆä¸»è¦æ˜¯å¯ä»¥è®¾å®šç¼–ç æ ¼å¼ï¼‰ æ‰€æœ‰çš„æ ‡ç­¾å¿…é¡»æˆå¯¹å‡ºç°ï¼Œå¯ä»¥åµŒå¥—ä½†ä¸èƒ½äº¤å‰åµŒå¥— åŒºåˆ†å¤§å°å†™ã€‚ æ ‡ç­¾ä¸­å¯ä»¥å­˜åœ¨å±æ€§ï¼Œæ¯”å¦‚ä¸Šé¢çš„type=\"1\"å°±æ˜¯inneræ ‡ç­¾çš„ä¸€ä¸ªå±æ€§ï¼Œå±æ€§çš„å€¼ç”±å•å¼•å·æˆ–åŒå¼•å·åŒ…æ‹¬ã€‚ XMLæ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨é‡Šï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!-- æ³¨é‡Šå†…å®¹ --\u003e é€šè¿‡IDEAæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Ctrl+/æ¥å¿«é€Ÿæ·»åŠ æ³¨é‡Šæ–‡æœ¬ï¼ˆä¸ä»…ä»…é€‚ç”¨äºXMLï¼Œè¿˜æ”¯æŒå¾ˆå¤šç§ç±»å‹çš„æ–‡ä»¶ï¼‰ é‚£å¦‚æœæˆ‘ä»¬çš„å†…å®¹ä¸­å‡ºç°äº†\u003cæˆ–æ˜¯\u003eå­—ç¬¦ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨XMLçš„è½¬ä¹‰å­—ç¬¦æ¥ä»£æ›¿ï¼š å¦‚æœå«Œä¸€ä¸ªä¸€ä¸ªæ”¹å¤ªéº»çƒ¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨CDæ¥å¿«é€Ÿåˆ›å»ºä¸è§£æåŒºåŸŸï¼š \u003ctest\u003e \u003cname\u003e\u003c![CDATA[æˆ‘çœ‹ä½ \u003c\u003e\u003c\u003e\u003c\u003eæ˜¯ä¸€ç‚¹éƒ½ä¸æ‡‚å“¦\u003e\u003e\u003e]]\u003e\u003c/name\u003e \u003c/test\u003e é‚£ä¹ˆï¼Œæˆ‘ä»¬ç°åœ¨äº†è§£äº†XMLæ–‡ä»¶çš„å®šä¹‰ï¼Œç°åœ¨è¯¥å¦‚ä½•å»è§£æä¸€ä¸ªXMLæ–‡ä»¶å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›å°†å®šä¹‰å¥½çš„XMLæ–‡ä»¶è¯»å–åˆ°Javaç¨‹åºä¸­ï¼Œè¿™æ—¶è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ JDKä¸ºæˆ‘ä»¬å†…ç½®äº†ä¸€ä¸ªå«åšorg.w3cçš„XMLè§£æåº“ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒæ¥è¿›è¡ŒXMLæ–‡ä»¶å†…å®¹è§£æï¼š // åˆ›å»ºDocumentBuilderFactoryå¯¹è±¡ DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); // åˆ›å»ºDocumentBuilderå¯¹è±¡ try { DocumentBuilder builder = factory.newDocumentBuilder(); Document d = builder.parse(\"file:mappers/test.xml\"); // æ¯ä¸€ä¸ªæ ‡ç­¾éƒ½ä½œä¸ºä¸€ä¸ªèŠ‚ç‚¹ NodeList nodeList = d.getElementsByTagName(\"test\"); // å¯èƒ½æœ‰å¾ˆå¤šä¸ªåå­—ä¸ºtestçš„æ ‡ç­¾ Node rootNode = nodeList.item(0); // è·å–é¦–ä¸ª NodeList childNodes = rootNode.getChildNodes(); // ä¸€ä¸ªèŠ‚ç‚¹ä¸‹å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªèŠ‚ç‚¹ï¼Œæ¯”å¦‚æ ¹èŠ‚ç‚¹ä¸‹å°±å›Šæ‹¬äº†æ‰€æœ‰çš„èŠ‚ç‚¹ //èŠ‚ç‚¹å¯ä»¥æ˜¯ä¸€ä¸ªå¸¦æœ‰å†…å®¹çš„æ ‡ç­¾ï¼ˆå®ƒå†…éƒ¨å°±è¿˜æœ‰å­èŠ‚ç‚¹ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€æ®µæ–‡æœ¬å†…å®¹ for (int i = 0; i \u003c childNodes.getLength(); i++) { Node child = childNodes.item(i); if(child.getNodeType() == Node.ELEMENT_NODE) //è¿‡æ»¤æ¢è¡Œç¬¦ä¹‹ç±»çš„å†…å®¹ï¼Œå› ä¸ºå®ƒä»¬éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ System.out.println(child.getNodeName() + \"ï¼š\" +child.getFirstChild().getNodeValue()); // è¾“å‡ºèŠ‚ç‚¹åç§°ï¼Œä¹Ÿå°±æ˜¯æ ‡ç­¾åç§°ï¼Œä»¥åŠæ ‡ç­¾å†…éƒ¨çš„æ–‡æœ¬ï¼ˆå†…éƒ¨çš„å†…å®¹éƒ½æ˜¯å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¦è·å–å†…éƒ¨çš„èŠ‚ç‚¹ï¼‰ } } catch (Exception e) { e.printStackTrace(); } å½“ç„¶ï¼Œå­¦ä¹ å’Œä½¿ç”¨XMLåªæ˜¯ä¸ºäº†æ›´å¥½åœ°å»è®¤è¯†Mybatisçš„å·¥ä½œåŸç†ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨XMLæ¥ä½œä¸ºMybatisçš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ˜¯åœ¨å¼€å§‹ä¹‹å‰å¿…é¡»è¦æŒæ¡çš„å†…å®¹ï¼ˆä½¿ç”¨Javaè¯»å–XMLå†…å®¹ä¸è¦æ±‚æŒæ¡ï¼Œä½†æ˜¯éœ€è¦çŸ¥é“Mybatiså°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥è¯»å–é…ç½®æ–‡ä»¶çš„ï¼‰ ä¸ä»…ä»…æ˜¯Mybatisï¼ŒåŒ…æ‹¬åé¢çš„Springç­‰ä¼—å¤šæ¡†æ¶éƒ½ä¼šç”¨åˆ°XMLæ¥ä½œä¸ºæ¡†æ¶çš„é…ç½®æ–‡ä»¶ï¼ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:1","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆæ¬¡ä½¿ç”¨Mybatis é‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæ¥æ„Ÿå—ä¸€ä¸‹Mybatisç»™æˆ‘ä»¬å¸¦æ¥çš„ä¾¿æ·ï¼Œå°±ä»æ­å»ºç¯å¢ƒå¼€å§‹ï¼Œä¸­æ–‡æ–‡æ¡£ç½‘ç«™ï¼šhttps://mybatis.org/mybatis-3/zh/configuration.html æˆ‘ä»¬éœ€è¦å¯¼å…¥Mybatisçš„ä¾èµ–ï¼ŒJaråŒ…éœ€è¦åœ¨githubä¸Šä¸‹è½½ï¼Œå¦‚æœå¡å¾—ä¸€åŒ¹ï¼Œè¿ä¸ä¸Šå¯ä»¥åœ¨è§†é¢‘ç®€ä»‹å¤„ä»åˆ†äº«çš„æ–‡ä»¶ä¸­è·å–ã€‚åŒæ ·åœ°æ”¾å…¥åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå³é”®ä½œä¸ºä¾èµ–å³å¯ï¼ï¼ˆä¾èµ–å˜å¤šä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹ï¼Œä¸ç„¶ä¼šå¾ˆç¹æ‚ï¼‰ ä¾èµ–å¯¼å…¥å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™Mybatisçš„é…ç½®æ–‡ä»¶äº†ï¼ˆç°åœ¨ä¸æ˜¯åœ¨Javaä»£ç ä¸­é…ç½®äº†ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªXMLæ–‡ä»¶å»é…ç½®ï¼Œè¿™æ ·å°±ä½¿å¾—ç¡¬ç¼–ç çš„éƒ¨åˆ†å¤§å¤§å‡å°‘ï¼Œé¡¹ç›®åæœŸæ‰“åŒ…æˆJarè¿è¡Œä¸æ–¹ä¾¿ä¿®å¤ï¼Œä½†æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éšæ—¶éƒ½å¯ä»¥å»ä¿®æ”¹ï¼Œå°±å˜å¾—å¾ˆæ–¹ä¾¿äº†ï¼ŒåŒæ—¶ä»£ç é‡ä¹Ÿå¤§å¹…åº¦å‡å°‘ï¼Œé…ç½®æ–‡ä»¶å¡«å†™å®Œæˆåï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒé¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘è€Œä¸æ˜¯å¦‚ä½•å»è¯»å–é…ç½®æ–‡ä»¶ï¼‰æˆ‘ä»¬æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ç»™å®šçš„æç¤ºï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºåä¸ºmybatis-config.xmlçš„æ–‡ä»¶ï¼Œå¹¶å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"\u003e \u003cconfiguration\u003e \u003cenvironments default=\"development\"\u003e \u003cenvironment id=\"development\"\u003e \u003ctransactionManager type=\"JDBC\"/\u003e \u003cdataSource type=\"POOLED\"\u003e \u003cproperty name=\"driver\" value=\"${é©±åŠ¨ç±»ï¼ˆå«åŒ…åï¼‰}\"/\u003e \u003cproperty name=\"url\" value=\"${æ•°æ®åº“è¿æ¥URL}\"/\u003e \u003cproperty name=\"username\" value=\"${ç”¨æˆ·å}\"/\u003e \u003cproperty name=\"password\" value=\"${å¯†ç }\"/\u003e \u003c/dataSource\u003e \u003c/environment\u003e \u003c/environments\u003e \u003c/configuration\u003e æˆ‘ä»¬å‘ç°ï¼Œåœ¨æœ€ä¸Šæ–¹è¿˜å¼•å…¥äº†ä¸€ä¸ªå«åšDTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰çš„ä¸œè¥¿ï¼Œå®ƒæå‰å¸®åŠ©æˆ‘ä»¬è§„å®šäº†ä¸€äº›æ ‡ç­¾ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨Mybatisæå‰å¸®åŠ©æˆ‘ä»¬è§„å®šå¥½çš„æ ‡ç­¾æ¥è¿›è¡Œé…ç½®ï¼ˆå› ä¸ºåªæœ‰è¿™æ ·Mybatisæ‰èƒ½æ­£ç¡®è¯†åˆ«æˆ‘ä»¬é…ç½®çš„å†…å®¹ï¼‰ é€šè¿‡è¿›è¡Œé…ç½®ï¼Œæˆ‘ä»¬å°±å‘Šè¯‰äº†Mybatisæˆ‘ä»¬é“¾æ¥æ•°æ®åº“çš„ä¸€äº›ä¿¡æ¯ï¼ŒåŒ…æ‹¬URLã€ç”¨æˆ·åã€å¯†ç ç­‰ï¼Œè¿™æ ·Mybatiså°±çŸ¥é“è¯¥é“¾æ¥å“ªä¸ªæ•°æ®åº“ã€ä½¿ç”¨å“ªä¸ªè´¦å·è¿›è¡Œç™»é™†äº†ï¼ˆä¹Ÿå¯ä»¥ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œä¸åšè®²è§£ï¼Œè¿˜è¯·å„ä½å°ä¼™ä¼´è‡ªè¡Œé˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼‰ é…ç½®æ–‡ä»¶å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦åœ¨Javaç¨‹åºå¯åŠ¨æ—¶ï¼Œè®©Mybatiså¯¹é…ç½®æ–‡ä»¶è¿›è¡Œè¯»å–å¹¶å¾—åˆ°ä¸€ä¸ªSqlSessionFactoryå¯¹è±¡ï¼š public static void main(String[] args) throws FileNotFoundException { SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(new FileInputStream(\"mybatis-config.xml\")); try (SqlSession sqlSession = sqlSessionFactory.openSession(true)){ //æš‚æ—¶è¿˜æ²¡æœ‰ä¸šåŠ¡ } } ç›´æ¥è¿è¡Œå³å¯ï¼Œè™½ç„¶æ²¡æœ‰å¹²ä»€ä¹ˆäº‹æƒ…ï¼Œä½†æ˜¯ä¸ä¼šå‡ºç°é”™è¯¯ï¼Œå¦‚æœä¹‹å‰çš„é…ç½®æ–‡ä»¶ç¼–å†™é”™è¯¯ï¼Œç›´æ¥è¿è¡Œä¼šäº§ç”ŸæŠ¥é”™ï¼é‚£ä¹ˆç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ï¼ŒSqlSessionFactoryå¯¹è±¡æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼š æ¯ä¸ªåŸºäº MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª SqlSessionFactory çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡SqlSessionFactoryæ¥åˆ›å»ºå¤šä¸ªæ–°çš„ä¼šè¯ï¼ŒSqlSessionå¯¹è±¡ï¼Œæ¯ä¸ªä¼šè¯å°±ç›¸å½“äºæˆ‘ä¸åŒçš„åœ°æ–¹ç™»é™†ä¸€ä¸ªè´¦å·å»è®¿é—®æ•°æ®åº“ï¼Œä½ ä¹Ÿå¯ä»¥è®¤ä¸ºè¿™å°±æ˜¯ä¹‹å‰JDBCä¸­çš„Statementå¯¹è±¡ï¼Œä¼šè¯ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œæ²¡æœ‰ä»»ä½•å…³è”ã€‚ è€Œé€šè¿‡SqlSessionå°±å¯ä»¥å®Œæˆå‡ ä¹æ‰€æœ‰çš„æ•°æ®åº“æ“ä½œï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ªæ¥å£ä¸­å®šä¹‰äº†å¤§é‡æ•°æ®åº“æ“ä½œçš„æ–¹æ³•ï¼Œå› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦é€šè¿‡ä¸€ä¸ªå¯¹è±¡å°±èƒ½å®Œæˆæ•°æ®åº“äº¤äº’äº†ï¼Œæå¤§ç®€åŒ–äº†ä¹‹å‰çš„æµç¨‹ã€‚ æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ç›´æ¥è¯»å–å®ä½“ç±»ï¼Œè¯»å–å®ä½“ç±»è‚¯å®šéœ€è¦ä¸€ä¸ªæ˜ å°„è§„åˆ™ï¼Œæ¯”å¦‚ç±»ä¸­çš„å“ªä¸ªå­—æ®µå¯¹åº”æ•°æ®åº“ä¸­çš„å“ªä¸ªå­—æ®µï¼Œåœ¨æŸ¥è¯¢è¯­å¥è¿”å›ç»“æœåï¼ŒMybatiså°±ä¼šè‡ªåŠ¨å°†å¯¹åº”çš„ç»“æœå¡«å…¥åˆ°å¯¹è±¡çš„å¯¹åº”å­—æ®µä¸Šã€‚é¦–å…ˆç¼–å†™å®ä½“ç±»ï¼Œï¼Œç›´æ¥ä½¿ç”¨Lombokæ˜¯ä¸æ˜¯å°±å¾ˆæ–¹ä¾¿äº†ï¼š import lombok.Data; @Data public class Student { int sid; //åç§°æœ€å¥½å’Œæ•°æ®åº“å­—æ®µåç§°ä¿æŒä¸€è‡´ï¼Œä¸ç„¶å¯èƒ½ä¼šæ˜ å°„å¤±è´¥å¯¼è‡´æŸ¥è¯¢ç»“æœä¸¢å¤± String name; String sex; } åœ¨æ ¹ç›®å½•ä¸‹é‡æ–°åˆ›å»ºä¸€ä¸ªmapperæ–‡ä»¶å¤¹ï¼Œæ–°å»ºåä¸ºTestMapper.xmlçš„æ–‡ä»¶ä½œä¸ºæˆ‘ä»¬çš„æ˜ å°„å™¨ï¼Œå¹¶å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e \u003cmapper namespace=\"TestMapper\"\u003e \u003cselect id=\"selectStudent\" resultType=\"com.test.entity.Student\"\u003e select * from student \u003c/select\u003e \u003c/mapper\u003e å…¶ä¸­namespaceå°±æ˜¯å‘½åç©ºé—´ï¼Œæ¯ä¸ªMapperéƒ½æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤éœ€è¦ç”¨ä¸€ä¸ªå‘½åç©ºé—´æ¥åŒºåˆ†ï¼Œå®ƒè¿˜å¯ä»¥ç”¨æ¥ç»‘å®šä¸€ä¸ªæ¥å£ã€‚æˆ‘ä»¬åœ¨é‡Œé¢å†™å…¥äº†ä¸€ä¸ªselectæ ‡ç­¾ï¼Œè¡¨ç¤ºæ·»åŠ ä¸€ä¸ªselectæ“ä½œï¼ŒåŒæ—¶idä½œä¸ºæ“ä½œçš„åç§°ï¼ŒresultTypeæŒ‡å®šä¸ºæˆ‘ä»¬åˆšåˆšå®šä¹‰çš„å®ä½“ç±»ï¼Œè¡¨ç¤ºå°†æ•°æ®åº“ç»“æœæ˜ å°„ä¸ºStudentç±»ï¼Œç„¶åå°±åœ¨æ ‡ç­¾ä¸­å†™å…¥æˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥å³å¯ã€‚ ç¼–å†™å¥½åï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¿™ä¸ªMapperæ˜ å°„å™¨ï¼š \u003cmappers\u003e \u003cmapper url=\"file:mappers/TestMapper.xml\"/\u003e \u003c!-- è¿™é‡Œç”¨çš„æ˜¯urlï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–ç±»å‹ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢è®²è§£ --\u003e \u003c/mappers\u003e æœ€ååœ¨ç¨‹åºä¸­ä½¿ç”¨æˆ‘ä»¬å®šä¹‰å¥½çš„Mapperå³å¯ï¼š public static void main(String[] args) throws FileNotFoundException { SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(new FileInputStream(\"mybatis-config.xml\")); try (SqlSession sqlSession = sqlSessionFactory.openSession(true)){ List\u003cStudent\u003e student = sqlSession.selectList(\"selectStudent\"); student.forEach(System.out::println); } } æˆ‘ä»¬ä¼šå‘ç°ï¼ŒMybatiséå¸¸æ™ºèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œå°±èƒ½å¤Ÿç›´æ¥å°†æŸ¥è¯¢ç»“æœè½¬åŒ–ä¸ºä¸€ä¸ªå®ä½“ç±»ï¼ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:2","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"é…ç½®Mybatis åœ¨äº†è§£äº†Mybatisä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä¾¿æ·ä¹‹åï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ­£å¼åœ°å»å­¦ä¹ ä½¿ç”¨Mybatisäº†ï¼ ç”±äºSqlSessionFactoryä¸€èˆ¬åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»æ¥é›†ä¸­åˆ›å»ºSqlSessionï¼Œè¿™æ ·ä¼šæ›´åŠ æ–¹ä¾¿ä¸€äº›ï¼š public class MybatisUtil { //åœ¨ç±»åŠ è½½æ—¶å°±è¿›è¡Œåˆ›å»º private static SqlSessionFactory sqlSessionFactory; static { try { sqlSessionFactory = new SqlSessionFactoryBuilder().build(new FileInputStream(\"mybatis-config.xml\")); } catch (FileNotFoundException e) { e.printStackTrace(); } } /** * è·å–ä¸€ä¸ªæ–°çš„ä¼šè¯ * @param autoCommit æ˜¯å¦å¼€å¯è‡ªåŠ¨æäº¤ï¼ˆè·ŸJDBCæ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä¸è‡ªåŠ¨æäº¤ï¼Œåˆ™ä¼šå˜æˆäº‹åŠ¡æ“ä½œï¼‰ * @return SqlSessionå¯¹è±¡ */ public static SqlSession getSession(boolean autoCommit){ return sqlSessionFactory.openSession(autoCommit); } } ç°åœ¨æˆ‘ä»¬åªéœ€è¦åœ¨mainæ–¹æ³•ä¸­è¿™æ ·å†™å³å¯æŸ¥è¯¢ç»“æœäº†ï¼š public static void main(String[] args) { try (SqlSession sqlSession = MybatisUtil.getSession(true)){ List\u003cStudent\u003e student = sqlSession.selectList(\"selectStudent\"); student.forEach(System.out::println); } } ä¹‹å‰æˆ‘ä»¬æ¼”ç¤ºäº†ï¼Œå¦‚ä½•åˆ›å»ºä¸€ä¸ªæ˜ å°„å™¨æ¥å°†ç»“æœå¿«é€Ÿè½¬æ¢ä¸ºå®ä½“ç±»ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½è¿˜æ˜¯ä¸å¤Ÿæ–¹ä¾¿ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦å»æ‰¾æ˜ å°„å™¨å¯¹åº”æ“ä½œçš„åç§°ï¼Œè€Œä¸”è¿˜è¦çŸ¥é“å¯¹åº”çš„è¿”å›ç±»å‹ï¼Œå†é€šè¿‡SqlSessionæ¥æ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼Œèƒ½ä¸èƒ½å†æ–¹ä¾¿ä¸€ç‚¹å‘¢ï¼Ÿ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡namespaceæ¥ç»‘å®šåˆ°ä¸€ä¸ªæ¥å£ä¸Šï¼Œåˆ©ç”¨æ¥å£çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‡æ˜æ–¹æ³•çš„è¡Œä¸ºï¼Œè€Œå®é™…å®ç°åˆ™æ˜¯ç”±Mybatisæ¥å®Œæˆã€‚ public interface TestMapper { List\u003cStudent\u003e selectStudent(); } å°†Mapperæ–‡ä»¶çš„å‘½åç©ºé—´ä¿®æ”¹ä¸ºæˆ‘ä»¬çš„æ¥å£ï¼Œå»ºè®®åŒæ—¶å°†å…¶æ”¾åˆ°åŒååŒ…ä¸­ï¼Œä½œä¸ºå†…éƒ¨èµ„æºï¼š \u003cmapper namespace=\"com.test.mapper.TestMapper\"\u003e \u003cselect id=\"selectStudent\" resultType=\"com.test.entity.Student\"\u003e select * from student \u003c/select\u003e \u003c/mapper\u003e ä½œä¸ºå†…éƒ¨èµ„æºåï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„mapperå®šä¹‰ï¼Œä¸ä½¿ç”¨urlè€Œæ˜¯resourceè¡¨ç¤ºæ˜¯Jarå†…éƒ¨çš„æ–‡ä»¶ï¼š \u003cmappers\u003e \u003cmapper resource=\"com/test/mapper/TestMapper.xml\"/\u003e \u003c/mappers\u003e ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é€šè¿‡SqlSessionè·å–å¯¹åº”çš„å®ç°ç±»ï¼Œé€šè¿‡æ¥å£ä¸­å®šä¹‰çš„è¡Œä¸ºæ¥ç›´æ¥è·å–ç»“æœï¼š public static void main(String[] args) { try (SqlSession sqlSession = MybatisUtil.getSession(true)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); List\u003cStudent\u003e student = testMapper.selectStudent(); student.forEach(System.out::println); } } é‚£ä¹ˆè‚¯å®šæœ‰äººå¥½å¥‡ï¼ŒTestMapperæ˜æ˜æ˜¯ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±å®šä¹‰æ¥å£å•Šï¼ŒMybatisä¹Ÿä¸å¯èƒ½æå‰å¸®æˆ‘ä»¬å†™äº†å®ç°ç±»å•Šï¼Œé‚£è¿™æ¥å£æ€ä¹ˆå°±å‡ºç°äº†ä¸€ä¸ªå®ç°ç±»å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨getClass()æ–¹æ³•æ¥çœ‹çœ‹å®ç°ç±»æ˜¯ä¸ªä»€ä¹ˆï¼š TestMapper testMapper = sqlSession.getMapper(TestMapper.class); System.out.println(testMapper.getClass()); æˆ‘ä»¬å‘ç°ï¼Œå®ç°ç±»åç§°å¾ˆå¥‡æ€ªï¼Œåç§°ä¸ºcom.sun.proxy.$Proxy4ï¼Œå®ƒæ˜¯é€šè¿‡åŠ¨æ€ä»£ç†ç”Ÿæˆçš„ï¼Œç›¸å½“äºåŠ¨æ€ç”Ÿæˆäº†ä¸€ä¸ªå®ç°ç±»ï¼Œè€Œä¸æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„ï¼Œæœ‰å…³Mybatisè¿™ä¸€éƒ¨åˆ†çš„åŸç†ï¼Œæˆ‘ä»¬æ”¾åœ¨æœ€åä¸€èŠ‚è¿›è¡Œè®²è§£ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œä¹‹å‰æˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸ªè¯¦ç»†çš„ä»‹ç»ï¼š \u003cconfiguration\u003e \u003cenvironments default=\"development\"\u003e \u003cenvironment id=\"development\"\u003e \u003ctransactionManager type=\"JDBC\"/\u003e \u003cdataSource type=\"POOLED\"\u003e \u003cproperty name=\"driver\" value=\"com.mysql.cj.jdbc.Driver\"/\u003e \u003cproperty name=\"url\" value=\"jdbc:mysql://localhost:3306/study\"/\u003e \u003cproperty name=\"username\" value=\"test\"/\u003e \u003cproperty name=\"password\" value=\"123456\"/\u003e \u003c/dataSource\u003e \u003c/environment\u003e \u003c/environments\u003e \u003cmappers\u003e \u003cmapper resource=\"com/test/mapper/TestMapper.xml\"/\u003e \u003c/mappers\u003e \u003c/configuration\u003e é¦–å…ˆå°±ä»environmentsæ ‡ç­¾è¯´èµ·ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­ï¼Œéƒ½éœ€è¦æŒ‡å®šä¸€ä¸ªæ•°æ®åº“çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…å«è¿æ¥URLã€ç”¨æˆ·ã€å¯†ç ç­‰ä¿¡æ¯ï¼Œè€Œenvironmentå°±æ˜¯ç”¨äºè¿›è¡Œè¿™äº›é…ç½®çš„ï¼å®é™…æƒ…å†µä¸‹å¯èƒ½ä¼šä¸æ­¢æœ‰ä¸€ä¸ªæ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œæ¯”å¦‚å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨æœ¬åœ°çš„æ•°æ®åº“ï¼Œè€Œå¦‚æœéœ€è¦å°†é¡¹ç›®ä¸Šä¼ åˆ°æœåŠ¡å™¨æˆ–æ˜¯é˜²æ­¢å…¶ä»–äººçš„ç”µè„‘ä¸Šè¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½å°±éœ€è¦é…ç½®å¦ä¸€ä¸ªæ•°æ®åº“çš„ä¿¡æ¯ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æå‰å®šä¹‰å¥½æ‰€æœ‰çš„æ•°æ®åº“ä¿¡æ¯ï¼Œè¯¥ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆå³å¯ï¼ åœ¨environmentsæ ‡ç­¾ä¸Šæœ‰ä¸€ä¸ªdefaultå±æ€§ï¼Œæ¥æŒ‡å®šé»˜è®¤çš„ç¯å¢ƒï¼Œå½“ç„¶å¦‚æœæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨å…¶ä»–ç¯å¢ƒï¼Œå¯ä»¥ä¿®æ”¹è¿™ä¸ªé»˜è®¤ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå·¥å‚æ—¶é€‰æ‹©ç¯å¢ƒï¼š sqlSessionFactory = new SqlSessionFactoryBuilder() .build(new FileInputStream(\"mybatis-config.xml\"), \"ç¯å¢ƒID\"); æˆ‘ä»¬è¿˜å¯ä»¥ç»™ç±»å‹èµ·ä¸€ä¸ªåˆ«åï¼Œä»¥ç®€åŒ–Mapperçš„ç¼–å†™ï¼š \u003c!-- éœ€è¦åœ¨environmentsçš„ä¸Šæ–¹ --\u003e \u003ctypeAliases\u003e \u003ctypeAlias type=\"com.test.entity.Student\" alias=\"Student\"/\u003e \u003c/typeAliases\u003e ç°åœ¨Mapperå°±å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ«åäº†ï¼š \u003cmapper namespace=\"com.test.mapper.TestMapper\"\u003e \u003cselect id=\"selectStudent\" resultType=\"Student\"\u003e select * from student \u003c/select\u003e \u003c/mapper\u003e å¦‚æœè¿™æ ·è¿˜æ˜¯å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è®©Mybatiså»æ‰«æä¸€ä¸ªåŒ…ï¼Œå¹¶å°†åŒ…ä¸‹çš„æ‰€æœ‰ç±»è‡ªåŠ¨èµ·åˆ«åï¼ˆåˆ«åä¸ºé¦–å­—æ¯å°å†™çš„ç±»åï¼‰ \u003ctypeAliases\u003e \u003cpackage name=\"com.test.entity\"/\u003e \u003c/typeAliases\u003e ä¹Ÿå¯ä»¥ä¸ºæŒ‡å®šå®ä½“ç±»æ·»åŠ ä¸€ä¸ªæ³¨è§£ï¼Œæ¥æŒ‡å®šåˆ«åï¼š @Data @Alias(\"lbwnb\") public class Student { private int sid; private String name; private String sex; } å½“ç„¶ï¼ŒMybatisä¹ŸåŒ…å«è®¸å¤šçš„åŸºç¡€é…ç½®ï¼Œé€šè¿‡ä½¿ç”¨ï¼š \u003csettings\u003e \u003csetting name=\"\" value=\"\"/\u003e \u003c/settings\u003e æ‰€æœ‰çš„é…ç½®é¡¹å¯ä»¥åœ¨ä¸­æ–‡æ–‡æ¡£å¤„æŸ¥è¯¢ï¼Œæœ¬æ–‡ä¸ä¼šè¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œåœ¨åé¢æˆ‘ä»¬ä¼šæå‡ºä¸€äº›æ¯”è¾ƒé‡è¦çš„é…ç½®é¡¹ã€‚ æœ‰å…³é…ç½®æ–‡ä»¶çš„ä»‹ç»å°±æš‚æ—¶åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¨è®ºçš„é‡å¿ƒåº”è¯¥æ˜¯Mybatisçš„åº”ç”¨ï¼Œè€Œä¸æ˜¯é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥çœç•¥äº†ä¸€éƒ¨åˆ†å†…å®¹çš„è®²è§£ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:3","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"å¢åˆ æ”¹æŸ¥ åœ¨äº†è§£äº†Mybatisçš„ä¸€äº›åŸºæœ¬é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼æ¥ä½¿ç”¨Mybatisæ¥è¿›è¡Œæ•°æ®åº“æ“ä½œäº†ï¼ åœ¨å‰é¢æˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•å¿«é€Ÿè¿›è¡ŒæŸ¥è¯¢ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™ä¸€ä¸ªå¯¹åº”çš„æ˜ å°„å™¨æ—¢å¯ä»¥äº†ï¼š \u003cmapper namespace=\"com.test.mapper.TestMapper\"\u003e \u003cselect id=\"studentList\" resultType=\"Student\"\u003e select * from student \u003c/select\u003e \u003c/mapper\u003e å½“ç„¶ï¼Œå¦‚æœä½ ä¸å–œæ¬¢ä½¿ç”¨å®ä½“ç±»ï¼Œé‚£ä¹ˆè¿™äº›å±æ€§è¿˜å¯ä»¥è¢«æ˜ å°„åˆ°ä¸€ä¸ªMapä¸Šï¼š \u003cselect id=\"selectStudent\" resultType=\"Map\"\u003e select * from student \u003c/select\u003e public interface TestMapper { List\u003cMap\u003e selectStudent(); } Mapä¸­å°±ä¼šä»¥é”®å€¼å¯¹çš„å½¢å¼æ¥å­˜æ”¾è¿™äº›ç»“æœäº†ã€‚ é€šè¿‡è®¾å®šä¸€ä¸ªresultTypeå±æ€§ï¼Œè®©MybatisçŸ¥é“æŸ¥è¯¢ç»“æœéœ€è¦æ˜ å°„ä¸ºå“ªä¸ªå®ä½“ç±»ï¼Œè¦æ±‚å­—æ®µåç§°ä¿æŒä¸€è‡´ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›æŒ‰ç…§è¿™æ ·çš„è§„åˆ™æ¥æ˜ å°„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰resultMapæ¥è®¾å®šæ˜ å°„è§„åˆ™ï¼š \u003cresultMap id=\"Test\" type=\"Student\"\u003e \u003cresult column=\"sid\" property=\"sid\"/\u003e \u003cresult column=\"sex\" property=\"name\"/\u003e \u003cresult column=\"name\" property=\"sex\"/\u003e \u003c/resultMap\u003e é€šè¿‡æŒ‡å®šæ˜ å°„è§„åˆ™ï¼Œæˆ‘ä»¬ç°åœ¨åç§°å’Œæ€§åˆ«ä¸€æ å°±å‘ç”Ÿäº†äº¤æ¢ï¼Œå› ä¸ºæˆ‘ä»¬å°†å…¶æ˜ å°„å­—æ®µè¿›è¡Œäº†äº¤æ¢ã€‚ å¦‚æœä¸€ä¸ªç±»ä¸­å­˜åœ¨å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°è¿™æ ·çš„é”™è¯¯ï¼š ### Exception in thread \"main\" org.apache.ibatis.exceptions.PersistenceException: ### Error querying database. Cause: org.apache.ibatis.executor.ExecutorException: No constructor found in com.test.entity.Student matching [java.lang.Integer, java.lang.String, java.lang.String] ### The error may exist in com/test/mapper/TestMapper.xml ### The error may involve com.test.mapper.TestMapper.getStudentBySid ### The error occurred while handling results ### SQL: select * from student where sid = ? ### Cause: org.apache.ibatis.executor.ExecutorException: No constructor found in com.test.entity.Student matching [java.lang.Integer, java.lang.String, java.lang.String] at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30) ... è¿™æ—¶å°±éœ€è¦ä½¿ç”¨constructoræ ‡ç­¾æ¥æŒ‡å®šæ„é€ æ–¹æ³•ï¼š \u003cresultMap id=\"test\" type=\"Student\"\u003e \u003cconstructor\u003e \u003carg column=\"sid\" javaType=\"Integer\"/\u003e \u003carg column=\"name\" javaType=\"String\"/\u003e \u003c/constructor\u003e \u003c/resultMap\u003e å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒæŒ‡å®šæ„é€ æ–¹æ³•åï¼Œè‹¥æ­¤å­—æ®µè¢«å¡«å…¥äº†æ„é€ æ–¹æ³•ä½œä¸ºå‚æ•°ï¼Œå°†ä¸ä¼šé€šè¿‡åå°„ç»™å­—æ®µå•ç‹¬èµ‹å€¼ï¼Œè€Œæ„é€ æ–¹æ³•ä¸­æ²¡æœ‰ä¼ å…¥çš„å­—æ®µï¼Œä¾ç„¶ä¼šè¢«åå°„èµ‹å€¼ï¼Œæœ‰å…³resultMapçš„å†…å®¹ï¼Œåé¢è¿˜ä¼šç»§ç»­è®²è§£ã€‚ å¦‚æœæ•°æ®åº“ä¸­å­˜åœ¨ä¸€ä¸ªå¸¦ä¸‹åˆ’çº¿çš„å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è®©å…¶æ˜ å°„ä¸ºä»¥é©¼å³°å‘½åçš„å­—æ®µï¼Œæ¯”å¦‚my_testæ˜ å°„ä¸ºmyTest \u003csettings\u003e \u003csetting name=\"mapUnderscoreToCamelCase\" value=\"true\"/\u003e \u003c/settings\u003e å¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤ä¸ºä¸å¼€å¯ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤éœ€è¦åç§°ä¿æŒä¸€è‡´ã€‚ æˆ‘ä»¬æ¥ç€æ¥çœ‹çœ‹æ¡ä»¶æŸ¥è¯¢ï¼Œæ—¢ç„¶æ˜¯æ¡ä»¶æŸ¥è¯¢ï¼Œé‚£ä¹ˆè‚¯å®šéœ€è¦æˆ‘ä»¬ä¼ å…¥æŸ¥è¯¢æ¡ä»¶ï¼Œæ¯”å¦‚ç°åœ¨æˆ‘ä»¬æƒ³é€šè¿‡sidå­—æ®µæ¥é€šè¿‡å­¦å·æŸ¥æ‰¾ä¿¡æ¯ï¼š Student getStudentBySid(int sid); \u003cselect id=\"getStudentBySid\" parameterType=\"int\" resultType=\"Student\"\u003e select * from student where sid = #{sid} \u003c/select\u003e æˆ‘ä»¬é€šè¿‡ä½¿ç”¨#{xxx}æˆ–æ˜¯${xxx}æ¥å¡«å…¥æˆ‘ä»¬ç»™å®šçš„å±æ€§ï¼Œå®é™…ä¸ŠMybatisæœ¬è´¨ä¹Ÿæ˜¯é€šè¿‡PreparedStatementé¦–å…ˆè¿›è¡Œä¸€æ¬¡é¢„ç¼–è¯‘ï¼Œæœ‰æ•ˆåœ°é˜²æ­¢SQLæ³¨å…¥é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨${xxx}å°±ä¸å†æ˜¯é€šè¿‡é¢„ç¼–è¯‘ï¼Œè€Œæ˜¯ç›´æ¥ä¼ å€¼ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬éƒ½ä½¿ç”¨#{xxx}æ¥è¿›è¡Œæ“ä½œã€‚ ä½¿ç”¨parameterTypeå±æ€§æ¥æŒ‡å®šå‚æ•°ç±»å‹ï¼ˆéå¿…é¡»ï¼Œå¯ä»¥ä¸ç”¨ï¼Œæ¨èä¸ç”¨ï¼‰ æ¥ç€æˆ‘ä»¬æ¥çœ‹æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå…¶å®ä¸æŸ¥è¯¢æ“ä½œå·®ä¸å¤šï¼Œä¸è¿‡éœ€è¦ä½¿ç”¨å¯¹åº”çš„æ ‡ç­¾ï¼Œæ¯”å¦‚æ’å…¥æ“ä½œï¼š \u003cinsert id=\"addStudent\" parameterType=\"Student\"\u003e insert into student(name, sex) values(#{name}, #{sex}) \u003c/insert\u003e int addStudent(Student student); æˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®ä½“ç±»é‡Œé¢å¯¹åº”å±æ€§æ›¿æ¢åˆ°SQLè¯­å¥ä¸­ï¼Œåªéœ€è¦å¡«å†™å±æ€§åç§°å³å¯ï¼Œå’Œæ¡ä»¶æŸ¥è¯¢æ˜¯ä¸€æ ·çš„ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:4","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"å¤æ‚æŸ¥è¯¢ ä¸€ä¸ªè€å¸ˆå¯ä»¥æ•™æˆå¤šä¸ªå­¦ç”Ÿï¼Œé‚£ä¹ˆèƒ½å¦ä¸€æ¬¡æ€§å°†è€å¸ˆçš„å­¦ç”Ÿå…¨éƒ¨æ˜ å°„ç»™æ­¤è€å¸ˆçš„å¯¹è±¡å‘¢ï¼Œæ¯”å¦‚ï¼š @Data public class Teacher { int tid; String name; List\u003cStudent\u003e studentList; } æ˜ å°„ä¸ºTeacherå¯¹è±¡æ—¶ï¼ŒåŒæ—¶å°†å…¶æ•™æˆçš„æ‰€æœ‰å­¦ç”Ÿä¸€å¹¶æ˜ å°„ä¸ºListåˆ—è¡¨ï¼Œæ˜¾ç„¶è¿™æ˜¯ä¸€ç§ä¸€å¯¹å¤šçš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¤æ‚æŸ¥è¯¢äº†ã€‚è€Œæˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„éƒ½éå¸¸ç®€å•ï¼Œç›´æ¥å°±èƒ½å®Œæˆæ˜ å°„ï¼Œå› æ­¤æˆ‘ä»¬ç°åœ¨éœ€è¦ä½¿ç”¨resultMapæ¥è‡ªå®šä¹‰æ˜ å°„è§„åˆ™ï¼š \u003cselect id=\"getTeacherByTid\" resultMap=\"asTeacher\"\u003e select *, teacher.name as tname from student inner join teach on student.sid = teach.sid inner join teacher on teach.tid = teacher.tid where teach.tid = #{tid} \u003c/select\u003e \u003cresultMap id=\"asTeacher\" type=\"Teacher\"\u003e \u003cid column=\"tid\" property=\"tid\"/\u003e \u003cresult column=\"tname\" property=\"name\"/\u003e \u003ccollection property=\"studentList\" ofType=\"Student\"\u003e \u003cid property=\"sid\" column=\"sid\"/\u003e \u003cresult column=\"name\" property=\"name\"/\u003e \u003cresult column=\"sex\" property=\"sex\"/\u003e \u003c/collection\u003e \u003c/resultMap\u003e å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æŸ¥è¯¢ç»“æœæ˜¯ä¸€ä¸ªå¤šè¡¨è”æŸ¥çš„ç»“æœï¼Œè€Œè”æŸ¥çš„æ•°æ®å°±æ˜¯æˆ‘ä»¬éœ€è¦æ˜ å°„çš„æ•°æ®ï¼ˆæ¯”å¦‚è¿™é‡Œæ˜¯ä¸€ä¸ªè€å¸ˆæœ‰Nä¸ªå­¦ç”Ÿï¼Œè”æŸ¥çš„ç»“æœä¹Ÿæ˜¯è¿™ä¸€ä¸ªè€å¸ˆå¯¹åº”Nä¸ªå­¦ç”Ÿçš„Næ¡è®°å½•ï¼‰ï¼Œå…¶ä¸­idæ ‡ç­¾ç”¨äºåœ¨å¤šæ¡è®°å½•ä¸­è¾¨åˆ«æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ï¼Œæ¯”å¦‚ä¸Šé¢çš„æŸ¥è¯¢è¯­å¥å¾—åˆ°çš„ç»“æœä¸­ï¼Œtidè¿™ä¸€è¡Œå§‹ç»ˆä¸º1ï¼Œå› æ­¤æ‰€æœ‰çš„è®°å½•éƒ½åº”è¯¥æ˜¯tid=1çš„æ•™å¸ˆçš„æ•°æ®ï¼Œè€Œä¸åº”è¯¥å˜ä¸ºå¤šä¸ªæ•™å¸ˆçš„æ•°æ®ï¼Œå¦‚æœä¸åŠ idè¿›è¡Œçº¦æŸï¼Œé‚£ä¹ˆä¼šè¢«è¯†åˆ«æˆå¤šä¸ªæ•™å¸ˆçš„æ•°æ®ï¼ é€šè¿‡ä½¿ç”¨collectionæ¥è¡¨ç¤ºå°†å¾—åˆ°çš„æ‰€æœ‰ç»“æœåˆå¹¶ä¸ºä¸€ä¸ªé›†åˆï¼Œæ¯”å¦‚ä¸Šé¢çš„æ•°æ®ä¸­æ¯ä¸ªå­¦ç”Ÿéƒ½æœ‰å•ç‹¬çš„ä¸€æ¡è®°å½•ï¼Œå› æ­¤tidç›¸åŒçš„å…¨éƒ¨å­¦ç”Ÿçš„è®°å½•å°±å¯ä»¥æœ€ååˆå¹¶ä¸ºä¸€ä¸ªListï¼Œå¾—åˆ°æœ€ç»ˆçš„æ˜ å°„ç»“æœï¼Œå½“ç„¶ï¼Œä¸ºäº†åŒºåˆ†ï¼Œæœ€å¥½ä¹Ÿè®¾ç½®ä¸€ä¸ªidï¼Œåªä¸è¿‡è¿™ä¸ªä¾‹å­ä¸­å¯ä»¥å½“åšæ™®é€šçš„resultä½¿ç”¨ã€‚ äº†è§£äº†ä¸€å¯¹å¤šï¼Œé‚£ä¹ˆå¤šå¯¹ä¸€åˆè¯¥å¦‚ä½•æŸ¥è¯¢å‘¢ï¼Œæ¯”å¦‚æ¯ä¸ªå­¦ç”Ÿéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„è€å¸ˆï¼Œç°åœ¨Studentæ–°å¢äº†ä¸€ä¸ªTeacherå¯¹è±¡ï¼Œé‚£ä¹ˆç°åœ¨åˆè¯¥å¦‚ä½•å»å¤„ç†å‘¢ï¼Ÿ @Data @Accessors(chain = true) public class Student { private int sid; private String name; private String sex; private Teacher teacher; } @Data public class Teacher { int tid; String name; } ç°åœ¨æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œæ¯æ¬¡æŸ¥è¯¢åˆ°ä¸€ä¸ªStudentå¯¹è±¡æ—¶éƒ½å¸¦ä¸Šå®ƒçš„è€å¸ˆï¼ŒåŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨resultMapæ¥å®ç°ï¼ˆå…ˆä¿®æ”¹ä¸€ä¸‹è€å¸ˆçš„ç±»å®šä¹‰ï¼Œä¸ç„¶ä¼šå¾ˆéº»çƒ¦ï¼‰ï¼š \u003cresultMap id=\"test2\" type=\"Student\"\u003e \u003cid column=\"sid\" property=\"sid\"/\u003e \u003cresult column=\"name\" property=\"name\"/\u003e \u003cresult column=\"sex\" property=\"sex\"/\u003e \u003cassociation property=\"teacher\" javaType=\"Teacher\"\u003e \u003cid column=\"tid\" property=\"tid\"/\u003e \u003cresult column=\"tname\" property=\"name\"/\u003e \u003c/association\u003e \u003c/resultMap\u003e \u003cselect id=\"selectStudent\" resultMap=\"test2\"\u003e select *, teacher.name as tname from student left join teach on student.sid = teach.sid left join teacher on teach.tid = teacher.tid \u003c/select\u003e é€šè¿‡ä½¿ç”¨associationè¿›è¡Œå…³è”ï¼Œå½¢æˆå¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå®é™…ä¸Šå’Œä¸€å¯¹å¤šæ˜¯åŒç†çš„ï¼Œéƒ½æ˜¯å¯¹æŸ¥è¯¢ç»“æœçš„ä¸€ç§å¤„ç†æ–¹å¼ç½¢äº†ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:5","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"äº‹åŠ¡æ“ä½œ æˆ‘ä»¬å¯ä»¥åœ¨è·å–SqlSessionå…³é—­è‡ªåŠ¨æäº¤æ¥å¼€å¯äº‹åŠ¡æ¨¡å¼ï¼Œå’ŒJDBCå…¶å®éƒ½å·®ä¸å¤šï¼š public static void main(String[] args) { try (SqlSession sqlSession = MybatisUtil.getSession(false)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); testMapper.addStudent(new Student().setSex(\"ç”·\").setName(\"å°ç‹\")); testMapper.selectStudent().forEach(System.out::println); } } æˆ‘ä»¬å‘ç°ï¼Œåœ¨å…³é—­è‡ªåŠ¨æäº¤åï¼Œæˆ‘ä»¬çš„å†…å®¹æ˜¯æ²¡æœ‰è¿›å…¥åˆ°æ•°æ®åº“çš„ï¼Œç°åœ¨æˆ‘ä»¬æ¥è¯•ä¸€ä¸‹åœ¨æœ€åæäº¤äº‹åŠ¡ï¼š sqlSession.commit(); åœ¨äº‹åŠ¡æäº¤åï¼Œæˆ‘ä»¬çš„å†…å®¹æ‰ä¼šè¢«å†™å…¥åˆ°æ•°æ®åº“ä¸­ã€‚ç°åœ¨æˆ‘ä»¬æ¥è¯•è¯•çœ‹å›æ»šæ“ä½œï¼š try (SqlSession sqlSession = MybatisUtil.getSession(false)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); testMapper.addStudent(new Student().setSex(\"ç”·\").setName(\"å°ç‹\")); testMapper.selectStudent().forEach(System.out::println); sqlSession.rollback(); sqlSession.commit(); } å›æ»šæ“ä½œä¹Ÿå°è¯æˆåŠŸã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:6","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"åŠ¨æ€SQL åŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC æˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚ æˆ‘ä»¬ç›´æ¥ä½¿ç”¨å®˜ç½‘çš„ä¾‹å­è¿›è¡Œè®²è§£ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:7","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ç¼“å­˜æœºåˆ¶ MyBatis å†…ç½®äº†ä¸€ä¸ªå¼ºå¤§çš„äº‹åŠ¡æ€§æŸ¥è¯¢ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é…ç½®å’Œå®šåˆ¶ã€‚ å…¶å®ç¼“å­˜æœºåˆ¶æˆ‘ä»¬åœ¨ä¹‹å‰å­¦ä¹ IOæµçš„æ—¶å€™å·²ç»æåŠè¿‡äº†ï¼Œæˆ‘ä»¬å¯ä»¥æå‰å°†ä¸€éƒ¨åˆ†å†…å®¹æ”¾å…¥ç¼“å­˜ï¼Œä¸‹æ¬¡éœ€è¦è·å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ï¼Œè¿™æ ·çš„è¯ç›¸å½“äºç›´æ¥ä»å†…å­˜ä¸­è·å–è€Œä¸æ˜¯å†å»å‘æ•°æ®åº“ç´¢è¦æ•°æ®ï¼Œæ•ˆç‡ä¼šæ›´é«˜ã€‚ å› æ­¤Mybatiså†…ç½®äº†ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œæˆ‘ä»¬æŸ¥è¯¢æ—¶ï¼Œå¦‚æœç¼“å­˜ä¸­å­˜åœ¨æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œè€Œä¸æ˜¯å†å»å‘æ•°æ®åº“è¿›è¡Œè¯·æ±‚ã€‚ Mybatiså­˜åœ¨ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ä¸€çº§ç¼“å­˜ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯ç”¨äº†æœ¬åœ°çš„ä¼šè¯ç¼“å­˜ï¼Œå®ƒä»…ä»…å¯¹ä¸€ä¸ªä¼šè¯ä¸­çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼ˆä¸€çº§ç¼“å­˜æ— æ³•å…³é—­ï¼Œåªèƒ½è°ƒæ•´ï¼‰ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š public static void main(String[] args) throws InterruptedException { try (SqlSession sqlSession = MybatisUtil.getSession(true)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); Student student1 = testMapper.getStudentBySid(1); Student student2 = testMapper.getStudentBySid(1); System.out.println(student1 == student2); } } æˆ‘ä»¬å‘ç°ï¼Œä¸¤æ¬¡å¾—åˆ°çš„æ˜¯åŒä¸€ä¸ªStudentå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ç¬¬äºŒæ¬¡æŸ¥è¯¢å¹¶æ²¡æœ‰é‡æ–°å»æ„é€ å¯¹è±¡ï¼Œè€Œæ˜¯ç›´æ¥å¾—åˆ°ä¹‹å‰åˆ›å»ºå¥½çš„å¯¹è±¡ã€‚å¦‚æœè¿˜ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹å®ä½“ç±»ï¼š @Data @Accessors(chain = true) public class Student { public Student(){ System.out.println(\"æˆ‘è¢«æ„é€ äº†\"); } private int sid; private String name; private String sex; } æˆ‘ä»¬é€šè¿‡å‰é¢çš„å­¦ä¹ å¾—çŸ¥Mybatisåœ¨æ˜ å°„ä¸ºå¯¹è±¡æ—¶ï¼Œåœ¨åªæœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œæ— è®ºä½ æ„é€ æ–¹æ³•å†™æˆä»€ä¹ˆæ ·å­ï¼Œéƒ½ä¼šå»è°ƒç”¨ä¸€æ¬¡æ„é€ æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šå»æ‰¾åŒ¹é…çš„æ„é€ æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹æ„é€ æ–¹æ³•æ¥éªŒè¯å¯¹è±¡è¢«åˆ›å»ºäº†å‡ æ¬¡ã€‚ ç»“æœæ˜¾è€Œæ˜“è§ï¼Œåªåˆ›å»ºäº†ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç¬¬äºŒæ¬¡è¿›è¡ŒåŒæ ·çš„æŸ¥è¯¢æ—¶ï¼Œä¼šç›´æ¥ä½¿ç”¨ç¬¬ä¸€æ¬¡çš„ç»“æœï¼Œå› ä¸ºç¬¬ä¸€æ¬¡çš„ç»“æœå·²ç»è¢«ç¼“å­˜äº†ã€‚ é‚£ä¹ˆå¦‚æœæˆ‘ä¿®æ”¹äº†æ•°æ®åº“ä¸­çš„å†…å®¹ï¼Œç¼“å­˜è¿˜ä¼šç”Ÿæ•ˆå—ï¼š public static void main(String[] args) throws InterruptedException { try (SqlSession sqlSession = MybatisUtil.getSession(true)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); Student student1 = testMapper.getStudentBySid(1); testMapper.addStudent(new Student().setName(\"å°æ\").setSex(\"ç”·\")); Student student2 = testMapper.getStudentBySid(1); System.out.println(student1 == student2); } } æˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬è¿›è¡Œäº†æ’å…¥æ“ä½œåï¼Œç¼“å­˜å°±æ²¡æœ‰ç”Ÿæ•ˆäº†ï¼Œæˆ‘ä»¬å†æ¬¡è¿›è¡ŒæŸ¥è¯¢å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€çº§ç¼“å­˜ï¼Œåœ¨è¿›è¡ŒDMLæ“ä½œåï¼Œä¼šä½¿å¾—ç¼“å­˜å¤±æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´MybatisçŸ¥é“æˆ‘ä»¬å¯¹æ•°æ®åº“é‡Œé¢çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ‰€ä»¥ä¹‹å‰ç¼“å­˜çš„å†…å®¹å¯èƒ½å°±ä¸æ˜¯å½“å‰æ•°æ®åº“é‡Œé¢æœ€æ–°çš„å†…å®¹äº†ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯ï¼Œå½“å‰ä¼šè¯ç»“æŸåï¼Œä¹Ÿä¼šæ¸…ç†å…¨éƒ¨çš„ç¼“å­˜ï¼Œå› ä¸ºå·²ç»ä¸ä¼šå†ç”¨åˆ°äº†ã€‚ä½†æ˜¯ä¸€å®šæ³¨æ„ï¼Œä¸€çº§ç¼“å­˜åªé’ˆå¯¹äºå•ä¸ªä¼šè¯ï¼Œå¤šä¸ªä¼šè¯ä¹‹é—´ä¸ç›¸é€šã€‚ public static void main(String[] args) { try (SqlSession sqlSession = MybatisUtil.getSession(true)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); Student student2; try(SqlSession sqlSession2 = MybatisUtil.getSession(true)){ TestMapper testMapper2 = sqlSession2.getMapper(TestMapper.class); student2 = testMapper2.getStudentBySid(1); } Student student1 = testMapper.getStudentBySid(1); System.out.println(student1 == student2); } } **æ³¨æ„ï¼š**ä¸€ä¸ªä¼šè¯DMLæ“ä½œåªä¼šé‡ç½®å½“å‰ä¼šè¯çš„ç¼“å­˜ï¼Œä¸ä¼šé‡ç½®å…¶ä»–ä¼šè¯çš„ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»–ä¼šè¯ç¼“å­˜æ˜¯ä¸ä¼šæ›´æ–°çš„ï¼ ä¸€çº§ç¼“å­˜ç»™æˆ‘ä»¬æä¾›äº†å¾ˆé«˜é€Ÿçš„è®¿é—®æ•ˆç‡ï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨èŒƒå›´å®åœ¨æ˜¯æœ‰é™ï¼Œå¦‚æœä¸€ä¸ªä¼šè¯ç»“æŸï¼Œé‚£ä¹ˆä¹‹å‰çš„ç¼“å­˜å°±å…¨éƒ¨å¤±æ•ˆäº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ç¼“å­˜èƒ½å¤Ÿæ‰©å±•åˆ°æ‰€æœ‰ä¼šè¯éƒ½èƒ½ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡äºŒçº§ç¼“å­˜æ¥å®ç°ï¼ŒäºŒçº§ç¼“å­˜é»˜è®¤æ˜¯å…³é—­çŠ¶æ€ï¼Œè¦å¼€å¯äºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ˜ å°„å™¨XMLæ–‡ä»¶ä¸­æ·»åŠ ï¼š \u003ccache/\u003e å¯è§äºŒçº§ç¼“å­˜æ˜¯Mapperçº§åˆ«çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªä¼šè¯å¤±æ•ˆæ—¶ï¼Œå®ƒçš„ç¼“å­˜ä¾ç„¶ä¼šå­˜åœ¨äºäºŒçº§ç¼“å­˜ä¸­ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬å†æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯ä¼šç›´æ¥ä½¿ç”¨ä¹‹å‰çš„ç¼“å­˜ï¼Œæˆ‘ä»¬é¦–å…ˆæ ¹æ®å®˜æ–¹æ–‡æ¡£è¿›è¡Œä¸€äº›é…ç½®ï¼š \u003ccache eviction=\"FIFO\" flushInterval=\"60000\" size=\"512\" readOnly=\"true\"/\u003e æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªä»£ç ï¼š public static void main(String[] args) { Student student; try (SqlSession sqlSession = MybatisUtil.getSession(true)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); student = testMapper.getStudentBySid(1); } try (SqlSession sqlSession2 = MybatisUtil.getSession(true)){ TestMapper testMapper2 = sqlSession2.getMapper(TestMapper.class); Student student2 = testMapper2.getStudentBySid(1); System.out.println(student2 == student); } } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç ä¸­é¦–å…ˆæ˜¯ç¬¬ä¸€ä¸ªä¼šè¯åœ¨è¿›è¡Œè¯»æ“ä½œï¼Œå®Œæˆåä¼šç»“æŸä¼šè¯ï¼Œè€Œç¬¬äºŒä¸ªæ“ä½œé‡æ–°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œå†æ¬¡æ‰§è¡Œäº†åŒæ ·çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬å‘ç°å¾—åˆ°çš„ä¾ç„¶æ˜¯ç¼“å­˜çš„ç»“æœã€‚ é‚£ä¹ˆå¦‚æœæˆ‘ä¸å¸Œæœ›æŸä¸ªæ–¹æ³•å¼€å¯ç¼“å­˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ·»åŠ useCacheå±æ€§æ¥å…³é—­ç¼“å­˜ï¼š \u003cselect id=\"getStudentBySid\" resultType=\"Student\" useCache=\"false\"\u003e select * from student where sid = #{sid} \u003c/select\u003e æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨flushCache=â€œfalse\"åœ¨æ¯æ¬¡æ‰§è¡Œåéƒ½æ¸…ç©ºç¼“å­˜ï¼Œé€šè¿‡è¿™è¿™ä¸ªæˆ‘ä»¬è¿˜å¯ä»¥æ§åˆ¶DMLæ“ä½œå®Œæˆä¹‹åä¸æ¸…ç©ºç¼“å­˜ã€‚ \u003cselect id=\"getStudentBySid\" resultType=\"Student\" flushCache=\"true\"\u003e select * from student where sid = #{sid} \u003c/select\u003e æ·»åŠ äº†äºŒçº§ç¼“å­˜ä¹‹åï¼Œä¼šå…ˆä»äºŒçº§ç¼“å­˜ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œå½“äºŒçº§ç¼“å­˜ä¸­æ²¡æœ‰æ—¶ï¼Œæ‰ä¼šä»ä¸€çº§ç¼“å­˜ä¸­è·å–ï¼Œå½“ä¸€çº§ç¼“å­˜ä¸­éƒ½è¿˜æ²¡æœ‰æ•°æ®æ—¶ï¼Œæ‰ä¼šè¯·æ±‚æ•°æ®åº“ï¼Œå› æ­¤æˆ‘ä»¬å†æ¥æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼š public static void main(String[] args) { try (SqlSession sqlSession = MybatisUtil.getSession(true)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); Student student2; try(SqlSession sqlSession2 = MybatisUtil.getSession(true)){ TestMapper testMapper2 = sqlSession2.getMapper(TestMapper.class); student2 = testMapper2.getStudentBySid(1); } Student student1 = testMapper.getStudentBySid(1); System.out.println(student1 == student2); } } å¾—åˆ°çš„ç»“æœå°±ä¼šæ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ï¼Œå› ä¸ºç°åœ¨æ˜¯ä¼˜å…ˆä»äºŒçº§ç¼“å­˜ä¸­è·å–ã€‚ è¯»å–é¡ºåºï¼šäºŒçº§ç¼“å­˜ =\u003e ä¸€çº§ç¼“å­˜ =\u003e æ•°æ®åº“ è™½ç„¶ç¼“å­˜æœºåˆ¶ç»™æˆ‘","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:8","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨æ³¨è§£å¼€å‘ åœ¨ä¹‹å‰çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½“éªŒåˆ°Mybatisä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä¾¿æ·äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™å¯¹åº”çš„æ˜ å°„å™¨ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°ä¸€ä¸ªæ¥å£ä¸Šï¼Œå³å¯ç›´æ¥é€šè¿‡è¯¥æ¥å£æ‰§è¡Œæˆ‘ä»¬çš„SQLè¯­å¥ï¼Œæå¤§çš„ç®€åŒ–äº†æˆ‘ä»¬ä¹‹å‰JDBCé‚£æ ·çš„ä»£ç ç¼–å†™æ¨¡å¼ã€‚é‚£ä¹ˆï¼Œèƒ½å¦å®ç°æ— éœ€xmlæ˜ å°„å™¨é…ç½®ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨æ³¨è§£åœ¨æ¥å£ä¸Šè¿›è¡Œé…ç½®å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä¹Ÿæ˜¯ç°åœ¨æ¨èçš„ä¸€ç§æ–¹å¼ï¼ˆä¹Ÿä¸æ˜¯è¯´XMLå°±ä¸è¦å»ç”¨äº†ï¼Œç”±äºJava æ³¨è§£çš„è¡¨è¾¾èƒ½åŠ›å’Œçµæ´»æ€§ååˆ†æœ‰é™ï¼Œå¯èƒ½ç›¸å¯¹äºXMLé…ç½®æŸäº›åŠŸèƒ½å®ç°èµ·æ¥ä¼šä¸å¤ªå¥½åŠï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œç›´æ¥ä½¿ç”¨æ³¨è§£å¼€å‘å·²ç»ç»°ç»°æœ‰ä½™äº†ï¼‰ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œä½¿ç”¨XMLè¿›è¡Œæ˜ å°„å™¨ç¼–å†™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç°åœ¨XMLä¸­å®šä¹‰æ˜ å°„è§„åˆ™å’ŒSQLè¯­å¥ï¼Œç„¶åå†å°†å…¶ç»‘å®šåˆ°ä¸€ä¸ªæ¥å£çš„æ–¹æ³•å®šä¹‰ä¸Šï¼Œç„¶åå†ä½¿ç”¨æ¥å£æ¥æ‰§è¡Œï¼š \u003cinsert id=\"addStudent\"\u003e insert into student(name, sex) values(#{name}, #{sex}) \u003c/insert\u003e int addStudent(Student student); è€Œç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æ³¨è§£æ¥å®ç°ï¼Œæ¯ä¸ªæ“ä½œéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ³¨è§£ï¼š @Insert(\"insert into student(name, sex) values(#{name}, #{sex})\") int addStudent(Student student); å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„æ˜ å°„å™¨æ³¨å†Œï¼š \u003cmappers\u003e \u003cmapper class=\"com.test.mapper.MyMapper\"/\u003e \u003c!-- ä¹Ÿå¯ä»¥ç›´æ¥æ³¨å†Œæ•´ä¸ªåŒ…ä¸‹çš„ \u003cpackage name=\"com.test.mapper\"/\u003e --\u003e \u003c/mappers\u003e é€šè¿‡ç›´æ¥æŒ‡å®šClassï¼Œæ¥è®©MybatisçŸ¥é“æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªé€šè¿‡æ³¨è§£å®ç°çš„æ˜ å°„å™¨ã€‚ æˆ‘ä»¬æ¥ç€æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•ä½¿ç”¨æ³¨è§£è¿›è¡Œè‡ªå®šä¹‰æ˜ å°„è§„åˆ™ï¼š @Results({ @Result(id = true, column = \"sid\", property = \"sid\"), @Result(column = \"sex\", property = \"name\"), @Result(column = \"name\", property = \"sex\") }) @Select(\"select * from student\") List\u003cStudent\u003e getAllStudent(); ç›´æ¥é€šè¿‡@Resultsæ³¨è§£ï¼Œå°±å¯ä»¥ç›´æ¥è¿›è¡Œé…ç½®äº†ï¼Œæ­¤æ³¨è§£çš„valueæ˜¯ä¸€ä¸ª@Resultæ³¨è§£æ•°ç»„ï¼Œæ¯ä¸ª@Resultæ³¨è§£éƒ½éƒ½ä¸€ä¸ªå•ç‹¬çš„å­—æ®µé…ç½®ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬ä¹‹å‰åœ¨XMLæ˜ å°„å™¨ä¸­å†™çš„ï¼š \u003cresultMap id=\"test\" type=\"Student\"\u003e \u003cid property=\"sid\" column=\"sid\"/\u003e \u003cresult column=\"name\" property=\"sex\"/\u003e \u003cresult column=\"sex\" property=\"name\"/\u003e \u003c/resultMap\u003e ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ³¨è§£æ¥è‡ªå®šä¹‰æ˜ å°„è§„åˆ™äº†ã€‚é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨æ³¨è§£æ¥å®Œæˆå¤æ‚æŸ¥è¯¢å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ä¸€ä¸ªè€å¸ˆå¤šä¸ªå­¦ç”Ÿçš„ä¾‹å­ï¼š @Results({ @Result(id = true, column = \"tid\", property = \"tid\"), @Result(column = \"name\", property = \"name\"), @Result(column = \"tid\", property = \"studentList\", many = @Many(select = \"getStudentByTid\") ) }) @Select(\"select * from teacher where tid = #{tid}\") Teacher getTeacherBySid(int tid); @Select(\"select * from student inner join teach on student.sid = teach.sid where tid = #{tid}\") List\u003cStudent\u003e getStudentByTid(int tid); æˆ‘ä»¬å‘ç°ï¼Œå¤šå‡ºäº†ä¸€ä¸ªå­æŸ¥è¯¢ï¼Œè€Œè¿™ä¸ªå­æŸ¥è¯¢æ˜¯å•ç‹¬æŸ¥è¯¢è¯¥è€å¸ˆæ‰€å±å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œè€Œå­æŸ¥è¯¢ç»“æœä½œä¸º@Resultæ³¨è§£çš„ä¸€ä¸ªmanyç»“æœï¼Œä»£è¡¨å­æŸ¥è¯¢çš„æ‰€æœ‰ç»“æœéƒ½å½’å…¥æ­¤é›†åˆä¸­ï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰çš„collectionæ ‡ç­¾ï¼‰ \u003cresultMap id=\"asTeacher\" type=\"Teacher\"\u003e \u003cid column=\"tid\" property=\"tid\"/\u003e \u003cresult column=\"tname\" property=\"name\"/\u003e \u003ccollection property=\"studentList\" ofType=\"Student\"\u003e \u003cid property=\"sid\" column=\"sid\"/\u003e \u003cresult column=\"name\" property=\"name\"/\u003e \u003cresult column=\"sex\" property=\"sex\"/\u003e \u003c/collection\u003e \u003c/resultMap\u003e åŒç†ï¼Œ@Resultä¹Ÿæä¾›äº†@Oneå­æ³¨è§£æ¥å®ç°ä¸€å¯¹ä¸€çš„å…³ç³»è¡¨ç¤ºï¼Œç±»ä¼¼äºä¹‹å‰çš„assocationæ ‡ç­¾ï¼š @Results({ @Result(id = true, column = \"sid\", property = \"sid\"), @Result(column = \"sex\", property = \"name\"), @Result(column = \"name\", property = \"sex\"), @Result(column = \"sid\", property = \"teacher\", one = @One(select = \"getTeacherBySid\") ) }) @Select(\"select * from student\") List\u003cStudent\u003e getAllStudent(); å¦‚æœç°åœ¨æˆ‘å¸Œæœ›ç›´æ¥ä½¿ç”¨æ³¨è§£ç¼–å†™SQLè¯­å¥ä½†æ˜¯æˆ‘å¸Œæœ›æ˜ å°„è§„åˆ™ä¾ç„¶ä½¿ç”¨XMLæ¥å®ç°ï¼Œè¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ @ResultMap(\"test\") @Select(\"select * from student\") List\u003cStudent\u003e getAllStudent(); æä¾›äº†@ResultMapæ³¨è§£ï¼Œç›´æ¥æŒ‡å®šIDå³å¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨XMLä¸­ç¼–å†™çš„æ˜ å°„è§„åˆ™äº†ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºäº†ã€‚ é‚£ä¹ˆå¦‚æœå‡ºç°ä¹‹å‰çš„ä¸¤ä¸ªæ„é€ æ–¹æ³•çš„æƒ…å†µï¼Œä¸”æ²¡æœ‰ä»»ä½•ä¸€ä¸ªæ„é€ æ–¹æ³•åŒ¹é…çš„è¯ï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ @Data @Accessors(chain = true) public class Student { public Student(int sid){ System.out.println(\"æˆ‘æ˜¯ä¸€å·æ„é€ æ–¹æ³•\"+sid); } public Student(int sid, String name){ System.out.println(\"æˆ‘æ˜¯äºŒå·æ„é€ æ–¹æ³•\"+sid+name); } private int sid; private String name; private String sex; } æˆ‘ä»¬å¯ä»¥é€šè¿‡@ConstructorArgsæ³¨è§£æ¥æŒ‡å®šæ„é€ æ–¹æ³•ï¼š @ConstructorArgs({ @Arg(column = \"sid\", javaType = int.class), @Arg(column = \"name\", javaType = String.class) }) @Select(\"select * from student where sid = #{sid} and sex = #{sex}\") Student getStudentBySidAndSex(@Param(\"sid\") int sid, @Param(\"sex\") String sex); å¾—åˆ°çš„ç»“æœå’Œä½¿ç”¨constructoræ ‡ç­¾æ•ˆæœä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å¤šåšè®²è§£äº†ã€‚ æˆ‘ä»¬å‘ç°ï¼Œå½“å‚æ•°åˆ—è¡¨ä¸­å‡ºç°ä¸¤ä¸ªä»¥ä¸Šçš„å‚æ•°æ—¶ï¼Œä¼šå‡ºç°é”™è¯¯ï¼š @Select(\"select * from student where sid = #{sid} and sex = #{sex}\") Student getStudentBySidAndSex(int sid, String sex); Exception in thread \"main\" org.apache.ibatis.exceptions.PersistenceException: ### Error querying database. Cause: org.apache.ibatis.binding.BindingException: Parameter 'sid' not found. Available parameters are [arg1, arg0, param1, param2] ### Cause: org.apache.ibatis.binding.BindingException: Parameter 'sid' not found. Available parameters are [arg1, arg0, param1, param2] at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30) at org.apache.ibatis.session.defaults.","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:9","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"æ¢ç©¶Mybatisçš„åŠ¨æ€ä»£ç†æœºåˆ¶ åœ¨æ¢ç©¶åŠ¨æ€ä»£ç†æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆèŠèŠä»€ä¹ˆæ˜¯ä»£ç†ï¼šå…¶å®é¡¾åæ€ä¹‰ï¼Œå°±å¥½æ¯”æˆ‘å¼€äº†ä¸ªå¤§æ£šï¼Œé‡Œé¢æ ½ç§çš„è¥¿ç“œï¼Œé‚£ä¹ˆè¥¿ç“œæˆç†Ÿäº†æ˜¯ä¸æ˜¯å¾—å»å–æ‰èµšé’±ï¼Œè€Œæˆ‘ä»¬çš„è¥¿ç“œéå¸¸å¤šï¼Œä¸€ä¸ªäººè‚¯å®šå–ä¸è¿‡æ¥ï¼Œè‚¯å®šå°±è¦å»å¤šæ‰¾å‡ ä¸ªå¼€æ°´æœæ‘Šçš„å¸®æˆ‘ä»¬å–ï¼Œè¿™å°±æ˜¯ä¸€ç§ä»£ç†ã€‚å®é™…ä¸Šæ˜¯ç”±æ°´æœæ‘Šè€æ¿åœ¨å¸®æˆ‘ä»¬å–ç“œï¼Œæˆ‘ä»¬åªå‘Šè¯‰è€æ¿å–å¤šå°‘é’±ï¼Œè€Œè‡³äºæ€ä¹ˆå–çš„æ˜¯ç”±æ°´æœæ‘Šè€æ¿å†³å®šçš„ã€‚ é‚£ä¹ˆç°åœ¨æˆ‘ä»¬æ¥å°è¯•å®ç°ä¸€ä¸‹è¿™æ ·çš„ç±»ç»“æ„ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ¥å£ç”¨äºè§„èŒƒè¡Œä¸ºï¼š public interface Shopper { //å–ç“œè¡Œä¸º void saleWatermelon(String customer); } ç„¶åéœ€è¦å®ç°ä¸€ä¸‹å–ç“œè¡Œä¸ºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦å‘Šè¯‰è€æ¿å–å¤šå°‘é’±ï¼Œè¿™é‡Œå°±ç›´æ¥å†™æˆæˆåŠŸå‡ºå”®ï¼š public class ShopperImpl implements Shopper{ //å–ç“œè¡Œä¸ºçš„å®ç° @Override public void saleWatermelon(String customer) { System.out.println(\"æˆåŠŸå‡ºå”®è¥¿ç“œç»™ ===\u003e \"+customer); } } æœ€åè€æ¿ä»£ç†åè‚¯å®šè¦ç”¨è‡ªå·±çš„æ–¹å¼å»å‡ºå”®è¿™äº›è¥¿ç“œï¼Œæˆäº¤ä¹‹åå†æŒ‰ç…§æˆ‘ä»¬å‘Šè¯‰è€æ¿çš„ä»·æ ¼è¿›è¡Œå‡ºå”®ï¼š public class ShopperProxy implements Shopper{ private final Shopper impl; public ShopperProxy(Shopper impl){ this.impl = impl; } //ä»£ç†å–ç“œè¡Œä¸º @Override public void saleWatermelon(String customer) { //é¦–å…ˆè¿›è¡Œ ä»£ç†å•†è®¨ä»·è¿˜ä»·è¡Œä¸º System.out.println(customer + \"ï¼šå“¥ä»¬ï¼Œè¿™ç“œå¤šå°‘é’±ä¸€æ–¤å•Šï¼Ÿ\"); System.out.println(\"è€æ¿ï¼šä¸¤å—é’±ä¸€æ–¤ã€‚\"); System.out.println(customer + \"ï¼šä½ è¿™ç“œçš®å­æ˜¯é‡‘å­åšçš„ï¼Œè¿˜æ˜¯ç“œç²’å­æ˜¯é‡‘å­åšçš„ï¼Ÿ\"); System.out.println(\"è€æ¿ï¼šä½ ç…ç…ç°åœ¨å“ªæœ‰ç“œå•Šï¼Œè¿™éƒ½æ˜¯å¤§æ£šçš„ç“œï¼Œä½ å«Œè´µæˆ‘è¿˜å«Œè´µå‘¢ã€‚\"); System.out.println(customer + \"ï¼šç»™æˆ‘æŒ‘ä¸€ä¸ªã€‚\"); impl.saleWatermelon(customer); //è®¨ä»·è¿˜ä»·æˆåŠŸï¼Œè¿›è¡Œæˆ‘ä»¬å‘Šè¯‰ä»£ç†å•†çš„å–ç“œè¡Œä¸º } } ç°åœ¨æˆ‘ä»¬æ¥è¯•è¯•çœ‹ï¼š public class Main { public static void main(String[] args) { Shopper shopper = new ShopperProxy(new ShopperImpl()); shopper.saleWatermelon(\"å°å¼º\"); } } è¿™æ ·çš„æ“ä½œç§°ä¸ºé™æ€ä»£ç†ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦æå‰çŸ¥é“æ¥å£çš„å®šä¹‰å¹¶è¿›è¡Œå®ç°æ‰å¯ä»¥å®Œæˆä»£ç†ï¼Œè€ŒMybatisè¿™æ ·çš„æ˜¯æ— æ³•é¢„çŸ¥ä»£ç†æ¥å£çš„ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°åŠ¨æ€ä»£ç†ã€‚ JDKæä¾›çš„åå°„æ¡†æ¶å°±ä¸ºæˆ‘ä»¬å¾ˆå¥½åœ°è§£å†³äº†åŠ¨æ€ä»£ç†çš„é—®é¢˜ï¼Œåœ¨è¿™é‡Œç›¸å½“äºå¯¹JavaSEé˜¶æ®µåå°„çš„å†…å®¹è¿›è¡Œä¸€ä¸ªè¡¥å……ã€‚ public class ShopperProxy implements InvocationHandler { Object target; public ShopperProxy(Object target){ this.target = target; } @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { String customer = (String) args[0]; System.out.println(customer + \"ï¼šå“¥ä»¬ï¼Œè¿™ç“œå¤šå°‘é’±ä¸€æ–¤å•Šï¼Ÿ\"); System.out.println(\"è€æ¿ï¼šä¸¤å—é’±ä¸€æ–¤ã€‚\"); System.out.println(customer + \"ï¼šä½ è¿™ç“œçš®å­æ˜¯é‡‘å­åšçš„ï¼Œè¿˜æ˜¯ç“œç²’å­æ˜¯é‡‘å­åšçš„ï¼Ÿ\"); System.out.println(\"è€æ¿ï¼šä½ ç…ç…ç°åœ¨å“ªæœ‰ç“œå•Šï¼Œè¿™éƒ½æ˜¯å¤§æ£šçš„ç“œï¼Œä½ å«Œè´µæˆ‘è¿˜å«Œè´µå‘¢ã€‚\"); System.out.println(customer + \"ï¼šè¡Œï¼Œç»™æˆ‘æŒ‘ä¸€ä¸ªã€‚\"); return method.invoke(target, args); } } é€šè¿‡å®ç°InvocationHandleræ¥æˆä¸ºä¸€ä¸ªåŠ¨æ€ä»£ç†ï¼Œæˆ‘ä»¬å‘ç°å®ƒæä¾›äº†ä¸€ä¸ªinvokeæ–¹æ³•ï¼Œç”¨äºè°ƒç”¨è¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•å¹¶å®Œæˆæˆ‘ä»¬çš„ä»£ç†å·¥ä½œã€‚ç°åœ¨å°±å¯ä»¥é€šè¿‡ Proxy.newProxyInstanceæ¥ç”Ÿæˆä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ï¼š public static void main(String[] args) { Shopper impl = new ShopperImpl(); Shopper shopper = (Shopper) Proxy.newProxyInstance(impl.getClass().getClassLoader(), impl.getClass().getInterfaces(), new ShopperProxy(impl)); shopper.saleWatermelon(\"å°å¼º\"); System.out.println(shopper.getClass()); } é€šè¿‡æ‰“å°ç±»å‹æˆ‘ä»¬å‘ç°ï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„é‚£ç§å¥‡æ€ªçš„ç±»ï¼šclass com.sun.proxy.$Proxy0ï¼Œå› æ­¤Mybatiså…¶å®ä¹Ÿæ˜¯è¿™æ ·çš„æ¥å®ç°çš„ï¼ˆè‚¯å®šæœ‰äººé—®äº†ï¼šMybatisæ˜¯ç›´æ¥ä»£ç†æ¥å£å•Šï¼Œä½ è¿™ä¸ªä¸è¿˜æ˜¯è¦æŠŠæ¥å£å®ç°äº†å—ï¼Ÿï¼‰é‚£æˆ‘ä»¬æ¥æ”¹æ”¹ï¼Œç°åœ¨æˆ‘ä»¬ä¸ä»£ç†ä»»ä½•ç±»äº†ï¼Œç›´æ¥åšæ¥å£å®ç°ï¼š public class ShopperProxy implements InvocationHandler { @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { String customer = (String) args[0]; System.out.println(customer + \"ï¼šå“¥ä»¬ï¼Œè¿™ç“œå¤šå°‘é’±ä¸€æ–¤å•Šï¼Ÿ\"); System.out.println(\"è€æ¿ï¼šä¸¤å—é’±ä¸€æ–¤ã€‚\"); System.out.println(customer + \"ï¼šä½ è¿™ç“œçš®å­æ˜¯é‡‘å­åšçš„ï¼Œè¿˜æ˜¯ç“œç²’å­æ˜¯é‡‘å­åšçš„ï¼Ÿ\"); System.out.println(\"è€æ¿ï¼šä½ ç…ç…ç°åœ¨å“ªæœ‰ç“œå•Šï¼Œè¿™éƒ½æ˜¯å¤§æ£šçš„ç“œï¼Œä½ å«Œè´µæˆ‘è¿˜å«Œè´µå‘¢ã€‚\"); System.out.println(customer + \"ï¼šè¡Œï¼Œç»™æˆ‘æŒ‘ä¸€ä¸ªã€‚\"); return null; } } public static void main(String[] args) { Shopper shopper = (Shopper) Proxy.newProxyInstance(Shopper.class.getClassLoader(), new Class[]{ Shopper.class }, //å› ä¸ºæœ¬èº«å°±æ˜¯æ¥å£ï¼Œæ‰€ä»¥ç›´æ¥ç”¨å°±è¡Œ new ShopperProxy()); shopper.saleWatermelon(\"å°å¼º\"); System.out.println(shopper.getClass()); } æˆ‘ä»¬å¯ä»¥å»çœ‹çœ‹Mybatisçš„æºç ã€‚ Mybatisçš„å­¦ä¹ å·®ä¸å¤šå°±åˆ°è¿™é‡Œä¸ºæ­¢äº†ï¼Œä¸è¿‡ï¼ŒåŒæ ·ç±»å‹çš„æ¡†æ¶è¿˜æœ‰å¾ˆå¤šï¼ŒMybatiså±äºåŠè‡ªåŠ¨æ¡†æ¶ï¼ŒSQLè¯­å¥ä¾ç„¶éœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–å†™ï¼Œè™½ç„¶å­˜åœ¨ä¸€å®šçš„éº»çƒ¦ï¼Œä½†æ˜¯ä¼šæ›´åŠ çµæ´»ï¼Œè€Œåé¢æˆ‘ä»¬è¿˜ä¼šå­¦ä¹ JPAï¼Œå®ƒæ˜¯å…¨è‡ªåŠ¨çš„æ¡†æ¶ï¼Œä½ å‡ ä¹è§ä¸åˆ°SQLçš„å½±å­ï¼ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:3:10","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨JUnitè¿›è¡Œå•å…ƒæµ‹è¯• é¦–å…ˆä¸€é—®ï¼šæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å•å…ƒæµ‹è¯•ï¼Ÿ éšç€æˆ‘ä»¬çš„é¡¹ç›®é€æ¸å˜å¤§ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä»¬éƒ½æ˜¯è¾¹åœ¨å†™è¾¹åœ¨æµ‹è¯•ï¼Œè€Œæˆ‘ä»¬å½“æ—¶ä½¿ç”¨çš„æµ‹è¯•æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥åœ¨ä¸»æ–¹æ³•ä¸­è¿è¡Œæµ‹è¯•ï¼Œä½†æ˜¯ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å¯èƒ½ä¼šå¾ˆåºå¤§ï¼Œä¸å¯èƒ½æ¯æ¬¡éƒ½å»å®Œæ•´åœ°å¯åŠ¨ä¸€ä¸ªé¡¹ç›®æ¥æµ‹è¯•æŸä¸€ä¸ªåŠŸèƒ½ï¼Œè¿™æ ·æ˜¾ç„¶ä¼šé™ä½æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å•å…ƒæµ‹è¯•æ¥å¸®åŠ©æˆ‘ä»¬é’ˆå¯¹äºæŸä¸ªåŠŸèƒ½æˆ–æ˜¯æŸä¸ªæ¨¡å—å•ç‹¬è¿è¡Œä»£ç è¿›è¡Œæµ‹è¯•ï¼Œè€Œä¸æ˜¯å¯åŠ¨æ•´ä¸ªé¡¹ç›®ã€‚ åŒæ—¶ï¼Œåœ¨æˆ‘ä»¬é¡¹ç›®çš„ç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šæ¶‰åŠåˆ°ä¸€äº›åŸæœ‰ä»£ç çš„ä¿®æ”¹ï¼Œå¾ˆæœ‰å¯èƒ½å‡ºç°æ”¹äº†ä»£ç å¯¼è‡´ä¹‹å‰çš„åŠŸèƒ½å‡ºç°é—®é¢˜ï¼ˆç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼‰ï¼Œè€Œæˆ‘ä»¬åˆä¸ä¸€å®šèƒ½ç«‹å³å¯Ÿè§‰åˆ°ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æå‰ä¿å­˜ä¸€äº›æµ‹è¯•ç”¨ä¾‹ï¼Œæ¯æ¬¡å®Œæˆä»£ç åéƒ½å¯ä»¥è·‘ä¸€éæµ‹è¯•ç”¨ä¾‹ï¼Œæ¥ç¡®ä¿ä¹‹å‰çš„åŠŸèƒ½æ²¡æœ‰å› ä¸ºåç»­çš„ä¿®æ”¹è€Œå‡ºç°é—®é¢˜ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨å•å…ƒæµ‹è¯•æ¥è¯„ä¼°æŸä¸ªæ¨¡å—æˆ–æ˜¯åŠŸèƒ½çš„è€—æ—¶å’Œæ€§èƒ½ï¼Œå¿«é€Ÿæ’æŸ¥å¯¼è‡´ç¨‹åºè¿è¡Œç¼“æ…¢çš„é—®é¢˜ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡å•å…ƒæµ‹è¯•æ¥å®Œæˆï¼Œå¯è§å•å…ƒæµ‹è¯•å¯¹äºå¼€å‘çš„é‡è¦æ€§ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:4:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"å°è¯•JUnit é¦–å…ˆéœ€è¦å¯¼å…¥JUnitä¾èµ–ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨Junit4è¿›è¡Œä»‹ç»ï¼Œæœ€æ–°çš„Junit5æ”¾åˆ°Mavenæ¿å—ä¸€èµ·è®²è§£ï¼ŒJaråŒ…å·²ç»æ”¾åœ¨è§†é¢‘ä¸‹æ–¹ç®€ä»‹ä¸­ï¼Œç›´æ¥å»ä¸‹è½½å³å¯ã€‚åŒæ—¶IDEAéœ€è¦å®‰è£…JUnitæ’ä»¶ï¼ˆé»˜è®¤æ˜¯å·²ç»æ†ç»‘å®‰è£…çš„ï¼Œå› æ­¤æ— éœ€å¤šä½™é…ç½®ï¼‰ ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œæ¥ç¼–å†™æˆ‘ä»¬çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼š public class TestMain { @Test public void method(){ System.out.println(\"æˆ‘æ˜¯æµ‹è¯•ç”¨ä¾‹1\"); } @Test public void method2(){ System.out.println(\"æˆ‘æ˜¯æµ‹è¯•ç”¨ä¾‹2\"); } } æˆ‘ä»¬å¯ä»¥ç‚¹å‡»ç±»å‰é¢çš„æµ‹è¯•æŒ‰é’®ï¼Œæˆ–æ˜¯å•ä¸ªæ–¹æ³•å‰çš„æµ‹è¯•æŒ‰é’®ï¼Œå¦‚æœç‚¹å‡»ç±»å‰é¢çš„æµ‹è¯•æŒ‰é’®ï¼Œä¼šæ‰§è¡Œæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹ã€‚ è¿è¡Œæµ‹è¯•åï¼Œæˆ‘ä»¬å‘ç°æ§åˆ¶å°å¾—åˆ°äº†ä¸€ä¸ªæµ‹è¯•ç»“æœï¼Œæ˜¾ç¤ºä¸ºç»¿è‰²è¡¨ç¤ºæµ‹è¯•é€šè¿‡ã€‚ åªéœ€è¦é€šè¿‡æ‰“ä¸Š@Testæ³¨è§£ï¼Œå³å¯å°†ä¸€ä¸ªæ–¹æ³•æ ‡è®°ä¸ºæµ‹è¯•æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿è¡Œæ­¤æµ‹è¯•æ¡ˆä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬ç¼–å†™çš„æµ‹è¯•æ–¹æ³•æœ‰ä»¥ä¸‹è¦æ±‚ï¼š æ–¹æ³•å¿…é¡»æ˜¯publicçš„ ä¸èƒ½æ˜¯é™æ€æ–¹æ³• è¿”å›å€¼å¿…é¡»æ˜¯void å¿…é¡»æ˜¯æ²¡æœ‰ä»»ä½•å‚æ•°çš„æ–¹æ³• å¯¹äºä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬è‚¯å®šå¸Œæœ›æµ‹è¯•çš„ç»“æœæ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ä¸€ä¸ªå€¼ï¼Œå› æ­¤ï¼Œå¦‚æœæµ‹è¯•çš„ç»“æœå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ç»“æœï¼Œé‚£ä¹ˆè¿™ä¸ªæµ‹è¯•å°±åº”è¯¥æ²¡æœ‰æˆåŠŸé€šè¿‡ï¼ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ–­è¨€å·¥å…·ç±»æ¥è¿›è¡Œåˆ¤å®šï¼š public class TestMain { @Test public void method(){ System.out.println(\"æˆ‘æ˜¯æµ‹è¯•æ¡ˆä¾‹ï¼\"); Assert.assertEquals(1, 2); //å‚æ•°1æ˜¯æœŸç›¼å€¼ï¼Œå‚æ•°2æ˜¯å®é™…æµ‹è¯•ç»“æœå€¼ } } é€šè¿‡è¿è¡Œä»£ç åï¼Œæˆ‘ä»¬å‘ç°æµ‹è¯•è¿‡ç¨‹ä¸­æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸”IDEAç»™æˆ‘ä»¬æ˜¾ç¤ºäº†æœŸç›¼ç»“æœå’Œæµ‹è¯•ç»“æœï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æŸ¥çœ‹å†’æ³¡æ’åºçš„ç¼–å†™æ˜¯å¦æ­£ç¡®ï¼š @Test public void method(){ int[] arr = {0, 4, 5, 2, 6, 9, 3, 1, 7, 8}; //é”™è¯¯çš„å†’æ³¡æ’åº for (int i = 0; i \u003c arr.length - 1; i++) { for (int j = 0; j \u003c arr.length - 1 - i; j++) { if(arr[j] \u003e arr[j + 1]){ int tmp = arr[j]; arr[j] = arr[j+1]; // arr[j+1] = tmp; } } } Assert.assertArrayEquals(new int[]{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}, arr); } é€šè¿‡æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°å¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œå› æ­¤ç°åœ¨æˆ‘ä»¬éœ€è¦å»ä¿®æ”¹ä¸ºæ­£ç¡®çš„å†’æ³¡æ’åºï¼Œä¿®æ”¹åï¼Œæµ‹è¯•å°±èƒ½æ­£ç¡®é€šè¿‡äº†ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å†é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥æ›´åŠ æ·±å…¥åœ°äº†è§£æµ‹è¯•ï¼Œç°åœ¨æˆ‘ä»¬æƒ³æµ‹è¯•ä»æ•°æ®åº“ä¸­å–æ•°æ®æ˜¯å¦ä¸ºæˆ‘ä»¬é¢„æœŸçš„æ•°æ®ï¼š @Test public void method(){ try (SqlSession sqlSession = MybatisUtil.getSession(true)){ TestMapper mapper = sqlSession.getMapper(TestMapper.class); Student student = mapper.getStudentBySidAndSex(1, \"ç”·\"); Assert.assertEquals(new Student().setName(\"å°æ˜\").setSex(\"ç”·\").setSid(1), student); } } é‚£ä¹ˆå¦‚æœæˆ‘ä»¬åœ¨è¿›è¡Œæ‰€æœ‰çš„æµ‹è¯•ä¹‹å‰éœ€è¦åšä¸€äº›å‰ç½®æ“ä½œè¯¥æ€ä¹ˆåŠå‘¢ï¼Œä¸€ç§åŠæ³•æ˜¯åœ¨æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹å‰é¢éƒ½åŠ ä¸Šå‰ç½®æ“ä½œï¼Œä½†æ˜¯è¿™æ ·æ˜¾ç„¶æ˜¯å¾ˆå†—ä½™çš„ï¼Œå› ä¸ºä¸€æ—¦å‘ç”Ÿä¿®æ”¹å°±éœ€è¦æŒ¨ä¸ªè¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´åŠ æ™ºèƒ½çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡@Beforeæ³¨è§£æ¥æ·»åŠ æµ‹è¯•ç”¨ä¾‹å¼€å§‹ä¹‹å‰çš„å‰ç½®æ“ä½œï¼š public class TestMain { private SqlSessionFactory sqlSessionFactory; @Before public void before(){ System.out.println(\"æµ‹è¯•å‰ç½®æ­£åœ¨åˆå§‹åŒ–...\"); try { sqlSessionFactory = new SqlSessionFactoryBuilder() .build(new FileInputStream(\"mybatis-config.xml\")); } catch (FileNotFoundException e) { e.printStackTrace(); } System.out.println(\"æµ‹è¯•åˆå§‹åŒ–å®Œæˆï¼Œæ­£åœ¨å¼€å§‹æµ‹è¯•æ¡ˆä¾‹...\"); } @Test public void method1(){ try (SqlSession sqlSession = sqlSessionFactory.openSession(true)){ TestMapper mapper = sqlSession.getMapper(TestMapper.class); Student student = mapper.getStudentBySidAndSex(1, \"ç”·\"); Assert.assertEquals(new Student().setName(\"å°æ˜\").setSex(\"ç”·\").setSid(1), student); System.out.println(\"æµ‹è¯•ç”¨ä¾‹1é€šè¿‡ï¼\"); } } @Test public void method2(){ try (SqlSession sqlSession = sqlSessionFactory.openSession(true)){ TestMapper mapper = sqlSession.getMapper(TestMapper.class); Student student = mapper.getStudentBySidAndSex(2, \"å¥³\"); Assert.assertEquals(new Student().setName(\"å°çº¢\").setSex(\"å¥³\").setSid(2), student); System.out.println(\"æµ‹è¯•ç”¨ä¾‹2é€šè¿‡ï¼\"); } } } åŒç†ï¼Œåœ¨æ‰€æœ‰çš„æµ‹è¯•å®Œæˆä¹‹åï¼Œæˆ‘ä»¬è¿˜æƒ³æ·»åŠ ä¸€ä¸ªæ”¶å°¾çš„åŠ¨ä½œï¼Œé‚£ä¹ˆåªéœ€è¦ä½¿ç”¨@Afteræ³¨è§£å³å¯æ·»åŠ ç»“æŸåŠ¨ä½œï¼š @After public void after(){ System.out.println(\"æµ‹è¯•ç»“æŸï¼Œæ”¶å°¾å·¥ä½œæ­£åœ¨è¿›è¡Œ...\"); } æœ‰å…³JUnitçš„ä½¿ç”¨æˆ‘ä»¬å°±æš‚æ—¶åªä»‹ç»è¿™ä¹ˆå¤šã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:4:1","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"JULæ—¥å¿—ç³»ç»Ÿ é¦–å…ˆä¸€é—®ï¼šæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—ç³»ç»Ÿï¼Ÿ æˆ‘ä»¬ä¹‹å‰ä¸€ç›´éƒ½åœ¨ä½¿ç”¨System.out.printlnæ¥æ‰“å°ä¿¡æ¯ï¼Œä½†æ˜¯ï¼Œå¦‚æœé¡¹ç›®ä¸­å­˜åœ¨å¤§é‡çš„æ§åˆ¶å°è¾“å‡ºè¯­å¥ï¼Œä¼šæ˜¾å¾—å¾ˆå‡Œä¹±ï¼Œè€Œä¸”æ—¥å¿—çš„ç²’åº¦æ˜¯ä¸å¤Ÿç»†çš„ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨å¸Œæœ›ï¼Œé¡¹ç›®åªåœ¨debugçš„æƒ…å†µä¸‹æ‰“å°æŸäº›æ—¥å¿—ï¼Œè€Œåœ¨å®é™…è¿è¡Œæ—¶ä¸æ‰“å°æ—¥å¿—ï¼Œé‡‡ç”¨ç›´æ¥è¾“å‡ºçš„æ–¹å¼å°±å¾ˆéš¾å®ç°äº†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ—¥å¿—æ¡†æ¶æ¥è§„èŒƒåŒ–æ—¥å¿—è¾“å‡ºã€‚ è€ŒJDKä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè‡ªå¸¦çš„æ—¥å¿—æ¡†æ¶ï¼Œä½äºjava.util.loggingåŒ…ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤æ¡†æ¶æ¥å®ç°æ—¥å¿—çš„è§„èŒƒåŒ–æ‰“å°ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼š public class Main { public static void main(String[] args) { // é¦–å…ˆè·å–æ—¥å¿—æ‰“å°å™¨ Logger logger = Logger.getLogger(Main.class.getName()); // è°ƒç”¨infoæ¥è¾“å‡ºä¸€ä¸ªæ™®é€šçš„ä¿¡æ¯ï¼Œç›´æ¥å¡«å†™å­—ç¬¦ä¸²å³å¯ logger.info(\"æˆ‘æ˜¯æ™®é€šçš„æ—¥å¿—\"); } } æˆ‘ä»¬å¯ä»¥åœ¨ä¸»ç±»ä¸­ä½¿ç”¨æ—¥å¿—æ‰“å°ï¼Œå¾—åˆ°æ—¥å¿—çš„æ‰“å°ç»“æœï¼š åä¸€æœˆ 15, 2021 12:55:37 ä¸‹åˆ com.test.Main main ä¿¡æ¯: æˆ‘æ˜¯æ™®é€šçš„æ—¥å¿— æˆ‘ä»¬å‘ç°ï¼Œé€šè¿‡æ—¥å¿—è¾“å‡ºçš„ç»“æœä¼šæ›´åŠ è§„èŒƒã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:5:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"JULæ—¥å¿—è®²è§£ æ—¥å¿—åˆ†ä¸º7ä¸ªçº§åˆ«ï¼Œè¯¦ç»†ä¿¡æ¯æˆ‘ä»¬å¯ä»¥åœ¨Levelç±»ä¸­æŸ¥çœ‹ï¼š SEVEREï¼ˆæœ€é«˜å€¼ï¼‰- ä¸€èˆ¬ç”¨äºä»£è¡¨ä¸¥é‡é”™è¯¯ WARNING - ä¸€èˆ¬ç”¨äºè¡¨ç¤ºæŸäº›è­¦å‘Šï¼Œä½†æ˜¯ä¸è¶³ä»¥åˆ¤æ–­ä¸ºé”™è¯¯ INFO ï¼ˆé»˜è®¤çº§åˆ«ï¼‰ - å¸¸è§„æ¶ˆæ¯ CONFIG FINE FINER FINESTï¼ˆæœ€ä½å€¼ï¼‰ æˆ‘ä»¬ä¹‹å‰é€šè¿‡infoæ–¹æ³•ç›´æ¥è¾“å‡ºçš„ç»“æœå°±æ˜¯ä½¿ç”¨çš„é»˜è®¤çº§åˆ«çš„æ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡logæ–¹æ³•æ¥è®¾å®šè¯¥æ¡æ—¥å¿—çš„è¾“å‡ºçº§åˆ«ï¼š public static void main(String[] args) { Logger logger = Logger.getLogger(Main.class.getName()); logger.log(Level.SEVERE, \"ä¸¥é‡çš„é”™è¯¯\", new IOException(\"æˆ‘å°±æ˜¯é”™è¯¯\")); logger.log(Level.WARNING, \"è­¦å‘Šçš„å†…å®¹\"); logger.log(Level.INFO, \"æ™®é€šçš„ä¿¡æ¯\"); logger.log(Level.CONFIG, \"çº§åˆ«ä½äºæ™®é€šä¿¡æ¯\"); } æˆ‘ä»¬å‘ç°ï¼Œçº§åˆ«ä½äºé»˜è®¤çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ï¼Œæ— æ³•è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®æ¥ä¿®æ”¹æ—¥å¿—çš„æ‰“å°çº§åˆ«ï¼š public static void main(String[] args) { Logger logger = Logger.getLogger(Main.class.getName()); //ä¿®æ”¹æ—¥å¿—çº§åˆ« logger.setLevel(Level.CONFIG); //ä¸ä½¿ç”¨çˆ¶æ—¥å¿—å¤„ç†å™¨ logger.setUseParentHandlers(false); //ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—å¤„ç†å™¨ ConsoleHandler handler = new ConsoleHandler(); handler.setLevel(Level.CONFIG); logger.addHandler(handler); logger.log(Level.SEVERE, \"ä¸¥é‡çš„é”™è¯¯\", new IOException(\"æˆ‘å°±æ˜¯é”™è¯¯\")); logger.log(Level.WARNING, \"è­¦å‘Šçš„å†…å®¹\"); logger.log(Level.INFO, \"æ™®é€šçš„ä¿¡æ¯\"); logger.log(Level.CONFIG, \"çº§åˆ«ä½äºæ™®é€šä¿¡æ¯\"); } æ¯ä¸ªLoggeréƒ½æœ‰ä¸€ä¸ªçˆ¶æ—¥å¿—æ‰“å°å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡getParent()æ¥è·å–ï¼š public static void main(String[] args) throws IOException { Logger logger = Logger.getLogger(Main.class.getName()); System.out.println(logger.getParent().getClass()); } æˆ‘ä»¬å‘ç°ï¼Œå¾—åˆ°çš„æ˜¯java.util.logging.LogManager$RootLoggerè¿™ä¸ªç±»ï¼Œå®ƒé»˜è®¤ä½¿ç”¨çš„æ˜¯ConsoleHandlerï¼Œä¸”æ—¥å¿—çº§åˆ«ä¸ºINFOï¼Œç”±äºæ¯ä¸€ä¸ªæ—¥å¿—æ‰“å°å™¨éƒ½ä¼šç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„å¤„ç†å™¨ï¼Œå› æ­¤æˆ‘ä»¬ä¹‹å‰éœ€è¦å…³é—­çˆ¶ç±»ç„¶åä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„å¤„ç†å™¨ã€‚ æˆ‘ä»¬é€šè¿‡ä½¿ç”¨è‡ªå·±æ—¥å¿—å¤„ç†å™¨æ¥è‡ªå®šä¹‰çº§åˆ«çš„ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°ï¼Œå½“ç„¶ï¼Œæ—¥å¿—å¤„ç†å™¨ä¸ä»…ä»…åªæœ‰æ§åˆ¶å°æ‰“å°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶å¤„ç†å™¨æ¥å¤„ç†æ—¥å¿—ä¿¡æ¯ï¼Œæˆ‘ä»¬ç»§ç»­æ·»åŠ ä¸€ä¸ªå¤„ç†å™¨ï¼š //æ·»åŠ è¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ FileHandler fileHandler = new FileHandler(\"test.log\"); fileHandler.setLevel(Level.WARNING); logger.addHandler(fileHandler); æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰ä¸¤ä¸ªæ—¥å¿—å¤„ç†å™¨äº†ï¼Œå› æ­¤æ§åˆ¶å°å’Œæ–‡ä»¶çš„éƒ½ä¼šç”Ÿæ•ˆã€‚å¦‚æœæ—¥å¿—çš„æ‰“å°æ ¼å¼æˆ‘ä»¬ä¸å–œæ¬¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰æ‰“å°æ ¼å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬æ§åˆ¶å°å¤„ç†å™¨å°±é»˜è®¤ä½¿ç”¨çš„æ˜¯SimpleFormatterï¼Œè€Œæ–‡ä»¶å¤„ç†å™¨åˆ™æ˜¯ä½¿ç”¨çš„XMLFormatterï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ï¼š //ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—å¤„ç†å™¨(æ§åˆ¶å°) ConsoleHandler handler = new ConsoleHandler(); handler.setLevel(Level.CONFIG); handler.setFormatter(new XMLFormatter()); logger.addHandler(handler); æˆ‘ä»¬å¯ä»¥ç›´æ¥é…ç½®ä¸ºæƒ³è¦çš„æ‰“å°æ ¼å¼ï¼Œå¦‚æœè¿™äº›æ ¼å¼è¿˜ä¸èƒ½æ»¡è¶³ä½ ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œå®ç°ï¼š public static void main(String[] args) throws IOException { Logger logger = Logger.getLogger(Main.class.getName()); logger.setUseParentHandlers(false); //ä¸ºäº†è®©é¢œè‰²å˜å›æ™®é€šçš„é¢œè‰²ï¼Œé€šè¿‡ä»£ç å—åœ¨åˆå§‹åŒ–æ—¶å°†è¾“å‡ºæµè®¾å®šä¸ºSystem.out ConsoleHandler handler = new ConsoleHandler(){{ setOutputStream(System.out); }}; //åˆ›å»ºåŒ¿åå†…éƒ¨ç±»å®ç°è‡ªå®šä¹‰çš„æ ¼å¼ handler.setFormatter(new Formatter() { @Override public String format(LogRecord record) { SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss.SSS\"); String time = format.format(new Date(record.getMillis())); //æ ¼å¼åŒ–æ—¥å¿—æ—¶é—´ String level = record.getLevel().getName(); // è·å–æ—¥å¿—çº§åˆ«åç§° // String level = record.getLevel().getLocalizedName(); // è·å–æœ¬åœ°åŒ–åç§°ï¼ˆè¯­è¨€è·Ÿéšç³»ç»Ÿï¼‰ String thread = String.format(\"%10s\", Thread.currentThread().getName()); //çº¿ç¨‹åç§°ï¼ˆåšäº†æ ¼å¼åŒ–å¤„ç†ï¼Œç•™å‡º10æ ¼ç©ºé—´ï¼‰ long threadID = record.getThreadID(); //çº¿ç¨‹ID String className = String.format(\"%-20s\", record.getSourceClassName()); //å‘é€æ—¥å¿—çš„ç±»å String msg = record.getMessage(); //æ—¥å¿—æ¶ˆæ¯ //\\033[33mä½œä¸ºé¢œè‰²ä»£ç ï¼Œ30~37éƒ½æœ‰å¯¹åº”çš„é¢œè‰²ï¼Œ38æ˜¯æ²¡æœ‰é¢œè‰²ï¼ŒIDEAèƒ½æ˜¾ç¤ºï¼Œä½†æ˜¯æŸäº›åœ°æ–¹å¯èƒ½ä¸æ”¯æŒ return \"\\033[38m\" + time + \" \\033[33m\" + level + \" \\033[35m\" + threadID + \"\\033[38m --- [\" + thread + \"] \\033[36m\" + className + \"\\033[38m : \" + msg + \"\\n\"; } }); logger.addHandler(handler); logger.info(\"æˆ‘æ˜¯æµ‹è¯•æ¶ˆæ¯1...\"); logger.log(Level.INFO, \"æˆ‘æ˜¯æµ‹è¯•æ¶ˆæ¯2...\"); logger.log(Level.WARNING, \"æˆ‘æ˜¯æµ‹è¯•æ¶ˆæ¯3...\"); } æ—¥å¿—å¯ä»¥è®¾ç½®è¿‡æ»¤å™¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›æŸäº›æ—¥å¿—ä¿¡æ¯è¢«è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®è¿‡æ»¤è§„åˆ™ï¼š public static void main(String[] args) throws IOException { Logger logger = Logger.getLogger(Main.class.getName()); //è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™ logger.setFilter(record -\u003e !record.getMessage().contains(\"æ™®é€š\")); logger.log(Level.SEVERE, \"ä¸¥é‡çš„é”™è¯¯\", new IOException(\"æˆ‘å°±æ˜¯é”™è¯¯\")); logger.log(Level.WARNING, \"è­¦å‘Šçš„å†…å®¹\"); logger.log(Level.INFO, \"æ™®é€šçš„ä¿¡æ¯\"); } å®é™…ä¸Šï¼Œæ•´ä¸ªæ—¥å¿—çš„è¾“å‡ºæµç¨‹å¦‚ä¸‹ï¼š ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:5:1","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Propertiesé…ç½®æ–‡ä»¶ Propertiesæ–‡ä»¶æ˜¯Javaçš„ä¸€ç§é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ äº†XMLï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°XMLé…ç½®æ–‡ä»¶è¯»å–å®åœ¨æ˜¯å¤ªéº»çƒ¦ï¼Œé‚£ä¹ˆèƒ½å¦æœ‰ä¸€ç§ç®€å•ä¸€ç‚¹çš„é…ç½®æ–‡ä»¶å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Propertiesæ–‡ä»¶ï¼š name=Test\rdesc=Description\rè¯¥æ–‡ä»¶é…ç½®å¾ˆç®€å•ï¼Œæ ¼å¼ä¸ºé…ç½®é¡¹=é…ç½®å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡Propertiesç±»æ¥å°†å…¶è¯»å–ä¸ºä¸€ä¸ªç±»ä¼¼äºMapä¸€æ ·çš„å¯¹è±¡ï¼š public static void main(String[] args) throws IOException { Properties properties = new Properties(); properties.load(new FileInputStream(\"test.properties\")); System.out.println(properties); } æˆ‘ä»¬å‘ç°ï¼ŒPropertiesç±»æ˜¯ç»§æ‰¿è‡ªHashtableï¼Œè€ŒHashtableæ˜¯å®ç°çš„Mapæ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒPropertiesæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªMapä¸€æ ·çš„ç»“æ„ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰çš„é…ç½®é¡¹æ˜ å°„ä¸ºä¸€ä¸ªMapï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿåœ°è¯»å–å¯¹åº”é…ç½®çš„å€¼äº†ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å·²ç»å­˜åœ¨çš„Propertieså¯¹è±¡æ”¾å…¥è¾“å‡ºæµè¿›è¡Œä¿å­˜ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸ä¿å­˜æ–‡ä»¶äº†ï¼Œè€Œæ˜¯ç›´æ¥æ‰“å°åˆ°æ§åˆ¶å°ï¼Œæˆ‘ä»¬åªéœ€è¦æä¾›è¾“å‡ºæµå³å¯ï¼š public static void main(String[] args) throws IOException { Properties properties = new Properties(); // properties.setProperty(\"test\", \"lbwnb\"); //å’Œputæ•ˆæœä¸€æ · properties.put(\"test\", \"lbwnb\"); properties.store(System.out, \"????\"); //properties.storeToXML(System.out, \"????\"); ä¿å­˜ä¸ºXMLæ ¼å¼ } æˆ‘ä»¬å¯ä»¥é€šè¿‡System.getProperties()è·å–ç³»ç»Ÿçš„å‚æ•°ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼š public static void main(String[] args) throws IOException { System.getProperties().store(System.out, \"ç³»ç»Ÿä¿¡æ¯ï¼š\"); } ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:5:2","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ç¼–å†™æ—¥å¿—é…ç½®æ–‡ä»¶ æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿›è¡Œé…ç½®æ–‡ä»¶æ¥è§„å®šæ—¥å¿—æ‰“å°å™¨çš„ä¸€äº›é»˜è®¤å€¼ï¼š # RootLogger çš„é»˜è®¤å¤„ç†å™¨ä¸º\rhandlers= java.util.logging.ConsoleHandler\r# RootLogger çš„é»˜è®¤çš„æ—¥å¿—çº§åˆ«\r.level= CONFIG\ræˆ‘ä»¬æ¥å°è¯•ä½¿ç”¨é…ç½®æ–‡ä»¶æ¥è¿›è¡Œé…ç½®ï¼š public static void main(String[] args) throws IOException { //è·å–æ—¥å¿—ç®¡ç†å™¨ LogManager manager = LogManager.getLogManager(); //è¯»å–æˆ‘ä»¬è‡ªå·±çš„é…ç½®æ–‡ä»¶ manager.readConfiguration(new FileInputStream(\"logging.properties\")); //å†è·å–æ—¥å¿—æ‰“å°å™¨ Logger logger = Logger.getLogger(Main.class.getName()); logger.log(Level.CONFIG, \"æˆ‘æ˜¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯\"); //é€šè¿‡è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç°é»˜è®¤çº§åˆ«ä¸å†æ˜¯INFOäº† } æˆ‘ä»¬ä¹Ÿå¯ä»¥å»ä¿®æ”¹ConsoleHandlerçš„é»˜è®¤é…ç½®ï¼š # æŒ‡å®šé»˜è®¤æ—¥å¿—çº§åˆ«\rjava.util.logging.ConsoleHandler.level = ALL\r# æŒ‡å®šé»˜è®¤æ—¥å¿—æ¶ˆæ¯æ ¼å¼\rjava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\r# æŒ‡å®šé»˜è®¤çš„å­—ç¬¦é›†\rjava.util.logging.ConsoleHandler.encoding = UTF-8\rå…¶å®ï¼Œæˆ‘ä»¬é˜…è¯»ConsoleHandlerçš„æºç å°±ä¼šå‘ç°ï¼Œå®ƒå°±æ˜¯é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶æ¥è¿›è¡ŒæŸäº›å‚æ•°è®¾ç½®ï¼š // Private method to configure a ConsoleHandler from LogManager // properties and/or default values as specified in the class // javadoc. private void configure() { LogManager manager = LogManager.getLogManager(); String cname = getClass().getName(); setLevel(manager.getLevelProperty(cname +\".level\", Level.INFO)); setFilter(manager.getFilterProperty(cname +\".filter\", null)); setFormatter(manager.getFormatterProperty(cname +\".formatter\", new SimpleFormatter())); try { setEncoding(manager.getStringProperty(cname +\".encoding\", null)); } catch (Exception ex) { try { setEncoding(null); } catch (Exception ex2) { // doing a setEncoding with null should always work. // assert false; } } } ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:5:3","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨Lombokå¿«é€Ÿå¼€å¯æ—¥å¿— æˆ‘ä»¬å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨éœ€è¦å…¨é¢ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„ç›´æ¥æ‰“å°ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨æ¯ä¸ªç±»éƒ½å»ç¼–å†™è·å–Loggerçš„ä»£ç ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯å¾ˆå†—ä½™çš„ï¼Œèƒ½å¦ç®€åŒ–ä¸€ä¸‹è¿™ä¸ªæµç¨‹å‘¢ï¼Ÿ å‰é¢æˆ‘ä»¬å­¦ä¹ äº†Lombokï¼Œæˆ‘ä»¬ä¹Ÿä½“ä¼šåˆ°Lombokç»™æˆ‘ä»¬å¸¦æ¥çš„ä¾¿æ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ³¨è§£å¿«é€Ÿç”Ÿæˆæ„é€ æ–¹æ³•ã€Getterå’ŒSetterï¼ŒåŒæ ·çš„ï¼ŒLoggerä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨Lombokå¿«é€Ÿç”Ÿæˆçš„ã€‚ @Log public class Main { public static void main(String[] args) { System.out.println(\"è‡ªåŠ¨ç”Ÿæˆçš„Loggeråç§°ï¼š\"+log.getName()); log.info(\"æˆ‘æ˜¯æ—¥å¿—ä¿¡æ¯\"); } } åªéœ€è¦æ·»åŠ ä¸€ä¸ª@Logæ³¨è§£å³å¯ï¼Œæ·»åŠ åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€ä¸ªé™æ€å˜é‡logï¼Œè€Œå®ƒå°±æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„Loggerã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šåç§°ï¼š @Log(topic = \"æ‰“å·¥æ˜¯ä¸å¯èƒ½æ‰“å·¥çš„\") public class Main { public static void main(String[] args) { System.out.println(\"è‡ªåŠ¨ç”Ÿæˆçš„Loggeråç§°ï¼š\"+log.getName()); log.info(\"æˆ‘æ˜¯æ—¥å¿—ä¿¡æ¯\"); } } ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:5:4","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mybatisæ—¥å¿—ç³»ç»Ÿ Mybatisä¹Ÿæœ‰æ—¥å¿—ç³»ç»Ÿï¼Œå®ƒè¯¦ç»†è®°å½•äº†æ‰€æœ‰çš„æ•°æ®åº“æ“ä½œç­‰ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å‰é¢çš„å­¦ä¹ ä¸­æ²¡æœ‰å¼€å¯å®ƒï¼Œç°åœ¨æˆ‘ä»¬å­¦ä¹ äº†æ—¥å¿—ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°è¯•å¼€å¯Mybatisçš„æ—¥å¿—ç³»ç»Ÿï¼Œæ¥ç›‘æ§æ‰€æœ‰çš„æ•°æ®åº“æ“ä½œï¼Œè¦å¼€å¯æ—¥å¿—ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œé…ç½®ï¼š \u003csetting name=\"logImpl\" value=\"STDOUT_LOGGING\" /\u003e logImplåŒ…æ‹¬å¾ˆå¤šç§é…ç½®é¡¹ï¼ŒåŒ…æ‹¬ SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGINGï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æœªé…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸æ‰“å°ã€‚æˆ‘ä»¬è¿™é‡Œå°†å…¶è®¾å®šä¸ºSTDOUT_LOGGINGè¡¨ç¤ºç›´æ¥ä½¿ç”¨æ ‡å‡†è¾“å‡ºå°†æ—¥å¿—ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹æ¥çœ‹çœ‹æ•ˆæœï¼š public class TestMain { private SqlSessionFactory sqlSessionFactory; @Before public void before(){ try { sqlSessionFactory = new SqlSessionFactoryBuilder() .build(new FileInputStream(\"mybatis-config.xml\")); } catch (FileNotFoundException e) { e.printStackTrace(); } } @Test public void test(){ try(SqlSession sqlSession = sqlSessionFactory.openSession(true)){ TestMapper mapper = sqlSession.getMapper(TestMapper.class); System.out.println(mapper.getStudentBySidAndSex(1, \"ç”·\")); System.out.println(mapper.getStudentBySidAndSex(1, \"ç”·\")); } } } æˆ‘ä»¬å‘ç°ï¼Œä¸¤æ¬¡è·å–å­¦ç”Ÿä¿¡æ¯ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡æ‰“å¼€äº†æ•°æ®åº“è¿æ¥ï¼Œè€Œç¬¬äºŒæ¬¡å¹¶æ²¡æœ‰ã€‚ ç°åœ¨æˆ‘ä»¬å­¦ä¹ äº†æ—¥å¿—ç³»ç»Ÿï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥å°è¯•ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿè¾“å‡ºMybatisçš„æ—¥å¿—ä¿¡æ¯ï¼š \u003csetting name=\"logImpl\" value=\"JDK_LOGGING\" /\u003e å°†å…¶é…ç½®ä¸ºJDK_LOGGINGè¡¨ç¤ºä½¿ç”¨JULè¿›è¡Œæ—¥å¿—æ‰“å°ï¼Œå› ä¸ºMybatisçš„æ—¥å¿—çº§åˆ«éƒ½æ¯”è¾ƒä½ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸‹logging.propertiesé»˜è®¤çš„æ—¥å¿—çº§åˆ«ï¼š handlers= java.util.logging.ConsoleHandler\r.level= ALL\rjava.util.logging.ConsoleHandler.level = ALL\rä»£ç ç¼–å†™å¦‚ä¸‹ï¼š @Log public class TestMain { private SqlSessionFactory sqlSessionFactory; @Before public void before(){ try { sqlSessionFactory = new SqlSessionFactoryBuilder() .build(new FileInputStream(\"mybatis-config.xml\")); LogManager manager = LogManager.getLogManager(); manager.readConfiguration(new FileInputStream(\"logging.properties\")); } catch (IOException e) { e.printStackTrace(); } } @Test public void test(){ try(SqlSession sqlSession = sqlSessionFactory.openSession(true)){ TestMapper mapper = sqlSession.getMapper(TestMapper.class); log.info(mapper.getStudentBySidAndSex(1, \"ç”·\").toString()); log.info(mapper.getStudentBySidAndSex(1, \"ç”·\").toString()); } } } ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œè¿™æ ·çš„æ—¥å¿—ä¿¡æ¯æ ¹æœ¬æ²¡æ³•çœ‹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹æ—¥å¿—çš„æ‰“å°æ ¼å¼ï¼Œæˆ‘ä»¬è‡ªå·±åˆ›å»ºä¸€ä¸ªæ ¼å¼åŒ–ç±»ï¼š public class TestFormatter extends Formatter { @Override public String format(LogRecord record) { SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss.SSS\"); String time = format.format(new Date(record.getMillis())); //æ ¼å¼åŒ–æ—¥å¿—æ—¶é—´ return time + \" : \" + record.getMessage() + \"\\n\"; } } ç°åœ¨å†æ¥ä¿®æ”¹ä¸€ä¸‹é»˜è®¤çš„æ ¼å¼åŒ–å®ç°ï¼š handlers= java.util.logging.ConsoleHandler\r.level= ALL\rjava.util.logging.ConsoleHandler.level = ALL\rjava.util.logging.ConsoleHandler.formatter = com.test.TestFormatter\rç°åœ¨å°±å¥½çœ‹å¤šäº†ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­ä¸ºMybatisæ·»åŠ æ–‡ä»¶æ—¥å¿—ï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:5:5","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨Mavenç®¡ç†é¡¹ç›® **æ³¨æ„ï¼š**å¼€å§‹ä¹‹å‰ï¼Œçœ‹çœ‹ä½ Cç›˜ç©ºé—´å¤Ÿä¸å¤Ÿï¼Œæœ€å¥½é¢„ç•™2GBç©ºé—´ä»¥ä¸Šï¼ **åæ§½ï¼š**å¾ˆå¤šç”µè„‘é¢„è£…ç³»ç»ŸCç›˜éƒ½ç»™å¾—å·¨å°‘ï¼Œå°±ç®—ä¸è£…è½¯ä»¶ï¼Œä¸€äº›è½¯ä»¶çš„ç¼“å­˜æ–‡ä»¶ä¹Ÿèƒ½ç»™ä½ å¡æ»¡ï¼Œå»ºè®®æœ‰æ—¶é—´é‡è£…ä¸€ä¸‹ç³»ç»Ÿé‡æ–°åˆ†é…ä¸€ä¸‹ç£ç›˜ç©ºé—´ã€‚ Maven ç¿»è¯‘ä¸º\"ä¸“å®¶â€ã€â€œå†…è¡Œâ€ï¼Œæ˜¯ Apache ä¸‹çš„ä¸€ä¸ªçº¯ Java å¼€å‘çš„å¼€æºé¡¹ç›®ã€‚åŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆç¼©å†™ï¼šPOMï¼‰æ¦‚å¿µï¼ŒMavenåˆ©ç”¨ä¸€ä¸ªä¸­å¤®ä¿¡æ¯ç‰‡æ–­èƒ½ç®¡ç†ä¸€ä¸ªé¡¹ç›®çš„æ„å»ºã€æŠ¥å‘Šå’Œæ–‡æ¡£ç­‰æ­¥éª¤ã€‚Maven æ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¯¹ Java é¡¹ç›®è¿›è¡Œæ„å»ºã€ä¾èµ–ç®¡ç†ã€‚Maven ä¹Ÿå¯è¢«ç”¨äºæ„å»ºå’Œç®¡ç†å„ç§é¡¹ç›®ï¼Œä¾‹å¦‚ C#ï¼ŒRubyï¼ŒScala å’Œå…¶ä»–è¯­è¨€ç¼–å†™çš„é¡¹ç›®ã€‚Maven æ›¾æ˜¯ Jakarta é¡¹ç›®çš„å­é¡¹ç›®ï¼Œç°ä¸ºç”± Apache è½¯ä»¶åŸºé‡‘ä¼šä¸»æŒçš„ç‹¬ç«‹ Apache é¡¹ç›®ã€‚ é€šè¿‡Mavenï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åšï¼š é¡¹ç›®çš„è‡ªåŠ¨æ„å»ºï¼ŒåŒ…æ‹¬ä»£ç çš„ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€å®‰è£…ã€éƒ¨ç½²ç­‰æ“ä½œã€‚ ä¾èµ–ç®¡ç†ï¼Œé¡¹ç›®ä½¿ç”¨åˆ°å“ªäº›ä¾èµ–ï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆå¯¼å…¥ã€‚ æˆ‘ä»¬ä¹‹å‰å¹¶æ²¡æœ‰è®²è§£å¦‚ä½•å°†æˆ‘ä»¬çš„é¡¹ç›®æ‰“åŒ…ä¸ºJaræ–‡ä»¶è¿è¡Œï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬å¯¼å…¥ä¾èµ–çš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½è¦å»ä¸‹è½½å¯¹åº”çš„JaråŒ…ï¼Œè¿™æ ·å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå¹¶ä¸”è¿˜æœ‰å¯èƒ½ä¸€ä¸ªJaråŒ…ä¾èµ–äºå¦ä¸€ä¸ªJaråŒ…ï¼Œå°±åƒä¹‹å‰ä½¿ç”¨JUnitä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´åŠ æ–¹ä¾¿çš„åŒ…ç®¡ç†æœºåˆ¶ã€‚ Mavenä¹Ÿéœ€è¦å®‰è£…ç¯å¢ƒï¼Œä½†æ˜¯IDEAå·²ç»è‡ªå¸¦äº†Mavenç¯å¢ƒï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦å†å»è¿›è¡Œé¢å¤–çš„ç¯å¢ƒå®‰è£…ï¼ˆæ— IDEAä¹Ÿèƒ½ä½¿ç”¨Mavenï¼Œä½†æ˜¯é…ç½®è¿‡ç¨‹å¾ˆéº»çƒ¦ï¼Œå¹¶ä¸”æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„éƒ½æ˜¯IDEAçš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸è®²è§£Mavenå‘½ä»¤è¡Œæ“ä½œäº†ï¼‰æˆ‘ä»¬ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„Mavené¡¹ç›®å³å¯ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavené¡¹ç›®ç»“æ„ æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹ï¼Œä¸€ä¸ªMavené¡¹ç›®å’Œæˆ‘ä»¬æ™®é€šçš„é¡¹ç›®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š é‚£ä¹ˆé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹POMæ–‡ä»¶ï¼Œå®ƒç›¸å½“äºæ˜¯æˆ‘ä»¬æ•´ä¸ªMavené¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒä¹Ÿæ˜¯ä½¿ç”¨XMLç¼–å†™çš„ï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003cproject xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\u003e \u003cmodelVersion\u003e4.0.0\u003c/modelVersion\u003e \u003cgroupId\u003eorg.example\u003c/groupId\u003e \u003cartifactId\u003eMavenTest\u003c/artifactId\u003e \u003cversion\u003e1.0-SNAPSHOT\u003c/version\u003e \u003cproperties\u003e \u003cmaven.compiler.source\u003e8\u003c/maven.compiler.source\u003e \u003cmaven.compiler.target\u003e8\u003c/maven.compiler.target\u003e \u003c/properties\u003e \u003c/project\u003e æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒMavençš„é…ç½®æ–‡ä»¶æ˜¯ä»¥projectä¸ºæ ¹èŠ‚ç‚¹ï¼Œè€ŒmodelVersionå®šä¹‰äº†å½“å‰æ¨¡å‹çš„ç‰ˆæœ¬ï¼Œä¸€èˆ¬æ˜¯4.0.0ï¼Œæˆ‘ä»¬ä¸ç”¨å»ä¿®æ”¹ã€‚ groupIdã€artifactIdã€versionè¿™ä¸‰ä¸ªå…ƒç´ åˆåœ¨ä¸€èµ·ï¼Œç”¨äºå”¯ä¸€åŒºåˆ«æ¯ä¸ªé¡¹ç›®ï¼Œåˆ«äººå¦‚æœéœ€è¦å°†æˆ‘ä»¬ç¼–å†™çš„ä»£ç ä½œä¸ºä¾èµ–ï¼Œé‚£ä¹ˆå°±å¿…é¡»é€šè¿‡è¿™ä¸‰ä¸ªå…ƒç´ æ¥å®šä½æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬ç§°ä¸ºä¸€ä¸ªé¡¹ç›®çš„åŸºæœ¬åæ ‡ï¼Œæ‰€æœ‰çš„é¡¹ç›®ä¸€èˆ¬éƒ½æœ‰è‡ªå·±çš„Mavenåæ ‡ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡Mavenå¯¼å…¥å…¶ä»–çš„ä¾èµ–åªéœ€è¦å¡«å†™è¿™ä¸‰ä¸ªåŸºæœ¬å…ƒç´ å°±å¯ä»¥äº†ï¼Œæ— éœ€å†ä¸‹è½½Jaræ–‡ä»¶ï¼Œè€Œæ˜¯Mavenè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬ä¸‹è½½ä¾èµ–å¹¶å¯¼å…¥ã€‚ groupId ä¸€èˆ¬ç”¨äºæŒ‡å®šç»„åç§°ï¼Œå‘½åè§„åˆ™ä¸€èˆ¬å’ŒåŒ…åä¸€è‡´ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯org.exampleï¼Œä¸€ä¸ªç»„ä¸‹é¢å¯ä»¥æœ‰å¾ˆå¤šä¸ªé¡¹ç›®ã€‚ artifactId ä¸€èˆ¬ç”¨äºæŒ‡å®šé¡¹ç›®åœ¨å½“å‰ç»„ä¸­çš„å”¯ä¸€åç§°ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç»„ä¸­ç”¨äºåŒºåˆ†äºå…¶ä»–é¡¹ç›®çš„æ ‡è®°ã€‚ version ä»£è¡¨é¡¹ç›®ç‰ˆæœ¬ï¼Œéšç€æˆ‘ä»¬é¡¹ç›®çš„å¼€å‘å’Œæ”¹è¿›ï¼Œç‰ˆæœ¬å·ä¹Ÿä¼šä¸æ–­æ›´æ–°ï¼Œå°±åƒLOLä¸€æ ·ï¼Œæ¯æ¬¡èµ›å­£æ›´æ–°éƒ½ä¼šæœ‰ä¸€ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ï¼Œæˆ‘ä»¬çš„Mavené¡¹ç›®ä¹Ÿæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æŒ‡å®šå½“å‰é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œå…¶ä»–äººä½¿ç”¨æˆ‘ä»¬çš„é¡¹ç›®ä½œä¸ºä¾èµ–æ—¶ï¼Œä¹Ÿå¯ä»¥æ ¹æœ¬ç‰ˆæœ¬å·è¿›è¡Œé€‰æ‹©ï¼ˆè¿™é‡Œçš„SNAPSHOTä»£è¡¨å¿«ç…§ï¼Œä¸€èˆ¬è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¤„äºå¼€å‘ä¸­çš„é¡¹ç›®ï¼Œæ­£å¼å‘å¸ƒé¡¹ç›®ä¸€èˆ¬åªå¸¦ç‰ˆæœ¬å·ï¼‰ propertiesä¸­ä¸€èˆ¬éƒ½æ˜¯ä¸€äº›å˜é‡å’Œé€‰é¡¹çš„é…ç½®ï¼Œæˆ‘ä»¬è¿™é‡ŒæŒ‡å®šäº†JDKçš„æºä»£ç å’Œç¼–è¯‘ç‰ˆæœ¬ä¸º1.8ï¼Œæ— éœ€è¿›è¡Œä¿®æ”¹ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:1","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenä¾èµ–å¯¼å…¥ ç°åœ¨æˆ‘ä»¬å°è¯•ä½¿ç”¨Mavenæ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¯¼å…¥ä¾èµ–ï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥ä¹‹å‰çš„JDBCé©±åŠ¨ä¾èµ–ã€JUnitä¾èµ–ã€Mybatisä¾èµ–ã€Lombokä¾èµ–ï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨Mavenæ¥ç®¡ç†ä¾èµ–å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªdependenciesèŠ‚ç‚¹ï¼š \u003cdependencies\u003e //é‡Œé¢å¡«å†™çš„å°±æ˜¯æ‰€æœ‰çš„ä¾èµ– \u003c/dependencies\u003e é‚£ä¹ˆç°åœ¨å°±å¯ä»¥å‘èŠ‚ç‚¹ä¸­å¡«å†™ä¾èµ–äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•çŸ¥é“æ¯ä¸ªä¾èµ–çš„åæ ‡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨ï¼šhttps://mvnrepository.com/ è¿›è¡ŒæŸ¥è¯¢ï¼ˆå¯èƒ½æ‰“ä¸å¼€ï¼Œå»ºè®®ç”¨æµé‡ï¼Œæˆ–æ˜¯ç›´æ¥ç™¾åº¦æŸä¸ªé¡¹ç›®çš„Mavenä¾èµ–ï¼‰ï¼Œæˆ‘ä»¬ç›´æ¥æœç´¢lombokå³å¯ï¼Œæ‰“å¼€åå¯ä»¥çœ‹åˆ°å·²ç»ç»™æˆ‘ä»¬å†™å‡ºäº†ä¾èµ–çš„åæ ‡ï¼š \u003cdependency\u003e \u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e \u003cartifactId\u003elombok\u003c/artifactId\u003e \u003cversion\u003e1.18.22\u003c/version\u003e \u003cscope\u003eprovided\u003c/scope\u003e \u003c/dependency\u003e æˆ‘ä»¬ç›´æ¥å°†å…¶æ·»åŠ åˆ°dependenciesèŠ‚ç‚¹ä¸­å³å¯ï¼Œç°åœ¨æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹çœ‹çœ‹ä¾èµ–å¯¼å…¥æˆåŠŸäº†æ²¡æœ‰ï¼š public class Main { public static void main(String[] args) { Student student = new Student(\"å°æ˜\", 18); System.out.println(student); } } @Data @AllArgsConstructor public class Student { String name; int age; } é¡¹ç›®è¿è¡ŒæˆåŠŸï¼Œè¡¨ç¤ºæˆåŠŸå¯¼å…¥äº†ä¾èµ–ã€‚é‚£ä¹ˆï¼ŒMavenæ˜¯å¦‚ä½•è¿›è¡Œä¾èµ–ç®¡ç†å‘¢ï¼Œä»¥è‡´äºå¦‚æ­¤ä¾¿æ·çš„å¯¼å…¥ä¾èµ–ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Mavené¡¹ç›®çš„ä¾èµ–ç®¡ç†æµç¨‹ï¼š é€šè¿‡æµç¨‹å›¾æˆ‘ä»¬å¾—çŸ¥ï¼Œä¸€ä¸ªé¡¹ç›®ä¾èµ–ä¸€èˆ¬æ˜¯å­˜å‚¨åœ¨ä¸­å¤®ä»“åº“ä¸­ï¼Œä¹Ÿæœ‰å¯èƒ½å­˜å‚¨åœ¨ä¸€äº›å…¶ä»–çš„è¿œç¨‹ä»“åº“ï¼ˆç§æœï¼‰ï¼Œå‡ ä¹æ‰€æœ‰çš„ä¾èµ–éƒ½è¢«æ”¾åˆ°äº†ä¸­å¤®ä»“åº“ä¸­ï¼Œå› æ­¤ï¼ŒMavenå¯ä»¥ç›´æ¥ä»ä¸­å¤®ä»“åº“ä¸­ä¸‹è½½å¤§éƒ¨åˆ†çš„ä¾èµ–ï¼ˆMavenç¬¬ä¸€æ¬¡å¯¼å…¥ä¾èµ–æ˜¯éœ€è¦è”ç½‘çš„ï¼‰ï¼Œè¿œç¨‹ä»“åº“ä¸­ä¸‹è½½ä¹‹å ï¼Œä¼šæš‚æ—¶å­˜å‚¨åœ¨æœ¬åœ°ä»“åº“ï¼Œæˆ‘ä»¬ä¼šå‘ç°æˆ‘ä»¬æœ¬åœ°å­˜åœ¨ä¸€ä¸ª.m2æ–‡ä»¶å¤¹ï¼Œè¿™å°±æ˜¯Mavenæœ¬åœ°ä»“åº“æ–‡ä»¶å¤¹ï¼Œé»˜è®¤å»ºç«‹åœ¨Cç›˜ï¼Œå¦‚æœä½ Cç›˜ç©ºé—´ä¸è¶³ï¼Œä¼šå‡ºç°é—®é¢˜ï¼ åœ¨ä¸‹æ¬¡å¯¼å…¥ä¾èµ–æ—¶ï¼Œå¦‚æœMavenå‘ç°æœ¬åœ°ä»“åº“ä¸­å°±å·²ç»å­˜åœ¨æŸä¸ªä¾èµ–ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå†å»è¿œç¨‹ä»“åº“ä¸‹è½½äº†ã€‚ å¯èƒ½åœ¨å¯¼å…¥ä¾èµ–æ—¶ï¼Œå°å°ä¼™ä¼´ä»¬ä¼šå‡ºç°å¡é¡¿çš„é—®é¢˜ï¼Œæˆ‘ä»¬å»ºè®®é…ç½®ä¸€ä¸‹IDEAè‡ªå¸¦çš„Mavenæ’ä»¶è¿œç¨‹ä»“åº“åœ°å€ï¼Œæˆ‘ä»¬æ‰“å¼€IDEAçš„å®‰è£…ç›®å½•ï¼Œæ‰¾åˆ°å®‰è£…æ ¹ç›®å½•/plugins/maven/lib/maven3/confæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°settings.xmlæ–‡ä»¶ï¼Œæ‰“å¼€ç¼–è¾‘ï¼š æ‰¾åˆ°mirrosæ ‡ç­¾ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š \u003cmirror\u003e \u003cid\u003enexus-aliyun\u003c/id\u003e \u003cmirrorOf\u003e*\u003c/mirrorOf\u003e \u003cname\u003eNexus aliyun\u003c/name\u003e \u003curl\u003ehttp://maven.aliyun.com/nexus/content/groups/public\u003c/url\u003e \u003c/mirror\u003e è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†é»˜è®¤çš„è¿œç¨‹ä»“åº“åœ°å€ï¼ˆå›½å¤–ï¼‰ï¼Œé…ç½®ä¸ºå›½å†…çš„é˜¿é‡Œäº‘ä»“åº“åœ°å€äº†ï¼ˆä¾èµ–çš„ä¸‹è½½é€Ÿåº¦å°±ä¼šå¿«èµ·æ¥äº†ï¼‰ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:2","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenä¾èµ–ä½œç”¨åŸŸ é™¤äº†ä¸‰ä¸ªåŸºæœ¬çš„å±æ€§ç”¨äºå®šä½åæ ‡å¤–ï¼Œä¾èµ–è¿˜å¯ä»¥æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š typeï¼šä¾èµ–çš„ç±»å‹ï¼Œå¯¹äºé¡¹ç›®åæ ‡å®šä¹‰çš„packagingã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¯¥å…ƒç´ ä¸å¿…å£°æ˜ï¼Œå…¶é»˜è®¤å€¼ä¸ºjar scopeï¼šä¾èµ–çš„èŒƒå›´ï¼ˆä½œç”¨åŸŸï¼Œç€é‡è®²è§£ï¼‰ optionalï¼šæ ‡è®°ä¾èµ–æ˜¯å¦å¯é€‰ exclusionsï¼šç”¨æ¥æ’é™¤ä¼ é€’æ€§ä¾èµ–ï¼ˆä¸€ä¸ªé¡¹ç›®æœ‰å¯èƒ½ä¾èµ–äºå…¶ä»–é¡¹ç›®ï¼Œå°±åƒæˆ‘ä»¬çš„é¡¹ç›®ï¼Œå¦‚æœåˆ«äººè¦ç”¨æˆ‘ä»¬çš„é¡¹ç›®ä½œä¸ºä¾èµ–ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€èµ·ä¸‹è½½æˆ‘ä»¬é¡¹ç›®çš„ä¾èµ–ï¼Œå¦‚Lombokï¼‰ æˆ‘ä»¬ç€é‡æ¥è®²è§£ä¸€ä¸‹scopeå±æ€§ï¼Œå®ƒå†³å®šäº†ä¾èµ–çš„ä½œç”¨åŸŸèŒƒå›´ï¼š compile ï¼šä¸ºé»˜è®¤çš„ä¾èµ–æœ‰æ•ˆèŒƒå›´ã€‚å¦‚æœåœ¨å®šä¹‰ä¾èµ–å…³ç³»çš„æ—¶å€™ï¼Œæ²¡æœ‰æ˜ç¡®æŒ‡å®šä¾èµ–æœ‰æ•ˆèŒƒå›´çš„è¯ï¼Œåˆ™é»˜è®¤é‡‡ç”¨è¯¥ä¾èµ–æœ‰æ•ˆèŒƒå›´ã€‚æ­¤ç§ä¾èµ–ï¼Œåœ¨ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯•æ—¶å‡æœ‰æ•ˆã€‚ provided ï¼šåœ¨ç¼–è¯‘ã€æµ‹è¯•æ—¶æœ‰æ•ˆï¼Œä½†æ˜¯åœ¨è¿è¡Œæ—¶æ— æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé¡¹ç›®åœ¨è¿è¡Œæ—¶ï¼Œä¸éœ€è¦æ­¤ä¾èµ–ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸Šé¢çš„Lombokï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µä½¿ç”¨å®ƒï¼Œç¼–è¯‘å®Œæˆåï¼Œå®é™…ä¸Šå·²ç»è½¬æ¢ä¸ºå¯¹åº”çš„ä»£ç äº†ï¼Œå› æ­¤Lombokä¸éœ€è¦åœ¨é¡¹ç›®è¿è¡Œæ—¶ä¹Ÿå­˜åœ¨ã€‚ runtime ï¼šåœ¨è¿è¡Œã€æµ‹è¯•æ—¶æœ‰æ•ˆï¼Œä½†æ˜¯åœ¨ç¼–è¯‘ä»£ç æ—¶æ— æ•ˆã€‚æ¯”å¦‚æˆ‘ä»¬å¦‚æœéœ€è¦è‡ªå·±å†™ä¸€ä¸ªJDBCå®ç°ï¼Œé‚£ä¹ˆè‚¯å®šè¦ç”¨åˆ°JDKä¸ºæˆ‘ä»¬æŒ‡å®šçš„æ¥å£ï¼Œä½†æ˜¯å®é™…ä¸Šåœ¨è¿è¡Œæ—¶æ˜¯ä¸ç”¨è‡ªå¸¦JDKçš„ä¾èµ–ï¼Œå› æ­¤åªä¿ç•™æˆ‘ä»¬è‡ªå·±å†™çš„å†…å®¹å³å¯ã€‚ test ï¼šåªåœ¨æµ‹è¯•æ—¶æœ‰æ•ˆï¼Œä¾‹å¦‚ï¼šJUnitï¼Œæˆ‘ä»¬ä¸€èˆ¬åªä¼šåœ¨æµ‹è¯•é˜¶æ®µä½¿ç”¨JUnitï¼Œè€Œå®é™…é¡¹ç›®è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å°±ç”¨ä¸åˆ°æµ‹è¯•äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¯¼å…¥JUnitçš„ä¾èµ–ï¼š åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘ç«™ä¸Šæœç´¢Junitçš„ä¾èµ–ï¼Œæˆ‘ä»¬è¿™é‡Œå¯¼å…¥æœ€æ–°çš„JUnit5ä½œä¸ºä¾èµ–ï¼š \u003cdependency\u003e \u003cgroupId\u003eorg.junit.jupiter\u003c/groupId\u003e \u003cartifactId\u003ejunit-jupiter\u003c/artifactId\u003e \u003cversion\u003e5.8.1\u003c/version\u003e \u003cscope\u003etest\u003c/scope\u003e \u003c/dependency\u003e æˆ‘ä»¬æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨ç¼–å†™åˆ°Mavené¡¹ç›®ç»™æˆ‘ä»¬åˆ’åˆ†çš„testç›®å½•ä¸‹ï¼Œä½äºæ­¤ç›®å½•ä¸‹çš„å†…å®¹ä¸ä¼šåœ¨æœ€åè¢«æ‰“åŒ…åˆ°é¡¹ç›®ä¸­ï¼Œåªç”¨ä½œå¼€å‘é˜¶æ®µæµ‹è¯•ä½¿ç”¨ï¼š public class MainTest { @Test public void test(){ System.out.println(\"æµ‹è¯•\"); //Assertåœ¨JUnit5æ—¶åç§°å‘ç”Ÿäº†å˜åŒ–Assertions Assertions.assertArrayEquals(new int[]{1, 2, 3}, new int[]{1, 2}); } } å› æ­¤ï¼Œä¸€èˆ¬ä»…ç”¨ä½œæµ‹è¯•çš„ä¾èµ–å¦‚JUnitåªä¿ç•™åœ¨æµ‹è¯•ä¸­å³å¯ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å†æ¥æ·»åŠ JDBCå’ŒMybatisçš„ä¾èµ–ï¼š \u003cdependency\u003e \u003cgroupId\u003emysql\u003c/groupId\u003e \u003cartifactId\u003emysql-connector-java\u003c/artifactId\u003e \u003cversion\u003e8.0.27\u003c/version\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.mybatis\u003c/groupId\u003e \u003cartifactId\u003emybatis\u003c/artifactId\u003e \u003cversion\u003e3.5.7\u003c/version\u003e \u003c/dependency\u003e æˆ‘ä»¬å‘ç°ï¼ŒMavenè¿˜ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªresourceæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€äº›é™æ€èµ„æºï¼Œæ¯”å¦‚é…ç½®æ–‡ä»¶ï¼Œæ”¾å…¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œé¡¹ç›®åœ¨æ‰“åŒ…æ—¶ä¼šå°†èµ„æºæ–‡ä»¶å¤¹ä¸­æ–‡ä»¶ä¸€èµ·æ‰“åŒ…çš„Jarä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è¿™é‡Œç¼–å†™ä¸€ä¸ªMybatisçš„é…ç½®æ–‡ä»¶ï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"\u003e \u003cconfiguration\u003e \u003csettings\u003e \u003csetting name=\"mapUnderscoreToCamelCase\" value=\"true\"/\u003e \u003csetting name=\"cacheEnabled\" value=\"true\"/\u003e \u003csetting name=\"logImpl\" value=\"JDK_LOGGING\" /\u003e \u003c/settings\u003e \u003c!-- éœ€è¦åœ¨environmentsçš„ä¸Šæ–¹ --\u003e \u003ctypeAliases\u003e \u003cpackage name=\"com.test.entity\"/\u003e \u003c/typeAliases\u003e \u003cenvironments default=\"development\"\u003e \u003cenvironment id=\"development\"\u003e \u003ctransactionManager type=\"JDBC\"/\u003e \u003cdataSource type=\"POOLED\"\u003e \u003cproperty name=\"driver\" value=\"com.mysql.cj.jdbc.Driver\"/\u003e \u003cproperty name=\"url\" value=\"jdbc:mysql://localhost:3306/study\"/\u003e \u003cproperty name=\"username\" value=\"test\"/\u003e \u003cproperty name=\"password\" value=\"123456\"/\u003e \u003c/dataSource\u003e \u003c/environment\u003e \u003c/environments\u003e \u003cmappers\u003e \u003cmapper class=\"com.test.mapper.TestMapper\"/\u003e \u003c/mappers\u003e \u003c/configuration\u003e ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼Œé¡ºä¾¿å¸¦å¤§å®¶äº†è§£ä¸€ä¸‹Junit5çš„ä¸€äº›æ¯”è¾ƒæ–¹ä¾¿çš„åœ°æ–¹ï¼š public class MainTest { //å› ä¸ºé…ç½®æ–‡ä»¶ä½äºå†…éƒ¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨Resourcesç±»çš„getResourceAsStreamæ¥è·å–å†…éƒ¨çš„èµ„æºæ–‡ä»¶ private static SqlSessionFactory factory; //åœ¨JUnit5ä¸­@Beforeè¢«åºŸå¼ƒï¼Œå®ƒè¢«ç»†åˆ†äº†ï¼š @BeforeAll // ä¸€æ¬¡æ€§å¼€å¯æ‰€æœ‰æµ‹è¯•æ¡ˆä¾‹åªä¼šæ‰§è¡Œä¸€æ¬¡ (æ–¹æ³•å¿…é¡»æ˜¯static) // @BeforeEach ä¸€æ¬¡æ€§å¼€å¯æ‰€æœ‰æµ‹è¯•æ¡ˆä¾‹æ¯ä¸ªæ¡ˆä¾‹å¼€å§‹ä¹‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ @SneakyThrows public static void before(){ factory = new SqlSessionFactoryBuilder() .build(Resources.getResourceAsStream(\"mybatis.xml\")); } @DisplayName(\"Mybatisæ•°æ®åº“æµ‹è¯•\") //è‡ªå®šä¹‰æµ‹è¯•åç§° @RepeatedTest(3) //è‡ªåŠ¨æ‰§è¡Œå¤šæ¬¡æµ‹è¯• public void test(){ try (SqlSession sqlSession = factory.openSession(true)){ TestMapper testMapper = sqlSession.getMapper(TestMapper.class); System.out.println(testMapper.getStudentBySid(1)); } } } é‚£ä¹ˆå°±æœ‰äººæé—®äº†ï¼Œå¦‚æœæˆ‘éœ€è¦çš„ä¾èµ–æ²¡æœ‰ä¸Šä¼ çš„è¿œç¨‹ä»“åº“ï¼Œè€Œæ˜¯åªæœ‰ä¸€ä¸ªJaræ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬å››ç§ä½œç”¨åŸŸï¼š systemï¼šä½œç”¨åŸŸå’Œprovidedæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä¸æ˜¯ä»è¿œç¨‹ä»“åº“è·å–ï¼Œè€Œæ˜¯ç›´æ¥å¯¼å…¥æœ¬åœ°JaråŒ…ï¼š \u003cdependency\u003e \u003cgroupId\u003ejavax.jntm\u003c/groupId\u003e \u003cartifactId\u003elbwnb\u003c/artifactId\u003e \u003cversion\u003e2.0\u003c/version\u003e \u003cscope\u003esystem\u003c/scope\u003e \u003csystemPath\u003eC://å­¦ä¹ èµ„æ–™/4Ké«˜æ¸…æ— ç /test.jar\u003c/systemPath\u003e \u003c/dependency\u003e æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœscopeä¸ºsystemï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªsystemPathæ¥æŒ‡å®šjaræ–‡ä»¶çš„ä½ç½®ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºäº†ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:3","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenå¯é€‰ä¾èµ– å½“é¡¹ç›®ä¸­çš„æŸäº›ä¾èµ–ä¸å¸Œæœ›è¢«ä½¿ç”¨æ­¤é¡¹ç›®ä½œä¸ºä¾èµ–çš„é¡¹ç›®ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä¾èµ–æ·»åŠ optionalæ ‡ç­¾è¡¨ç¤ºæ­¤ä¾èµ–æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤åœ¨å¯¼å…¥ä¾èµ–æ—¶ï¼Œä¸ä¼šå¯¼å…¥å¯é€‰çš„ä¾èµ–ï¼š \u003coptional\u003etrue\u003c/optional\u003e æ¯”å¦‚Mybatisçš„POMæ–‡ä»¶ä¸­ï¼Œå°±å­˜åœ¨å¤§é‡çš„å¯é€‰ä¾èµ–ï¼š \u003cdependency\u003e \u003cgroupId\u003eorg.slf4j\u003c/groupId\u003e \u003cartifactId\u003eslf4j-api\u003c/artifactId\u003e \u003cversion\u003e1.7.30\u003c/version\u003e \u003coptional\u003etrue\u003c/optional\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.slf4j\u003c/groupId\u003e \u003cartifactId\u003eslf4j-log4j12\u003c/artifactId\u003e \u003cversion\u003e1.7.30\u003c/version\u003e \u003coptional\u003etrue\u003c/optional\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003elog4j\u003c/groupId\u003e \u003cartifactId\u003elog4j\u003c/artifactId\u003e \u003cversion\u003e1.2.17\u003c/version\u003e \u003coptional\u003etrue\u003c/optional\u003e \u003c/dependency\u003e ... ç”±äºMybatisè¦æ”¯æŒå¤šç§ç±»å‹çš„æ—¥å¿—ï¼Œéœ€è¦ç”¨åˆ°å¾ˆå¤šç§ä¸åŒçš„æ—¥å¿—æ¡†æ¶ï¼Œå› æ­¤éœ€è¦å¯¼å…¥è¿™äº›ä¾èµ–æ¥åšå…¼å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­å¹¶ä¸ä¸€å®šä¼šä½¿ç”¨è¿™äº›æ—¥å¿—æ¡†æ¶ä½œä¸ºMybatisçš„æ—¥å¿—æ‰“å°å™¨ï¼Œå› æ­¤è¿™äº›æ—¥å¿—æ¡†æ¶ä»…Mybatiså†…éƒ¨åšå…¼å®¹éœ€è¦å¯¼å…¥ä½¿ç”¨ï¼Œè€Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨è¿™äº›æ¡†æ¶æˆ–æ˜¯é€‰æ‹©å…¶ä¸­ä¸€ä¸ªå³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯¼å…¥Mybatisä¹‹åæƒ³ç”¨ä»€ä¹ˆæ—¥å¿—æ¡†æ¶å†è‡ªå·±åŠ å°±å¯ä»¥äº†ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:4","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenæ’é™¤ä¾èµ– æˆ‘ä»¬äº†è§£äº†å¯é€‰ä¾èµ–ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥è®©ä½¿ç”¨æ­¤é¡¹ç›®ä½œä¸ºä¾èµ–çš„é¡¹ç›®é»˜è®¤ä¸ä½¿ç”¨å¯é€‰ä¾èµ–ï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨é‚£ç§ä¸æ˜¯å¯é€‰ä¾èµ–ï¼Œä½†æ˜¯æˆ‘ä»¬å¯¼å…¥æ­¤é¡¹ç›®æœ‰ä¸å¸Œæœ›ä½¿ç”¨æ­¤ä¾èµ–è¯¥æ€ä¹ˆåŠå‘¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ’é™¤ä¾èµ–æ¥é˜²æ­¢æ·»åŠ ä¸å¿…è¦çš„ä¾èµ–ï¼š \u003cdependency\u003e \u003cgroupId\u003eorg.junit.jupiter\u003c/groupId\u003e \u003cartifactId\u003ejunit-jupiter\u003c/artifactId\u003e \u003cversion\u003e5.8.1\u003c/version\u003e \u003cscope\u003etest\u003c/scope\u003e \u003cexclusions\u003e \u003cexclusion\u003e \u003cgroupId\u003eorg.junit.jupiter\u003c/groupId\u003e \u003cartifactId\u003ejunit-jupiter-engine\u003c/artifactId\u003e \u003c/exclusion\u003e \u003c/exclusions\u003e \u003c/dependency\u003e æˆ‘ä»¬è¿™é‡Œæ¼”ç¤ºäº†æ’é™¤JUnitçš„ä¸€äº›ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨åº“ä¸­è§‚å¯Ÿæ’é™¤ä¾èµ–ä¹‹åå’Œä¹‹å‰çš„æ•ˆæœã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:5","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenç»§æ‰¿å…³ç³» ä¸€ä¸ªMavené¡¹ç›®å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€ä¸ªMavené¡¹ç›®ï¼Œæ¯”å¦‚å¤šä¸ªå­é¡¹ç›®éƒ½éœ€è¦çˆ¶é¡¹ç›®çš„ä¾èµ–ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å¿«é€Ÿé…ç½®ã€‚ æˆ‘ä»¬å³é”®å·¦ä¾§æ ï¼Œæ–°å»ºä¸€ä¸ªæ¨¡å—ï¼Œæ¥åˆ›å»ºä¸€ä¸ªå­é¡¹ç›®ï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003cproject xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\u003e \u003cparent\u003e \u003cartifactId\u003eMavenTest\u003c/artifactId\u003e \u003cgroupId\u003eorg.example\u003c/groupId\u003e \u003cversion\u003e1.0-SNAPSHOT\u003c/version\u003e \u003c/parent\u003e \u003cmodelVersion\u003e4.0.0\u003c/modelVersion\u003e \u003cartifactId\u003eChildModel\u003c/artifactId\u003e \u003cproperties\u003e \u003cmaven.compiler.source\u003e8\u003c/maven.compiler.source\u003e \u003cmaven.compiler.target\u003e8\u003c/maven.compiler.target\u003e \u003c/properties\u003e \u003c/project\u003e æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒIDEAé»˜è®¤ç»™æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªparentèŠ‚ç‚¹ï¼Œè¡¨ç¤ºæ­¤Mavené¡¹ç›®æ˜¯çˆ¶Mavené¡¹ç›®çš„å­é¡¹ç›®ï¼Œå­é¡¹ç›®ç›´æ¥ç»§æ‰¿çˆ¶é¡¹ç›®çš„groupIdï¼Œå­é¡¹ç›®ä¼šç›´æ¥ç»§æ‰¿çˆ¶é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–ï¼Œé™¤éä¾èµ–æ·»åŠ äº†optionalæ ‡ç­¾ï¼Œæˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å°è¯•ä¸€ä¸‹: import lombok.extern.java.Log; @Log public class Main { public static void main(String[] args) { log.info(\"æˆ‘æ˜¯æ—¥å¿—ä¿¡æ¯\"); } } å¯ä»¥çœ‹åˆ°ï¼Œå­é¡¹ç›®ä¹ŸæˆåŠŸç»§æ‰¿äº†Lombokä¾èµ–ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥è®©çˆ¶Mavené¡¹ç›®ç»Ÿä¸€ç®¡ç†æ‰€æœ‰çš„ä¾èµ–ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬å·ç­‰ï¼Œå­é¡¹ç›®å¯ä»¥é€‰å–éœ€è¦çš„ä½œä¸ºä¾èµ–ï¼Œè€Œç‰ˆæœ¬å…¨ç”±çˆ¶é¡¹ç›®ç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†dependencieså…¨éƒ¨æ”¾å…¥dependencyManagementèŠ‚ç‚¹ï¼Œè¿™æ ·çˆ¶é¡¹ç›®å°±å®Œå…¨ä½œä¸ºä¾èµ–ç»Ÿä¸€ç®¡ç†ã€‚ \u003cdependencyManagement\u003e \u003cdependencies\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e \u003cartifactId\u003elombok\u003c/artifactId\u003e \u003cversion\u003e1.18.22\u003c/version\u003e \u003cscope\u003eprovided\u003c/scope\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.junit.jupiter\u003c/groupId\u003e \u003cartifactId\u003ejunit-jupiter\u003c/artifactId\u003e \u003cversion\u003e5.8.1\u003c/version\u003e \u003cscope\u003etest\u003c/scope\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003emysql\u003c/groupId\u003e \u003cartifactId\u003emysql-connector-java\u003c/artifactId\u003e \u003cversion\u003e8.0.27\u003c/version\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.mybatis\u003c/groupId\u003e \u003cartifactId\u003emybatis\u003c/artifactId\u003e \u003cversion\u003e3.5.7\u003c/version\u003e \u003c/dependency\u003e \u003c/dependencies\u003e \u003c/dependencyManagement\u003e æˆ‘ä»¬å‘ç°ï¼Œå­é¡¹ç›®çš„ä¾èµ–å¤±æ•ˆäº†ï¼Œå› ä¸ºç°åœ¨çˆ¶é¡¹ç›®æ²¡æœ‰ä¾èµ–ï¼Œè€Œæ˜¯å°†æ‰€æœ‰çš„ä¾èµ–è¿›è¡Œé›†ä¸­ç®¡ç†ï¼Œå­é¡¹ç›®éœ€è¦ä»€ä¹ˆå†æ‹¿ä»€ä¹ˆå³å¯ï¼ŒåŒæ—¶å­é¡¹ç›®æ— éœ€æŒ‡å®šç‰ˆæœ¬ï¼Œæ‰€æœ‰çš„ç‰ˆæœ¬å…¨éƒ¨ç”±çˆ¶é¡¹ç›®å†³å®šï¼Œå­é¡¹ç›®åªéœ€è¦ä½¿ç”¨å³å¯ï¼š \u003cdependencies\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e \u003cartifactId\u003elombok\u003c/artifactId\u003e \u003cscope\u003eprovided\u003c/scope\u003e \u003c/dependency\u003e \u003c/dependencies\u003e å½“ç„¶ï¼Œçˆ¶é¡¹ç›®å¦‚æœè¿˜å­˜åœ¨dependenciesèŠ‚ç‚¹çš„è¯ï¼Œé‡Œé¢çš„å†…ä¾èµ–ä¾ç„¶æ˜¯ç›´æ¥ç»§æ‰¿ï¼š \u003cdependencies\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.junit.jupiter\u003c/groupId\u003e \u003cartifactId\u003ejunit-jupiter\u003c/artifactId\u003e \u003cversion\u003e5.8.1\u003c/version\u003e \u003cscope\u003etest\u003c/scope\u003e \u003c/dependency\u003e \u003c/dependencies\u003e \u003cdependencyManagement\u003e \u003cdependencies\u003e ... ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:6","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenå¸¸ç”¨å‘½ä»¤ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨IDEAå³ä¸Šè§’Mavenæ¿å—ä¸­ï¼Œæ¯ä¸ªMavené¡¹ç›®éƒ½æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå®é™…ä¸Šè¿™äº›æ˜¯Mavençš„ä¸€äº›æ’ä»¶ï¼Œæ¯ä¸ªæ’ä»¶éƒ½æœ‰å„è‡ªçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š cleanå‘½ä»¤ï¼Œæ‰§è¡Œåä¼šæ¸…ç†æ•´ä¸ªtargetæ–‡ä»¶å¤¹ï¼Œåœ¨ä¹‹åç¼–å†™Springbooté¡¹ç›®æ—¶å¯ä»¥è§£å†³ä¸€äº›ç¼“å­˜æ²¡æ›´æ–°çš„é—®é¢˜ã€‚ validateå‘½ä»¤å¯ä»¥éªŒè¯é¡¹ç›®çš„å¯ç”¨æ€§ã€‚ compileå‘½ä»¤å¯ä»¥å°†é¡¹ç›®ç¼–è¯‘ä¸º.classæ–‡ä»¶ã€‚ installå‘½ä»¤å¯ä»¥å°†å½“å‰é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼Œä»¥ä¾›å…¶ä»–é¡¹ç›®å¯¼å…¥ä½œä¸ºä¾èµ–ä½¿ç”¨ verifyå‘½ä»¤å¯ä»¥æŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªé»˜è®¤ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼ˆvalidateï¼Œcompileï¼Œpackageç­‰ï¼‰ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:7","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenæµ‹è¯•é¡¹ç›® é€šè¿‡ä½¿ç”¨testå‘½ä»¤ï¼Œå¯ä»¥ä¸€é”®æµ‹è¯•æ‰€æœ‰ä½äºtestç›®å½•ä¸‹çš„æµ‹è¯•æ¡ˆä¾‹ï¼Œè¯·æ³¨æ„æœ‰ä»¥ä¸‹è¦æ±‚ï¼š æµ‹è¯•ç±»çš„åç§°å¿…é¡»æ˜¯ä»¥Testç»“å°¾ï¼Œæ¯”å¦‚MainTest æµ‹è¯•æ–¹æ³•ä¸Šå¿…é¡»æ ‡æ³¨@Testæ³¨è§£ï¼Œå®æµ‹@RepeatedTestæ— æ•ˆ è¿™æ˜¯ç”±äºJUnit5æ¯”è¾ƒæ–°ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°é…ç½®æ’ä»¶å‡çº§åˆ°é«˜ç‰ˆæœ¬ï¼Œæ‰èƒ½å®Œç¾çš„å…¼å®¹Junit5ï¼š \u003cbuild\u003e \u003cplugins\u003e \u003cplugin\u003e \u003cgroupId\u003eorg.apache.maven.plugins\u003c/groupId\u003e \u003cartifactId\u003emaven-surefire-plugin\u003c/artifactId\u003e \u003c!-- JUnit 5 requires Surefire version 2.22.0 or higher --\u003e \u003cversion\u003e2.22.0\u003c/version\u003e \u003c/plugin\u003e \u003c/plugins\u003e \u003c/build\u003e ç°åœ¨@RepeatedTestã€@BeforeAllä¹Ÿèƒ½ä½¿ç”¨äº†ã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:8","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"Mavenæ‰“åŒ…é¡¹ç›® æˆ‘ä»¬çš„é¡¹ç›®åœ¨ç¼–å†™å®Œæˆä¹‹åï¼Œè¦ä¹ˆä½œä¸ºJarä¾èµ–ï¼Œä¾›å…¶ä»–æ¨¡å‹ä½¿ç”¨ï¼Œè¦ä¹ˆå°±ä½œä¸ºä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„ç¨‹åºï¼Œåœ¨æ§åˆ¶å°è¿è¡Œï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥æ‰§è¡Œpackageå‘½ä»¤å°±å¯ä»¥ç›´æ¥å¯¹é¡¹ç›®çš„ä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆjaræ–‡ä»¶ã€‚ å½“ç„¶ï¼Œä»¥ä¸Šæ–¹å¼ä»…é€‚ç”¨äºä½œä¸ºJarä¾èµ–çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ‰“åŒ…ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä¸ä»…éœ€è¦å°†è‡ªå·±ç¼–å†™çš„ç±»æ‰“åŒ…åˆ°Jarä¸­ï¼ŒåŒæ—¶è¿˜éœ€è¦å°†ä¾èµ–ä¹Ÿä¸€å¹¶æ‰“åŒ…åˆ°Jarä¸­ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†åˆ«äººä¸ºæˆ‘ä»¬é€šè¿‡çš„æ¡†æ¶ï¼Œè‡ªç„¶ä¹Ÿéœ€è¦è¿è¡Œåˆ«äººçš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªæ’ä»¶æ¥å®ç°ä¸€èµ·æ‰“åŒ…ï¼š \u003cplugin\u003e \u003cartifactId\u003emaven-assembly-plugin\u003c/artifactId\u003e \u003cversion\u003e3.1.0\u003c/version\u003e \u003cconfiguration\u003e \u003cdescriptorRefs\u003e \u003cdescriptorRef\u003ejar-with-dependencies\u003c/descriptorRef\u003e \u003c/descriptorRefs\u003e \u003carchive\u003e \u003cmanifest\u003e \u003caddClasspath\u003etrue\u003c/addClasspath\u003e \u003cmainClass\u003ecom.test.Main\u003c/mainClass\u003e \u003c/manifest\u003e \u003c/archive\u003e \u003c/configuration\u003e \u003cexecutions\u003e \u003cexecution\u003e \u003cid\u003emake-assembly\u003c/id\u003e \u003cphase\u003epackage\u003c/phase\u003e \u003cgoals\u003e \u003cgoal\u003esingle\u003c/goal\u003e \u003c/goals\u003e \u003c/execution\u003e \u003c/executions\u003e \u003c/plugin\u003e åœ¨æ‰“åŒ…ä¹‹å‰ä¹Ÿä¼šæ‰§è¡Œä¸€æ¬¡testå‘½ä»¤ï¼Œæ¥ä¿è¯é¡¹ç›®èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œå½“æµ‹è¯•å‡ºç°é—®é¢˜æ—¶ï¼Œæ‰“åŒ…å°†æ— æ³•å®Œæˆï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è·³è¿‡ï¼Œé€‰æ‹©æ‰§è¡ŒMavenç›®æ ‡æ¥æ‰‹åŠ¨æ‰§è¡ŒMavenå‘½ä»¤ï¼Œè¾“å…¥mvn package -Dmaven.test.skip=true æ¥ä»¥è·³è¿‡æµ‹è¯•çš„æ–¹å¼è¿›è¡Œæ‰“åŒ…ã€‚ æœ€åå¾—åˆ°æˆ‘ä»¬çš„Jaræ–‡ä»¶ï¼Œåœ¨åŒçº§ç›®å½•ä¸‹è¾“å…¥java -jar xxxx.jaræ¥è¿è¡Œæˆ‘ä»¬æ‰“åŒ…å¥½çš„Jarå¯æ‰§è¡Œç¨‹åºï¼ˆxxxä»£è¡¨æ–‡ä»¶åç§°ï¼‰ deployå‘½ä»¤ç”¨äºå‘å¸ƒé¡¹ç›®åˆ°æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨ä¸åˆ°ï¼Œè¿™é‡Œå°±ä¸åšè®²è§£äº†ã€‚ siteå‘½ä»¤ç”¨äºç”Ÿæˆå½“å‰é¡¹ç›®çš„å‘å¸ƒç«™ç‚¹ï¼Œæš‚æ—¶ä¸éœ€è¦äº†è§£ã€‚ æˆ‘ä»¬ä¹‹å‰è¿˜è®²è§£äº†å¤šæ¨¡å—é¡¹ç›®ï¼Œé‚£ä¹ˆå¤šæ¨¡å—ä¸‹çˆ¶é¡¹ç›®å­˜åœ¨ä¸€ä¸ªpackingæ‰“åŒ…ç±»å‹æ ‡ç­¾ï¼Œæ‰€æœ‰çš„çˆ¶çº§é¡¹ç›®çš„packingéƒ½ä¸ºpomï¼Œpackingé»˜è®¤æ˜¯jarç±»å‹ï¼Œå¦‚æœä¸ä½œé…ç½®ï¼Œmavenä¼šå°†è¯¥é¡¹ç›®æ‰“æˆjaråŒ…ã€‚ä½œä¸ºçˆ¶çº§é¡¹ç›®ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å±æ€§ï¼Œé‚£å°±æ˜¯modulesï¼Œé€šè¿‡modulesæ ‡ç­¾å°†é¡¹ç›®çš„æ‰€æœ‰å­é¡¹ç›®å¼•ç”¨è¿›æ¥ï¼Œåœ¨buildçˆ¶çº§é¡¹ç›®æ—¶ï¼Œä¼šæ ¹æ®å­æ¨¡å—çš„ç›¸äº’ä¾èµ–å…³ç³»æ•´ç†ä¸€ä¸ªbuildé¡ºåºï¼Œç„¶åä¾æ¬¡buildã€‚ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:6:9","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["JavaWebç¬”è®°"],"content":"å®æˆ˜ï¼šåŸºäºMybatis+JUL+Lombok+Mavençš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼ˆå¸¦å•å…ƒæµ‹è¯•ï¼‰ é¡¹ç›®éœ€æ±‚ï¼š åœ¨çº¿å½•å…¥å­¦ç”Ÿä¿¡æ¯å’Œä¹¦ç±ä¿¡æ¯ æŸ¥è¯¢ä¹¦ç±ä¿¡æ¯åˆ—è¡¨ æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ æŸ¥è¯¢å€Ÿé˜…ä¿¡æ¯åˆ—è¡¨ å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ ","date":"2022-02-16","objectID":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/:7:0","tags":["Javaè¿æ¥æ•°æ®åº“"],"title":"Javaè¿æ¥æ•°æ®åº“","uri":"/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"AVLæ ‘ç®€ä»‹ AVLæ ‘çš„åå­—æ¥æºäºå®ƒçš„å‘æ˜ä½œè€…G.M. Adelson-Velsky å’Œ E.M. Landisã€‚AVLæ ‘æ˜¯æœ€å…ˆå‘æ˜çš„è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆSelf-Balancing Binary Search Tree,ç®€ç§°å¹³è¡¡äºŒå‰æ ‘ï¼‰ã€‚ ä¸€æ£µAVLæ ‘æœ‰å¦‚ä¸‹å¿…è¦æ¡ä»¶ï¼š æ¡ä»¶ä¸€ï¼šå®ƒå¿…é¡»æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ã€‚ æ¡ä»¶äºŒï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦å·®è‡³å¤šä¸º1ã€‚ å›¾ä¸€ä¸­å·¦è¾¹äºŒå‰æ ‘çš„èŠ‚ç‚¹45çš„å·¦å­©å­46æ¯”45å¤§ï¼Œä¸æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„æ¡ä»¶ï¼Œå› æ­¤å®ƒä¹Ÿä¸æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚ å³è¾¹äºŒå‰æ ‘æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„æ¡ä»¶ï¼ŒåŒæ—¶å®ƒæ»¡è¶³æ¡ä»¶äºŒï¼Œå› æ­¤å®ƒæ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚ å·¦è¾¹äºŒå‰æ ‘çš„èŠ‚ç‚¹45å·¦å­æ ‘é«˜åº¦2ï¼Œå³å­æ ‘é«˜åº¦0ï¼Œå·¦å³å­æ ‘é«˜åº¦å·®ä¸º2-0=2ï¼Œä¸æ»¡è¶³æ¡ä»¶äºŒï¼›å³è¾¹äºŒå‰æ ‘çš„èŠ‚ç‚¹å‡æ»¡è¶³å·¦å³å­æ ‘é«˜åº¦å·®è‡³å¤šä¸º1ï¼ŒåŒæ—¶å®ƒæ»¡è¶³äºŒå‰æœç´¢æ ‘çš„è¦æ±‚ï¼Œå› æ­¤å®ƒæ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚ AVLæ ‘çš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œåœ¨å¹³å‡å’Œæœ€åçš„æƒ…å†µä¸‹éƒ½æ˜¯Oï¼ˆlognï¼‰ï¼Œè¿™å¾—ç›Šäºå®ƒæ—¶åˆ»ç»´æŠ¤ç€äºŒå‰æ ‘çš„å¹³è¡¡ã€‚ä½†ç”±äºæ¯æ¬¡æ’å…¥éƒ½éœ€è¦ä¸æ–­çš„è°ƒæ•´å’Œç»´æŠ¤ï¼Œæ‰€ä»¥ï¼Œå®é™…ä¸Šå¦‚æœæ’å…¥æ“ä½œæ¬¡æ•°å¤ªå¤šåˆ™åŒæ ·ä¼šé™·å…¥è¶…æ—¶çš„æ­»å±€ï¼Œæœ€å…·ä¼˜åŠ¿çš„æ“ä½œåœ¨äºæŸ¥æ‰¾ï¼Œå› ä¸ºå®ƒçš„åº•å±‚è®¾è®¡ä½¿å¾—å®ƒæ— è®ºæ’å…¥å¤šå°‘ä¸ªå…ƒç´ ï¼Œè¿™é¢—äºŒå‰æ ‘æ€»æ˜¯ä¸¥æ ¼å¹³è¡¡çš„ï¼Œæ‰€ä»¥AVLæ ‘é€‚ç”¨äºæ’å…¥æ“ä½œä¸æ˜¯å¾ˆé¢‘ç¹ï¼Œä½†æŸ¥æ‰¾æ“ä½œæåº¦é¢‘ç¹çš„æƒ…å†µï¼Œå¦‚æœéœ€è¦åœ¨æ’å…¥å’ŒæŸ¥æ‰¾æ“ä½œæ‰¾ä¸€ä¸ªå‡è¡¡ç‚¹ï¼Œé‚£ä¹ˆå°±åªèƒ½é€‰æ‹©çº¢é»‘æ ‘äº†ã€‚ ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:1:0","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"AVLæ ‘çš„ç›¸å…³æ¦‚å¿µ å¹³è¡¡å› å­ï¼šå°†äºŒå‰æ ‘ä¸ŠèŠ‚ç‚¹çš„å·¦å­æ ‘é«˜åº¦å‡å»å³å­æ ‘é«˜åº¦çš„å€¼ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å¹³è¡¡å› å­BF(Balance Factor)ã€‚ åœ¨å›¾äºŒå³è¾¹çš„AVLæ ‘ä¸Šï¼š èŠ‚ç‚¹50çš„å·¦å­æ ‘é«˜åº¦ä¸º3ï¼Œå³å­æ ‘é«˜åº¦ä¸º2ï¼ŒBF= 3-2 = 1ï¼› èŠ‚ç‚¹45çš„å·¦å­æ ‘é«˜åº¦ä¸º2ï¼Œå³å­æ ‘é«˜åº¦ä¸º1ï¼ŒBF= 2-1 = 1ï¼› èŠ‚ç‚¹46çš„å·¦å­æ ‘é«˜åº¦ä¸º0ï¼Œå³å­æ ‘é«˜åº¦ä¸º0ï¼ŒBF= 0-0 = 0ï¼› èŠ‚ç‚¹65çš„å·¦å­æ ‘é«˜åº¦ä¸º0ï¼Œå³å­æ ‘é«˜åº¦ä¸º1ï¼ŒBF= 0-1 = -1ï¼› å¯¹äºå¹³è¡¡äºŒå‰æ ‘ï¼ŒBFçš„å–å€¼èŒƒå›´ä¸º[-1,1]ã€‚å¦‚æœå‘ç°æŸä¸ªèŠ‚ç‚¹çš„BFå€¼ä¸åœ¨æ­¤èŒƒå›´ï¼Œåˆ™éœ€è¦å¯¹æ ‘è¿›è¡Œè°ƒæ•´ã€‚ æœ€å°ä¸å¹³è¡¡æ ‘ï¼šè·ç¦»æ’å…¥èŠ‚ç‚¹æœ€è¿‘çš„ï¼Œä¸”å¹³è¡¡å› å­çš„ç»å¯¹å€¼å¤§äº1çš„èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ã€‚ åœ¨å›¾ä¸‰ä¸­ï¼Œå·¦è¾¹äºŒå‰æ ‘çš„èŠ‚ç‚¹45çš„BF = 1ï¼Œæ’å…¥èŠ‚ç‚¹43åï¼ŒèŠ‚ç‚¹45çš„BF = 2ã€‚èŠ‚ç‚¹45æ˜¯è·ç¦»æ’å…¥ç‚¹43æœ€è¿‘çš„BFä¸åœ¨[-1,1]èŒƒå›´å†…çš„èŠ‚ç‚¹ï¼Œå› æ­¤ä»¥èŠ‚ç‚¹45ä¸ºæ ¹çš„å­æ ‘ä¸ºæœ€å°ä¸å¹³è¡¡å­æ ‘ã€‚(è¿™æ­£å¥½å¯¹åº”äº†é€’å½’çš„ååºè¿”å›æ“ä½œ ä¸­åºçš„å‰é©±å’Œåç»§ï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸­åºéå†ä¸‹çš„å‰ä¸€ä¸ªç»“ç‚¹å’Œåä¸€ä¸ªç»“ç‚¹ï¼Œç”±äºæ—¶äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥ä¸­åºéå†çš„å‰ä¸€ä¸ªç»“ç‚¹å¯¹åº”æ¯”è¿™ä¸ªç»“ç‚¹å°çš„æœ€å¤§ç»“ç‚¹ï¼Œè€Œåä¸€ä¸ªç»“ç‚¹å¯¹åº”æ¯”è¿™ä¸ªç»“ç‚¹å¤§çš„æœ€å°ç»“ç‚¹ã€‚(è¿™ä¸ªå¯ä»¥çœ‹åé¢ä»£ç å†è¿›è¡Œç†è§£)è¿™ä¸ªæ¦‚å¿µåœ¨è¿›è¡Œåˆ é™¤ç»“ç‚¹çš„æ“ä½œæ—¶å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºåˆ é™¤ç»“ç‚¹åéœ€è¦åŒæ—¶ä¿è¯ä»ç„¶ä¸ºäºŒå‰æœç´¢æ ‘ã€‚ å…³äºå¯¹å‰é©±å’Œåç»§çš„ä¸€äº›å¯»æ‰¾æ–¹æ³•ï¼Œè¯·çœ‹æˆ‘çš„å¦ä¸€ç¯‡åšå®¢ï¼šé¢è¯•é¢˜ 04.06. åç»§è€… ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:2:0","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"AVLæ ‘çš„å®ç°è¯¦è§£ æ€»ä½“æ€ç»´å¯¼å›¾å®ç°ã€‚ ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:0","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"1. ç»“ç‚¹ç»“æ„ struct node { int val; int depth; node *lchild; node *rchild; node() : val(0), lchild(nullptr), rchild(nullptr) {} node(int x) : val(x), lchild(nullptr), rchild(nullptr) {} }; valï¼Œç»“ç‚¹çš„å€¼ã€‚ depthï¼Œè¯¥ç»“ç‚¹çš„é«˜åº¦(å®ƒçš„å·¦å³å­æ ‘ä¸­æœ€é«˜çš„é«˜åº¦+1)ã€‚ lchildï¼Œå·¦å­©å­ã€‚ rchildï¼Œå³å­©å­ã€‚ ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:1","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"2. AVLæ ‘çš„æŠ½è±¡æ•°æ®ç»“æ„ï¼ˆADTï¼‰ class AVLTree { /*date part*/ node *head; int length; public: /*construct and destruct part*/ AVLTree() : head(nullptr), length(0) {} AVLTree(int x) : head(new node(x)), length(1) {} ~AVLTree() { destroy(head); } public: /*iterator part*/ class iterator {//å°è£…è¿­ä»£å™¨ï¼šå†…éƒ¨ç±»--åªèƒ½è°ƒç”¨å¤–éƒ¨ç±»çš„é™æ€å‡½æ•° node *head; node *root; public: iterator(node *head, node *root) : head(head), root(root) {} iterator \u0026operator++(); bool operator==(const iterator \u0026x); bool operator!=(const iterator \u0026x); iterator operator++(int); iterator \u0026operator--(); iterator operator--(int); int operator*(); }; private: /*static member function*/ /*Rotate Part*/ static node *rotateRight(node *root); static node *rotateLeft(node *root); static node *rotateLeftRight(node *root); static node *rotateRightLeft(node *root); /*Destruct*/ static void destroy(node *root); /*Getter*/ static node *getNext(node *root, node *p); static node *getPre(node *root, node *p); static node *getMinNode(node *root); static node *getMaxNode(node *root); static int get_depth(node *root); static void update_depth(node *root); /*Insert\u0026Remove*/ static node *Insert(int x, node *root, int \u0026size); static node *remove(int x, node *root, int \u0026size); /*print_order*/ static void inorder(node *root); public: /*public interface*/ /*clear\u0026empty*/ void clear(); bool isEmpty(); /*find*/ bool find(int x); /*insert\u0026remove*/ void insert(int x); void remove(int x); /*size*/ int size(); /*begin\u0026end*/ iterator begin(); iterator end(); /*print*/ void inorder_print(); }; ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:2","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"3. AVLæ ‘é«˜åº¦ç›¸å…³æ“ä½œ å¾—åˆ°é«˜åº¦ static int get_depth(node *root) {//å¾—åˆ°æ·±åº¦ if (root == nullptr) return 0; return root-\u003edepth; } æ›´æ–°é«˜åº¦ static void update_depth(node *root) { if (root == nullptr) return; root-\u003edepth = std::max(get_depth(root-\u003elchild), get_depth(root-\u003erchild)) + 1; } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:3","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"4. å¾—åˆ°å­æ ‘ä¸­æœ€å¤§/æœ€å°ç»“ç‚¹ åŸç†ï¼šæ ¹æ®äºŒå‰æœç´¢æ ‘ä¸­ç»“ç‚¹çš„å·¦å­æ ‘ä¸€å®šå°äºè¯¥ç»“ç‚¹ï¼Œå³å­æ ‘ä¸€å®šå¤§äºè¯¥ç»“ç‚¹ã€‚ å¾—åˆ°æœ€å¤§ï¼šç›´æ¥éå†å¾—å‡ºè¯¥ç»“ç‚¹çš„æœ€å³ç»“ç‚¹ã€‚ static node* getMaxNode(node* root) { if (root == nullptr) return nullptr; while (root-\u003erchild != nullptr) root = root-\u003erchild; return root; } å¾—åˆ°æœ€å°ï¼šç›´æ¥éå†å¾—å‡ºè¯¥ç»“ç‚¹çš„æœ€å·¦ç»“ç‚¹ã€‚ static node* getMinNode(node* root) { if (root == nullptr) return nullptr; while (root-\u003elchild != nullptr) root = root-\u003elchild; return root; } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:4","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"5. å¾—åˆ°ç»“ç‚¹çš„å‰é©±å’Œåç»§ æ³¨æ„ï¼šäºŒå‰æœç´¢æ ‘çš„å‰é©±åç»§ä¸€èˆ¬æŒ‡çš„æ˜¯å®ƒä¸­åºéå†çš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä»å°åˆ°å¤§æ’çš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªç»“ç‚¹ã€‚ å…·ä½“å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢â€“åç»§è€… åç»§ç»“ç‚¹æ±‚è§£ï¼šå¦‚æœæœ‰å³å­æ ‘ï¼Œå°±æ˜¯å³å­æ ‘çš„æœ€å°ç»“ç‚¹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ˜¯è·ç¦»è¯¥èŠ‚ç‚¹æœ€è¿‘çš„å¤„äºè¯¥èŠ‚ç‚¹å³è¾¹çš„çˆ¶èŠ‚ç‚¹ã€‚ static node* getNext(node* root, node* p) { //å¾—åˆ°pèŠ‚ç‚¹çš„åç»§ç»“ç‚¹ if (root == nullptr || p == nullptr) return nullptr; if (p-\u003eval \u003e= root-\u003eval) { return getNext(root-\u003erchild, p); } else { node* left = getNext(root-\u003elchild, p); return left ? left : root; } } å‰é©±ç»“ç‚¹æ±‚è§£ï¼šå¦‚æœæœ‰å·¦å­æ ‘ï¼Œå°±æ˜¯å·¦å­æ ‘çš„æœ€å¤§ç»“ç‚¹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ˜¯è·ç¦»è¯¥èŠ‚ç‚¹æœ€è¿‘çš„å¤„äºè¯¥èŠ‚ç‚¹å·¦è¾¹çš„çˆ¶èŠ‚ç‚¹ã€‚ static node* getPre(node* root, node* p) { //å¾—åˆ°pèŠ‚ç‚¹çš„å‰é©±ç»“ç‚¹ if (root == nullptr || p == nullptr)return nullptr; if (p-\u003eval \u003c= root-\u003eval) { return getPre(root-\u003elchild, p); } else { node* right = getPre(root-\u003erchild, p); return right ? right : root; } } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:5","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"6. AVLæ ‘å¤±è¡¡çš„è°ƒæ•´ èŠ‚ç‚¹çš„æ’å…¥æˆ–åˆ é™¤éƒ½æœ‰å¯èƒ½å¯¼è‡´AVLæ ‘å¤±å»å¹³è¡¡ï¼Œå› æ­¤ï¼Œå¤±è¡¡è°ƒæ•´æ˜¯æ’å…¥ä¸åˆ é™¤æ“ä½œçš„åŸºç¡€ã€‚ AVLæ ‘çš„å¤±è¡¡è°ƒæ•´å¯ä»¥åˆ†ä¸ºå››ç§æƒ…å†µï¼Œæˆ‘ä»¬é€ä¸€åˆ†æã€‚ å‡è®¾æˆ‘ä»¬è¦ä¸ºæ•°ç»„a[]={4ï¼Œ5ï¼Œ6ï¼Œ3ï¼Œ2ï¼Œ8ï¼Œ7ï¼Œ0ï¼Œ1}æ„å»ºä¸€æ£µAVLæ ‘ã€‚ æƒ…å†µä¸€ï¼šå·¦æ—‹ é¦–å…ˆæ’å…¥{4ï¼Œ5ï¼Œ6}ï¼Œåœ¨æ’å…¥å…ƒç´ 6åå‡ºç°ä¸å¹³è¡¡çš„æƒ…å†µï¼š å½“æˆ‘ä»¬åœ¨å³å­æ ‘æ’å…¥å³å­©å­å¯¼è‡´AVLå¤±è¡¡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå•å·¦æ—‹è°ƒæ•´ã€‚æ—‹è½¬å›´ç»•æœ€å°å¤±è¡¡å­æ ‘çš„æ ¹èŠ‚ç‚¹è¿›è¡Œã€‚ åœ¨åˆ é™¤æ–°èŠ‚ç‚¹æ—¶ä¹Ÿæœ‰å¯èƒ½ä¼šå‡ºç°éœ€è¦å•å·¦æ—‹çš„æƒ…å†µã€‚ å·¦æ—‹ä»£ç å¦‚ä¸‹ï¼š static node *rotateLeft(node *root) { node *son = root-\u003erchild; root-\u003erchild = son-\u003elchild; son-\u003elchild = root; update_depth(root); update_depth(son); return son; } æƒ…å†µäºŒï¼šå³æ—‹ æˆ‘ä»¬ç»§ç»­æ’å…¥å…ƒç´ {3ï¼Œ2}ï¼Œæ­¤æ—¶äºŒå‰æ ‘ä¸ºï¼š æ’å…¥3ã€2åå‡ºç°äº†ä¸å¹³è¡¡çš„æƒ…å†µã€‚æ­¤æ—¶çš„æ’å…¥æƒ…å†µæ˜¯â€œåœ¨å·¦å­æ ‘ä¸Šæ’å…¥å·¦å­©å­å¯¼è‡´AVLæ ‘å¤±è¡¡â€ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå•å³æ—‹è°ƒæ•´ã€‚ å³æ—‹ä»£ç ï¼š static node *rotateRight(node *root) {//å³æ—‹ node *son = root-\u003elchild; root-\u003elchild = son-\u003erchild; son-\u003erchild = root; update_depth(root);//æ›´æ–°æ·±åº¦(å³æ—‹åªä¼šå¯¹è¿™ä¸¤ç»“ç‚¹äº§ç”Ÿå½±å“ update_depth(son); return son; } æƒ…å†µä¸‰ï¼šå…ˆå·¦æ—‹åå³æ—‹ éœ€è¦è¿›è¡Œä¸¤æ¬¡æ—‹è½¬çš„åŸå› æ˜¯ç¬¬ä¸€æ¬¡æ—‹è½¬åï¼ŒAVLæ ‘ä»æ—§å¤„äºä¸å¹³è¡¡çš„çŠ¶æ€ï¼Œç¬¬äºŒæ¬¡æ—‹è½¬å†æ¬¡è¿›è¡Œè°ƒæ•´ã€‚ æˆ‘ä»¬ç»§ç»­æ’å…¥å…ƒç´ {8ï¼Œ7} è¿™ç§æƒ…å†µï¼Œæ€»ç»“èµ·æ¥å°±æ˜¯â€œåœ¨å³å­æ ‘ä¸Šæ’å…¥å·¦å­©å­å¯¼è‡´AVLæ ‘å¤±è¡¡\",æ­¤æ—¶æˆ‘ä»¬éœ€è¦è¿›è¡Œå…ˆå³æ—‹åå·¦æ—‹çš„è°ƒæ•´ã€‚ è°ƒæ•´çš„ä»£ç ä¸ºï¼š static node *rotateLeftRight(node *root) { root-\u003elchild = rotateLeft(root-\u003elchild); return rotateRight(root); } ç»“åˆä¾‹å­è¿›è¡Œåˆ†æï¼š é¦–å…ˆå¯¹æœ€å°ä¸å¹³è¡¡å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯èŠ‚ç‚¹6ï¼‰çš„å³å­©å­ï¼ˆä¹Ÿå°±æ˜¯8ï¼‰è¿›è¡Œå³æ—‹æ“ä½œ å†å¯¹èŠ‚ç‚¹6è¿›è¡Œä¸€æ¬¡å·¦æ—‹æ“ä½œ æƒ…å†µå››ï¼šå…ˆå³æ—‹å†å·¦æ—‹ æ ¹æ®å¯¹ç§°æ€§åŸç†ï¼Œå½“æˆ‘ä»¬â€œåœ¨å·¦å­æ ‘ä¸Šæ’å…¥å³å­©å­å¯¼è‡´AVLæ ‘å¤±è¡¡\",æ­¤æ—¶æˆ‘ä»¬éœ€è¦è¿›è¡Œå…ˆå·¦æ—‹åå³æ—‹çš„è°ƒæ•´ã€‚å¦‚æœä½ ä¸ç†è§£æ¥ç€çœ‹å›¾ã€‚ æˆ‘ä»¬æ¥ç€æ’å…¥èŠ‚ç‚¹{0ï¼Œ1} è°ƒæ•´çš„ä»£ç : static node *rotateRightLeft(node *root) { root-\u003erchild = rotateRight(root-\u003erchild); return rotateLeft(root); } ç»“åˆä¾‹å­è¿›è¡Œåˆ†æï¼š é¦–å…ˆå¯¹æœ€å°ä¸å¹³è¡¡å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯èŠ‚ç‚¹2ï¼‰çš„å·¦å­©å­ï¼ˆä¹Ÿå°±æ˜¯0ï¼‰è¿›è¡Œå·¦æ—‹æ“ä½œ å†å¯¹èŠ‚ç‚¹2è¿›è¡Œä¸€æ¬¡å³æ—‹æ“ä½œ æ€»ç»“ï¼šå››ç§å¤±è¡¡è°ƒæ•´ ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:6","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"7. æ’å…¥æ–°ç»“ç‚¹ //éœ€è¦æ˜¯å¦å…¼å®¹ç›¸ç­‰çš„å…ƒç´ ï¼Œå¯é€šè¿‡å¯¹ x\u003croot-\u003eval æˆ– x\u003eroot-\u003eval è¿™ä¸¤ä¸ªä¸­çš„ä¸€ä¸ªå–ç­‰å·å³å¯ static node *Insert(int x, node *root, int\u0026 size) { //æ‰€æœ‰çš„deepçš„æ›´æ–°éƒ½åœ¨ååºéå†å if (root == nullptr) { root = new node(x); size++;//åˆ›å»ºç»“ç‚¹åsize++ } else if (x \u003c root-\u003eval) { root-\u003elchild = Insert(x, root-\u003elchild, size); //ç”±äºåœ¨æ›´æ–°è¯¥rootç»“ç‚¹ä¹‹å‰ï¼Œå½“å¹³è¡¡åº¦æœªè¾¾åˆ°è¯¥è¦æ±‚ä¹‹å‰è‚¯å®šä»¥åŠæ˜¯è¿›è¡Œäº†update_depthæ“ä½œ if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == 2) root = x \u003c root-\u003elchild-\u003eval ? rotateRight(root) : rotateLeftRight(root); } else if (x \u003e root-\u003eval) { root-\u003erchild = Insert(x, root-\u003erchild, size); if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == -2) root = x \u003e root-\u003erchild-\u003eval ? rotateLeft(root) : rotateRightLeft(root); } update_depth(root); return root; } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:7","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"8. åˆ é™¤ç»“ç‚¹ å¤±è¡¡çš„å¤„ç†ï¼š åˆ é™¤èŠ‚ç‚¹ä¹Ÿå¯èƒ½å¯¼è‡´AVLæ ‘çš„å¤±è¡¡ï¼Œå®é™…ä¸Šåˆ é™¤èŠ‚ç‚¹å’Œæ’å…¥èŠ‚ç‚¹æ˜¯ä¸€ç§äº’é€†çš„æ“ä½œï¼š åˆ é™¤å³å­æ ‘çš„èŠ‚ç‚¹å¯¼è‡´AVLæ ‘å¤±è¡¡æ—¶ï¼Œç›¸å½“äºåœ¨å·¦å­æ ‘æ’å…¥èŠ‚ç‚¹å¯¼è‡´AVLæ ‘å¤±è¡¡ï¼Œå³æƒ…å†µæƒ…å†µäºŒæˆ–æƒ…å†µå››ã€‚ åˆ é™¤å·¦å­æ ‘çš„èŠ‚ç‚¹å¯¼è‡´AVLæ ‘å¤±è¡¡æ—¶ï¼Œç›¸å½“äºåœ¨å³å­æ ‘æ’å…¥èŠ‚ç‚¹å¯¼è‡´AVLæ ‘å¤±è¡¡ï¼Œå³æƒ…å†µæƒ…å†µä¸€æˆ–æƒ…å†µä¸‰ã€‚ ç»´æŒæ’åºæ ‘çš„å¤„ç†ï¼š å¦å¤–ï¼ŒAVLæ ‘ä¹Ÿæ˜¯ä¸€æ£µäºŒå‰æ’åºæ ‘ï¼Œå› æ­¤åœ¨åˆ é™¤èŠ‚ç‚¹æ—¶ä¹Ÿè¦ç»´æŠ¤äºŒå‰æ’åºæ ‘çš„æ€§è´¨ã€‚ å¦‚æœåˆ é™¤ç»“ç‚¹ä¸ºå¶å­ç»“ç‚¹ï¼Œåˆ™ç›´æ¥åˆ é™¤ï¼Œå¹¶ä¸ä¼šæ”¹å˜æœç´¢æ ‘çš„æ€§è´¨ã€‚ å¦‚æœåˆ é™¤ç»“ç‚¹åªæœ‰å·¦å­æ ‘æˆ–è€…å³å­æ ‘ï¼Œåˆ™ç›´æ¥æŠŠè¦åˆ é™¤çš„ç»“ç‚¹çš„æ•°æ®ç”¨ä¸‹ä¸€ä¸ªç»“ç‚¹è¦†ç›–ï¼Œç„¶ååˆ é™¤ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œç”±äºå¤åˆ¶äº†ä¸‹ä¸€å±‚çš„å·¦å³å­©å­æŒ‡é’ˆï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°æ–­å±‚çš„ã€‚ å¦‚æœåˆ é™¤ç»“ç‚¹å·¦å³å­æ ‘éƒ½æœ‰ï¼Œåˆ™æ‰¾å‡ºè¯¥èŠ‚ç‚¹çš„å‰é©±ç»“ç‚¹æˆ–åç»§ç»“ç‚¹çš„å€¼è¿›è¡Œè¦†ç›–(ä¸è¦†ç›–æŒ‡é’ˆï¼Œè¿™æ ·ä¾¿ä»ç„¶æ˜¯æ’åºäºŒå‰æ ‘äº†ï¼Œç„¶å**ç»§ç»­é€’å½’å¯»æ‰¾å¯¹åº”çš„å‰é©±æˆ–è€…åç»§ç»“ç‚¹è¿›è¡Œåˆ é™¤ï¼Œ**å› ä¸ºå·¦å³å­æ ‘éƒ½æœ‰ï¼Œæ‰€ä»¥å®ƒä»¬çš„å‰é©±æˆ–è€…åç»§åªèƒ½æ˜¯å¶å­ç»“ç‚¹ï¼Œæ‰¾åˆ°ç›´æ¥åˆ é™¤å³å¯ã€‚ åˆ é™¤å¤„ç†ä»£ç ï¼š æˆ‘è¿™é‡Œå¯¹åˆ é™¤æ“ä½œè¿›è¡Œäº†è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¦‚æœè¢«åˆ é™¤ç»“ç‚¹çš„å·¦å³å­æ ‘éƒ½å­˜åœ¨ï¼Œåˆ™æŸ¥çœ‹å·¦å³å­æ ‘çš„é«˜åº¦ï¼Œå¦‚æœå·¦è¾¹é«˜äºå³è¾¹åˆ™é€‰æ‹©å‰é©±ç»“ç‚¹è¿›è¡Œåˆ é™¤ï¼Œåä¹‹åˆ™åç»§ã€‚ static node *remove(int x, node *root, int\u0026 size) { if (root == nullptr) return nullptr; if (x == root-\u003eval) { /*å·¦å³å­æ ‘å‡ä¸ä¸ºç©º---ç”¨ä¸­åºçš„å‰é©±æˆ–è€…åç»§æ¥è¿›è¡Œæ›¿æ¢*/ if (root-\u003elchild != nullptr \u0026\u0026 root-\u003erchild != nullptr) { /*æ ¹æ®å·¦å³å­æ ‘çš„æ·±åº¦æ¥é€‰æ‹©åˆ é™¤æ›¿æ¢å“ªè¾¹çš„*/ if (get_depth(root-\u003elchild) \u003e get_depth(root-\u003erchild)) { node* t = getMaxNode(root-\u003elchild); root-\u003eval = t-\u003eval; root-\u003elchild = remove(t-\u003eval, root-\u003elchild, size); } else { node* t = getMinNode(root-\u003erchild); root-\u003eval = t-\u003eval; root-\u003erchild = remove(t-\u003eval, root-\u003erchild, size); } } /*å·¦å³å­æ ‘è‡³å°‘æœ‰ä¸€ä¸ªä¸ºç©ºçš„æƒ…å†µï¼Œç›´æ¥å¾€ä¸‹èµ°ä¸€æ­¥å³å¯*/ else { node* tmp = root-\u003elchild == nullptr ? root-\u003erchild : nullptr; if (tmp != nullptr) { *root = *tmp; delete tmp; } else { delete root; root = nullptr; } //åˆ é™¤æ—¶size-- size--; } } else if (x \u003c root-\u003eval) { root-\u003elchild = remove(x, root-\u003elchild, size); if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == -2) root = get_depth(root-\u003erchild-\u003elchild) \u003e get_depth(root-\u003erchild-\u003erchild) ? rotateRightLeft(root) : rotateLeft(root); } else { root-\u003erchild = remove(x, root-\u003erchild, size); if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == 2) root = get_depth(root-\u003elchild-\u003erchild) \u003e get_depth(root-\u003elchild-\u003elchild) ? rotateLeftRight(root) : rotateRight(root); } return root; } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:8","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"9. æŸ¥æ‰¾å…ƒç´  äºŒå‰æ ‘æ˜¯ä¸€ç§é€’å½’çš„å®šä¹‰ï¼Œå› æ­¤ï¼ŒäºŒå‰æ ‘çš„è®¸å¤šæ“ä½œéƒ½å¯ä»¥é€šè¿‡é€’å½’ç®€å•åœ°å®ç°ï¼Œä¾‹å¦‚éå†äºŒå‰æ ‘ã€æŸ¥æ‰¾æŒ‡å®šå…ƒç´ ã€é”€æ¯äºŒå‰æ ‘ç­‰ã€‚ è¿™é‡Œä½¿ç”¨äº†è¿­ä»£æ–¹å¼ã€‚ bool find(int x) { //æŸ¥æ‰¾ç›´æ¥è¿­ä»£æ–¹å¼å³å¯ node *f = head; while (f != nullptr) { if (x == f-\u003eval) return true; else if (x \u003c f-\u003eval) f = f-\u003elchild; else f = f-\u003erchild; } return false; } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:9","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"10. éå†äºŒå‰æ ‘ æˆ‘è¿™é‡Œåªæä¾›äº†ä¸­åºéå†çš„æ‰“å°ï¼Œæ–¹ä¾¿éªŒè¯äºŒå‰æœç´¢æ ‘çš„æƒ…å†µã€‚ static void inorder(node *root) { if (root != nullptr) { inorder(root-\u003elchild); printf(\"%d \", root-\u003eval); inorder(root-\u003erchild); } } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:10","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"11. AVLæ ‘çš„é”€æ¯ ç›´æ¥åˆ©ç”¨ååºå…ˆå¤„ç†å®Œå·¦å³å­æ ‘å†å¤„ç†æ ¹èŠ‚ç‚¹ã€‚ static void destroy(node *root) { if (root == nullptr) return; destroy(root-\u003elchild); destroy(root-\u003erchild); delete root; root = nullptr; } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:11","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"12. è¿­ä»£å™¨çš„è®¾è®¡ å…³äºC++é‡Œé¢çš„è¿­ä»£å™¨ï¼Œå…¶å®å°±æ˜¯æ–¹ä¾¿éå†å®¹å™¨ä¸­çš„å…ƒç´ ï¼Œè€Œè¿­ä»£å™¨éœ€è¦æ¨¡æ‹ŸæŒ‡é’ˆçš„è¡Œä¸ºï¼Œæ‰€ä»¥åœ¨C++ä¸­è¿­ä»£å™¨å…¶å®å°±æ˜¯å¯¹æŒ‡é’ˆç‰¹åˆ«åŒ…è£…çš„ç±»ï¼Œå¯¹å…¶è¿›è¡Œä¸€äº›è¿ç®—ç¬¦çš„é‡è½½å³å¯ã€‚ å†…éƒ¨ç±»å……å½“è¿­ä»£å™¨ ç”±äºéœ€è¦æ»¡è¶³é¡ºåºå®¹å™¨çš„è¿­ä»£é¡ºåºï¼Œæ‰€ä»¥++å’Œâ€“æ“ä½œå¯¹åº”åç»§å’Œå‰é©±ã€‚ /*iterator part*/ class iterator { //å°è£…è¿­ä»£å™¨ node* head; node* root; public: iterator(node* head, node* root): head(head), root(root) {} iterator\u0026 operator++() { //ç›´æ¥æŠŠrootåŠ ä¸ºå½“å‰çš„åç»§ç»“ç‚¹ root = getNext(head, root); return *this; } bool operator==(const iterator\u0026 x) { return this-\u003eroot == x.root; } bool operator!=(const iterator\u0026 x) { return this-\u003eroot != x.root; } iterator operator++(int) { iterator t = *this; root = getNext(head, root); return t; } iterator\u0026 operator--() { //ç›´æ¥æŠŠrootèµ‹å€¼ä¸ºå‰é©±ç»“ç‚¹ root = getPre(head, root); return *this; } iterator operator--(int) { iterator t = *this; root = getPre(head, root); return t; } node\u0026 operator*() { //è§£å¼•ç”¨çš„é‡è½½ return *root; } }; å¤–éƒ¨ç±»æä¾›å¤–ç•Œbegin()å’Œend()æ¥å£å¾—åˆ°è¿­ä»£å™¨çš„å§‹ç«¯å’Œæœ«ç«¯ iterator begin() { node* min = getMinNode(head); return iterator(head, min); } iterator end() { //endè¡¨ç¤ºç»“æŸæ ‡è®° return iterator(head, nullptr); } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:3:12","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å®Œæ•´ä»£ç  æˆ‘çš„GitHub ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:4:0","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"AVLTree.h // // Created by Alone on 2021/10/12. // #include \u003calgorithm\u003e#include \u003ccstdio\u003e#include \u003ccassert\u003e #ifndef MY_TINY_STL_AVLTREE_H #define MY_TINY_STL_AVLTREE_H namespace L_B__ { struct node { int val; int depth; node *lchild; node *rchild; node() : val(0), lchild(nullptr), rchild(nullptr) {} node(int x) : val(x), lchild(nullptr), rchild(nullptr) {} }; class AVLTree { /*date part*/ node *head; int length; public: /*construct and destruct part*/ AVLTree() : head(nullptr), length(0) {} AVLTree(int x) : head(new node(x)), length(1) {} ~AVLTree() { destroy(head); } public: /*iterator part*/ class iterator {//å°è£…è¿­ä»£å™¨ï¼šå†…éƒ¨ç±»--åªèƒ½è°ƒç”¨å¤–éƒ¨ç±»çš„é™æ€å‡½æ•° node *head; node *root; public: iterator(node *head, node *root) : head(head), root(root) {} iterator \u0026operator++(); bool operator==(const iterator \u0026x); bool operator!=(const iterator \u0026x); iterator operator++(int); iterator \u0026operator--(); iterator operator--(int); int operator*(); }; private: /*static member function*/ /*Rotate Part*/ static node *rotateRight(node *root); static node *rotateLeft(node *root); static node *rotateLeftRight(node *root); static node *rotateRightLeft(node *root); /*Destruct*/ static void destroy(node *root); /*Getter*/ static node *getNext(node *root, node *p); static node *getPre(node *root, node *p); static node *getMinNode(node *root); static node *getMaxNode(node *root); static int get_depth(node *root); static void update_depth(node *root); /*Insert\u0026Remove*/ static node *Insert(int x, node *root, int \u0026size); static node *remove(int x, node *root, int \u0026size); /*print_order*/ static void inorder(node *root); public: /*public interface*/ /*clear\u0026empty*/ void clear(); bool isEmpty(); /*find*/ bool find(int x); /*insert\u0026remove*/ void insert(int x); void remove(int x); /*size*/ int size(); /*begin\u0026end*/ iterator begin(); iterator end(); /*print*/ void inorder_print(); }; } #endif //MY_TINY_STL_AVLTREE_H ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:4:1","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"AVLTree.cpp // // Created by Alone on 2021/10/12. // #include \"AVLTree.h\" /*Rotate*/ L_B__::node *L_B__::AVLTree::rotateRight(L_B__::node *root) {//å³æ—‹ node *son = root-\u003elchild; root-\u003elchild = son-\u003erchild; son-\u003erchild = root; update_depth(root);//æ›´æ–°æ·±åº¦(å³æ—‹åªä¼šå¯¹è¿™ä¸¤ç»“ç‚¹äº§ç”Ÿå½±å“ update_depth(son); return son; } L_B__::node *L_B__::AVLTree::rotateLeft(L_B__::node *root) { node *son = root-\u003erchild; root-\u003erchild = son-\u003elchild; son-\u003elchild = root; update_depth(root); update_depth(son); return son; } L_B__::node *L_B__::AVLTree::rotateLeftRight(L_B__::node *root) { root-\u003elchild = rotateLeft(root-\u003elchild); return rotateRight(root); } L_B__::node *L_B__::AVLTree::rotateRightLeft(L_B__::node *root) { root-\u003erchild = rotateRight(root-\u003erchild); return rotateLeft(root); } /*Destruct*/ void L_B__::AVLTree::destroy(L_B__::node *root) { if (root == nullptr) return; destroy(root-\u003elchild); destroy(root-\u003erchild); delete root; root = nullptr; } /*Getter*/ L_B__::node *L_B__::AVLTree::getNext(L_B__::node *root, L_B__::node *p) { if (root == nullptr || p == nullptr) return nullptr; if (p-\u003eval \u003e= root-\u003eval) { return getNext(root-\u003erchild, p); } else { node *left = getNext(root-\u003elchild, p); return left ? left : root; } } L_B__::node *L_B__::AVLTree::getPre(L_B__::node *root, L_B__::node *p) { if (root == nullptr || p == nullptr)return nullptr; if (p-\u003eval \u003c= root-\u003eval) { return getPre(root-\u003elchild, p); } else { node *right = getPre(root-\u003erchild, p); return right ? right : root; } } L_B__::node *L_B__::AVLTree::getMinNode(L_B__::node *root) { if (root == nullptr) return nullptr; while (root-\u003elchild != nullptr) root = root-\u003elchild; return root; } L_B__::node *L_B__::AVLTree::getMaxNode(L_B__::node *root) { if (root == nullptr) return nullptr; while (root-\u003erchild != nullptr) root = root-\u003erchild; return root; } int L_B__::AVLTree::get_depth(L_B__::node *root) { if (root == nullptr) return 0; return root-\u003edepth; } void L_B__::AVLTree::update_depth(L_B__::node *root) { if (root == nullptr) return; root-\u003edepth = std::max(get_depth(root-\u003elchild), get_depth(root-\u003erchild)) + 1; } /*Insert\u0026remove*/ L_B__::node *L_B__::AVLTree::Insert(int x, L_B__::node *root, int \u0026size) { if (root == nullptr) { root = new node(x); size++;//åˆ›å»ºç»“ç‚¹åsize++ } else if (x \u003c root-\u003eval) { root-\u003elchild = Insert(x, root-\u003elchild, size); //ç”±äºåœ¨æ›´æ–°è¯¥rootç»“ç‚¹ä¹‹å‰ï¼Œå½“å¹³è¡¡åº¦æœªè¾¾åˆ°è¯¥è¦æ±‚ä¹‹å‰è‚¯å®šä»¥åŠæ˜¯è¿›è¡Œäº†update_depthæ“ä½œ if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == 2) root = x \u003c root-\u003elchild-\u003eval ? rotateRight(root) : rotateLeftRight(root); } else if (x \u003e root-\u003eval) { root-\u003erchild = Insert(x, root-\u003erchild, size); if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == -2) root = x \u003e root-\u003erchild-\u003eval ? rotateLeft(root) : rotateRightLeft(root); } update_depth(root); return root; } L_B__::node *L_B__::AVLTree::remove(int x, L_B__::node *root, int \u0026size) { if (root == nullptr) return nullptr; if (x == root-\u003eval) { /*å·¦å³å­æ ‘å‡ä¸ä¸ºç©º---ç”¨ä¸­åºçš„å‰é©±æˆ–è€…åç»§æ¥è¿›è¡Œæ›¿æ¢*/ if (root-\u003elchild != nullptr \u0026\u0026 root-\u003erchild != nullptr) { /*æ ¹æ®å·¦å³å­æ ‘çš„æ·±åº¦æ¥é€‰æ‹©åˆ é™¤æ›¿æ¢å“ªè¾¹çš„*/ if (get_depth(root-\u003elchild) \u003e get_depth(root-\u003erchild)) { node *t = getMaxNode(root-\u003elchild); root-\u003eval = t-\u003eval; root-\u003elchild = remove(t-\u003eval, root-\u003elchild, size); } else { node *t = getMinNode(root-\u003erchild); root-\u003eval = t-\u003eval; root-\u003erchild = remove(t-\u003eval, root-\u003erchild, size); } } /*å·¦å³å­æ ‘è‡³å°‘æœ‰ä¸€ä¸ªä¸ºç©ºçš„æƒ…å†µï¼Œç›´æ¥å¾€ä¸‹èµ°ä¸€æ­¥å³å¯*/ else { node *tmp = root-\u003elchild == nullptr ? root-\u003erchild : nullptr; if (tmp != nullptr) { *root = *tmp; delete tmp; } else { delete root; root = nullptr; } //åˆ é™¤æ—¶size-- size--; } } else if (x \u003c root-\u003eval) { root-\u003elchild = remove(x, root-\u003elchild, size); if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == -2) root = get_depth(root-\u003erchild-\u003elchild) \u003e get_depth(root-\u003erchild-\u003erchild) ? rotateRightLeft(root) : rotateLeft(root); } else { root-\u003erchild = remove(x, root-\u003erchild, size); if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == 2) root = get_depth(root-\u003elchild-\u003erchild) \u003e get_depth(root-\u003elchild-\u003elchild) ? rotateLeftRight(root) : rotateRight(root); } return root; } /*print part*/ void L_B__::AVL","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:4:2","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æµ‹è¯• æ³¨æ„ï¼šä»¥ä¸‹æ•°æ®ç”±äºå­˜åœ¨å¤§é‡ç›¸åŒçš„å€¼ï¼Œè€Œæˆ‘å†™çš„è¿™ä¸ªAVLTreeå¹¶æœªå¯¹ç›¸åŒçš„å€¼è¿›è¡Œå­˜å‚¨ï¼Œæ‰€ä»¥èŠ‚çœäº†å¤§é‡æ’å…¥æ—¶å€™çš„è°ƒæ•´æ—¶é—´ï¼Œæ‰€ä»¥æ‰èƒ½è¾¾åˆ°ä¸é”™çš„æ’å…¥æ€§èƒ½ï¼Œå®é™…ä¸Šåªè¦å®é™…æ’å…¥çš„æ•°æ®å¤Ÿå¤šï¼Œå’Œçº¢é»‘æ ‘çš„å·®è·å°±è¶Šå¤§ï¼Œæˆ‘ä¹‹å‰è¯•è¿‡åäº¿ä¸é‡å¤æ•°æ®æ’å…¥AVLå’ŒRBçš„æµ‹è¯•ï¼ŒAVLè¿è¡Œå‡ åˆ†é’Ÿï¼Œè€ŒRBä¸€åˆ†é’Ÿå†…è§£å†³ã€‚ä½†æŸ¥æ‰¾å’Œåˆ é™¤æ–¹é¢AVLä»ç„¶æ˜¯åŠæ‰“RB(æ¯•ç«Ÿä¸¥æ ¼å¹³è¡¡æ ‘ ä¸STLä¸­çš„setï¼ˆçº¢é»‘æ ‘ï¼‰è¿›è¡Œå¯¹æ¯”ï¼š ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:5:0","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æµ‹è¯•ä»£ç  int main() { using namespace std; AVLTree x; set\u003cint\u003eQ; printf(\"æ’å…¥æµ‹è¯•\\n\"); auto start = clock(); for (int i = 0; i \u003c 100000000; ++i) { x.insert(i%10000000); } std::cout\u003c\u003c\"AVLTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cstd::endl; start = clock(); for (int i = 0; i \u003c 100000000; ++i) { Q.insert(i%10000000); } std::cout\u003c\u003c\"RBTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cstd::endl; printf(\"è¿­ä»£æµ‹è¯•\\n\"); start = clock(); for(auto it = x.begin();it!=x.end();++it){ continue; } std::cout\u003c\u003c\"AVLTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cstd::endl; start = clock(); for(auto it = Q.begin();it!=Q.end();++it){ continue; } std::cout\u003c\u003c\"RBTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cstd::endl; printf(\"æŸ¥æ‰¾æµ‹è¯•\\n\"); start = clock(); for (int i = 0; i \u003c 100000000; ++i) { x.find(i); } std::cout\u003c\u003c\"AVLTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cstd::endl; start = clock(); for(int i = 0;i\u003c100000000;++i){ Q.count(i); } std::cout\u003c\u003c\"RBTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cstd::endl; printf(\"åˆ é™¤æµ‹è¯•\\n\"); start = clock(); for(int i=0;i\u003c10000000;i++){ x.remove(i); } std::cout\u003c\u003c\"AVLTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003c\"length\"\u003c\u003cx.size()\u003c\u003cstd::endl; start = clock(); for(int i=0;i\u003c10000000;i++){ Q.erase(i); } std::cout\u003c\u003c\"RBTree\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003c\"length\"\u003c\u003cQ.size()\u003c\u003cstd::endl; return 0; } ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:5:1","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æµ‹è¯•æ€»ç»“ é€šè¿‡ä¸æ–­å¯¹æ¯”çº¢é»‘æ ‘(RB)å’ŒAVLï¼Œå¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š æ’å…¥æ“ä½œçº¢é»‘æ ‘æ¯”AVLå¿«å¾ˆå¤šï¼Œæ•°æ®é‡è¶Šå¤§ä¼˜åŠ¿è¶Šæ˜æ˜¾ã€‚ æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œçº¢é»‘æ ‘å´æ˜¯æ¯”AVLæ…¢å¾ˆå¤šï¼ŒåŒæ ·ä¹Ÿæ˜¯æ•°æ®é‡è¶Šå¤§è¶Šæ˜æ˜¾ã€‚ æ€»çš„æ¥è¯´ï¼Œå¦‚æœæ‰€éœ€è¦ç®¡ç†çš„æ•°æ®é‡å¾ˆå¤§ï¼Œå¹¶ä¸”éœ€è¦é¢‘ç¹çš„æ’å…¥ï¼Œé‚£ä¹ˆçº¢é»‘æ ‘æ›´é€‚åˆä½ ï¼Œå¦‚æœåªéœ€è¦æ’å…¥ä¸€æ¬¡åï¼Œå¯¹æ•°æ®è¿›è¡ŒæŸ¥æ‰¾ç®¡ç†ï¼Œé‚£ä¹ˆAVLæ›´åŠ çš„é€‚åˆä½ ï¼ ","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:5:2","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"è§£é¢˜æµ‹è¯• OJå¹³å° åœ¨ä»¥ä¸Šè®¾è®¡çš„åŸºç¡€ä¸ŠåŠ ä¸ªget_headæ–¹æ³•å³å¯ã€‚ #include \u003cbits/stdc++.h\u003e struct node { int val; int depth; node *lchild; node *rchild; node() : val(0), lchild(nullptr), rchild(nullptr) {} node(int x) : val(x), lchild(nullptr), rchild(nullptr) {} }; class AVLTree { /*date part*/ node *head; int size; public: /*construct and destruct part*/ AVLTree() : head(nullptr),size(0) {} AVLTree(int x) : head(new node(x)),size(1) {} ~AVLTree() { destroy(head); } private: /*static function part*/ static node *rotateRight(node *root) {//å³æ—‹ node *son = root-\u003elchild; root-\u003elchild = son-\u003erchild; son-\u003erchild = root; update_depth(root);//æ›´æ–°æ·±åº¦(å³æ—‹åªä¼šå¯¹è¿™ä¸¤ç»“ç‚¹äº§ç”Ÿå½±å“ update_depth(son); return son; } static node *rotateLeft(node *root) { node *son = root-\u003erchild; root-\u003erchild = son-\u003elchild; son-\u003elchild = root; update_depth(root); update_depth(son); return son; } static node *rotateLeftRight(node *root) { root-\u003elchild = rotateLeft(root-\u003elchild); return rotateRight(root); } static node *rotateRightLeft(node *root) { root-\u003erchild = rotateRight(root-\u003erchild); return rotateLeft(root); } static void destroy(node *root) { if (root == nullptr) return; destroy(root-\u003elchild); destroy(root-\u003erchild); delete root; root = nullptr; } static node* getMinNode(node* root){ if(root== nullptr) return nullptr; while(root-\u003elchild!= nullptr) root = root-\u003elchild; return root; } static node* getMaxNode(node* root){ if(root== nullptr) return nullptr; while(root-\u003erchild!= nullptr) root = root-\u003erchild; return root; } static int get_depth(node *root) {//å¾—åˆ°æ·±åº¦ if (root == nullptr) return 0; return root-\u003edepth; } static void update_depth(node *root) { if (root == nullptr) return; root-\u003edepth = std::max(get_depth(root-\u003elchild), get_depth(root-\u003erchild)) + 1; } static node *Insert(int x, node *root) {//æ‰€æœ‰çš„deepçš„æ›´æ–°éƒ½åœ¨ååºéå†å if (root == nullptr) { root = new node(x); } else if (x \u003c= root-\u003eval) { root-\u003elchild = Insert(x, root-\u003elchild); //ç”±äºåœ¨æ›´æ–°è¯¥rootç»“ç‚¹ä¹‹å‰ï¼Œå½“å¹³è¡¡åº¦æœªè¾¾åˆ°è¯¥è¦æ±‚ä¹‹å‰è‚¯å®šä»¥åŠæ˜¯è¿›è¡Œäº†update_depthæ“ä½œ if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == 2) root = x \u003c= root-\u003elchild-\u003eval ? rotateRight(root) : rotateLeftRight(root); } else if (x \u003e root-\u003eval) { root-\u003erchild = Insert(x, root-\u003erchild); if (get_depth(root-\u003elchild) - get_depth(root-\u003erchild) == -2) root = x \u003e= root-\u003erchild-\u003eval ? rotateLeft(root) : rotateRightLeft(root); } update_depth(root); return root; } static node *remove(int x, node *root) { if (root == nullptr) return nullptr; if (x == root-\u003eval) { /*å·¦å³å­æ ‘å‡ä¸ä¸ºç©º---ç”¨ä¸­åºçš„å‰é©±æˆ–è€…åç»§æ¥è¿›è¡Œæ›¿æ¢*/ if (root-\u003elchild != nullptr \u0026\u0026 root-\u003erchild != nullptr) { /*æ ¹æ®å·¦å³å­æ ‘çš„æ·±åº¦æ¥é€‰æ‹©åˆ é™¤æ›¿æ¢å“ªè¾¹çš„*/ if(get_depth(root-\u003elchild)\u003eget_depth(root-\u003erchild)){ node* t = getMaxNode(root-\u003elchild); root-\u003eval = t-\u003eval; root-\u003elchild = remove(t-\u003eval,root-\u003elchild); }else{ node* t = getMinNode(root-\u003erchild); root-\u003eval = t-\u003eval; root-\u003erchild = remove(t-\u003eval,root-\u003erchild); } } /*å·¦å³å­æ ‘è‡³å°‘æœ‰ä¸€ä¸ªä¸ºç©ºçš„æƒ…å†µï¼Œç›´æ¥å¾€ä¸‹èµ°ä¸€æ­¥å³å¯*/ else{ node* tmp = root-\u003elchild== nullptr?root-\u003erchild: nullptr; if(tmp!= nullptr){ *root = *tmp; delete tmp; } else{ delete root; root = nullptr; } } } else if (x \u003c root-\u003eval) { root-\u003elchild = remove(x, root-\u003elchild); if(get_depth(root-\u003elchild)-get_depth(root-\u003erchild)==-2) root = get_depth(root-\u003erchild-\u003elchild)\u003eget_depth(root-\u003erchild-\u003erchild)?rotateRightLeft(root): rotateLeft(root); } else { root-\u003erchild = remove(x, root-\u003erchild); if(get_depth(root-\u003elchild)-get_depth(root-\u003erchild)==2) root = get_depth(root-\u003elchild-\u003erchild)\u003eget_depth(root-\u003elchild-\u003elchild)?rotateLeftRight(root): rotateRight(root); } return root; } static void inorder(node *root) { if (root != nullptr) { inorder(root-\u003elchild); printf(\"%d \", root-\u003eval); inorder(root-\u003erchild); } } public: /*public function part*/ void insert(int x) { //é€’å½’æ–¹å¼æ’å…¥ï¼Œæ–¹ä¾¿åç»­å¤„ç† head = Insert(x, head); size++; } void remove(int x){ assert(size!=0); head = remove(x,head); size--; } void clear() { destroy(head); } bool isEmpty() { return head == nullptr; } bool find(int x) { //æŸ¥æ‰¾ç›´æ¥è¿­ä»£æ–¹å¼å³å¯ node *f = head; while (f != nullptr) { if (x == f-\u003eval) return true; else if (x \u003c f-\u003eval) f = f-\u003elchild; else f = f-\u003erchild; } return false; } void i","date":"2022-02-16","objectID":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/:6:0","tags":["å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨"],"title":"å¾’æ‰‹å†™çš„AVLç«Ÿç„¶æ¯”STLä¸­çš„çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ï¼Ÿâœ¨","uri":"/posts/%E5%BE%92%E6%89%8B%E5%86%99%E7%9A%84avl%E7%AB%9F%E7%84%B6%E6%AF%94stl%E4%B8%AD%E7%9A%84%E7%BA%A2%E9%BB%91%E6%A0%91%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å…³äºä¸ºä»€ä¹ˆçªç„¶æƒ³å†™ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Ÿ å—¯ã€‚ã€‚ä¸»è¦æ˜¯å› ä¸ºæœ€è¿‘åœ¨ç¿»çœ‹ã€ŠSTLæºç å‰–æã€‹ï¼Œç„¶åå‘ç°åŸæ¥STLæºç æ˜¯å¦‚æ­¤çš„åºå¤§ä¸”å¤æ‚ï¼Œè€ŒåˆåŠå…¶å…·æœ‰æ¡ç†ï¼Œè€Œå…¶ä¸­æœ€éš¾çš„å°±æ˜¯å„ä¸ªç»„ä»¶çš„å…³ç³»ï¼Œè€Œå¯¹å¤–æ‰€å±•ç°çš„æ•ˆæœå°±æ˜¯æ³›å‹ç¼–ç¨‹ï¼Œå¯¹æˆ‘è¿™ä¸ªåˆå…¥é—¨èœé¸Ÿæ¥è¯´çš„è¯ï¼Œæˆ‘ä¹‹å‰å¯¹æ¨¡æ¿ä»…ä»…åœç•™åœ¨çŸ¥é“ï¼Œä½†æ²¡ç”¨è¿‡çš„é˜¶æ®µğŸ¤£ ç”±äºSTLåº“ä¸­å¯¹æ¨¡æ¿çš„éªšæ“ä½œä¸€ä¸ªæ¥ä¸€ä¸ªï¼Œæ²¡ä¸ªæ¨¡æ¿çš„åŸºç¡€ï¼Œæ ¹æœ¬å°±çœ‹ä¸æ‡‚ï¼Œæ‰€ä»¥æˆ‘ç—›å®šæ€ç—›ï¼Œä¸€å®šè¦äº²æ‰‹ç”¨æ¨¡æ¿å®ç°ä¸€ä¸ªæ•°æ®ç»“æ„(ä¹‹å‰ç”¨éæ¨¡æ¿å®ç°è¿‡ä¸€äº›)ã€‚ å¥½äº†ï¼Œç›®æ ‡æœ‰äº†ï¼Œç”¨æ¨¡æ¿å®ç°ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œé‚£æ•°æ®ç»“æ„è¿™ä¹ˆå¤šï¼Œæˆ‘åˆ°åº•å®ç°å“ªä¸ªå‘¢ï¼Ÿè¦ä¸å°±æŠŠå †ç»™å†²äº†ï¼Ÿæˆ‘ä¸€æ‹å¤§è…¿ï¼Œå¯è¡Œï¼ğŸ‘ æœ€åå…³äºå®ƒçš„å…·ä½“å®ç°ï¼Œæˆ‘è‚¯å®šä¸ä¼šåƒSTLé‚£æ ·è€ƒè™‘çš„é‚£ä¹ˆå‘¨åˆ°ï¼Œç»„ä»¶åˆ†å·¥é½å…¨ï¼Œæ¯•ç«ŸSTLæ˜¯åŒ…å«å…­å¤§ç»„ä»¶çš„ï¼ å…·ä½“å¦‚ä¸‹å›¾ï¼š ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:1:0","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å¯¹åˆšç”¨æ¨¡æ¿çš„C++æ–°æ‰‹è€Œè¨€çš„å‡ å¤§å‘ç‚¹ ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:2:0","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"ä¹ æƒ¯æ€§å†™.hå’Œ.cppæ–‡ä»¶ å¯¹äºå¯¹C++æœ‰ä¸€å®šæŒæ¡ï¼Œä½†åŸºæœ¬æ²¡ç”¨è¿‡æ¨¡æ¿çš„äººè€Œè¨€ï¼Œå£°æ˜ä¸å®šä¹‰æ—©å°±çƒ‚ç†Ÿäºå¿ƒçš„.hå’Œ.cppæ–‡ä»¶ã€‚ ç„¶è€Œï¼Œå½“ä½ ä½¿ç”¨æ¨¡æ¿çš„æ—¶å€™ï¼Œå†å»å§å£°æ˜å’Œå®šä¹‰åˆ†å¼€ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼é™¤éåœ¨.hæ–‡ä»¶æœ«å°¾æœ‰åŒ…å«.cppæ–‡ä»¶ã€‚ç„¶è€Œè¿™æ ·çš„æ“ä½œæ˜¯å¾ˆå¤šä½™çš„ï¼ æ‰€ä»¥åœ¨ç”¨æ¨¡æ¿å®ç°ç±»çš„æ—¶å€™ï¼Œæœ€å¥½åªå†™ä¸€ä¸ª.hæ–‡ä»¶ï¼ ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:2:1","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å¯¹æ¨¡æ¿ç‰¹åŒ–è¿ç”¨å’Œç†è§£å¾ˆå°‘ æˆ‘ç°åœ¨å°±å¤„äºè¿™ä¸ªçŠ¶æ€ï¼Œè¯´ä¸ä¸Šæ¥è¯¥æ€ä¹ˆè§„èŒƒğŸ¤£ ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:2:2","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æˆ‘çš„Heapå®ç° ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:3:0","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ€»è§ˆHeapç±» è¿™æ˜¯æˆ‘ç”»çš„æ ‘çŠ¶å›¾ï¼Œæˆ‘è®¾è®¡çš„Heapä¸€å…±åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š ä¸€ã€ æˆå‘˜å˜é‡ è¿™éƒ¨åˆ†æ²¡å•¥å¥½è¯´çš„ï¼Œå°±ç”¨ä¸€ä¸ª nums æŒ‡é’ˆå­˜å‚¨å˜é‡æ•°æ®ï¼Œlength è®°å½•å½“å‰çš„ nums å·²ç»ä½¿ç”¨çš„é•¿åº¦ï¼Œcapacity å­˜å‚¨å½“å‰ nums çš„æœ€å¤§å®¹é‡ã€‚ äºŒã€ é™æ€æˆå‘˜å‡½æ•° æˆ‘å°†å †çš„åŸºæœ¬æ“ä½œå°è£…ä¸ºé™æ€æˆå‘˜å˜é‡çš„åˆè¡·æ˜¯æ–¹ä¾¿ï¼Œå¯¹å¤–å®ç°å †åŒ–çš„åŠŸèƒ½ï¼Œå³ä½¿ä½¿ç”¨å¤–éƒ¨æ•°ç»„ä¹Ÿèƒ½å®ç°å †ã€‚ ä¸‹é¢ç®€å•çš„ä»‹ç»ä¸€ä¸‹è¿™å‡ ä¸ªå‡½æ•°ï¼ˆåé¢å†è¯¦è§£ï¼‰ï¼š sift_down()ï¼šæ¥å—å››ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯ç”¨äºå‘ä¸‹å †åŒ–çš„æ•°ç»„ï¼Œèµ·å§‹çš„å †åŒ–ä½ç½®ï¼Œç»“æŸçš„å †åŒ–ä½ç½®ï¼Œä»¥åŠä¸€ä¸ªä»¿å‡½æ•°(ç”¨äºè®¾å®šæœ€å¤§/æœ€å°å †)ã€‚ static void sift_down(T \u0026nums, size_t start, size_t len, _CMP cmp); sift_up()ï¼šå‘ä¸Šå †åŒ–çš„æ“ä½œï¼Œä¸ä¸Šé¢çš„ç±»ä¼¼ï¼Œå°‘äº†ç»“æŸä¿¡æ¯ï¼Œå› ä¸ºç»“æŸä¿¡æ¯ä¸€èˆ¬éƒ½æ˜¯0. static void sift_up(T \u0026nums, size_t start, _CMP cmp); heapify()ï¼šè°ƒç”¨å‘ä¸‹å †åŒ–å‡½æ•°ï¼Œå®ç°å®Œå…¨å †åŒ–ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå¾…å †åŒ–æ•°ç»„å’Œæ•°ç»„é•¿åº¦ static void heapify(T \u0026nums, size_t len); print()ï¼šä¸»è¦å®ç°ä¸€ä¸ªç”¨äºæµ‹è¯•åŠŸèƒ½çš„æ³›å‹æ‰“å°æ¥å£ï¼Œæ¥æ”¶çš„å‚æ•°è‚¯å®šå°±æ˜¯æ•°ç»„å’Œæ•°ç»„é•¿åº¦äº†ã€‚(ç•¥è¿‡ï¼Œä¸é‡è¦) ä¸‰ã€ç±»çš„å†…éƒ¨æˆå‘˜å‡½æ•°(æ”¾æºä»£ç è¯¦è§£) æ„é€ å’Œææ„å‡½æ•°ï¼šå¾ˆç®€å•çš„ï¼Œæˆ‘ç›´æ¥æ”¾æºä»£ç å‡ºæ¥ã€‚ Heap() : length(0), capacity(1) {//æš‚æ—¶æ²¡æœ‰å¯¹æ„é€ å‡½æ•°æ‹“å±•çš„æ‰“ç®— nums = new _T[capacity]; } ~Heap(){ delete []nums; } push()ï¼šæ¯æ¬¡å…¥é˜Ÿåè¿›è¡Œä¸€æ¬¡å‘ä¸Šå †åŒ–ï¼Œè¿™ä¸ªç®€å•ï¼Œç›´æ¥è°ƒä¸Šé¢çš„é™æ€æ¥å£å°±è¡Œäº†ã€‚æ³¨æ„ï¼šæˆ‘è¿™é‡Œé‡‡ç”¨çš„æ˜¯å€å¢çš„æ–¹å¼è¿›è¡Œå»¶ä¼¸å†…å­˜ï¼Œä¸€æ—¦å‡ºç°capacityä¸å¤Ÿç”¨çš„æƒ…å†µï¼Œå°±é‡æ–°åˆ†é…å†…å­˜ï¼Œå…¶ä¸­æ•°æ®æ‹·è´æ–¹é¢ç”¨äº†copyå‡½æ•°ã€‚ void push(_T val) { if (length \u003e= capacity) {//ä¸¤å€ä¸¤å€çš„æ‰©å®¹ _T *t = nums; capacity *= 2; nums = new _T[capacity]; std::copy(t, t + length, nums); delete[] t; } nums[length] = val; sift_up(nums, length, _CMP()); length++; } pop()ï¼šè¿™ä¸ªæ“ä½œæ˜¯éœ€è¦ä¸€ç‚¹æŠ€å·§çš„â€“ä¸ºäº†ä¸ç ´åæ•´ä½“å †åŒ–çš„ç»“æ„ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠæ ¹éƒ¨ä¸å°¾éƒ¨å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œå†ä»æ ¹éƒ¨å¾€ä¸‹é‡æ–°å †åŒ–ä¸€æ¬¡(æ³¨æ„æ­¤æ—¶å †åŒ–çš„ç»ˆç‚¹åº”è¯¥è¦æ¯”åŸæ¥å°1)ã€‚ è¿˜é‡‡å–äº†Cè¯­è¨€çš„æ–­è¨€æ–¹å¼ï¼Œé˜²æ­¢popæ“ä½œçš„æ—¶å€™ï¼Œå †ä¸­å·²ç»æ²¡æœ‰å…ƒç´ ã€‚ void pop() { if (length == 0) assert(0); length--; std::swap(nums[0], nums[length]);//å®é™…ä¸Špopæ“ä½œå°±ç›¸å½“äºå †æ’çš„ä¸€æ¬¡è¿‡ç¨‹ sift_down(nums, 0, length, _CMP()); } top()ï¼šç›´æ¥å–æ ¹èŠ‚ç‚¹çš„å€¼ã€‚ _T top() { if (length == 0) assert(0); return nums[0]; } print()ï¼šç”¨äºæ‰“å°å†…éƒ¨æ•°æ®çš„æ¥å£ã€‚ void print() {//å†…éƒ¨printæ–¹ä¾¿æµ‹è¯• print(nums, length);//è°ƒç”¨é™æ€print } ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:3:1","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å…³äºå †åŒ–å‡½æ•°çš„å®ç° æˆ‘ç›´æ¥å¼€æ”¾ä»£ç å®ç°ï¼Œå…·ä½“çš„ç†è§£é å¤§å®¶äº†ã€‚ sift_down() template\u003ctypename T\u003e static void sift_down(T \u0026nums, size_t start, size_t len, _CMP cmp) {//æœ€å°å †è¿˜æ˜¯æœ€å¤§å †ç”±cmpå†³å®š int end = len; int parent = start; int child = parent * 2 + 1; while (child \u003c end) { if (child + 1 \u003c end \u0026\u0026 cmp(nums[child], nums[child + 1])) child++; if (!cmp(nums[parent], nums[child])) { break; } else { std::swap(nums[parent], nums[child]); parent = child; child = parent * 2 + 1; } } } sift_up template\u003ctypename T\u003e static void sift_up(T \u0026nums, size_t start, _CMP cmp) {//æœ€å°å †è¿˜æ˜¯æœ€å¤§å †ç”±cmpå†³å®š int end = 0; int child = start; int parent = (child - 1) / 2; while (child \u003e end) { if (!cmp(nums[parent], nums[child])) { break; } else { std::swap(nums[parent], nums[child]); child = parent; parent = (child - 1) / 2; } } } heapify() template\u003ctypename T\u003e static void heapify(T \u0026nums, size_t len) {//ç”¨äºå¯¹æ•°ç»„è¿›è¡Œå †åŒ– for (int i = len - 1; i \u003e= 0; i--) { sift_down\u003cT\u003e(nums, i, len, _CMP()); } } print() template\u003ctypename T\u003e static void print(T \u0026nums, size_t length) { for (int i = 0; i \u003c length; i++) { std::cout \u003c\u003c nums[i] \u003c\u003c ' '; } } ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:3:2","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å…³äºæ‰€ç”¨æ¨¡æ¿çš„è¯´æ˜ ç±»æ¨¡æ¿(å…¨å±€å‡å¯ç”¨çš„ç±»å‹å‚æ•°)ï¼š å…¶ä¸­ _T ç”¨äºè¡¨ç¤ºæ•°ç»„å…ƒç´ çš„ç±»å‹ï¼Œé»˜è®¤ä¸ºintï¼Œ_CMP åˆ™æ˜¯ä¸€ä¸ªç±»(ä»¿å‡½æ•°)çš„ç±»å‹ï¼Œé»˜è®¤ä¸ºå·²ç»æä¾›çš„cmpä»¿å‡½æ•°ï¼Œæ‰€ä»¥å¦‚æœä¸ºè‡ªå®šä¹‰ç±»å‹æ„å»ºå †ï¼Œåˆ™ä¸€å®šè¦è‡ªå·±å†™å¥½ç›¸åº”çš„ä»¿å‡½æ•°è¿›è¡Œä¼ é€’ã€‚ template\u003ctypename T = int\u003e //ç”¨äºé»˜è®¤æ’åºçš„ä»¿å‡½æ•°ï¼Œé»˜è®¤ä¸ºå¤§é¡¶å † class cmp { public: bool operator()(T \u0026a, T \u0026b) { return a \u003c b; } }; template\u003ctypename _T = int, typename _CMP = cmp\u003c_T\u003e\u003e æˆå‘˜å‡½æ•°æ¨¡æ¿ ä¸ºäº†ä¾¿äºå¤–ç•Œä½¿ç”¨é™æ€æˆå‘˜å‡½æ•°è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œæ‰€ä»¥æ¯ä¸ªé™æ€æˆå‘˜å‡½æ•°éƒ½æä¾›äº†å¯¹åº”çš„ç±»å‹æ¨¡æ¿ï¼Œä½†æ¯”è¾ƒæ“ä½œçš„ä»¿å‡½æ•°ç”¨çš„è¿˜æ˜¯å’Œç±»æ¨¡æ¿ä¸€æ ·çš„ç±»å‹ã€‚ å¦‚ï¼š template\u003ctypename T\u003e static void sift_up(T \u0026nums, size_t start, _CMP cmp) {//æœ€å°å †è¿˜æ˜¯æœ€å¤§å †ç”±cmpå†³å®š int end = 0; int child = start; int parent = (child - 1) / 2; while (child \u003e end) { if (!cmp(nums[parent], nums[child])) { break; } else { std::swap(nums[parent], nums[child]); child = parent; parent = (child - 1) / 2; } } } ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:3:3","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ•´åˆæ‰€æœ‰ä»£ç ï¼Œå®ç°Heapç±»æ¨¡æ¿ è¿™é‡Œç”¨ä¸€ä¸ªå‘½åç©ºé—´å¥—ä½æ˜¯æœ€å¥½ï¼Œé˜²æ­¢å‘½åå†²çªï¼æˆ‘è¿™é‡Œç”¨çš„è‡ªå·±å¸¸ç”¨çš„ç½‘åhhh // // Created by Alone on 2021/10/2. // #ifndef MY_TINY_STL_HEAP_H #define MY_TINY_STL_HEAP_H #include \u003ciostream\u003e#include \u003ccassert\u003e#include \u003calgorithm\u003e namespace L_B__ { template\u003ctypename T=int\u003e//ç”¨äºé»˜è®¤æ’åºçš„ä»¿å‡½æ•°ï¼Œé»˜è®¤ä¸ºå¤§é¡¶å † class cmp { public: bool operator()(T \u0026a, T \u0026b) { return a \u003c b; } }; //@æ¨¡æ¿ç±»çš„å®ç° template\u003ctypename _T=int, typename _CMP = cmp\u003c_T\u003e\u003e class Heap { //ç§æœ‰æˆå‘˜ _T *nums; size_t length; size_t capacity; public://@é™æ€æˆå‘˜å‡½æ•°ï¼Œå¯¹å¤–å¯¹å†…éƒ½èƒ½å®ç°åŠŸèƒ½ template\u003ctypename T\u003e static void sift_down(T \u0026nums, size_t start, size_t len, _CMP cmp) {//æœ€å°å †è¿˜æ˜¯æœ€å¤§å †ç”±cmpå†³å®š int end = len; int parent = start; int child = parent * 2 + 1; while (child \u003c end) { if (child + 1 \u003c end \u0026\u0026 cmp(nums[child], nums[child + 1])) child++; if (!cmp(nums[parent], nums[child])) { break; } else { std::swap(nums[parent], nums[child]); parent = child; child = parent * 2 + 1; } } } template\u003ctypename T\u003e static void sift_up(T \u0026nums, size_t start, _CMP cmp) {//æœ€å°å †è¿˜æ˜¯æœ€å¤§å †ç”±cmpå†³å®š int end = 0; int child = start; int parent = (child - 1) / 2; while (child \u003e end) { if (!cmp(nums[parent], nums[child])) { break; } else { std::swap(nums[parent], nums[child]); child = parent; parent = (child - 1) / 2; } } } template\u003ctypename T\u003e static void heapify(T \u0026nums, size_t len) {//ç”¨äºå¯¹æ•°ç»„è¿›è¡Œå †åŒ– for (int i = len - 1; i \u003e= 0; i--) { sift_down\u003cT\u003e(nums, i, len, _CMP()); } } template\u003ctypename T\u003e static void print(T \u0026nums, size_t length) {//ä¸“ä¸ºæ‰“å°åŸå§‹æ•°ç»„ for (int i = 0; i \u003c length; i++) { std::cout \u003c\u003c nums[i] \u003c\u003c ' '; } } public://@åŸºæœ¬çš„å†…éƒ¨æˆå‘˜å‡½æ•° Heap() : length(0), capacity(1) {//æš‚æ—¶æ²¡æœ‰å¯¹æ„é€ å‡½æ•°æ‹“å±•çš„æ‰“ç®— nums = new _T[capacity]; } ~Heap() { delete[]nums; } void push(_T val) { if (length \u003e= capacity) {//ä¸¤å€ä¸¤å€çš„æ‰©å®¹ _T *t = nums; capacity *= 2; nums = new _T[capacity]; std::copy(t, t + length, nums); delete[] t; } nums[length] = val; sift_up(nums, length, _CMP()); length++; } void pop() { if (length == 0) assert(0); length--; std::swap(nums[0], nums[length]);//å®é™…ä¸Špopæ“ä½œå°±ç›¸å½“äºå †æ’çš„ä¸€æ¬¡è¿‡ç¨‹ sift_down(nums, 0, length, _CMP()); } _T top() { if (length == 0) assert(0); return nums[0]; } void print() {//å†…éƒ¨printæ–¹ä¾¿æµ‹è¯• print(nums, length); } }; } #endif //MY_TINY_STL_HEAP_H ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:3:4","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æˆ‘çš„Heapæµ‹è¯• ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:4:0","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ­£ç¡®æ€§æµ‹è¯•(ä¸STL priority_queueå¯¹æ¯”) ç»å†è¿™æ•°åƒä¸‡æ•°æ®çš„æµ‹è¯•ï¼Œä»ç„¶å’ŒSTLçš„æ­£ç¡®æ€§æ˜¯ä¸€æ ·çš„ï¼Œè¯´æ˜æ­£ç¡®æ€§æ˜¯æœ‰äº†ä¿éšœçš„ã€‚ æµ‹è¯•ä»£ç  #include \"Heap.h\"#include \u003cctime\u003e#include \u003cqueue\u003eusing namespace std; #define MAX_SIZE 10000000 int main() { L_B__::Heap\u003cint\u003e a; priority_queue\u003cint\u003e Q; int step = 1; for(int i=1;i\u003cMAX_SIZE;i++){ a.push(step%i); Q.push(step%i); step += 2; } cout\u003c\u003c\"STL-\u003e\"; for (int i = 0; i \u003c 10; i++) { auto t = move(Q.top()); cout \u003c\u003c t\u003c\u003c' '; Q.pop(); } cout \u003c\u003c endl; cout \u003c\u003c \"My-\u003e\"; for (int i = 0; i \u003c 10; i++) { auto t = move(a.top()); cout \u003c\u003c t\u003c\u003c' '; a.pop(); } } ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:4:1","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ•ˆç‡æµ‹è¯•(ä¸STL priority_queueå¯¹æ¯”) 1000wæ•°æ®ä¸¤è€…çš„pushå’Œpopé€Ÿåº¦å¯¹æ¯” æ¬§è€¶ï¼æ¯”STLå¿«ä¸¤å€ï¼ï¼ğŸ±â€ğŸ å…¶å®è¿™æ ·ä¸æ˜¯å¾ˆå¥‡æ€ªï¼ŒSTLæœ¬æ¥å°±è¦å®ç°å’Œè€ƒè™‘å¾ˆå¤šäº‹æƒ…ï¼Œå„ç§ç»„ä»¶çš„å¥—å¨ƒï¼Œè€Œæˆ‘ä»¬åªæ˜¯å®ç°äº†è¿™æ ·ä¸€ä¸ªç®€å•çš„å †ï¼Œé‚£å½“ç„¶å¿«å¾ˆå¤šäº†ã€‚ æµ‹è¯•æºä»£ç  #include \"Heap.h\"#include \u003cctime\u003e#include \u003cqueue\u003eusing namespace std; #define MAX_SIZE 10000000 int main() { L_B__::Heap\u003cint\u003e a; priority_queue\u003cint\u003e Q; auto start = clock(); //@pushæµ‹è¯• int step = 1; for(int i=1;i\u003cMAX_SIZE;i++){ Q.push(step%i); step += 2; } cout\u003c\u003c\"STL Push:\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cendl; start = clock(); step = 1; for(int i=1;i\u003cMAX_SIZE;i++){ a.push(step%i); step += 2; } cout\u003c\u003c\"My Push:\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cendl; //@popæµ‹è¯• start = clock(); for(int i=1;i\u003cMAX_SIZE;i++){ Q.pop(); } cout\u003c\u003c\"STL Pop:\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cendl; start = clock(); for(int i=1;i\u003cMAX_SIZE;i++){ a.pop(); } cout\u003c\u003c\"My Pop:\"\u003c\u003cclock()-start\u003c\u003c\"ms\"\u003c\u003cendl; } ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:4:2","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"è§£é¢˜å®æµ‹(LeetCode 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ ) æˆ‘å»ï¼Œæœç„¶æ¯”stlçš„å¿«ä¸å°‘ğŸ¤£ ç›´æ¥æŠŠä»£ç cvæ”¾åˆ°LCå‰é¢ï¼Œç„¶åæµ‹è¯•ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹çš„æƒ…å†µã€‚ è§£é¢˜ä»£ç ï¼š struct S{ int a,b; }; class cmp{ public: bool operator()(S\u0026a,S\u0026b){ return a.b\u003cb.b; } }; namespace L_B__ { template\u003ctypename T=int\u003e//ç”¨äºé»˜è®¤æ’åºçš„ä»¿å‡½æ•°ï¼Œé»˜è®¤ä¸ºå¤§é¡¶å † class cmp { public: bool operator()(T \u0026a, T \u0026b) { return a \u003c b; } }; //@æ¨¡æ¿ç±»çš„å®ç° template\u003ctypename _T=int, typename _CMP = cmp\u003c_T\u003e\u003e class Heap { //ç§æœ‰æˆå‘˜ _T *nums; size_t length; size_t capacity; public://@é™æ€æˆå‘˜å‡½æ•°ï¼Œå¯¹å¤–å¯¹å†…éƒ½èƒ½å®ç°åŠŸèƒ½ template\u003ctypename T\u003e static void sift_down(T \u0026nums, size_t start, size_t len, _CMP cmp) {//æœ€å°å †è¿˜æ˜¯æœ€å¤§å †ç”±cmpå†³å®š int end = len; int parent = start; int child = parent * 2 + 1; while (child \u003c end) { if (child + 1 \u003c end \u0026\u0026 cmp(nums[child], nums[child + 1])) child++; if (!cmp(nums[parent], nums[child])) { break; } else { std::swap(nums[parent], nums[child]); parent = child; child = parent * 2 + 1; } } } template\u003ctypename T\u003e static void sift_up(T \u0026nums, size_t start, _CMP cmp) {//æœ€å°å †è¿˜æ˜¯æœ€å¤§å †ç”±cmpå†³å®š int end = 0; int child = start; int parent = (child - 1) / 2; while (child \u003e end) { if (!cmp(nums[parent], nums[child])) { break; } else { std::swap(nums[parent], nums[child]); child = parent; parent = (child - 1) / 2; } } } template\u003ctypename T\u003e static void heapify(T \u0026nums, size_t len) {//ç”¨äºå¯¹æ•°ç»„è¿›è¡Œå †åŒ– for (int i = len - 1; i \u003e= 0; i--) { sift_down\u003cT\u003e(nums, i, len, _CMP()); } } template\u003ctypename T\u003e static void print(T \u0026nums, size_t length) {//ä¸“ä¸ºæ‰“å°åŸå§‹æ•°ç»„ for (int i = 0; i \u003c length; i++) { std::cout \u003c\u003c nums[i] \u003c\u003c ' '; } } public://@åŸºæœ¬çš„å†…éƒ¨æˆå‘˜å‡½æ•° Heap() : length(0), capacity(1) {//æš‚æ—¶æ²¡æœ‰å¯¹æ„é€ å‡½æ•°æ‹“å±•çš„æ‰“ç®— nums = new _T[capacity]; } ~Heap() { delete[]nums; } void push(_T val) { if (length \u003e= capacity) {//ä¸¤å€ä¸¤å€çš„æ‰©å®¹ _T *t = nums; capacity *= 2; nums = new _T[capacity]; std::copy(t, t + length, nums); delete[] t; } nums[length] = val; sift_up(nums, length, _CMP()); length++; } void pop() { if (length == 0) assert(0); length--; std::swap(nums[0], nums[length]);//å®é™…ä¸Špopæ“ä½œå°±ç›¸å½“äºå †æ’çš„ä¸€æ¬¡è¿‡ç¨‹ sift_down(nums, 0, length, _CMP()); } _T top() { if (length == 0) assert(0); return nums[0]; } void print() {//å†…éƒ¨printæ–¹ä¾¿æµ‹è¯• print(nums, length); } }; } class Solution { public: vector\u003cint\u003e topKFrequent(vector\u003cint\u003e\u0026 nums, int k) { unordered_map\u003cint,int\u003et; //å¼€å§‹æ˜ å°„hashmap for(int s:nums){ t[s]++; } L_B__::Heap\u003cS,cmp\u003eQ; for(unordered_map\u003cint,int\u003e::iterator it=t.begin();it!=t.end();it++){ Q.push({it-\u003efirst,it-\u003esecond}); } vector\u003cint\u003eres; //å¾—åˆ°å‰kä¸ªæœ€å¤§çš„å…ƒç´  for(int i=0;i\u003ck;i++){ auto t = Q.top();Q.pop(); res.push_back(t.a); } return res; } }; ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:4:3","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ€»ç»“ å¯¹äºæ¨¡æ¿çš„è¿ç”¨ï¼Œç°åœ¨æ‰åˆšå¼€å§‹å…¥é—¨(å…¥é—¨éƒ½ä¸åˆ°â€¦)ï¼Œç»™æˆ‘çš„æ„Ÿè§‰æ˜¯STLæºç çš„åŒ…è¢±å¾ˆé‡ï¼Œå„ä¸ªç»„ä»¶é«˜åº¦å…³è”ï¼Œæ‰€ä»¥èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªå®¹å™¨å®ç°çš„ç®—æ³•æœ‰å¾ˆå¤šå¾ˆå¤šï¼æˆ‘è¿™ä¸ªæ–°æ‰‹è¿˜ä¸é…é«˜æ”€ï¼Œåªèƒ½ä»°æœ›äº†ï¼Œå½“ç„¶å¹³æ—¶éšä¾¿å†™å†™ä¹è‰²ä»£ç ä¹Ÿæ˜¯å¯ä»¥æ»´ï¼Œè‡³å°‘å¯ä»¥å¹ç‰›è¯´æ¯”STLè¿˜å¿«äº†ğŸ¤£ ","date":"2022-02-16","objectID":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/:5:0","tags":["æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ"],"title":"æ–°æ‰‹ç”¨C++å†™äº†ä¸ªæ³›å‹å †ï¼Œæ•ˆç‡ç«Ÿæ¯”STLçš„æ›´å¿«ï¼Ÿ","uri":"/posts/%E6%96%B0%E6%89%8B%E7%94%A8c++%E5%86%99%E4%BA%86%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%A0%86%E6%95%88%E7%8E%87%E7%AB%9F%E6%AF%94stl%E7%9A%84%E6%9B%B4%E5%BF%AB/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"ä¸ºä»€ä¹ˆè¯´æ˜¯ä¸Šå¸çš„éª°å­ï¼Ÿ è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆç”±è¿™ä¸ªæ•°æ®ç»“æ„çš„åå­—å¼€å§‹ï¼ŒTreap = Tree + Heapï¼Œå³ä¸ºæ ‘å †ä¹‹æ„ï¼Œç„¶è€Œå®é™…ä¸Šç”¨åˆ°å †çš„åœ°æ–¹å°±æ˜¯åˆ©ç”¨äº†ä¸€ä¸ªéšæœºçš„å€¼æ ‡è®°æ¯ä¸ªç»“ç‚¹ï¼Œç„¶åæ ¹æ®è¿™ä¸ªå€¼å¯¹æ ‘è¿›è¡Œå·¦æ—‹ã€å³æ—‹æ“ä½œæ¥è°ƒæ•´çˆ¶å­æ ‘ç›´æ¥çš„å…³ç³»ï¼Œä½ å¯ä»¥ä¸¥æ ¼è®©å®ƒéµå¾ªå°æ ¹å †ä¹Ÿå¯ä»¥éµå¾ªå¤§æ ¹å †ï¼Œè¿™éƒ½æ— æ‰€è°“ã€‚ ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªç»“ç‚¹çš„ç»“æ„éœ€è¦é¢å¤–å­˜å‚¨ä¸€ä¸ªéšæœºå€¼ï¼Œæ¥å†³å®šå®ƒæ˜¯å¦æ—‹è½¬è°ƒæ•´ï¼Œè¿™å¯¹æ¯”æ™®é€šçš„BSTå°±è¦ä¼˜è¶Šå¾ˆå¤šäº†ï¼Œä½†è¿™ä¸ªä¹Ÿçœ‹è¿æ°”ï¼Œå¦‚æœéª°å­æ²¡æ‘‡å¥½ï¼Œå‡ºç°æç«¯çš„æƒ…å†µï¼Œåˆ™å¯èƒ½å³ä¾¿æ˜¯æ—‹è½¬äº†å¤šæ¬¡è¿˜æ˜¯æ•ˆç‡ä½ä¸‹ï¼Œæˆ‘åé¢å¯¹BSTã€Treapã€AVLè¿›è¡Œäº†å„æ–¹é¢çš„å¯¹æ¯”ã€‚ ç›¸å¯¹AVLï¼Œå®ƒä¸éœ€è¦è®°å½•æ·±åº¦ï¼Œä¸éœ€è¦æ ¹æ®æ·±åº¦æ¥åˆ¤æ–­æ˜¯å¦æ—‹è½¬ï¼Œæ—‹è½¬è¿™ä»¶äº‹å°±å®Œå…¨äº¤ç»™è€å¤©äº†ï¼Œè€Œä¸”ä¹Ÿä¸å­˜åœ¨å¤æ‚çš„æ—‹è½¬æƒ…å†µï¼Œåªæœ‰å·¦æ—‹å’Œå³æ—‹ã€‚ æ³¨æ„ï¼šæˆ‘å†™çš„è¿™ä¸ªTreapæ˜¯ä»¥å¤§æ ¹å †çš„æ–¹å¼è¿›è¡Œç»´æŠ¤çš„ï¼ä¹Ÿå°±æ˜¯çˆ¶èŠ‚ç‚¹å¤§äºå­èŠ‚ç‚¹çš„éšæœºå€¼ã€‚ ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:1:0","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"Treapå®ç° ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:0","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"1. ç»“ç‚¹çš„ç»“æ„ struct node { //å€¼ã€ä¼˜å…ˆçº§(éšæœºæ•°ã€è¯¥æ•°çš„æ€»ç»“ç‚¹æ•°ã€è¯¥ç»“ç‚¹çš„valæ¬¡æ•° int val, priority, length, cnt; node *lchild; node *rchild; node() : val(0), length(1), cnt(1), lchild(nullptr), rchild(nullptr) { srand((unsigned) time(NULL));//è®°å¾—é‡æ–°è®¾å®šç§å­ priority = rand(); } node(int val) : val(val), length(1), cnt(1), lchild(nullptr), rchild(nullptr) { srand((unsigned) time(NULL)); priority = rand(); } void update() { length = cnt; if (lchild != nullptr)length += lchild-\u003elength; if (rchild != nullptr)length += rchild-\u003elength; } }; ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:1","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"2. Treapçš„æŠ½è±¡æ•°æ®ç»“æ„ class Treap { node *head; int length; public: /*construct\u0026destruct*/ Treap() : head(nullptr), length(0) {} Treap(int val) : head(new node(val)), length(1) {} public://å†…éƒ¨ç±»è®¾è®¡è¿­ä»£å™¨ class iterator { node *head; node *root; public: /*è¿­ä»£å™¨éƒ¨åˆ†*/ iterator(node *head, node *root) : head(head), root(root) {} iterator \u0026operator++() { root = queryNext(head, root-\u003eval); return *this; } iterator operator++(int) { iterator t = *this; root = queryNext(head, root-\u003eval); return t; } iterator \u0026operator--() { root = queryPre(head, root-\u003eval); return *this; } iterator operator--(int) { iterator t = *this; root = queryPre(head, root-\u003eval); return t; } int operator*() { return root-\u003eval; } bool operator!=(const iterator \u0026t) { return t.root != root; } }; private: /*static function*/ /*rotate*/ static node *rotateLeft(node *root); static node *rotateRight(node *root); /*insert\u0026remove*/ static node *insert(node *root, int val, int \u0026size); static node *remove(node *root, int val, int \u0026size); /*query rank\u0026value*/ static int getLength(node *root); static int queryRank(node *root, int val);//å¿«é€ŸæŸ¥è¯¢valçš„æ’å static int queryValue(node *root, int rank);//å¿«é€ŸæŸ¥è¯¢æ’åä¸ºrankçš„æ•° /*query pre\u0026next*/ static node *queryPre(node *root, int val); static node *queryNext(node *root, int val); static void inorder_print(node *root); static void destroy(node *root); public: /*public function*/ /*insert\u0026remove*/ void insert(int val) { head = insert(head, val, length); } void remove(int val) { head = remove(head, val, length); } int size() { return length; } bool isEmpty() { return length == 0; } /*query rank\u0026value*/ int queryRank(int val) { return queryRank(head, val); } int queryValue(int rank) { return queryValue(head, rank); } void inorder_print() { inorder_print(head); } /*begin\u0026end*/ iterator begin() { node *t = head; while (t-\u003elchild != nullptr) { t = t-\u003elchild; } return iterator(head, t); } iterator end() { return iterator(head, nullptr); } }; ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:2","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"3. å·¦æ—‹å’Œå³æ—‹ å…·ä½“å¯ä»¥çœ‹æˆ‘ä¹‹å‰AVLæ ‘å¯¹å·¦æ—‹å³æ—‹çš„æè¿°,è¿™é‡Œåªå¼€å‘æºç æŸ¥çœ‹ï¼Œæ–‡ç« é“¾æ¥ å·¦æ—‹ï¼š node *Treap::rotateLeft(node *root) { node *son = root-\u003erchild; root-\u003erchild = son-\u003elchild; son-\u003elchild = root; root-\u003eupdate();//è®°å¾—å…ˆæ›´æ–°åº•ä¸‹çš„æƒ…å†µ son-\u003eupdate(); return son; } å³æ—‹ï¼š node *Treap::rotateRight(node *root) { node *son = root-\u003elchild; root-\u003elchild = son-\u003erchild; son-\u003erchild = root; root-\u003eupdate(); son-\u003eupdate(); return son; } ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:3","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"4. æ’å…¥å’Œåˆ é™¤ æ’å…¥ï¼š node *Treap::insert(node *root, int val, int \u0026size) { if (root == nullptr) { ++size; return new node(val); } if (root-\u003eval == val) { root-\u003ecnt++; size++; } else if (root-\u003eval \u003e val) { root-\u003elchild = insert(root-\u003elchild, val, size); //æ ¹æ®ä¼˜å…ˆçº§åˆ¤æ–­æ˜¯å¦å³æ—‹ï¼Œå› ä¸ºåªå¯èƒ½åœ¨å·¦è¾¹å¢åŠ é•¿åº¦ï¼Œé€šè¿‡ç»´æŒä¼˜å…ˆçº§çš„å¤§æ ¹å † if (root-\u003epriority \u003c root-\u003elchild-\u003epriority) root = rotateRight(root); } else if (root-\u003eval \u003c val) { root-\u003erchild = insert(root-\u003erchild, val, size); if (root-\u003epriority \u003c root-\u003erchild-\u003epriority) root = rotateLeft(root); } root-\u003eupdate();//æ³¨æ„æ›´æ–°é•¿åº¦ä¿¡æ¯ return root; } åˆ é™¤ï¼š åˆ é™¤è¿™é‡Œè¿˜æ˜¯è¯¦è§£ä¸€ä¸‹ï¼š æ‰¾åˆ°è¦åˆ é™¤çš„ç›®æ ‡èŠ‚ç‚¹åï¼Œæˆ‘ä»¬æ ¹æ®è®©æ ‘æ—‹è½¬ä½¿å¾—ä¼˜å…ˆçº§è¾ƒå¤§çš„å­©å­æ›¿æ¢æ‰çˆ¶äº²ï¼ˆç›®æ ‡èŠ‚ç‚¹ï¼‰ã€‚ç„¶åç»§ç»­è¿½æ€çˆ¶äº²ç»“ç‚¹ï¼Œç›´åˆ°è¯¥ç»“ç‚¹è¢«é€¼åˆ°å¶å­ç»“ç‚¹ï¼Œåˆ é™¤å³å¯ã€‚ node *Treap::remove(node *root, int val, int \u0026size) { if (root == nullptr)return nullptr;//æ²¡æ‰¾åˆ° if (root-\u003eval == val) { //å«æœ‰å¤šä¸ªç›¸åŒå€¼ï¼Œç›´æ¥æ“ä½œcntå³å¯ if (root-\u003ecnt \u003e 1) { root-\u003ecnt--; --size; } //åˆ†ä¸ºä¸¤ç±»æƒ…å†µï¼šå¶å­ç»“ç‚¹æƒ…å†µå’Œéå¶å­ç»“ç‚¹æƒ…å†µ else if (root-\u003elchild != nullptr || root-\u003erchild != nullptr) { //åªæœ‰å·¦å­æ ‘æˆ–è€…å·¦å­æ ‘ä¼˜å…ˆçº§å¤§äºå³å­æ ‘æƒ…å†µ if (root-\u003erchild == nullptr || root-\u003elchild != nullptr \u0026\u0026 root-\u003elchild-\u003epriority \u003e root-\u003erchild-\u003epriority) { root = rotateRight(root);//å³æ—‹åç»§ç»­è¿½æ€ root-\u003erchild = remove(root-\u003erchild, val, size); } else {//åªæœ‰å³å­æ ‘æˆ–è€…å³å­æ ‘ä¼˜å…ˆçº§å¤§äºå·¦å­æ ‘çš„æƒ…å†µ root = rotateLeft(root);//å·¦æ—‹åç»§ç»­è¿½æ€ root-\u003elchild = remove(root-\u003elchild, val, size); } } else {//å¶å­ç»“ç‚¹æƒ…å†µï¼Œç›´æ¥åˆ é™¤ï¼Œç„¶åæŠŠ delete root; root = nullptr; --size; } } else if (root-\u003eval \u003e val) { root-\u003elchild = remove(root-\u003elchild, val, size); } else if (root-\u003eval \u003c val) { root-\u003erchild = remove(root-\u003erchild, val, size); } if (root) root-\u003eupdate(); return root; } ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:4","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"5. æŸ¥è¯¢æ’å åŸç†ï¼šç”±äºæ˜¯æ’åºäºŒå‰æ ‘ï¼Œè€Œä¸”è®°å½•äº†æ ‘çš„ç»“ç‚¹ä¸ªæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ ¹æ®å·¦è¾¹ä¸ªæ•°ï¼ˆå°äºå½“å‰ç»“ç‚¹çš„ä¸ªæ•°ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬çš„å€¼å°äºå½“å‰ç»“ç‚¹çš„å€¼ï¼Œåˆ™å°äºå®ƒçš„ä¸ªæ•°èŒƒå›´è‚¯å®šæ˜¯åœ¨å½“å‰ç»“ç‚¹çš„å·¦è¾¹ï¼Œç›´æ¥è¿ç§»åˆ°å·¦å­©å­å³å¯ï¼Œå¦‚æœå¤§äºå½“å‰ç»“ç‚¹ï¼Œåˆ™å½“å‰ç»“ç‚¹çš„å·¦è¾¹å¤§å°+å®ƒè‡ªèº«ä¹Ÿæ˜¯æ— æ³•æ»¡è¶³è¦æŸ¥è¯¢çš„å€¼çš„æ’åï¼ŒrankåŠ ä¸Šè¯¥å€¼årootç»§ç»­å³ç§»ã€‚å¦‚æœå‡ºç°æ‰¾åˆ°è¯¥å…ƒç´ çš„æƒ…å†µï¼Œåˆ™ç›´æ¥è¿”å›rank+å·¦è¾¹é•¿åº¦ã€‚å¦‚æœå…¶ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æœ€åå¾—å‡ºçš„rankè‚¯å®šæ˜¯éœ€è¦+1çš„ã€‚ inline int Treap::getLength(node *root) { if (root == nullptr) return 0; return root-\u003elength; } int Treap::queryRank(node *root, int val) {//ç›¸å½“äºæŸ¥è¯¢æœ‰å¤šå°‘ä¸ªæ•°å°äºç­‰äºval int rank = 0; while (root != nullptr) { if (root-\u003eval == val)return rank + getLength(root-\u003elchild) + root-\u003ecnt; else if (root-\u003eval \u003e val)root = root-\u003elchild; else rank += getLength(root-\u003elchild) + root-\u003ecnt, root = root-\u003erchild; } return rank + 1;//å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™åœ¨åŸæ¥çš„åŸºç¡€ä¸Š+1 } ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:5","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"6. æŒ‰æ’åæŸ¥è¯¢å€¼ inline int Treap::getLength(node *root) { if (root == nullptr) return 0; return root-\u003elength; } int Treap::queryValue(node *root, int rank) {//ç›¸å½“äºå¾—åˆ°ç¬¬kå¤§çš„æ•°ï¼šæ”¯æŒé‡å¤å…ƒç´ æ˜¯æœ€éªšçš„ï¼ï¼ï¼ while (root != nullptr) { if (getLength(root-\u003elchild) + root-\u003ecnt \u003e rank) { if (getLength(root-\u003elchild) + 1 \u003e rank) root = root-\u003elchild; else return root-\u003eval; } else if (getLength(root-\u003elchild) + root-\u003ecnt \u003c rank) { rank -= getLength(root-\u003elchild) + root-\u003ecnt; root = root-\u003erchild; } else {//rankä¸å·¦å­æ ‘çš„å¤§å°ç›¸ç­‰çš„æƒ…å†µ return root-\u003eval; } } return 0; } ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:6","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"7. æŸ¥è¯¢å‰é©±åç»§ å‰é©±ï¼š node *Treap::queryPre(node *root, int val) {//ä¸€æ ·çš„é“ç†ï¼šå¦‚æœæœ‰å·¦å­æ ‘ï¼Œå°±æ˜¯å·¦å­æ ‘ä¸­æœ€å¤§çš„ç»“ç‚¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ˜¯æœ€æ¥è¿‘è¯¥ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹(åº”åœ¨å®ƒçš„å³ä¾§ node *res = nullptr; while (root != nullptr) { if (root-\u003eval \u003c val)res = root, root = root-\u003erchild; else root = root-\u003erchild; } return res; } åç»§ï¼š node *Treap::queryNext(node *root, int val) {//å¯»æ‰¾åç»§ node *res = nullptr; while (root != nullptr) { if (root-\u003eval \u003e val)res = root, root = root-\u003elchild; else root = root-\u003erchild; } return res; } ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:7","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"8. é”€æ¯Treap void Treap::destroy(node *root) { if (root == nullptr) return; destroy(root-\u003elchild); destroy(root-\u003erchild); delete root; root = nullptr; } ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:8","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"9. è¿­ä»£å™¨çš„è®¾è®¡ public://å†…éƒ¨ç±»è®¾è®¡è¿­ä»£å™¨ class iterator { node *head; node *root; public: /*è¿­ä»£å™¨éƒ¨åˆ†*/ iterator(node *head, node *root) : head(head), root(root) {} iterator \u0026operator++() { root = queryNext(head, root-\u003eval); return *this; } iterator operator++(int) { iterator t = *this; root = queryNext(head, root-\u003eval); return t; } iterator \u0026operator--() { root = queryPre(head, root-\u003eval); return *this; } iterator operator--(int) { iterator t = *this; root = queryPre(head, root-\u003eval); return t; } int operator*() { return root-\u003eval; } bool operator!=(const iterator \u0026t) { return t.root != root; } }; ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:2:9","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"å®Œæ•´æºä»£ç  ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:3:0","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"Treap.h // // Created by Alone on 2021/10/14. // #ifndef MY_TINY_STL_TREAP_H #define MY_TINY_STL_TREAP_H #include \u003ccstdio\u003e#include \u003ccstdlib\u003e#include \u003cctime\u003e struct node { int val, priority, length, cnt; node *lchild; node *rchild; node() : val(0), length(1), cnt(1), lchild(nullptr), rchild(nullptr) { srand((unsigned) time(NULL));//è®°å¾—é‡æ–°è®¾å®šç§å­ priority = rand(); } node(int val) : val(val), length(1), cnt(1), lchild(nullptr), rchild(nullptr) { srand((unsigned) time(NULL)); priority = rand(); } void update() { length = cnt; if (lchild != nullptr)length += lchild-\u003elength; if (rchild != nullptr)length += rchild-\u003elength; } }; class Treap { node *head; int length; public: /*construct\u0026destruct*/ Treap() : head(nullptr), length(0) {} Treap(int val) : head(new node(val)), length(1) {} ~Treap(){ destroy(head); } public://å†…éƒ¨ç±»è®¾è®¡è¿­ä»£å™¨ class iterator { node *head; node *root; public: /*è¿­ä»£å™¨éƒ¨åˆ†*/ iterator(node *head, node *root) : head(head), root(root) {} iterator \u0026operator++() { root = queryNext(head, root-\u003eval); return *this; } iterator operator++(int) { iterator t = *this; root = queryNext(head, root-\u003eval); return t; } iterator \u0026operator--() { root = queryPre(head, root-\u003eval); return *this; } iterator operator--(int) { iterator t = *this; root = queryPre(head, root-\u003eval); return t; } int operator*() { return root-\u003eval; } bool operator!=(const iterator \u0026t) { return t.root != root; } }; private: /*static function*/ /*rotate*/ static node *rotateLeft(node *root); static node *rotateRight(node *root); /*insert\u0026remove*/ static node *insert(node *root, int val, int \u0026size); static node *remove(node *root, int val, int \u0026size); /*query rank\u0026value*/ static int getLength(node *root); static int queryRank(node *root, int val);//å¿«é€ŸæŸ¥è¯¢valçš„æ’å static int queryValue(node *root, int rank);//å¿«é€ŸæŸ¥è¯¢æ’åä¸ºrankçš„æ•° /*query pre\u0026next*/ static node *queryPre(node *root, int val); static node *queryNext(node *root, int val); static void inorder_print(node *root); static void destroy(node *root); public: /*public function*/ /*insert\u0026remove*/ void insert(int val) { head = insert(head, val, length); } void remove(int val) { head = remove(head, val, length); } int size() { return length; } bool isEmpty() { return length == 0; } /*query rank\u0026value*/ int queryRank(int val) { return queryRank(head, val); } int queryValue(int rank) { return queryValue(head, rank); } void inorder_print() { inorder_print(head); } /*begin\u0026end*/ iterator begin() { node *t = head; while (t-\u003elchild != nullptr) { t = t-\u003elchild; } return iterator(head, t); } iterator end() { return iterator(head, nullptr); } }; #endif //MY_TINY_STL_TREAP_H ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:3:1","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"Treap.cpp // // Created by Alone on 2021/10/14. // #include \"Treap.h\" node *Treap::rotateLeft(node *root) { node *son = root-\u003erchild; root-\u003erchild = son-\u003elchild; son-\u003elchild = root; root-\u003eupdate();//è®°å¾—å…ˆæ›´æ–°åº•ä¸‹çš„æƒ…å†µ son-\u003eupdate(); return son; } node *Treap::rotateRight(node *root) { node *son = root-\u003elchild; root-\u003elchild = son-\u003erchild; son-\u003erchild = root; root-\u003eupdate(); son-\u003eupdate(); return son; } node *Treap::insert(node *root, int val, int \u0026size) { if (root == nullptr) { ++size; return new node(val); } if (root-\u003eval == val) { root-\u003ecnt++; size++; } else if (root-\u003eval \u003e val) { root-\u003elchild = insert(root-\u003elchild, val, size); //æ ¹æ®ä¼˜å…ˆçº§åˆ¤æ–­æ˜¯å¦å³æ—‹ï¼Œå› ä¸ºåªå¯èƒ½åœ¨å·¦è¾¹å¢åŠ é•¿åº¦ï¼Œé€šè¿‡ç»´æŒä¼˜å…ˆçº§çš„å¤§æ ¹å † if (root-\u003epriority \u003c root-\u003elchild-\u003epriority) root = rotateRight(root); } else if (root-\u003eval \u003c val) { root-\u003erchild = insert(root-\u003erchild, val, size); if (root-\u003epriority \u003c root-\u003erchild-\u003epriority) root = rotateLeft(root); } root-\u003eupdate(); return root; } node *Treap::remove(node *root, int val, int \u0026size) { if (root == nullptr)return nullptr;//æ²¡æ‰¾åˆ° if (root-\u003eval == val) { //å«æœ‰å¤šä¸ªç›¸åŒå€¼ï¼Œç›´æ¥æ“ä½œcntå³å¯ if (root-\u003ecnt \u003e 1) { root-\u003ecnt--; --size; } //åˆ†ä¸ºä¸¤ç±»æƒ…å†µï¼šå¶å­ç»“ç‚¹æƒ…å†µå’Œéå¶å­ç»“ç‚¹æƒ…å†µ else if (root-\u003elchild != nullptr || root-\u003erchild != nullptr) { //åªæœ‰å·¦å­æ ‘æˆ–è€…å·¦å­æ ‘ä¼˜å…ˆçº§å¤§äºå³å­æ ‘æƒ…å†µ if (root-\u003erchild == nullptr || root-\u003elchild != nullptr \u0026\u0026 root-\u003elchild-\u003epriority \u003e root-\u003erchild-\u003epriority) { root = rotateRight(root);//å³æ—‹åç»§ç»­è¿½æ€ root-\u003erchild = remove(root-\u003erchild, val, size); } else {//åªæœ‰å³å­æ ‘æˆ–è€…å³å­æ ‘ä¼˜å…ˆçº§å¤§äºå·¦å­æ ‘çš„æƒ…å†µ root = rotateLeft(root);//å·¦æ—‹åç»§ç»­è¿½æ€ root-\u003elchild = remove(root-\u003elchild, val, size); } } else {//å¶å­ç»“ç‚¹æƒ…å†µï¼Œç›´æ¥åˆ é™¤ï¼Œç„¶åæŠŠ delete root; root = nullptr; --size; } } else if (root-\u003eval \u003e val) { root-\u003elchild = remove(root-\u003elchild, val, size); } else if (root-\u003eval \u003c val) { root-\u003erchild = remove(root-\u003erchild, val, size); } if (root) root-\u003eupdate(); return root; } int Treap::queryRank(node *root, int val) {//ç›¸å½“äºæŸ¥è¯¢æœ‰å¤šå°‘ä¸ªæ•°å°äºç­‰äºval int rank = 0; while (root != nullptr) { if (root-\u003eval == val)return rank + getLength(root-\u003elchild) + root-\u003ecnt; else if (root-\u003eval \u003e val)root = root-\u003elchild; else rank += getLength(root-\u003elchild) + root-\u003ecnt, root = root-\u003erchild; } return rank + 1;//å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™åœ¨åŸæ¥çš„åŸºç¡€ä¸Š+1 } int Treap::queryValue(node *root, int rank) {//ç›¸å½“äºå¾—åˆ°ç¬¬kå¤§çš„æ•°ï¼šæ”¯æŒé‡å¤å…ƒç´ æ˜¯æœ€éªšçš„ï¼ï¼ï¼ while (root != nullptr) { if (getLength(root-\u003elchild) + root-\u003ecnt \u003e rank) { if (getLength(root-\u003elchild) + 1 \u003e rank) root = root-\u003elchild; else return root-\u003eval; } else if (getLength(root-\u003elchild) + root-\u003ecnt \u003c rank) { rank -= getLength(root-\u003elchild) + root-\u003ecnt; root = root-\u003erchild; } else {//rankä¸å·¦å­æ ‘çš„å¤§å°ç›¸ç­‰çš„æƒ…å†µ return root-\u003eval; } } return 0; } node *Treap::queryPre(node *root, int val) {//ä¸€æ ·çš„é“ç†ï¼šå¦‚æœæœ‰å·¦å­æ ‘ï¼Œå°±æ˜¯å·¦å­æ ‘ä¸­æœ€å¤§çš„ç»“ç‚¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ˜¯æœ€æ¥è¿‘è¯¥ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹(åº”åœ¨å®ƒçš„å³ä¾§ node *res = nullptr; while (root != nullptr) { if (root-\u003eval \u003c val)res = root, root = root-\u003erchild; else root = root-\u003erchild; } return res; } node *Treap::queryNext(node *root, int val) {//å¯»æ‰¾åç»§ node *res = nullptr; while (root != nullptr) { if (root-\u003eval \u003e val)res = root, root = root-\u003elchild; else root = root-\u003erchild; } return res; } void Treap::inorder_print(node *root) { if (root == nullptr) return; inorder_print(root-\u003elchild); printf(\"%d \", root-\u003eval); inorder_print(root-\u003erchild); } void Treap::destroy(node *root) { if (root == nullptr) return; destroy(root-\u003elchild); destroy(root-\u003erchild); delete root; root = nullptr; } inline int Treap::getLength(node *root) { if (root == nullptr) return 0; return root-\u003elength; } ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:3:2","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"æµ‹è¯• ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:4:0","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["æ‰‹å†™æ•°æ®ç»“æ„"],"content":"AVL vs Treap vs æ™®é€šBST æµ‹è¯•æ•°æ®é‡ï¼š1000w ç›´æ¥æ¥ç»“è®ºï¼š AVLæç«¯æƒ…å†µä¸‹(æ’å…¥çš„æ•°æ®æœ‰åº)ï¼Œå®Œçˆ†æ‰€æœ‰å¹³è¡¡æ ‘ã€‚ Treapéšæœºæƒ…å†µçš„æ’å…¥è¡¨ç¤ºä¸é”™ï¼å¤§éƒ¨åˆ†æ—¶é—´å¯ä»¥å’ŒAVLæŒå¹³ã€‚ BSTåˆ«æƒ³äº†ï¼Œè¿™ä¸ª1000wæ•°æ®åªæœ‰éšæœºæƒ…å†µèƒ½ç”¨å‡ åˆ†é’Ÿè¿‡ï¼Œå¦‚æœæç«¯æƒ…å†µç›´æ¥ç¨‹åºè¿è¡Œå‡ºé”™ï¼ æ•´ä½“å°ç»“ï¼š ç¬¬ä¸€è½®ï¼šinsertæ“ä½œ éšæœºæƒ…å†µTreap(çœ‹è¿æ°”ï¼Œæ¯•ç«Ÿéšæœºäº‹ä»¶) \u003e=\u003c AVL\u003e\u003e BST æç«¯æƒ…å†µAVL \u003e\u003e Treapï¼Œ BSTç›´æ¥æš´æ¯™ ç¬¬äºŒè½®: removeæ“ä½œâ€“Treapè¢«AVLåŠæ‰“ï¼ŒBSTå°±åˆ«æäº† ä¸‹é¢å°±æ²¡å¾—ç»§ç»­å±•å¼€çš„æ¯”è¾ƒäº†ï¼Œæ€»ç»“å°±æ˜¯Treapç›¸å¯¹å¥½å†™ä¸€ç‚¹ï¼Œæ•ˆç‡é«˜ä¸é«˜çœ‹è¿æ°”ã€‚ è¿˜æœ‰å°±æ˜¯Treapåœ¨ç›´æ¥å¤„ç†ç¬¬Kå¤§çš„å€¼å…·æœ‰ä¼˜åŠ¿ï¼Œä»¥åŠæŒ‰æ’ä½æŸ¥æ‰¾å…·æœ‰ä¼˜åŠ¿ã€‚ ä¼˜åŠ¿ï¼šç”±äºtreapæ¯ä¸ªç»“ç‚¹éƒ½å«æœ‰å®ƒæ•´ä¸ªç»“ç‚¹ä¸ªæ•°çš„è®°å½•ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆå¿«çš„æŸ¥å‡ºå€¼çš„æ’åå’Œæ’åçš„å€¼ã€‚ ","date":"2022-02-16","objectID":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/:4:1","tags":["æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£"],"title":"æ¥è‡ªä¸Šå¸çš„éª°å­---Treap(æ ‘å †)è¯¦è§£","uri":"/posts/%E6%9D%A5%E8%87%AA%E4%B8%8A%E5%B8%9D%E7%9A%84%E9%AA%B0%E5%AD%90-treap%E6%A0%91%E5%A0%86%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—","date":"2022-02-14","objectID":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/","tags":["leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—"],"title":"leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—","uri":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-14","objectID":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/:1:0","tags":["leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—"],"title":"leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—","uri":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"é¢˜ç›®è¯¦è§£ è¿™é¢˜æœ¬åº”æ˜¯ç®€å•é¢˜ï¼Œå°±æ˜¯ç®€å•çš„å¼‚æˆ–è§„å¾‹ï¼Œä½†æ˜¯é¢˜ç›®è¦æ±‚ä½¿ç”¨ O(logn) æ—¶é—´å¤æ‚åº¦ï¼Œ O(1) ç©ºé—´å¤æ‚åº¦ï¼Œè€Œå¦‚æœç›´æ¥å¼‚æˆ–ï¼Œåªä¼šæ˜¯ O(n) çš„æ—¶é—´å¤æ‚åº¦ã€‚ é‚£ä¹ˆè¯¥å¦‚ä½•å»åšå‘¢ï¼Ÿ è¿™é¢˜æœ‰äºŒæ®µæ€§ï¼Œä»€ä¹ˆå«äºŒæ®µæ€§å‘¢ï¼Œå°±æ˜¯èƒ½æœ‰ä¸€ä¸ªåˆ†ç•Œç‚¹æŠŠç‰¹æ€§ä¸€åˆ†ä¸ºäºŒã€‚æ¯”å¦‚æ­¤é¢˜ç”±äºæ•°æ®æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æ•°é‡ä¸ºä¸¤ä¸ªçš„å…ƒç´ ä¼šæŒ¨åœ¨ä¸€èµ·ï¼Œè€Œä¸”åœ¨ å•èº«ç‹— å·¦è¾¹è¿ç»­çš„å…ƒç´ ä¸‹æ ‡ä¼šæœ‰ä»¥ä¸‹è§„å¾‹ï¼šä¸¤ä¸ªç›¸é‚»çš„ç›¸åŒå…ƒç´ ä¸­ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ä¼šæ˜¯å¶æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å¥‡æ•°ã€‚å³è¾¹çš„è¿ç»­å…ƒç´ ä¸‹æ ‡ä¼šæœ‰ä»¥ä¸‹è§„å¾‹ï¼šä¸¤ä¸ªç›¸é‚»çš„ç›¸åŒå…ƒç´ ä¸­ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸‹æ ‡æ˜¯å¥‡æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å¶æ•°ã€‚ æ ¹æ®ä»¥ä¸ŠäºŒæ®µæ€§å¯å¾ˆå¿«æ„å»ºå‡ºäºŒåˆ†ç‰ˆæœ¬çš„ä»£ç ï¼ ","date":"2022-02-14","objectID":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/:2:0","tags":["leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—"],"title":"leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—","uri":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"è§£é¢˜ä»£ç  æœªç®€åŒ–äºŒåˆ†ç‰ˆæœ¬ class Solution { public: int singleNonDuplicate(vector\u003cint\u003e\u0026 nums) { int l=0,r=nums.size()-1; int maxr = r; int mid; while(l\u003cr){ mid = (l+r)/2; if(mid\u003cmaxr\u0026\u0026nums[mid+1]==nums[mid]){ if(mid%2==0){ l = mid+2; }else{ r = mid; } }else if(mid\u003e0\u0026\u0026nums[mid-1]==nums[mid]){ if((mid-1)%2==0){ l = mid+1; }else{ r = mid; } }else{ return nums[mid]; } } return nums[l]; } }; ç®€åŒ–çš„äºŒåˆ†ç‰ˆæœ¬ class Solution { public: int singleNonDuplicate(vector\u003cint\u003e\u0026 nums) { int low = 0, high = nums.size() - 1; while (low \u003c high) { int mid = (high - low) / 2 + low; if (nums[mid] == nums[mid ^ 1]) { low = mid + 1; } else { high = mid; } } return nums[low]; } }; ","date":"2022-02-14","objectID":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/:3:0","tags":["leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—"],"title":"leetcodeæƒ…äººèŠ‚ç‰¹è¾‘â€”â€”å¯»æ‰¾å•èº«ç‹—","uri":"/posts/leetcode%E6%83%85%E4%BA%BA%E8%8A%82%E7%89%B9%E8%BE%91%E5%AF%BB%E6%89%BE%E5%8D%95%E8%BA%AB%E7%8B%97/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´","date":"2022-02-14","objectID":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/","tags":["ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´"],"title":"ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´","uri":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-14","objectID":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/:1:0","tags":["ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´"],"title":"ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´","uri":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"é¢˜ç›®è¯¦è§£ ä»¥ä¸‹ä¸ºæ‰‹å†™è¯¦è§£ ä¸‹é¢æ€»ç»“è¿™ä¸ªåšé¢˜æ­¥éª¤ï¼š äºŒåˆ†æœç´¢å¯èƒ½çš„æœ€å¤§å•ä½ä»·å€¼ã€‚ æ ¹æ®è¿™ä¸ªå€¼å¾—åˆ°æ¯ä¸ªæ•°çš„å•ä½ä»·å€¼æƒ…å†µsï¼Œæ ¹æ®sçš„å€¼æ’åºï¼Œå¾—åˆ°å‰kå¤§çš„sï¼Œç›¸åŠ å¾—å‡ºæˆ‘ä»¬æšä¸¾çš„è¿™ä¸ªæœ€å¤§å•ä½ä»·å€¼æ˜¯å¤§äº†è¿˜æ˜¯å°äº†ï¼Œæ–¹ä¾¿åç»­äºŒåˆ†ï¼ æœ€åæŒ‰ä¿ç•™ä¸¤ä½å°æ•°ï¼Œè¾“å‡ºå³å¯ã€‚ ","date":"2022-02-14","objectID":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/:2:0","tags":["ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´"],"title":"ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´","uri":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/"},{"categories":["ç®—æ³•â€”â€”äºŒæ®µæ€§ç›¸å…³(äºŒåˆ†)"],"content":"è§£é¢˜ä»£ç  #include\u003cbits/stdc++.h\u003eusing namespace std; const int maxn = 1e5+5; int w[maxn],v[maxn]; double s[maxn]; //TODO å­˜ä¸‹ç”¨äºæ¯”å¯¹å®é™…å•ä½ä»·å€¼çš„ä¿¡æ¯ int n,k; using namespace std; int solve(double mid) { double ss = 0; for(int i = 0;i\u003cn;i++) { s[i] = 1.0*v[i] - w[i]*mid; } sort(s,s+n,greater\u003cdouble\u003e());//TODO ä»å¤§åˆ°å°æ’åºï¼Œå› ä¸ºè¦å–å‰kä¸ªæœ€å¤§å€¼ for(int i = 0;i\u003ck;i++) ss += s[i]; //TODO å¾—åˆ°å‰kä¸ªæœ€å¤§çš„sä¿¡æ¯çš„å’Œï¼Œ // å¦‚æœå¤§äº0ï¼Œåˆ™è¯´æ˜å–å°äº†ï¼Œå°äº0åˆ™å–å¤§äº†ï¼Œç­‰äº0åˆ™æ­£å¥½æ»¡è¶³ï¼ if(ss\u003e0) return 1; else if(ss==0)return -1; else return 0; } int main() { int t; cin\u003e\u003et; while(t--) { scanf(\"%d %d\",\u0026n,\u0026k); double low = 0,high = 100000,mid; for(int i = 0;i\u003cn;i++) { scanf(\"%d %d\",\u0026w[i],\u0026v[i]); } //TODO äºŒåˆ†æœç´¢ï¼Œç”±äºdoubleç±»å‹çš„äºŒåˆ†ï¼Œæ•…å–ä¸€ä¸ªå°æ•°å½¢å¼è¿›è¡Œæ¯”å¯¹ // æ³¨æ„doubleç±»å‹çš„äºŒåˆ†ï¼Œåƒä¸‡åˆ«+1æˆ–è€…-1ï¼è¿™ä¸ªè·¨åº¦å¤ªå¤§äº†ï¼Œå› ä¸ºæˆ‘ä»¬æœçš„æ˜¯ä¸ªåˆ†æ•°ï¼ while(high - low \u003e0.00001) { mid = (low + high)/2.0; int flag = solve(mid); if(flag==1) low = mid;//TODO æ”¶ç¼©å·¦è¾¹ç•Œ else if(flag == -1)break;//TODO æšä¸¾å¾—åˆ°ç­”æ¡ˆ else high = mid;//TODO æ”¶ç¼©å³è¾¹ç•Œ } printf(\"%.2lf\\n\",mid); } return 0; } ","date":"2022-02-14","objectID":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/:3:0","tags":["ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´"],"title":"ç‰›å®¢-wyhçš„ç‰©å“â€”â€”é€šè¿‡éªŒè¯å¾—å‡ºäºŒåˆ†çš„æœç´¢åŒºé—´","uri":"/posts/%E7%89%9B%E5%AE%A2-wyh%E7%9A%84%E7%89%A9%E5%93%81%E9%80%9A%E8%BF%87%E9%AA%8C%E8%AF%81%E5%BE%97%E5%87%BA%E4%BA%8C%E5%88%86%E7%9A%84%E6%90%9C%E7%B4%A2%E5%8C%BA%E9%97%B4/"},{"categories":["C++å®æˆ˜"],"content":"Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·","date":"2022-02-12","objectID":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/","tags":["Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·"],"title":"Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·","uri":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/"},{"categories":["C++å®æˆ˜"],"content":"è½¯ä»¶ä½¿ç”¨ è§†é¢‘æ•™ç¨‹ ","date":"2022-02-12","objectID":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/:1:0","tags":["Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·"],"title":"Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·","uri":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/"},{"categories":["C++å®æˆ˜"],"content":"é¡¹ç›®ä»‹ç» é¡¹ç›®æ‰€åœ¨åœ° æ¸©é¦¨æç¤ºï¼šå¦‚æœæœ¬åœ°è¿˜æœªæ­å»º hugo åšå®¢ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘çš„å¦ä¸€ä¸ª hugo åšå®¢è‡ªåŠ¨æ­å»ºå·¥å…· QtRunï¼š ä»‹ç»ï¼šä¸€ä¸ªç”¨çº¯ C++ å†™çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ ä¸»è¦ä½œç”¨ï¼šæ ¹æ®æä¾›çš„ hugo åšå®¢æœ¬åœ°åœ°å€è¿›è¡Œå‘½ä»¤è¡Œå¼çš„è‡ªåŠ¨åŒ–å†™ä½œï¼Œä¼šæŠŠæ¯ä¸€ç¯‡æ–‡ç« çš„å›¾ç‰‡ã€åˆ†ç±»ã€æ ‡é¢˜ç­‰å†…å®¹è‡ªåŠ¨åŒ–å®Œæˆã€‚ æ„å»ºæ–¹å¼ï¼šç¡®ä¿ç”Ÿæˆ exe æ–‡ä»¶çš„ç›®å½•ä¸‹å«æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼Œä¸”ç¡®ä¿ç¼–è¯‘å™¨æ”¯æŒ C++17ã€‚ BlogPath.txt #æä¾›æœ¬åœ°hugoåšå®¢è·¯å¾„ categories.txt #æä¾›å¯ä¾›é€‰æ‹©çš„åˆ†ç±»(æ²¡æœ‰ä¹Ÿæ²¡å…³ç³») initImg.txt #æä¾›å¯é€‰æ‹©çš„å›¾ç‰‡ mob.txt #æä¾›ç”¨äºç”Ÿæˆçš„æ¨¡æ¿ ed_Path.txt #æä¾›æ‰“å¼€çš„ç¼–è¾‘å™¨è·¯å¾„(æ²¡æœ‰ä¹Ÿæ²¡å…³ç³») ä½¿ç”¨æ–¹å¼ï¼šå¯æŸ¥çœ‹æºç å¾—åˆ°æ›´è¯¦å°½çš„è§£ç­” QtRun [title name] [category name] Qtrun [-op] QtRunBlogï¼š ä»‹ç»ï¼šä½¿ç”¨ Qt+cmake æ­å»ºçš„å›¾å½¢åŒ– hugo è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå†™ä½œçš„ç›¸å…³éƒ¨åˆ†éƒ½æ˜¯è°ƒç”¨çš„ QtRun ï¼Œæ‰€ä»¥è¿è¡Œæ—¶ QtRun çš„é…ç½®æ–‡ä»¶å’Œ QtRun éƒ½å¿…é¡»åœ¨å®ƒçš„ exe ç›®å½•ä¹‹ä¸‹ã€‚è€Œå…¶ä»–å…¶ä»–éƒ¨åˆ†è°ƒç”¨çš„ git å‘½ä»¤è¡Œï¼Œæ‰€ä»¥éœ€è¦æœ¬åœ°æœ‰ git å·¥å…·ã€‚ ä¸»è¦ä½œç”¨ï¼šæä¾›å›¾å½¢åŒ–çš„ hugo å†™ä½œä½“éªŒã€‚ æ„å»ºæ–¹å¼ï¼šæœ¬åœ°éœ€è¦ Qt6 ç¯å¢ƒï¼Œé€‰æ‹©æœ¬é¡¹ç›®ç›®å½•ä¾¿å¯å®Œæˆæ„å»ºã€‚ ","date":"2022-02-12","objectID":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/:2:0","tags":["Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·"],"title":"Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·","uri":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/"},{"categories":["C++å®æˆ˜"],"content":"QtRun C++ æºä»£ç  å®ç°äº†è‡ªåŠ¨åŒ–å‘½ä»¤è¡Œå†™ä½œï¼ŒQtRunBlogå›¾å½¢åŒ–ç•Œé¢è°ƒç”¨çš„å°±æ˜¯å®ƒçš„å‘½ä»¤è¡Œ // // Created by Alone on 2022-1-24. // //TODO aaaaaaaå¾—å‡ºæ„Ÿæ‚Ÿï¼š1.æ•°æ®è¾ƒä¸ºå¤æ‚çš„æƒ…å†µä¸‹å°½é‡ä¸è¦ä½¿ç”¨å…¨å±€å˜é‡ 2.åœ¨æ„é€ å‡½æ•°åˆå§‹åŒ–çš„æ—¶å€™åƒä¸‡ä¸è¦ç›´æ¥newç©ºé—´ç»™å®ƒï¼Œè®°å¾—éšæ—¶éšåœ°nullptr #include \u003cfstream\u003e#include \u003ciostream\u003e#include \u003cstring\u003e#include \u003csys/stat.h\u003e#include \u003cunistd.h\u003e#include \u003cwindows.h\u003e#include \u003cvector\u003e#include \u003cunordered_map\u003e#include \u003cctime\u003e#include \u003cfilesystem\u003e#include \u003crandom\u003e #define IMGS_PATH \"./initImg.txt\" #define MOB_PATH \"./mob.txt\" #define CATEGORIES_PATH \"./categories.txt\" #define BLOG_SRC \"./BlogPath.txt\" std::filesystem::path POSTS_PATH;//ç”¨äºè·å–post_path using namespace std; //TODO å»ºç«‹æšä¸¾æ˜ å°„ enum class SHOW_ARGS : int { EMPTY, CATEGORIES, IMG, BLOG_PATH }; //TODO å‘½ä»¤è¡Œå‚æ•°çš„æšä¸¾æ˜ å°„ unordered_map\u003cstring, SHOW_ARGS\u003e MAP{ {\"-sc\", SHOW_ARGS::CATEGORIES}, {\"-si\", SHOW_ARGS::IMG}, {\"-sp\", SHOW_ARGS::BLOG_PATH} }; //TODO å°è£…æ–‡ä»¶è¯»å–ç±» class FileReader { stringstream in_buf; ifstream reader; public: FileReader() = default; FileReader(const FileReader \u0026) = delete; FileReader(FileReader \u0026\u0026) = delete; ~FileReader() { if (reader.is_open()) reader.close(); } void open(const string \u0026path) { reader.open(path); if (!reader.is_open()) { perror(\"reader open failed\"); exit(1); } in_buf \u003c\u003c reader.rdbuf(); } bool readAll(string \u0026dst) { if (in_buf.good()) dst = in_buf.str(); else return false; return true; } bool readline(string \u0026dst) { if (in_buf.good()) getline(in_buf, dst); else return false; return true; } }; //TODO å°è£…æ–‡ä»¶å†™å…¥ç±» class FileWriter { char *out_buf; ofstream writer; size_t cur_buf_size; size_t max_buf_size; private: void _write() { //ç¼“å†²åŒºå†™æ»¡ï¼Œå†™å…¥æ–‡ä»¶ä¸­ writer.write(out_buf, max_buf_size); cur_buf_size = 0; } public: FileWriter() : cur_buf_size(0), max_buf_size(512), out_buf(nullptr) {}; FileWriter(const FileReader \u0026) = delete; FileWriter(FileReader \u0026\u0026) = delete; FileWriter(const string \u0026path, ios::openmode mode = ios::out) { writer.open(path, mode); if (!writer.is_open()) { perror(\"writer open failed\"); exit(1); } cur_buf_size = 0; max_buf_size = 512; out_buf = new char[max_buf_size + 5]; } ~FileWriter() { if (cur_buf_size \u003e 0) { writer.write(out_buf, cur_buf_size); cur_buf_size = 0; } delete[] out_buf; out_buf = nullptr; writer.flush(); writer.close(); } static bool exist(const string \u0026path) { return (access(path.c_str(), F_OK) != -1); } void open(const string \u0026path, ios::openmode mode = ios::out) { writer.open(path, mode); if (!writer.is_open()) { perror(\"writer open failed\"); exit(1); } out_buf = new char[max_buf_size + 5]; } void write(const string \u0026src) {//TODO ç¼“å†²æœºåˆ¶çš„é‡è¦ç»„æˆ if (writer.is_open()) {//åªæœ‰åœ¨openæ–‡ä»¶åæ‰èƒ½å†™å…¥ if (src.empty()) return; if (cur_buf_size == max_buf_size) _write(); size_t psize = src.size() + cur_buf_size;//å¦‚æœå…¨ç›˜å†™å…¥ç¼“å†²åŒºåï¼Œç¼“å†²åŒºéœ€è¦çš„å¤§å° int startp = 0, maxLen; while (psize \u003e max_buf_size) { //å½“è¿™æ¬¡å†™å…¥ç¼“å†²åŒºçš„æ•°æ®é‡å¤§äºç¼“å†²åŒºçš„å¤§å°ï¼Œåˆ™è¿›è¡Œä¸æ–­å†™æ»¡æ›´æ–°æ“ä½œ maxLen = max_buf_size - cur_buf_size; copy(src.begin() + startp, src.begin() + startp + maxLen, out_buf + cur_buf_size);//copyåˆ°æ»¡çŠ¶æ€ï¼Œå†æ¥ä¸€æ¬¡write _write(); startp += maxLen; psize -= max_buf_size; } //å¦‚æœå†™å…¥æ•°æ®ä¸è¶…å‡ºç¼“å†²åŒºå¤§å°ï¼Œåˆ™ç›´æ¥å†™å…¥ copy(src.begin() + startp, src.end(), out_buf + cur_buf_size); cur_buf_size += src.size() - startp; } } FileWriter \u0026append(const string \u0026src) {//TODO å’Œwriteæ²¡åŒºåˆ«ï¼Œåªæ˜¯æ”¯æŒé“¾å¼è°ƒç”¨ write(src); return *this; } }; //TODO æ•´ä¸ªé¡¹ç›®éœ€è¦æ“ä½œçš„å˜é‡ï¼ˆå¾ˆä¸æ¨èç”¨å…¨å±€å˜é‡ï¼Œæˆ‘å°±æ˜¯å› ä¸ºè¿™ç©æ„å°±å¯¼è‡´äº†bugï¼‰ FileReader readImg, readText, readCategories;//ç”¨äºæ–‡ä»¶ioçš„å˜é‡ FileWriter appendCategories, fileWriter; vector\u003cstring\u003e imgs, categories; //ç”¨äºå­˜ä¸‹ç£ç›˜åˆ°å†…å­˜çš„æ•°æ®ï¼Œæ ¹æ®åå­—åˆ¤æ–­å­˜çš„å•¥ time_t now = time(NULL); //TODO æ‰“å¼€typoraè½¯ä»¶ void open_exe_from_path(const char *path) { WinExec(path, SW_SHOWNORMAL); cout \u003c\u003c \"open your custom editor successfully!\" \u003c\u003c endl; } //TODO æ‰“å°å†…å®¹ void show(vector\u003cstring\u003e \u0026src) { for (int i = 0; i \u003c src.size(); i++) { if (!src[i].empty()) printf(\"%d: %s\\n\", i, src[i].c_str()); } } //TODO æ›¿æ¢stringçš„å†…å®¹ void to_replace(string \u0026s, const string \u0026target, const string \u0026replacement) { int i = 0; int find_ret; int tar_len = target.size(); while ((find_ret = s.find(target, i)) != -1) { s.replace(find_ret, tar_len, replacement); i = find_ret; } } //TODO æ‰“å°å‡ºé”™çš„ä¿¡æ¯ï¼Œå¹¶é€€å‡ºç¨‹åº void exit_print(","date":"2022-02-12","objectID":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/:3:0","tags":["Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·"],"title":"Hugoåšå®¢å›¾å½¢åŒ–å†™ä½œå·¥å…·","uri":"/posts/hugo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/"},{"categories":["ç®—æ³•â€”â€”æœç´¢ç±»é—®é¢˜"],"content":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡","date":"2022-02-12","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡"],"title":"å¹¶æŸ¥é›†/dfsè§£å†³â€”â€”leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”æœç´¢ç±»é—®é¢˜"],"content":"é¢˜ç›®æè¿° é¢˜ç›®é“¾æ¥ ","date":"2022-02-12","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/:1:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡"],"title":"å¹¶æŸ¥é›†/dfsè§£å†³â€”â€”leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”æœç´¢ç±»é—®é¢˜"],"content":"é¢˜ç›®è§£æ ä¸€ã€ä»¥è¾¹ç•Œå€¼ä¸ºå¯¹è±¡è¿›è¡Œæœç´¢è§£å†³ ä¸€å¼€å§‹å¾ˆå¿«å°±æƒ³åˆ°ç”¨æ¯”è¾ƒæš´åŠ›çš„ç›´æ¥dfsæ·±æœï¼Œç„¶åå°±è¶…æ—¶äº†ã€‚ æ³¨æ„æ­¤é¢˜ç”±äºä»¥ 1 æ˜¯å¦èƒ½å»¶ç”³åˆ°æ•´ä¸ªè¾¹ç•Œä»¥å¤–æ¥åˆ¤æ–­æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ 1 æ‰€ä»¥æˆ‘ä»¬éœ€è¦å–å·§ï¼Œåº”è¯¥ä»¥æ‰€æœ‰è¾¹ç•Œçš„ 1 ä¸ºå¯¹è±¡å…ˆæŠŠæ‰€æœ‰èƒ½è¶…å‡ºçš„ 1 æœå‡ºæ¥ï¼Œç„¶åå‰©ä½™çš„ 1 å°±æ˜¯ç­”æ¡ˆäº†ã€‚ äºŒã€å¹¶æŸ¥é›†åˆå¹¶+æ˜¯å¦æ¥å£¤è¾¹ç•Œå±æ€§æ›´æ–° åˆ›å»ºä¸€ä¸ªå¹¶æŸ¥é›†ï¼Œç”¨ä¸€ç»´æ•°ç»„å­˜ä¸‹æ‰€æœ‰äºŒç»´æ•°ç»„çš„å…ƒç´ ï¼ŒåŒæ—¶å†å¢åŠ ä¸€ä¸ªä¸€ç»´æ•°ç»„ç”¨äºåˆ¤æ–­æ˜¯å¦è¾¹ç•Œæ¥å£¤ï¼Œæ¯æ¬¡ merge æ“ä½œçš„æ—¶å€™åˆ¤æ–­éœ€è¦åŒæ—¶æ‰§è¡Œåˆå¹¶æ“ä½œå’Œæ˜¯å¦æ¥å£¤çš„æ›´æ–°ã€‚ å…ˆåˆ©ç”¨å¹¶æŸ¥é›† merge æ‰€æœ‰çš„ 1ï¼Œç„¶åå†æŒ¨ä¸ªåˆ¤æ–­æ˜¯å¦æ¥å£¤å³å¯ã€‚ ","date":"2022-02-12","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/:2:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡"],"title":"å¹¶æŸ¥é›†/dfsè§£å†³â€”â€”leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”æœç´¢ç±»é—®é¢˜"],"content":"è§£é¢˜ä»£ç  dfsæ–¹æ³•ï¼š class Solution { public: vector\u003cvector\u003cint\u003e\u003e dirs = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}}; int numEnclaves(vector\u003cvector\u003cint\u003e\u003e\u0026 grid) { this-\u003em = grid.size(); this-\u003en = grid[0].size(); this-\u003evisited = vector\u003cvector\u003cbool\u003e\u003e(m, vector\u003cbool\u003e(n, false)); for (int i = 0; i \u003c m; i++) { dfs(grid, i, 0); dfs(grid, i, n - 1); } for (int j = 1; j \u003c n - 1; j++) { dfs(grid, 0, j); dfs(grid, m - 1, j); } int enclaves = 0; for (int i = 1; i \u003c m - 1; i++) { for (int j = 1; j \u003c n - 1; j++) { if (grid[i][j] == 1 \u0026\u0026 !visited[i][j]) { enclaves++; } } } return enclaves; } void dfs(const vector\u003cvector\u003cint\u003e\u003e \u0026 grid, int row, int col) { if (row \u003c 0 || row \u003e= m || col \u003c 0 || col \u003e= n || grid[row][col] == 0 || visited[row][col]) { return; } visited[row][col] = true; for (auto \u0026 dir : dirs) { dfs(grid, row + dir[0], col + dir[1]); } } private: int m, n; vector\u003cvector\u003cbool\u003e\u003e visited; }; å¹¶æŸ¥é›†æ–¹æ³•ï¼š //è¿™ä¸ªå¹¶æŸ¥é›†å†™çš„å¥½ class UnionFind { public: UnionFind(const vector\u003cvector\u003cint\u003e\u003e \u0026 grid) { int m = grid.size(), n = grid[0].size(); this-\u003eparent = vector\u003cint\u003e(m * n); //å­˜å‚¨å¹¶æŸ¥é›†çš„è”é€šå…³ç³» this-\u003eonEdge = vector\u003cbool\u003e(m * n, false);//æŸ¥æ‰¾æ˜¯å¦æœ‰åœ¨è¾¹ç•Œå…ƒç´ çš„å…³é”®æ‰€åœ¨ this-\u003erank = vector\u003cint\u003e(m * n); for (int i = 0; i \u003c m; i++) { //æ ¹æ®ä¼ è¿‡æ¥çš„äºŒç»´æ•°ç»„æ›´æ–°å¹¶æŸ¥é›†ï¼ŒåŒæ—¶æ›´æ–°onEdgeè¾¹ç•Œå…ƒç´ ä¸ºtrue for (int j = 0; j \u003c n; j++) { if (grid[i][j] == 1) { int index = i * n + j; parent[index] = index; if (i == 0 || i == m - 1 || j == 0 || j == n - 1) { onEdge[index] = true; } } } } } int find(int i) { if (parent[i] != i) { parent[i] = find(parent[i]); } return parent[i]; } void uni(int x, int y) { int rootx = find(x); int rooty = find(y); if (rootx != rooty) { if (rank[rootx] \u003e rank[rooty]) {//è¿™é‡Œæ—¶æŒ‰ç§©ä¼˜åŒ–å¤„ç† parent[rooty] = rootx; onEdge[rootx] = onEdge[rootx] | onEdge[rooty];//æ¯æ¬¡åˆå¹¶å…ƒç´ çš„æ—¶å€™åŒæ—¶æŠŠè¿™ä¸€å †æ˜¯å¦ä¸è¾¹ç•Œæ¥å£¤çš„å…³ç³»æ›´æ–° } else if (rank[rootx] \u003c rank[rooty]) { parent[rootx] = rooty; onEdge[rooty] = onEdge[rooty] | onEdge[rootx]; } else { parent[rooty] = rootx; onEdge[rootx] = onEdge[rootx] | onEdge[rooty]; rank[rootx]++; } } } bool isOnEdge(int i) { return onEdge[find(i)]; } private: vector\u003cint\u003e parent; //å¹¶æŸ¥é›†çš„å¿…å¤‡ vector\u003cbool\u003e onEdge; //åˆ¤æ–­æ˜¯å¦æ¥å£¤è¾¹ç•Œ vector\u003cint\u003e rank; //æŒ‰ç§© }; class Solution { public: int numEnclaves(vector\u003cvector\u003cint\u003e\u003e\u0026 grid) { int m = grid.size(), n = grid[0].size(); UnionFind uf(grid); //å…ˆæŠŠæ‰€æœ‰çš„1è¿æ¥èµ·æ¥ï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦æ¥å£¤è¾¹ç•Œå³å¯ //ç”±äºå¾ªç¯æ˜¯ä»ä¸Šå¾€ä¸‹ï¼Œä»å·¦å¾€å³ï¼Œæ•…å·¦å’Œä¸Šæ–¹å‘ä¸éœ€è¦è€ƒè™‘ for (int i = 0; i \u003c m; i++) { for (int j = 0; j \u003c n; j++) { if (grid[i][j] == 1) { int index = i * n + j; if (j + 1 \u003c n \u0026\u0026 grid[i][j + 1] == 1) { uf.uni(index, index + 1); } if (i + 1 \u003c m \u0026\u0026 grid[i + 1][j] == 1) { uf.uni(index, index + n); } } } } //åˆ¤æ–­è¿™ä¸ª1æ˜¯å¦å’Œè¾¹ç•Œæ¥å£¤ int enclaves = 0; for (int i = 1; i \u003c m - 1; i++) { for (int j = 1; j \u003c n - 1; j++) { if (grid[i][j] == 1 \u0026\u0026 !uf.isOnEdge(i * n + j)) { enclaves++; } } } return enclaves; } }; ","date":"2022-02-12","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/:3:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡"],"title":"å¹¶æŸ¥é›†/dfsè§£å†³â€”â€”leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”1020é£åœ°çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%981020%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·","date":"2022-02-12","objectID":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/","tags":["è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·"],"title":"è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·","uri":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/"},{"categories":["C++å®æˆ˜"],"content":"è½¯ä»¶ä½¿ç”¨ ä½¿ç”¨å‰è¯·ä¸‹è½½å¥½gitå·¥å…· è§†é¢‘æ•™ç¨‹ ","date":"2022-02-12","objectID":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/:1:0","tags":["è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·"],"title":"è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·","uri":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/"},{"categories":["C++å®æˆ˜"],"content":"é¡¹ç›®ä»‹ç» é¡¹ç›®æ‰€åœ¨åœ° æ¸©é¦¨æç¤ºï¼šæœ¬åœ°æ­å»ºå®Œç½‘ç«™æ¡†æ¶åï¼Œæ¯æ¬¡æ–°å»ºæ–‡ç« çš„å†™ä½œä½“éªŒè¾ƒå·®ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å¦ä¸€ä¸ª hugo åšå®¢è‡ªåŠ¨åŒ–å†™ä½œå·¥å…· srcç›®å½•ï¼šå­˜æ”¾å›¾å½¢åŒ–é¡¹ç›®çš„æºä»£ç ï¼Œä½¿ç”¨ Qt6 å¯ç›´æ¥å¯åŠ¨ QHugoInit é¡¹ç›®ã€‚ binç›®å½•ï¼šå­˜æ”¾é¡¹ç›®çš„å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ exec_code.batï¼šç”¨äºå†™å…¥ä»£ç æ‰§è¡Œè„šæœ¬ hugo.exeï¼šæ„å»ºåšå®¢çš„åŸºçŸ³ QHugoInit.exeï¼šè½¯ä»¶å¯åŠ¨ç¨‹åº log.txtï¼šæ•´ä¸ªç¨‹åºæ‰§è¡Œçš„æ—¥å¿— ","date":"2022-02-12","objectID":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/:2:0","tags":["è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·"],"title":"è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·","uri":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/"},{"categories":["C++å®æˆ˜"],"content":"é¡¹ç›®å…³é”®æºç  é€šè¿‡å¤šçº¿ç¨‹é˜²æ­¢ä¸‹è½½æ­¥éª¤æŠŠç”»é¢ç»™é˜»å¡ //TODO ç®€å•å°è£…ä¸€ä¸ªç”¨äºå¤šçº¿ç¨‹é€šä¿¡çš„ç±» class run_thread:public QThread{ public: run_thread() = delete; run_thread(const std::function\u003cvoid()\u003e\u0026Runnable,QObject* parent = nullptr):m_task(nullptr){ m_task = Runnable; } void run()override{ if(m_task!=nullptr); m_task(); } private: std::function\u003cvoid()\u003em_task; }; é€šè¿‡æ–‡ä»¶ioæ§åˆ¶å‘½ä»¤è¡Œçš„ä»£ç æ‰§è¡Œæ¥æ‰§è¡Œå¯¹åº”çš„æ¯ä¸€æ­¥ void MainWindow::on_right_Btn_clicked() { auto path = ui-\u003einput-\u003etext(); if(!QDir(path).exists()||path.isEmpty()){ QMessageBox::warning(nullptr,\"æç¤º\",\"æ–‡ä»¶å¤¹è·¯å¾„ä¸å­˜åœ¨\"); return; } ui-\u003ew2-\u003esetVisible(false); ui-\u003ew4-\u003esetVisible(false); ui-\u003ew3-\u003esetVisible(true); ui-\u003el1-\u003esetText(\"ä¸€åˆ‡å³å°†å‡†å¤‡å°±ç»ª\"); ui-\u003el2-\u003esetText(\"æ­£åœ¨åˆå§‹åŒ–æ‚¨çš„hugoç½‘ç«™\"); ui-\u003el3-\u003esetOpenExternalLinks(true); ui-\u003el3-\u003esetText(R\"(\u003chtml\u003e \u003cstyle\u003e a { color:#3281b8; } \u003c/style\u003e\u003chead/\u003e\u003cbody\u003e\u003cp\u003eè¿™å¯èƒ½ä¼šè€—è´¹å‡ åˆ†é’Ÿï¼Œè¯·ä¸è¦å¼ºåˆ¶å…³é—­åº”ç”¨ç¨‹åº\u003cbr/\u003e\u003cbr/\u003eé—²å¾—æ— èŠï¼Ÿ\u003ca href=\"https://github.com/ACking-you/AutoHugoSetup\"\u003eç»™ä¸ªstar\u003c/a\u003e\u003c/p\u003e\u003c/body\u003e\u003c/html\u003e)\"); QProcess qp; std::ofstream writer; m_Path = path; auto std_str = m_Path.toStdString(); //first step writer.open(\"./exec_code.bat\"); if(!writer.is_open()){ QMessageBox::warning(nullptr,\"æç¤º\",\"ç¬¬ä¸€æ¬¡å†™å…¥æ–‡ä»¶æ‰“å¼€å¤±è´¥\"); writer.close(); QCoreApplication::exit(1); } ui-\u003einfo_text-\u003esetText(\"æ­£åœ¨åˆå§‹åŒ– hugo åšå®¢\"); std::replace(std_str.begin(),std_str.end(),'/','\\\\'); //è¿™é‡Œæ³¨æ„ï¼šcmd32å‘½ä»¤åªæ”¯æŒåæ–œæ ï¼ writer\u003c\u003cR\"(chcp 65001)\"\u003c\u003c'\\n'; //è®¾ç½®ç¼–ç ä¸ºutf-8 writer\u003c\u003cR\"(copy .\\hugo.exe )\"\u003c\u003cstd_str\u003c\u003c'\\n'; //copyä¸€ä»½hugo.exeåˆ°ç›®æ ‡ç›®å½•ä¸‹ writer\u003c\u003c\"cd /d\"\u003c\u003cstd_str\u003c\u003c'\\n'; //åˆ‡æ¢åˆ°åˆ›å»ºç›®å½•ï¼Œè¿™é‡Œ/dä»£è¡¨ç›´æ¥ä¸€æ­¥åˆ°ä½çš„åˆ‡æ¢ç›®å½• writer\u003c\u003cR\"(.\\hugo new site myBlog)\"\u003c\u003c'\\n'; //åˆå§‹åŒ–hugoå‘½ä»¤ writer.close(); qp.startCommand(R\"(.\\exec_code.bat)\"); if(qp.waitForFinished()){ QString str = qp.readAll(); m_logWriter\u003c\u003c\"-----1st step-----\\n\\r\"\u003c\u003cstr.toStdString()\u003c\u003c'\\n'; ui-\u003einfo_text-\u003esetText(\" hugo åšå®¢åˆå§‹åŒ–å®Œæˆ\"); } //second stepï¼šæ‰§è¡Œæ­¤æ­¥ä¹‹å‰å…ˆåˆ¤æ–­gitæ˜¯å¦å¯ç”¨ï¼Œæ­¤æ­¥æ‰§è¡Œæ—¶é—´æœ€ä¹…ï¼Œä¸è¦è®©å®ƒå¡æ­»ä¸»çº¿ç¨‹ï¼Œæ•…éœ€è¦ç”¨åˆ°å¤šçº¿ç¨‹æŠ€æœ¯ qp.startCommand(\"git\"); if(!qp.waitForFinished()){ QMessageBox::warning(nullptr,\"æç¤º\",\"æœªå®‰è£…gitå·¥å…·æˆ–æœªè®¾ç½®åˆ°ç¯å¢ƒå˜é‡\"); QCoreApplication::exit(1); } writer.open(\"./exec_code.bat\"); if(!writer.is_open()){ QMessageBox::warning(nullptr,\"æç¤º\",\"ç¬¬äºŒæ¬¡å†™å…¥æ–‡ä»¶æ‰“å¼€å¤±è´¥\"); writer.close(); QCoreApplication::exit(1); } ui-\u003einfo_text-\u003esetText(\"æ­£åœ¨ä¸‹è½½ FeelIt ä¸»é¢˜\"); std::filesystem::path blog_path = std_str; blog_path /= \"myBlog\"; m_Path = blog_path.string().c_str(); writer\u003c\u003c\"cd /d\"\u003c\u003cblog_path\u003c\u003c\"\\\\themes\"\u003c\u003c'\\n'; //cdåˆ°themesæ–‡ä»¶å¤¹ç›®å½•ä¸‹ writer\u003c\u003c\"git clone https://gitee.com/acking-you/FeelIt.git\"\u003c\u003c'\\n';//å¼€å§‹é€šè¿‡gitä¸‹è½½ä¸»é¢˜åŒ… writer.close(); QThread* sub_thread = new run_thread([\u0026]{ //æœ€è€—æ—¶é—´çš„å·¥ä½œåˆ«å»å¹²æ‰°ä¸»çº¿ç¨‹çš„æ­£å¸¸è¿è¡Œï¼Œå¦åˆ™ä¸»çº¿ç¨‹å¯èƒ½çœ‹èµ·æ¥ä¼šé™·å…¥ç˜«ç—ª QProcess tqp; //ä¿¡å·æ§½æœºåˆ¶ï¼Œä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹å®Œæˆä»»åŠ¡å‘é€ä¿¡å·åå†æ‰§è¡Œæœ€åçš„æ­¥éª¤ï¼Œå› ä¸ºè¿™ä¸ªè¿‡ç¨‹è‚¯å®šæ˜¯è¦åŒæ­¥è¿›è¡Œï¼Œæ•…éœ€è¦ä¿¡å·æ§½æ¥ç­‰å¾… connect(\u0026tqp,\u0026QProcess::finished,[\u0026](int exitCode, QProcess::ExitStatus exitStatus){ //step third std::ofstream writer; QProcess qp; writer.open(\"./exec_code.bat\"); if(!writer.is_open()){ QMessageBox::warning(nullptr,\"æç¤º\",\"ç¬¬ä¸‰æ¬¡å†™å…¥æ–‡ä»¶æ‰“å¼€å¤±è´¥\"); writer.close(); QCoreApplication::exit(1); } ui-\u003einfo_text-\u003esetText(\"é…ç½®æœ¬åœ°ä¸»é¢˜ä¸­...\"); writer\u003c\u003c\"cd /d\"\u003c\u003cm_Path.toStdString()\u003c\u003c'\\n'; //cdåˆ°blog_path writer\u003c\u003cR\"(del .\\config.toml)\"\u003c\u003c'\\n'; //åˆ é™¤åŸæœ¬çš„configæ–‡ä»¶ writer\u003c\u003cR\"(move .\\themes\\FeelIt\\config.toml .\\)\"\u003c\u003c'\\n'; //å°†æˆ‘çš„é…ç½®æ–‡ä»¶æ”¾åˆ°é¡¶çº§ç›®å½•å» writer\u003c\u003cR\"(move .\\themes\\FeelIt\\exampleSite\\static\\* .\\static\\)\"\u003c\u003c'\\n';//ç§»åŠ¨staticå›¾ç‰‡èµ„æº writer\u003c\u003cR\"(move ..\\hugo.exe .\\)\"\u003c\u003c'\\n';//å°†ä¹‹å‰çš„hugo.exeç§»åŠ¨åˆ°çœŸæ­£çš„åšå®¢ç›®å½•ä¸‹ writer\u003c\u003cR\"(mkdir .\\content\\posts)\"\u003c\u003c'\\n'; //åˆ›å»ºç”¨äºå†™æ–‡ç« çš„ç›®å½• writer.close(); qp.startCommand(R\"(.\\exec_code.bat)\"); if(qp.waitForFinished(120000)){ ui-\u003einfo_text-\u003esetText(\"é…ç½®å®Œæˆ \"); ending(); m_logWriter\u003c\u003c\"-----3rd step-----\\n\\r\"\u003c\u003cqp.readAll().toStdString(); } }); tqp.startCommand(R\"(.\\exec_code.bat)\"); if(!tqp.waitForFinished(120000)){ QMessageBox::warning(nullptr,\"æç¤º\",\"ä¸‹è½½ä¸»é¢˜å“åº”è¶…æ—¶\"); QCoreApplication::exit(1); }else{ m_logWriter\u003c\u003c\"-----2nd step-----\\n\\r\"\u003c\u003ctqp.readAll().toStdString(); } }); sub_thread-\u003estart(); } ","date":"2022-02-12","objectID":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/:3:0","tags":["è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·"],"title":"è‡ªåŠ¨åŒ–æ­å»ºåšå®¢å·¥å…·","uri":"/posts/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B7%A5%E5%85%B7/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“åŸºç¡€","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“åŸºç¡€ æ•°æ®åº“æ˜¯å­¦ä¹ JavaWebçš„ä¸€ä¸ªå‰ç½®ï¼Œåªæœ‰äº†è§£äº†æ•°æ®åº“çš„æ“ä½œå’Œä½¿ç”¨ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†ç½‘ç«™åº”ç”¨äº§ç”Ÿçš„æ•°æ®ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:0:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ä»€ä¹ˆæ˜¯æ•°æ®åº“ æ•°æ®åº“æ˜¯æ•°æ®ç®¡ç†çš„æœ‰æ•ˆæŠ€æœ¯ï¼Œæ˜¯ç”±ä¸€æ‰¹æ•°æ®æ„æˆçš„æœ‰åºé›†åˆï¼Œè¿™äº›æ•°æ®è¢«å­˜æ”¾åœ¨ç»“æ„åŒ–çš„æ•°æ®è¡¨é‡Œã€‚æ•°æ®è¡¨ä¹‹é—´ç›¸äº’å…³è”ï¼Œåæ˜ å®¢è§‚äº‹ç‰©é—´çš„æœ¬è´¨è”ç³»ã€‚æ•°æ®åº“èƒ½æœ‰æ•ˆåœ°å¸®åŠ©ä¸€ä¸ªç»„ç»‡æˆ–ä¼ä¸šç§‘å­¦åœ°ç®¡ç†å„ç±»ä¿¡æ¯èµ„æºã€‚ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬çš„æ•°æ®å¯ä»¥äº¤ç»™æ•°æ®åº“æ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œç®¡ç†ï¼ŒåŒæ—¶æ•°æ®åº“èƒ½å¤Ÿä¸ºæˆ‘ä»¬æä¾›é«˜æ•ˆçš„è®¿é—®æ€§èƒ½ã€‚ åœ¨JavaSEå­¦ä¹ é˜¶æ®µä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨æ–‡ä»¶I/Oæ¥å°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼Œè¿™æ ·å°±å¯ä»¥å°†ä¸€ä¸ªæ•°æ®æŒä¹…åœ°å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå³ä½¿ç¨‹åºé‡æ–°æ‰“å¼€ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½åŠ è½½å›ä¸Šä¸€æ¬¡çš„æ•°æ®ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„æ•°æ®å˜å¾—éå¸¸å¤šçš„æ—¶å€™ï¼Œè¿™æ ·çš„æ–¹å¼å°±æ˜¾å¾—ä¸å¤ªæ–¹ä¾¿äº†ã€‚åŒæ—¶æˆ‘ä»¬å¦‚æœéœ€è¦æŸ¥æ‰¾ä¼—å¤šæ•°æ®çš„ä¸­çš„æŸä¸€ä¸ªï¼Œå°±åªèƒ½åŠ è½½åˆ°å†…å­˜å†è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯å¾ˆéš¾å—çš„ï¼ è€Œæ•°æ®åº“å°±æ˜¯ä¸“é—¨åšè¿™äº‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€ŸæŸ¥æ‰¾æƒ³è¦çš„æ•°æ®ï¼Œä¾¿æ·åœ°æ’å…¥ã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®ï¼Œå¹¶ä¸”æ•°æ®åº“ä¸ä»…èƒ½åšè¿™äº›äº‹ï¼Œè¿˜èƒ½æä¾›æ›´å¤šä¾¿äºç®¡ç†æ•°æ®å’Œæ“ä½œæ•°æ®çš„åŠŸèƒ½ï¼ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:1:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"å¸¸è§çš„æ•°æ®åº“ å¸¸è§çš„æ•°æ®åº“æœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š MySQL - å…è´¹ï¼Œç”¨çš„æœ€å¤šçš„ï¼Œå¼€æºæ•°æ®åº“ï¼Œé€‚ç”¨äºä¸­å°å‹ Microsoft SQL Server - æ”¶é’±çš„ï¼Œä½†æ˜¯æä¾›æŠ€æœ¯æ”¯æŒï¼Œé€‚ç”¨äºWindows Server Oracle - æ”¶é’±çš„ï¼Œå¤§å‹æ•°æ®åº“ç³»ç»Ÿ è€Œæˆ‘ä»¬è¦å­¦ä¹ çš„æ˜¯MySQLæ•°æ®ï¼Œå…¶å®æ— è®ºå­¦ä¹ å“ªç§æ•°æ®åº“ï¼ŒSQLè¯­å¥å¤§éƒ¨åˆ†éƒ½æ˜¯é€šç”¨çš„ï¼Œåªæœ‰å°‘è®¸è¯­æ³•æ˜¯ä¸é€šç”¨çš„ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å­¦ä¹ ä¸€ç§æ•°æ®åº“å…¶ä»–çš„ä¹Ÿå°±å·®ä¸å¤šéƒ½ä¼šäº†ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:1:1","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®æ¨¡å‹ æ•°æ®æ¨¡å‹ä¸ç°å®ä¸–ç•Œä¸­çš„æ¨¡å‹ä¸€æ ·ï¼Œæ˜¯å¯¹ç°å®ä¸–ç•Œæ•°æ®ç‰¹å¾çš„ä¸€ç§æŠ½è±¡ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„ç±»å°±æ˜¯å¯¹ç°å®ä¸–ç•Œæ•°æ®çš„ä¸€ç§æŠ½è±¡ï¼Œæ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿçš„ç‰¹å¾åŒ…æ‹¬å§“åï¼Œå¹´é¾„ï¼Œå¹´çº§ï¼Œå­¦å·ï¼Œä¸“ä¸šç­‰ï¼Œè¿™äº›ç‰¹å¾ä¹Ÿç§°ä¸ºå®ä½“çš„ä¸€ç§å±æ€§ï¼Œå±æ€§å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š å±æ€§ä¸å¯å†åˆ† ä¸€ä¸ªå®ä½“çš„å±æ€§å¯ä»¥æœ‰å¾ˆå¤šä¸ª ç”¨äºå”¯ä¸€åŒºåˆ†ä¸åŒå®ä½“çš„çš„å±æ€§ï¼Œç§°ä¸ºKeyï¼Œæ¯”å¦‚æ¯ä¸ªåŒå­¦çš„å­¦å·éƒ½æ˜¯ä¸ä¸€æ ·çš„ å±æ€§å–å€¼å¯ä»¥æœ‰ä¸€å®šçš„çº¦æŸï¼Œæ¯”å¦‚æ€§åˆ«åªèƒ½æ˜¯ç”·æˆ–æ˜¯å¥³ å®ä½“æˆ–æ˜¯å±æ€§ä¹‹é—´å¯ä»¥å…·æœ‰ä¸€å®šçš„è”ç³»ï¼Œæ¯”å¦‚ä¸€ä¸ªè€å¸ˆå¯ä»¥æ•™å¾ˆå¤šä¸ªå­¦ç”Ÿï¼Œè€Œå­¦ç”Ÿç›¸å¯¹äºè€å¸ˆå°±æ˜¯è¢«æ•™æˆçš„å…³ç³»ï¼›åˆæ¯”å¦‚æ¯ä¸ªåŒå­¦éƒ½æœ‰ä¸€ä¸ªå­¦å·ä¸å…¶å”¯ä¸€å¯¹åº”ï¼Œå› æ­¤å­¦å·å’Œå­¦ç”Ÿä¹‹é—´ä¹Ÿæœ‰ä¸€ç§è”ç³»ã€‚è€Œåƒä¸€ä¸ªè€å¸ˆæ•™å¤šä¸ªå­¦ç”Ÿçš„è”ç³»å°±æ˜¯ä¸€ç§ä¸€å¯¹å¤šçš„è”ç³»ï¼ˆ1:nï¼‰ï¼Œè€Œå­¦å·å”¯ä¸€å¯¹åº”ï¼Œå°±æ˜¯ä¸€ç§ä¸€å¯¹ä¸€çš„è”ç³»ï¼ˆ1:1ï¼‰ï¼›æ¯ä¸€ä¸ªè€å¸ˆä¸ä»…å¯ä»¥æ•™å¤šä¸ªå­¦ç”Ÿï¼Œæ¯ä¸€ä¸ªå­¦ç”Ÿä¹Ÿå¯ä»¥æœ‰å¤šä¸ªæ•™å¸ˆï¼Œè¿™å°±æ˜¯ä¸€ç§å¤šå¯¹å¤šçš„è”ç³»ï¼ˆn:mï¼‰ MySQLå°±æ˜¯ä¸€ç§å…³ç³»å‹æ•°æ®åº“ï¼Œé€šè¿‡ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆå¥½åœ°å­˜å‚¨è¿™æ ·å¸¦æœ‰ä¸€å®šè”ç³»çš„æ•°æ®ã€‚ é€šè¿‡æ„å»ºä¸€ä¸ªERå›¾ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå¥½åœ°ç†æ¸…ä¸åŒæ•°æ®æ¨¡å‹ä¹‹é—´çš„å…³ç³»å’Œç‰¹ç‚¹ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:1:2","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“çš„åˆ›å»º æ—¢ç„¶äº†è§£äº†å±æ€§å’Œè”ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥å°è¯•åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­æ·»åŠ ç”¨äºå­˜æ”¾æ•°æ®çš„è¡¨ï¼Œæ¯ä¸€å¼ è¡¨éƒ½ä»£è¡¨ä¸€ç§å®ä½“çš„æ•°æ®ã€‚é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä»€ä¹ˆæ ·å­çš„è¡¨ï¼š å­¦ç”Ÿè¡¨ï¼šç”¨äºå­˜æ”¾æ‰€æœ‰å­¦ç”Ÿçš„æ•°æ®ï¼Œå­¦ç”Ÿï¼ˆå­¦å·ï¼Œå§“åï¼Œæ€§åˆ«ï¼‰ æ•™å¸ˆè¡¨ï¼šç”¨äºå­˜æ”¾æ‰€æœ‰æ•™å¸ˆçš„æ•°æ®ï¼Œæ•™å¸ˆï¼ˆæ•™å¸ˆå·ï¼Œå§“åï¼‰ æˆè¯¾è¡¨ï¼šç”¨äºå­˜æ”¾æ•™å¸ˆä¸å­¦ç”Ÿçš„æˆè¯¾ä¿¡æ¯ï¼Œæˆè¯¾ï¼ˆå­¦å·ï¼Œæ•™å¸ˆå·ï¼‰ å…¶ä¸­ï¼Œæ ‡æ³¨ä¸‹åˆ’çº¿çš„å±æ€§ï¼Œä½œä¸ºKeyï¼Œç”¨äºåŒºåˆ«äºå…¶ä»–å®ä½“æ•°æ®çš„å”¯ä¸€æ ‡è®°ã€‚ ä¸ºäº†ç†è§£èµ·æ¥æ›´åŠ è½»æ¾ï¼Œæˆ‘ä»¬ä»å›¾å½¢ç•Œé¢æ“ä½œå†è®²åˆ°SQLè¯­å¥ï¼Œè¯·ä¸è¦ç€æ€¥ã€‚æˆ‘ä»¬ç°åœ¨é€šè¿‡Navicatæˆ–ideaè‡ªå¸¦çš„æ•°æ®åº“å®¢æˆ·ç«¯æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å’Œä¸Šè¿°ä¸‰ä¸ªè¡¨ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:2:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“çš„è§„èŒƒåŒ– è¦å»è®¾è®¡å­˜æ”¾ä¸€ä¸ªå®ä½“çš„è¡¨ï¼Œæˆ‘ä»¬å°±éœ€è¦äº†è§£æ•°æ®åº“çš„å…³ç³»è§„èŒƒåŒ–ï¼Œå°½å¯èƒ½å‡å°‘â€œä¸å¥½â€çš„å…³ç³»å­˜åœ¨ï¼Œå¦‚ä½•è®¾è®¡ä¸€ä¸ªä¼˜è‰¯çš„å…³ç³»æ¨¡å‹æ˜¯æœ€å…³é”®çš„å†…å®¹ï¼ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬è¦å­¦ä¹ ä¸€ä¸‹æ¯ä¸€ä¸ªè¡¨è¯¥å¦‚ä½•å»è®¾è®¡ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:3:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ ç¬¬ä¸€èŒƒå¼æ˜¯æŒ‡æ•°æ®åº“çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹ï¼Œè€Œä¸‹é¢è¿™æ ·çš„å°±å­˜åœ¨å¯åˆ†å‰²çš„æƒ…å†µï¼š å­¦ç”Ÿï¼ˆå§“åï¼Œç”µè¯å·ç ï¼‰ ç”µè¯å·ç å®é™…ä¸ŠåŒ…æ‹¬äº†å®¶ç”¨åº§æœºç”µè¯å’Œç§»åŠ¨ç”µè¯ï¼Œå› æ­¤å®ƒå¯ä»¥è¢«æ‹†åˆ†ä¸ºï¼š å­¦ç”Ÿï¼ˆå§“åï¼Œåº§æœºå·ç ï¼Œæ‰‹æœºå·ç ï¼‰ æ»¡è¶³ç¬¬ä¸€èŒƒå¼æ˜¯å…³ç³»å‹æ•°æ®åº“æœ€åŸºæœ¬çš„è¦æ±‚ï¼ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:3:1","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ ç¬¬äºŒèŒƒå¼è¦æ±‚è¡¨ä¸­å¿…é¡»å­˜åœ¨ä¸»é”®ï¼Œä¸”å…¶ä»–çš„å±æ€§å¿…é¡»å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œæ¯”å¦‚ï¼š å­¦ç”Ÿï¼ˆå­¦å·ï¼Œå§“åï¼Œæ€§åˆ«ï¼‰ å­¦å·æ˜¯æ¯ä¸ªå­¦ç”Ÿçš„å”¯ä¸€æ ‡è¯†ï¼Œæ¯ä¸ªå­¦ç”Ÿéƒ½æœ‰ç€ä¸åŒçš„å­¦å·ï¼Œå› æ­¤æ­¤è¡¨ä¸­å­˜åœ¨ä¸€ä¸ªä¸»é”®ï¼Œå¹¶ä¸”æ¯ä¸ªå­¦ç”Ÿçš„æ‰€æœ‰å±æ€§éƒ½ä¾èµ–äºå­¦å·ï¼Œå­¦å·å‘ç”Ÿæ”¹å˜å°±ä»£è¡¨å­¦ç”Ÿå‘ç”Ÿæ”¹å˜ï¼Œå§“åå’Œæ€§åˆ«éƒ½ä¼šå› æ­¤å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰æ­¤è¡¨æ»¡è¶³ç¬¬äºŒèŒƒå¼ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:3:2","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ åœ¨æ»¡è¶³ç¬¬äºŒèŒƒå¼çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¸ä¼ é€’ä¾èµ–äºä¸»é”®ï¼Œæ»¡è¶³ç¬¬ä¸‰èŒƒå¼ã€‚ å­¦ç”Ÿå€Ÿä¹¦æƒ…å†µï¼ˆå€Ÿé˜…ç¼–å·ï¼Œå­¦ç”Ÿå­¦å·ï¼Œä¹¦ç±ç¼–å·ï¼Œä¹¦ç±åç§°ï¼Œä¹¦ç±ä½œè€…ï¼‰ å®é™…ä¸Šä¹¦ç±ç¼–å·ä¾èµ–äºå€Ÿé˜…ç¼–å·ï¼Œè€Œä¹¦ç±åç§°å’Œä¹¦ç±ä½œè€…ä¾èµ–äºä¹¦ç±ç¼–å·ï¼Œå› æ­¤å­˜åœ¨ä¼ é€’ä¾èµ–çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¹¦ç±ä¿¡æ¯è¿›è¡Œå•ç‹¬æ‹†åˆ†ä¸ºå¦ä¸€å¼ è¡¨ï¼š å­¦ç”Ÿå€Ÿä¹¦æƒ…å†µï¼ˆå€Ÿé˜…ç¼–å·ï¼Œå­¦ç”Ÿå­¦å·ï¼Œä¹¦ç±ç¼–å·ï¼‰ ä¹¦ç±ï¼ˆä¹¦ç±ç¼–å·ï¼Œä¹¦ç±åç§°ï¼Œä¹¦ç±ä½œè€…ï¼‰ è¿™æ ·å°±æ¶ˆé™¤äº†ä¼ é€’ä¾èµ–ï¼Œä»è€Œæ»¡è¶³ç¬¬ä¸‰èŒƒå¼ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:3:3","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"BCNF BCNFä½œä¸ºç¬¬ä¸‰èŒƒå¼çš„è¡¥å……ï¼Œå‡è®¾ä»“åº“ç®¡ç†å…³ç³»è¡¨ä¸ºStorehouseManage(ä»“åº“ID, å­˜å‚¨ç‰©å“ID, ç®¡ç†å‘˜ID, æ•°é‡)ï¼Œä¸”æœ‰ä¸€ä¸ªç®¡ç†å‘˜åªåœ¨ä¸€ä¸ªä»“åº“å·¥ä½œï¼›ä¸€ä¸ªä»“åº“å¯ä»¥å­˜å‚¨å¤šç§ç‰©å“ã€‚è¿™ä¸ªæ•°æ®åº“è¡¨ä¸­å­˜åœ¨å¦‚ä¸‹å†³å®šå…³ç³»ï¼š (ä»“åº“ID, å­˜å‚¨ç‰©å“ID) â†’(ç®¡ç†å‘˜ID, æ•°é‡) (ç®¡ç†å‘˜ID, å­˜å‚¨ç‰©å“ID) â†’ (ä»“åº“ID, æ•°é‡) æ‰€ä»¥ï¼Œ(ä»“åº“ID, å­˜å‚¨ç‰©å“ID)å’Œ(ç®¡ç†å‘˜ID, å­˜å‚¨ç‰©å“ID)éƒ½æ˜¯StorehouseManageçš„å€™é€‰å…³é”®å­—ï¼Œè¡¨ä¸­çš„å”¯ä¸€éå…³é”®å­—æ®µä¸ºæ•°é‡ï¼Œå®ƒæ˜¯ç¬¦åˆç¬¬ä¸‰èŒƒå¼çš„ã€‚ä½†æ˜¯ï¼Œç”±äºå­˜åœ¨å¦‚ä¸‹å†³å®šå…³ç³»ï¼š (ä»“åº“ID) â†’ (ç®¡ç†å‘˜ID) (ç®¡ç†å‘˜ID) â†’ (ä»“åº“ID) å³å­˜åœ¨å…³é”®å­—æ®µå†³å®šå…³é”®å­—æ®µçš„æƒ…å†µï¼Œå¦‚æœä¿®æ”¹ç®¡ç†å‘˜IDï¼Œé‚£ä¹ˆå°±å¿…é¡»é€ä¸€è¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥å…¶ä¸ç¬¦åˆBCNFèŒƒå¼ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:3:4","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"è®¤è¯†SQLè¯­å¥ ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆStructured Query Languageï¼‰ç®€ç§°SQLï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¯­è¨€ï¼Œå®ƒä¸“é—¨ç”¨äºæ•°æ®åº“çš„æ“ä½œã€‚æ¯ä¸€ç§æ•°æ®åº“éƒ½æ”¯æŒSQLï¼Œä½†æ˜¯ä»–ä»¬ä¹‹é—´ä¼šå­˜åœ¨ä¸€äº›ç»†å¾®çš„å·®å¼‚ï¼Œå› æ­¤ä¸åŒçš„æ•°æ®åº“éƒ½å­˜åœ¨è‡ªå·±çš„â€œæ–¹è¨€â€ã€‚ SQLè¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼ˆå…³é”®å­—æ¨èä½¿ç”¨å¤§å†™ï¼‰ï¼Œå®ƒæ”¯æŒå¤šè¡Œï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨;è¿›è¡Œç»“å°¾ï¼ SQLä¹Ÿæ”¯æŒæ³¨é‡Šï¼Œé€šè¿‡ä½¿ç”¨--æˆ–æ˜¯#æ¥ç¼–å†™æ³¨é‡Šå†…å®¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨/*æ¥è¿›è¡Œå¤šè¡Œæ³¨é‡Šã€‚ æˆ‘ä»¬è¦å­¦ä¹ çš„å°±æ˜¯ä»¥ä¸‹å››ç§ç±»å‹çš„SQLè¯­è¨€ï¼š æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆData Query Language, DQLï¼‰åŸºæœ¬ç»“æ„æ˜¯ç”±SELECTå­å¥ï¼ŒFROMå­å¥ï¼ŒWHEREå­å¥ç»„æˆçš„æŸ¥è¯¢å—ã€‚ æ•°æ®æ“çºµè¯­è¨€ï¼ˆData Manipulation Language, DMLï¼‰æ˜¯SQLè¯­è¨€ä¸­ï¼Œè´Ÿè´£å¯¹æ•°æ®åº“å¯¹è±¡è¿è¡Œæ•°æ®è®¿é—®å·¥ä½œçš„æŒ‡ä»¤é›†ï¼Œä»¥INSERTã€UPDATEã€DELETEä¸‰ç§æŒ‡ä»¤ä¸ºæ ¸å¿ƒï¼Œåˆ†åˆ«ä»£è¡¨æ’å…¥ã€æ›´æ–°ä¸åˆ é™¤ï¼Œæ˜¯å¼€å‘ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„åº”ç”¨ç¨‹åºå¿…å®šä¼šä½¿ç”¨åˆ°çš„æŒ‡ä»¤ã€‚ æ•°æ®åº“å®šä¹‰è¯­è¨€DDL(Data Definition Language)ï¼Œæ˜¯ç”¨äºæè¿°æ•°æ®åº“ä¸­è¦å­˜å‚¨çš„ç°å®ä¸–ç•Œå®ä½“çš„è¯­è¨€ã€‚ DCLï¼ˆData Control Languageï¼‰æ˜¯æ•°æ®åº“æ§åˆ¶è¯­è¨€ã€‚æ˜¯ç”¨æ¥è®¾ç½®æˆ–æ›´æ”¹æ•°æ®åº“ç”¨æˆ·æˆ–è§’è‰²æƒé™çš„è¯­å¥ï¼ŒåŒ…æ‹¬ï¼ˆgrant,deny,revokeç­‰ï¼‰è¯­å¥ã€‚åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œåªæœ‰sysadmin,dbcreator,db_owneræˆ–db_securityadminç­‰äººå‘˜æ‰æœ‰æƒåŠ›æ‰§è¡ŒDCLã€‚ æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„CRUDå…¶å®å°±æ˜¯å¢åˆ æ”¹æŸ¥ï¼ˆCreate/Retrieve/Update/Deleteï¼‰ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:4:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“æ“ä½œ æˆ‘ä»¬å¯ä»¥é€šè¿‡create databaseæ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼š createdatabaseæ•°æ®åº“åä¸ºäº†èƒ½å¤Ÿæ”¯æŒä¸­æ–‡ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºæ—¶å¯ä»¥è®¾å®šç¼–ç æ ¼å¼ï¼š CREATEDATABASEIFNOTEXISTSæ•°æ®åº“åDEFAULTCHARSETutf8COLLATEutf8_general_ci;å¦‚æœæˆ‘ä»¬åˆ›å»ºé”™è¯¯äº†ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ­¤æ•°æ®åº“åˆ é™¤ï¼Œé€šè¿‡ä½¿ç”¨drop databaseæ¥åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ï¼š dropdatabaseæ•°æ®åº“å","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:1","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆ›å»ºè¡¨ æ•°æ®åº“åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬ä¸€èˆ¬é€šè¿‡create tableè¯­å¥æ¥åˆ›å»ºä¸€å¼ è¡¨ï¼š createtableè¡¨å(åˆ—åæ•°æ®ç±»å‹[åˆ—çº§çº¦æŸæ¡ä»¶],åˆ—åæ•°æ®ç±»å‹[åˆ—çº§çº¦æŸæ¡ä»¶],...[,è¡¨çº§çº¦æŸæ¡ä»¶])","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:2","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"SQLæ•°æ®ç±»å‹ ä»¥ä¸‹çš„æ•°æ®ç±»å‹ç”¨äºå­—ç¬¦ä¸²å­˜å‚¨ï¼š char(n)å¯ä»¥å­˜å‚¨ä»»æ„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æ˜¯å›ºå®šé•¿åº¦ä¸ºnï¼Œå¦‚æœæ’å…¥çš„é•¿åº¦å°äºå®šä¹‰é•¿åº¦æ—¶ï¼Œåˆ™ç”¨ç©ºæ ¼å¡«å……ã€‚ varchar(n)ä¹Ÿå¯ä»¥å­˜å‚¨ä»»æ„æ•°é‡å­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸å›ºå®šï¼Œä½†ä¸èƒ½è¶…è¿‡nï¼Œä¸ä¼šç”¨ç©ºæ ¼å¡«å……ã€‚ ä»¥ä¸‹æ•°æ®ç±»å‹ç”¨äºå­˜å‚¨æ•°å­—ï¼š smallintç”¨äºå­˜å‚¨å°çš„æ•´æ•°ï¼ŒèŒƒå›´åœ¨ (-32768ï¼Œ32767) intç”¨äºå­˜å‚¨ä¸€èˆ¬çš„æ•´æ•°ï¼ŒèŒƒå›´åœ¨ (-2147483648ï¼Œ2147483647) bigintç”¨äºå­˜å‚¨å¤§å‹æ•´æ•°ï¼ŒèŒƒå›´åœ¨ (-9,223,372,036,854,775,808ï¼Œ9,223,372,036,854,775,807) floatç”¨äºå­˜å‚¨å•ç²¾åº¦å°æ•° doubleç”¨äºå­˜å‚¨åŒç²¾åº¦çš„å°æ•° ä»¥ä¸‹æ•°æ®ç±»å‹ç”¨äºå­˜å‚¨æ—¶é—´ï¼š dateå­˜å‚¨æ—¥æœŸ timeå­˜å‚¨æ—¶é—´ yearå­˜å‚¨å¹´ä»½ datetimeç”¨äºæ··åˆå­˜å‚¨æ—¥æœŸ+æ—¶é—´ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:3","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆ—çº§çº¦æŸæ¡ä»¶ åˆ—çº§çº¦æŸæœ‰å…­ç§ï¼šä¸»é”®Primary keyã€å¤–é”®foreign key ã€å”¯ä¸€ uniqueã€æ£€æŸ¥ check ï¼ˆMySQLä¸æ”¯æŒï¼‰ã€é»˜è®¤default ã€éç©º/ç©ºå€¼ not null/ null ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:4","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"è¡¨çº§çº¦æŸæ¡ä»¶ è¡¨çº§çº¦æŸæœ‰å››ç§ï¼šä¸»é”®ã€å¤–é”®ã€å”¯ä¸€ã€æ£€æŸ¥ ç°åœ¨æˆ‘ä»¬é€šè¿‡SQLè¯­å¥æ¥åˆ›å»ºæˆ‘ä»¬ä¹‹å‰æåˆ°çš„ä¸‰å¼ è¡¨ã€‚ [CONSTRAINT\u003cå¤–é”®å\u003e]FOREIGNKEYå­—æ®µå[ï¼Œå­—æ®µå2ï¼Œâ€¦]REFERENCES\u003cä¸»è¡¨å\u003eä¸»é”®åˆ—1[ï¼Œä¸»é”®åˆ—2ï¼Œâ€¦]","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:5","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ä¿®æ”¹è¡¨ å¦‚æœæˆ‘ä»¬æƒ³ä¿®æ”¹è¡¨ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡alter tableæ¥è¿›è¡Œä¿®æ”¹ï¼š ALTERTABLEè¡¨å[ADDæ–°åˆ—åæ•°æ®ç±»å‹[åˆ—çº§çº¦æŸæ¡ä»¶]][DROPCOLUMNåˆ—å[restrict|cascade]][ALTERCOLUMNåˆ—åæ–°æ•°æ®ç±»å‹]æˆ‘ä»¬å¯ä»¥é€šè¿‡ADDæ¥æ·»åŠ ä¸€ä¸ªæ–°çš„åˆ—ï¼Œé€šè¿‡DROPæ¥åˆ é™¤ä¸€ä¸ªåˆ—ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥æ·»åŠ restrictæˆ–cascadeï¼Œé»˜è®¤æ˜¯restrictï¼Œè¡¨ç¤ºå¦‚æœæ­¤åˆ—ä½œä¸ºå…¶ä»–è¡¨çš„çº¦æŸæˆ–è§†å›¾å¼•ç”¨åˆ°æ­¤åˆ—æ—¶ï¼Œå°†æ— æ³•åˆ é™¤ï¼Œè€Œcascadeä¼šå¼ºåˆ¶è¿å¸¦å¼•ç”¨æ­¤åˆ—çš„çº¦æŸã€è§†å›¾ä¸€èµ·åˆ é™¤ã€‚è¿˜å¯ä»¥é€šè¿‡ALTERæ¥ä¿®æ”¹æ­¤åˆ—çš„å±æ€§ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:6","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆ é™¤è¡¨ æˆ‘ä»¬å¯ä»¥é€šè¿‡drop tableæ¥åˆ é™¤ä¸€ä¸ªè¡¨ï¼š DROPTABLEè¡¨å[restrict|cascade]å…¶ä¸­restrictå’Œcascadeä¸Šé¢çš„æ•ˆæœä¸€è‡´ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:5:7","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“æ“çºµè¯­è¨€ï¼ˆDMLï¼‰ å‰é¢æˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨SQLè¯­å¥æ¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®åº“ä»¥åŠè¡¨ï¼Œè€Œå¦‚ä½•å‘æ•°æ®åº“ä¸­æ’å…¥ã€åˆ é™¤ã€æ›´æ–°æ•°æ®ï¼Œå°†æ˜¯æœ¬ç‰ˆå—è®¨è®ºçš„é‡ç‚¹ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:6:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ’å…¥æ•°æ® é€šè¿‡ä½¿ç”¨insert intoè¯­å¥æ¥å‘æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼ˆä¸€æ¡è®°å½•ï¼‰ï¼š INSERTINTOè¡¨åVALUES(å€¼1,å€¼2,å€¼3)å¦‚æœæ’å…¥çš„æ•°æ®ä¸åˆ—ä¸€ä¸€å¯¹åº”ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥åˆ—åï¼Œä½†æ˜¯å¦‚æœå¸Œæœ›å‘æŒ‡å®šåˆ—ä¸Šæ’å…¥æ•°æ®ï¼Œå°±éœ€è¦ç»™å‡ºåˆ—åï¼š INSERTINTOè¡¨å(åˆ—å1,åˆ—å2)VALUES(å€¼1,å€¼2)æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§å‘æ•°æ®åº“ä¸­æ’å…¥å¤šæ¡æ•°æ®ï¼š INSERTINTOè¡¨å(åˆ—å1,åˆ—å2)VALUES(å€¼1,å€¼2),(å€¼1,å€¼2),(å€¼1,å€¼2)æˆ‘ä»¬æ¥è¯•è¯•çœ‹å‘æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„è¡¨ä¸­æ·»åŠ ä¸‰æ¡æ•°æ®ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:6:1","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ä¿®æ”¹æ•°æ® æˆ‘ä»¬å¯ä»¥é€šè¿‡updateè¯­å¥æ¥æ›´æ–°è¡¨ä¸­çš„æ•°æ®ï¼š UPDATEè¡¨åSETåˆ—å=å€¼,...WHEREæ¡ä»¶æ³¨æ„ï¼ŒSQLè¯­å¥ä¸­çš„ç­‰äºåˆ¤æ–­æ˜¯= **è­¦å‘Šï¼š**å¦‚æœå¿˜è®°æ·»åŠ WHEREå­—å¥æ¥é™å®šæ¡ä»¶ï¼Œå°†ä½¿å¾—æ•´ä¸ªè¡¨ä¸­æ­¤åˆ—çš„æ‰€æœ‰æ•°æ®éƒ½è¢«ä¿®æ”¹ï¼ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:6:2","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆ é™¤æ•°æ® æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨deleteæ¥åˆ é™¤è¡¨ä¸­çš„æ•°æ®ï¼š DELETEFROMè¡¨åé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå°†åˆ é™¤è¡¨ä¸­å…¨éƒ¨æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨whereæ¥æ·»åŠ æ¡ä»¶ï¼Œåªåˆ é™¤æŒ‡å®šçš„æ•°æ®ï¼š DELETEFROMè¡¨åWHEREæ¡ä»¶ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:6:3","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“æŸ¥è¯¢è¯­è¨€ï¼ˆDQLï¼‰ æ•°æ®åº“çš„æŸ¥è¯¢æ˜¯æˆ‘ä»¬æ•´ä¸ªæ•°æ®åº“å­¦ä¹ ä¸­çš„é‡ç‚¹å†…å®¹ï¼Œé¢å¯¹æ•°æ®åº“ä¸­åºå¤§çš„æ•°æ®ï¼Œè¯¥å¦‚ä½•å»å¯»æ‰¾æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸»è¦è®¨è®ºçš„é—®é¢˜ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"å•è¡¨æŸ¥è¯¢ å•è¡¨æŸ¥è¯¢æ˜¯æœ€ç®€å•çš„ä¸€ç§æŸ¥è¯¢ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸€å¼ è¡¨ä¸­å»æŸ¥æ‰¾æ•°æ®å³å¯ï¼Œé€šè¿‡ä½¿ç”¨selectè¯­å¥æ¥è¿›è¡Œå•è¡¨æŸ¥è¯¢ï¼š -- æŒ‡å®šæŸ¥è¯¢æŸä¸€åˆ—æ•°æ® SELECTåˆ—å[,åˆ—å]FROMè¡¨å-- ä¼šä»¥åˆ«åæ˜¾ç¤ºæ­¤åˆ— SELECTåˆ—ååˆ«åFROMè¡¨å-- æŸ¥è¯¢æ‰€æœ‰çš„åˆ—æ•°æ® SELECT*FROMè¡¨å-- åªæŸ¥è¯¢ä¸é‡å¤çš„å€¼ SELECTDISTINCTåˆ—åFROMè¡¨åæˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ whereå­—å¥æ¥é™å®šæŸ¥è¯¢ç›®æ ‡ï¼š SELECT*FROMè¡¨åWHEREæ¡ä»¶","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:1","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"å¸¸ç”¨æŸ¥è¯¢æ¡ä»¶ ä¸€èˆ¬çš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼ŒåŒ…æ‹¬=ã€\u003eã€\u003cã€\u003e=ã€\u003c=ã€!=ç­‰ã€‚ æ˜¯å¦åœ¨é›†åˆä¸­ï¼šinã€not in å­—ç¬¦æ¨¡ç³ŠåŒ¹é…ï¼šlikeï¼Œnot like å¤šé‡æ¡ä»¶è¿æ¥æŸ¥è¯¢ï¼šandã€orã€not æˆ‘ä»¬æ¥å°è¯•ä½¿ç”¨ä¸€ä¸‹ä¸Šé¢è¿™å‡ ç§æ¡ä»¶ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:2","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ’åºæŸ¥è¯¢ æˆ‘ä»¬å¯ä»¥é€šè¿‡order byæ¥å°†æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºï¼š SELECT*FROMè¡¨åWHEREæ¡ä»¶ORDERBYåˆ—åASC|DESCä½¿ç”¨ASCè¡¨ç¤ºå‡åºæ’åºï¼Œä½¿ç”¨DESCè¡¨ç¤ºé™åºæ’åºï¼Œé»˜è®¤ä¸ºå‡åºã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯ä»¥åŒæ—¶æ·»åŠ å¤šä¸ªæ’åºï¼š SELECT*FROMè¡¨åWHEREæ¡ä»¶ORDERBYåˆ—å1ASC|DESC,åˆ—å2ASC|DESCè¿™æ ·ä¼šå…ˆæŒ‰ç…§åˆ—å1è¿›è¡Œæ’åºï¼Œæ¯ç»„åˆ—å1ç›¸åŒçš„æ•°æ®å†æŒ‰ç…§åˆ—å2æ’åºã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:3","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"èšé›†å‡½æ•° èšé›†å‡½æ•°ä¸€èˆ¬ç”¨ä½œç»Ÿè®¡ï¼ŒåŒ…æ‹¬ï¼š count([distinct]*)ç»Ÿè®¡æ‰€æœ‰çš„è¡Œæ•°ï¼ˆdistinctè¡¨ç¤ºå»é‡å†ç»Ÿè®¡ï¼Œä¸‹åŒï¼‰ count([distinct]åˆ—å)ç»Ÿè®¡æŸåˆ—çš„å€¼æ€»å’Œ sum([distinct]åˆ—å)æ±‚ä¸€åˆ—çš„å’Œï¼ˆæ³¨æ„å¿…é¡»æ˜¯æ•°å­—ç±»å‹çš„ï¼‰ avg([distinct]åˆ—å)æ±‚ä¸€åˆ—çš„å¹³å‡å€¼ï¼ˆæ³¨æ„å¿…é¡»æ˜¯æ•°å­—ç±»å‹ï¼‰ max([distinct]åˆ—å)æ±‚ä¸€åˆ—çš„æœ€å¤§å€¼ min([distinct]åˆ—å)æ±‚ä¸€åˆ—çš„æœ€å°å€¼ ä¸€èˆ¬èšé›†å‡½æ•°æ˜¯è¿™æ ·ä½¿ç”¨çš„ï¼š SELECTcount(distinctåˆ—å)FROMè¡¨åWHEREæ¡ä»¶","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:4","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆ†ç»„å’Œåˆ†é¡µæŸ¥è¯¢ é€šè¿‡ä½¿ç”¨group byæ¥å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œåˆ†ç»„ï¼Œå®ƒéœ€è¦ç»“åˆèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼š SELECTsum(*)FROMè¡¨åWHEREæ¡ä»¶GROUPBYåˆ—åæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ havingæ¥é™åˆ¶åˆ†ç»„æ¡ä»¶ï¼š SELECTsum(*)FROMè¡¨åWHEREæ¡ä»¶GROUPBYåˆ—åHAVINGçº¦æŸæ¡ä»¶æˆ‘ä»¬å¯ä»¥é€šè¿‡limitæ¥é™åˆ¶æŸ¥è¯¢çš„æ•°é‡ï¼Œåªå–å‰nä¸ªç»“æœï¼š SELECT*FROMè¡¨åLIMITæ•°é‡æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œåˆ†é¡µï¼š SELECT*FROMè¡¨åLIMITèµ·å§‹ä½ç½®,æ•°é‡","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:5","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"å¤šè¡¨æŸ¥è¯¢ å¤šè¡¨æŸ¥è¯¢æ˜¯åŒæ—¶æŸ¥è¯¢çš„ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨ï¼Œå¤šè¡¨æŸ¥è¯¢ä¼šæé€šè¿‡è¿æ¥è½¬æ¢ä¸ºå•è¡¨æŸ¥è¯¢ã€‚ SELECT*FROMè¡¨1,è¡¨2ç›´æ¥è¿™æ ·æŸ¥è¯¢ä¼šå¾—åˆ°ä¸¤å¼ è¡¨çš„ç¬›å¡å°”ç§¯ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€é¡¹æ•°æ®å’Œå¦ä¸€å¼ è¡¨çš„æ¯ä¸€é¡¹æ•°æ®éƒ½ç»“åˆä¸€æ¬¡ï¼Œä¼šäº§ç”Ÿåºå¤§çš„æ•°æ®ã€‚ SELECT*FROMè¡¨1,è¡¨2WHEREæ¡ä»¶è¿™æ ·ï¼Œåªä¼šä»ç¬›å¡å°”ç§¯çš„ç»“æœä¸­å¾—åˆ°æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚ **æ³¨æ„ï¼š**å¦‚æœä¸¤ä¸ªè¡¨ä¸­éƒ½å¸¦æœ‰æ­¤å±æ€§å—ï¼Œéœ€è¦æ·»åŠ è¡¨åå‰ç¼€æ¥æŒ‡æ˜æ˜¯å“ªä¸€ä¸ªè¡¨çš„æ•°æ®ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:6","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"è‡ªèº«è¿æ¥æŸ¥è¯¢ è‡ªèº«è¿æ¥ï¼Œå°±æ˜¯å°†è¡¨æœ¬èº«å’Œè¡¨è¿›è¡Œç¬›å¡å°”ç§¯è®¡ç®—ï¼Œå¾—åˆ°ç»“æœï¼Œä½†æ˜¯ç”±äºè¡¨åç›¸åŒï¼Œå› æ­¤è¦å…ˆèµ·ä¸€ä¸ªåˆ«åï¼š SELECT*FROMè¡¨ååˆ«å1,è¡¨ååˆ«å2å…¶å®è‡ªèº«è¿æ¥æŸ¥è¯¢å’Œå‰é¢çš„æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¿æ¥å¯¹è±¡å˜æˆè‡ªå·±å’Œè‡ªå·±äº†ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:7","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"å¤–è¿æ¥æŸ¥è¯¢ å¤–è¿æ¥å°±æ˜¯ä¸“é—¨ç”¨äºè”åˆæŸ¥è¯¢æƒ…æ™¯çš„ï¼Œæ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªå­˜å‚¨æ‰€æœ‰ç”¨æˆ·çš„è¡¨ï¼Œè¿˜æœ‰ä¸€å¼ ç”¨æˆ·è¯¦ç»†ä¿¡æ¯çš„è¡¨ï¼Œæˆ‘å¸Œæœ›å°†è¿™ä¸¤å¼ è¡¨ç»“åˆåˆ°ä¸€èµ·æ¥æŸ¥çœ‹å®Œæ•´çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä½¿ç”¨å¤–è¿æ¥æ¥è¿›è¡ŒæŸ¥è¯¢ï¼Œå¤–è¿æ¥æœ‰ä¸‰ç§æ–¹å¼ï¼š é€šè¿‡ä½¿ç”¨inner joinè¿›è¡Œå†…è¿æ¥ï¼Œåªä¼šè¿”å›ä¸¤ä¸ªè¡¨æ»¡è¶³æ¡ä»¶çš„äº¤é›†éƒ¨åˆ†ï¼š é€šè¿‡ä½¿ç”¨left joinè¿›è¡Œå·¦è¿æ¥ï¼Œä¸ä»…ä¼šè¿”å›ä¸¤ä¸ªè¡¨æ»¡è¶³æ¡ä»¶çš„äº¤é›†éƒ¨åˆ†ï¼Œä¹Ÿä¼šè¿”å›å·¦è¾¹è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®ï¼Œè€Œåœ¨å³è¡¨ä¸­ç¼ºå¤±çš„æ•°æ®ä¼šä½¿ç”¨nullæ¥ä»£æ›¿ï¼ˆå³è¿æ¥right joinåŒç†ï¼Œåªæ˜¯åè¿‡æ¥è€Œå·²ï¼Œè¿™é‡Œå°±ä¸å†ä»‹ç»äº†ï¼‰ï¼š ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:8","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"åµŒå¥—æŸ¥è¯¢ æˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢çš„ç»“æœä½œä¸ºå¦ä¸€ä¸ªæŸ¥è¯¢çš„æ¡ä»¶ï¼Œæ¯”å¦‚ï¼š SELECT*FROMè¡¨åWHEREåˆ—å=(SELECTåˆ—åFROMè¡¨åWHEREæ¡ä»¶)æˆ‘ä»¬æ¥å†æ¬¡å°è¯•ç¼–å†™ä¸€ä¸‹åœ¨æœ€å¼€å§‹æˆ‘ä»¬æŸ¥æ‰¾æŸæ•™å¸ˆæ‰€æœ‰å­¦ç”Ÿçš„SQLè¯­å¥ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:7:9","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"æ•°æ®åº“æ§åˆ¶è¯­è¨€ï¼ˆDCLï¼‰ åºå¤§çš„æ•°æ®åº“ä¸å¯èƒ½ç”±ä¸€ä¸ªäººæ¥ç®¡ç†ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¤šçš„ç”¨æˆ·æ¥ä¸€èµ·ç®¡ç†æ•´ä¸ªæ•°æ®åº“ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:8:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"åˆ›å»ºç”¨æˆ· æˆ‘ä»¬å¯ä»¥é€šè¿‡create useræ¥åˆ›å»ºç”¨æˆ·ï¼š CREATEUSERç”¨æˆ·åidentifiedbyå¯†ç ;ä¹Ÿå¯ä»¥ä¸å¸¦å¯†ç ï¼š CREATEUSERç”¨æˆ·å;æˆ‘ä»¬å¯ä»¥é€šè¿‡@æ¥é™åˆ¶ç”¨æˆ·ç™»å½•çš„ç™»å½•IPåœ°å€ï¼Œ%è¡¨ç¤ºåŒ¹é…æ‰€æœ‰çš„IPåœ°å€ï¼Œé»˜è®¤ä½¿ç”¨çš„å°±æ˜¯ä»»æ„IPåœ°å€ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:8:1","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ç™»é™†ç”¨æˆ· é¦–å…ˆéœ€è¦æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡cmdå»ç™»é™†mysqlï¼š login-uç”¨æˆ·å-pè¾“å…¥å¯†ç åå³å¯ç™»é™†æ­¤ç”¨æˆ·ï¼Œæˆ‘ä»¬è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥çœ‹çœ‹èƒ½å¦è®¿é—®æ‰€æœ‰æ•°æ®åº“ï¼š showdatabases;æˆ‘ä»¬å‘ç°ï¼Œè™½ç„¶æ­¤ç”¨æˆ·èƒ½å¤ŸæˆåŠŸç™»å½•ï¼Œä½†æ˜¯å¹¶ä¸èƒ½æŸ¥çœ‹å®Œæ•´çš„æ•°æ®åº“åˆ—è¡¨ï¼Œè¿™æ˜¯å› ä¸ºæ­¤ç”¨æˆ·è¿˜æ²¡æœ‰æƒé™ï¼ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:8:2","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ç”¨æˆ·æˆæƒ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨grantæ¥ä¸ºä¸€ä¸ªæ•°æ®åº“ç”¨æˆ·è¿›è¡Œæˆæƒï¼š grantall|æƒé™1,æƒé™2...(åˆ—1,...)onæ•°æ®åº“.è¡¨toç”¨æˆ·[withgrantoption]å…¶ä¸­allä»£è¡¨æˆäºˆæ‰€æœ‰æƒé™ï¼Œå½“æ•°æ®åº“å’Œè¡¨ä¸º*ï¼Œä»£è¡¨ä¸ºæ‰€æœ‰çš„æ•°æ®åº“å’Œè¡¨éƒ½æˆæƒã€‚å¦‚æœåœ¨æœ€åæ·»åŠ äº†with grant optionï¼Œé‚£ä¹ˆè¢«æˆæƒçš„ç”¨æˆ·è¿˜èƒ½å°†å·²è·å¾—çš„æˆæƒç»§ç»­æˆæƒç»™å…¶ä»–ç”¨æˆ·ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨revokeæ¥æ”¶å›ä¸€ä¸ªæƒé™ï¼š revokeall|æƒé™1,æƒé™2...(åˆ—1,...)onæ•°æ®åº“.è¡¨fromç”¨æˆ· ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:8:3","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"è§†å›¾ è§†å›¾æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœï¼Œä¸è¿‡æˆ‘ä»¬æ¯æ¬¡éƒ½å¯ä»¥é€šè¿‡æ‰“å¼€è§†å›¾æ¥æŒ‰ç…§æˆ‘ä»¬æƒ³è¦çš„æ ·å­æŸ¥çœ‹æ•°æ®ã€‚æ—¢ç„¶è§†å›¾æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœï¼Œé‚£ä¹ˆå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªè™šè¡¨ï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œæ•°æ®å®é™…ä¸Šè¿˜æ˜¯å­˜æ”¾åœ¨åŸæ¥çš„è¡¨ä¸­ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡create viewæ¥åˆ›å»ºè§†å›¾; CREATEVIEWè§†å›¾åç§°(åˆ—å)aså­æŸ¥è¯¢è¯­å¥[WITHCHECKOPTION];WITH CHECK OPTIONæ˜¯æŒ‡å½“åˆ›å»ºåï¼Œå¦‚æœæ›´æ–°è§†å›¾ä¸­çš„æ•°æ®ï¼Œæ˜¯å¦è¦æ»¡è¶³å­æŸ¥è¯¢ä¸­çš„æ¡ä»¶è¡¨è¾¾å¼ï¼Œä¸æ»¡è¶³å°†æ— æ³•æ’å…¥ï¼Œåˆ›å»ºåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨selectè¯­å¥æ¥ç›´æ¥æŸ¥è¯¢è§†å›¾ä¸Šçš„æ•°æ®äº†ï¼Œå› æ­¤ï¼Œè¿˜èƒ½åœ¨è§†å›¾çš„åŸºç¡€ä¸Šï¼Œå¯¼å‡ºå…¶ä»–çš„è§†å›¾ã€‚ è‹¥è§†å›¾æ˜¯ç”±ä¸¤ä¸ªä»¥ä¸ŠåŸºæœ¬è¡¨å¯¼å‡ºçš„ï¼Œåˆ™æ­¤è§†å›¾ä¸å…è®¸æ›´æ–°ã€‚ è‹¥è§†å›¾çš„å­—æ®µæ¥è‡ªå­—æ®µè¡¨è¾¾å¼æˆ–å¸¸æ•°ï¼Œåˆ™ä¸å…è®¸å¯¹æ­¤è§†å›¾æ‰§è¡ŒINSERTå’ŒUPDATEæ“ä½œï¼Œä½†å…è®¸æ‰§è¡ŒDELETEæ“ä½œã€‚ è‹¥è§†å›¾çš„å­—æ®µæ¥è‡ªé›†å‡½æ•°ï¼Œåˆ™æ­¤è§†å›¾ä¸å…è®¸æ›´æ–°ã€‚ è‹¥è§†å›¾å®šä¹‰ä¸­å«æœ‰GROUP BYå­å¥ï¼Œåˆ™æ­¤è§†å›¾ä¸å…è®¸æ›´æ–°ã€‚ è‹¥è§†å›¾å®šä¹‰ä¸­å«æœ‰DISTINCTçŸ­è¯­ï¼Œåˆ™æ­¤è§†å›¾ä¸å…è®¸æ›´æ–°ã€‚ è‹¥è§†å›¾å®šä¹‰ä¸­æœ‰åµŒå¥—æŸ¥è¯¢ï¼Œå¹¶ä¸”å†…å±‚æŸ¥è¯¢çš„FROMå­å¥ä¸­æ¶‰åŠçš„è¡¨ä¹Ÿæ˜¯å¯¼å‡ºè¯¥è§†å›¾çš„åŸºæœ¬è¡¨ï¼Œåˆ™æ­¤è§†å›¾ä¸å…è®¸æ›´æ–°ã€‚ä¾‹å¦‚å°†æˆç»©åœ¨å¹³å‡æˆç»©ä¹‹ä¸Šçš„å…ƒç»„å®šä¹‰æˆä¸€ä¸ªè§†å›¾GOOD_SCï¼š CREATE VIEW GOOD_SC AS SELECT Sno, Cno, Grade FROM SC WHERE Grade \u003e (SELECT AVG(Grade) FROM SC); å¯¼å‡ºè§†å›¾GOOD_SCçš„åŸºæœ¬è¡¨æ˜¯SCï¼Œå†…å±‚æŸ¥è¯¢ä¸­æ¶‰åŠçš„è¡¨ä¹Ÿæ˜¯SCï¼Œæ‰€ä»¥è§†å›¾GOOD_SCæ˜¯ä¸å…è®¸æ›´æ–°çš„ã€‚ ä¸€ä¸ªä¸å…è®¸æ›´æ–°çš„è§†å›¾ä¸Šå®šä¹‰çš„è§†å›¾ä¹Ÿä¸å…è®¸æ›´æ–° é€šè¿‡dropæ¥åˆ é™¤ä¸€ä¸ªè§†å›¾ï¼š dropviewapptest ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:9:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"ç´¢å¼• åœ¨æ•°æ®é‡å˜å¾—éå¸¸åºå¤§æ—¶ï¼Œé€šè¿‡åˆ›å»ºç´¢å¼•ï¼Œèƒ½å¤Ÿå¤§å¤§æé«˜æˆ‘ä»¬çš„æŸ¥è¯¢æ•ˆç‡ï¼Œå°±åƒHashè¡¨ä¸€æ ·ï¼Œå®ƒèƒ½å¤Ÿå¿«é€Ÿåœ°å®šä½å…ƒç´ å­˜æ”¾çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºç´¢å¼•ï¼š -- åˆ›å»ºç´¢å¼• CREATEINDEXç´¢å¼•åç§°ONè¡¨å(åˆ—å)-- æŸ¥çœ‹è¡¨ä¸­çš„ç´¢å¼• showINDEXFROMstudentæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ä¸€ä¸ªç´¢å¼•ï¼š dropindexç´¢å¼•åç§°onè¡¨åè™½ç„¶æ·»åŠ ç´¢å¼•åä¼šä½¿å¾—æŸ¥è¯¢æ•ˆç‡æ›´é«˜ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½è¿‡åº¦ä½¿ç”¨ç´¢å¼•ï¼Œç´¢å¼•ä¸ºæˆ‘ä»¬å¸¦æ¥é«˜é€ŸæŸ¥è¯¢æ•ˆç‡çš„åŒæ—¶ï¼Œä¹Ÿä¼šåœ¨æ•°æ®æ›´æ–°æ—¶äº§ç”Ÿé¢å¤–å»ºç«‹ç´¢å¼•çš„å¼€é”€ï¼ŒåŒæ—¶ä¹Ÿä¼šå ç”¨ç£ç›˜èµ„æºã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:10:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"è§¦å‘å™¨ è§¦å‘å™¨å°±åƒå…¶åå­—ä¸€æ ·ï¼Œåœ¨æŸç§æ¡ä»¶ä¸‹ä¼šè‡ªåŠ¨è§¦å‘ï¼Œåœ¨select/update/deleteæ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œæˆ‘ä»¬é¢„å…ˆè®¾å®šçš„å†…å®¹ï¼Œè§¦å‘å™¨é€šå¸¸ç”¨äºæ£€æŸ¥å†…å®¹çš„å®‰å…¨æ€§ï¼Œç›¸æ¯”ç›´æ¥æ·»åŠ çº¦æŸï¼Œè§¦å‘å™¨æ˜¾å¾—æ›´åŠ çµæ´»ã€‚ è§¦å‘å™¨æ‰€ä¾é™„çš„è¡¨ç§°ä¸ºåŸºæœ¬è¡¨ï¼Œå½“è§¦å‘å™¨è¡¨ä¸Šå‘ç”Ÿselect/update/deleteç­‰æ“ä½œæ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªä¸´æ—¶çš„è¡¨ï¼ˆnewè¡¨å’Œoldè¡¨ï¼Œåªèƒ½ç”±è§¦å‘å™¨ä½¿ç”¨ï¼‰ æ¯”å¦‚åœ¨insertæ“ä½œæ—¶ï¼Œæ–°çš„å†…å®¹ä¼šè¢«æ’å…¥åˆ°newè¡¨ä¸­ï¼›åœ¨deleteæ“ä½œæ—¶ï¼Œæ—§çš„å†…å®¹ä¼šè¢«ç§»åˆ°oldè¡¨ä¸­ï¼Œæˆ‘ä»¬ä»å¯åœ¨oldè¡¨ä¸­æ‹¿åˆ°è¢«åˆ é™¤çš„æ•°æ®ï¼›åœ¨updateæ“ä½œæ—¶ï¼Œæ—§çš„å†…å®¹ä¼šè¢«ç§»åˆ°oldè¡¨ä¸­ï¼Œæ–°çš„å†…å®¹ä¼šå‡ºç°åœ¨newè¡¨ä¸­ã€‚ CREATETRIGGERè§¦å‘å™¨åç§°[BEFORE|AFTER][INSERT|UPDATE|DELETE]ONè¡¨å/è§†å›¾åFOREACHROWDELETEFROMstudentWHEREstudent.sno=new.snoFOR EACH ROWè¡¨ç¤ºé’ˆå¯¹æ¯ä¸€è¡Œéƒ½ä¼šç”Ÿæ•ˆï¼Œæ— è®ºå“ªè¡Œè¿›è¡ŒæŒ‡å®šæ“ä½œéƒ½ä¼šæ‰§è¡Œè§¦å‘å™¨ï¼ é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹è§¦å‘å™¨ï¼š SHOWTRIGGERSå¦‚æœä¸éœ€è¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ é™¤æ­¤è§¦å‘å™¨ï¼š DROPTRIGGERè§¦å‘å™¨åç§° ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:11:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"äº‹åŠ¡ å½“æˆ‘ä»¬è¦è¿›è¡Œçš„æ“ä½œéå¸¸å¤šæ—¶ï¼Œæ¯”å¦‚è¦ä¾æ¬¡åˆ é™¤å¾ˆå¤šä¸ªè¡¨çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‰§è¡Œå¤§é‡çš„SQLè¯­å¥æ¥å®Œæˆï¼Œè¿™äº›æ•°æ®åº“æ“ä½œè¯­å¥å°±å¯ä»¥æ„æˆä¸€ä¸ªäº‹åŠ¡ï¼åªæœ‰Innodbå¼•æ“æ”¯æŒäº‹åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥æŸ¥çœ‹æ”¯æŒçš„å¼•æ“ï¼š SHOWENGINES;MySQLé»˜è®¤é‡‡ç”¨çš„æ˜¯Innodbå¼•æ“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å»ä¿®æ”¹ä¸ºå…¶ä»–çš„å¼•æ“ã€‚ äº‹åŠ¡å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š **åŸå­æ€§ï¼š**ä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚ **ä¸€è‡´æ€§ï¼š**åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚ **éš”ç¦»æ€§ï¼š**æ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚ **æŒä¹…æ€§ï¼š**äº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹ä¾‹å­æ¥æ¢ç©¶ä»¥ä¸‹äº‹åŠ¡ï¼š begin;#å¼€å§‹äº‹åŠ¡...rollback;#å›æ»šäº‹åŠ¡savepointå›æ»šç‚¹;#æ·»åŠ å›æ»šç‚¹rollbacktoå›æ»šç‚¹;#å›æ»šåˆ°æŒ‡å®šå›æ»šç‚¹...commit;#æäº¤äº‹åŠ¡-- ä¸€æ—¦æäº¤ï¼Œå°±æ— æ³•å†è¿›è¡Œå›æ»šäº†ï¼ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:12:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["JavaWebç¬”è®°"],"content":"é€‰å­¦å†…å®¹ å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹å¹¶æ²¡æœ‰åŒ…å«åœ¨æˆ‘ä»¬çš„æ•™ç¨‹å½“ä¸­ï¼Œä½†æ˜¯è¿™å¹¶ä¸ä»£è¡¨å®ƒä»¬å°±ä¸é‡è¦ï¼Œé€šè¿‡å­¦ä¹ å®ƒä»¬èƒ½å¤Ÿè®©ä½ çš„æ•°æ®åº“ç®¡ç†èƒ½åŠ›æ›´ä¸Šä¸€å±‚æ¥¼ï¼Œå®ƒä»¬èƒ½å¤Ÿæ†ç»‘ä¸€ç»„SQLè¯­å¥è¿è¡Œï¼Œå¹¶ä¸”å¯ä»¥åå¤ä½¿ç”¨ï¼Œå¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚ ","date":"2022-02-09","objectID":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/:13:0","tags":["æ•°æ®åº“åŸºç¡€"],"title":"æ•°æ®åº“åŸºç¡€","uri":"/posts/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£","date":"2022-02-07","objectID":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/","tags":["BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£"],"title":"BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£","uri":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"*å…³äºBellman fordå’ŒSPFAç®—æ³•çš„è¯¦è§£ æˆ‘æ˜¯ç™½å«–çš„leetcodeä¼šå‘˜ï¼Œç„¶åçœ‹äº†å…³äºå›¾å•æºæœ€çŸ­è·¯å¾„çš„è®²è§£ï¼Œè®²è§£çš„éå¸¸å¥½(è™½ç„¶æ²¡ä»£ç æ¼”ç¤ºï¼Œä½†åŸºæœ¬ä¸Šä¸€çœ‹æ€è·¯å°±æœ‰äº†)ã€‚ ä¸ºäº†è®©å¤§å®¶ä¹Ÿç™½å«–åˆ°è§†é¢‘èµ„æºï¼Œæˆ‘æŠŠè§†é¢‘ä¸Šä¼ åˆ°äº†YouTube(å›½å†…ä¼šæœ‰ç‰ˆæƒé—®é¢˜ï¼Œå‘ä¸å‡º) å¤§å®¶æœ‰èƒ½åŠ›ä¸Šæ²¹ç®¡çš„å»ºè®®å»çœ‹çœ‹ï¼Œå¦åˆ™è¿™ä»£ç è‚¯å®šæ˜¯çœ‹ä¸æ‡‚çš„ã€‚ã€‚ã€‚ è§†é¢‘é“¾æ¥ï¼š Bellman fordç®—æ³•è¯¦è§£(ä¸¤ç§æ–¹å¼åŠå…¶ä¼˜åŒ–) ç”±Bellman fordç®—æ³•çš„ç¼ºé™·å¼•å‡ºSPFAç®—æ³• é€‚ç”¨æ€§åˆ†æ(å…ˆçœ‹è§†é¢‘) Blellman fordç®—æ³• DPæ–¹æ³•ï¼šä»¥ dp[i][j] è¡¨ç¤ºé€‰æ‹©æœ€å¤š i æ¡è¾¹ï¼Œä»èµ·ç‚¹åˆ° j çš„æœ€çŸ­è·ç¦»ã€‚æ¯æ¬¡çš„æ›´æ–°ä¾èµ–äºä¸Šä¸€è¡Œ dp[i-1][j] çš„ç­”æ¡ˆï¼Œæ•…å¯æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ä¸ºä¸€ç»´æ•°ç»„ã€‚æ—¶é—´å¤æ‚åº¦O(N^3) å¤šæ¬¡éå†è¾¹çš„æ›´æ–°æ–¹æ³•ï¼šæå‰è®°å½•å¥½å“ªä¸¤ä¸ªç»“ç‚¹æœ‰è¾¹ï¼Œæ¯è¿›è¡Œä¸€æ¬¡æ•´ä¸ªè¾¹çš„éå†ï¼Œå°±ç›¸å½“äºå®Œæˆäº†æœ€å¤šé€‰æ‹©ä¸€æ¡è¾¹åˆ°è¾¾ç›®çš„åœ°çš„æœ€çŸ­è·ç¦»çš„æ•ˆæœã€‚å¹³å‡æ—¶é—´å¤æ‚åº¦ O(N*V)ï¼ˆVæ˜¯è¾¹çš„ä¸ªæ•°ï¼Œæç«¯æƒ…å†µä¸‹ä¼šæ‰åˆ° O(N*N*V)çš„å¤æ‚åº¦ï¼Œå› ä¸ºæœ€å¤šæ˜¯å¯ä»¥è¿›è¡Œ N-1 æ¬¡å¾ªç¯çš„) å¾ˆæ˜æ˜¾æ— è®ºæ˜¯å“ªç§æ–¹å¼å®ç°ï¼Œæœ€ç»ˆéƒ½æ˜¯ä¾èµ–é€‰æ‹©å¤šå°‘æ¡è¾¹çš„ç»“æœï¼Œæ‰€ä»¥è¯¥ç®—æ³•é€‚ç”¨äºæŒ‡å®šæœ€å¤šç»è¿‡kæ¡è¾¹çš„æœ€çŸ­è·¯å¾„é¢˜ç›®ã€‚ æ­£å¥½æœ‰é“ä¾‹é¢˜é€‚åˆä»– K ç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­ SPFAç®—æ³• è¿™ä¸ªç®—æ³•åªæ˜¯Bellman fordç®—æ³•çš„å†ä¼˜åŒ–ï¼Œä½¿å¾—æ¯æ¬¡é€‰æ‹©çš„è¾¹çš„å…³ç³»è¾¾åˆ°æœ€ä¼˜ï¼Œå¤§å¤§å‡å°‘äº†è¾¹çš„éå†æ¬¡æ•°,æ—¶é—´å¤æ‚åº¦è¾ƒä¸ºç¨³å®š(ç›¸å¯¹Bellmanfordç¨³å®šå¾ˆå¤š)çš„åœ¨ O(N*V)ã€‚ è¿™ä¸ªåŸæœ¬ä¹Ÿæ˜¯åŸºäºBellmanfordç®—æ³•ä¼˜åŒ–çš„ï¼Œé™¤äº†æ— æ³•è¡¨ç¤ºæœ€å¤šç»è¿‡kæ¡è¾¹ï¼Œå…¶ä½™æ•ˆç‡æ¯”ä¹‹å‰çš„ç®—æ³•æ›´å¿«ï¼Œæ‰€ä»¥é€‚ç”¨äºæ±‚å­˜åœ¨è´Ÿæƒå€¼çš„å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œè€Œæ— æ³•ç²¾ç¡®ä¸ºæœ€å¤šç»è¿‡äº†å¤šå°‘æ¡è¾¹ã€‚ ä»¥é¢˜ä»£è®² ","date":"2022-02-07","objectID":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/:0:0","tags":["BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£"],"title":"BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£","uri":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"è“æ¡¥æ¯â€“æœ€çŸ­è·¯ ","date":"2022-02-07","objectID":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/:1:0","tags":["BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£"],"title":"BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£","uri":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"Bellman fordçš„åŠ¨æ€è§„åˆ’è§£å†³(è¶…æ—¶,è¿‡ä¸‰ä¸ª) #include\u003cbits/stdc++.h\u003eusing namespace std; #define LL long long int n,m; vector\u003cint\u003edp(20001,INT_MAX/2); map\u003cint,map\u003cint,int\u003e \u003e MAP; LL read() { LL res = 0; bool f = 1; char c; //å…ˆè€—æ‰ä¸€ä¸ªgetcharæ¥è¿›è¡Œåˆ¤æ–­ç¬¦å· c = getchar(); if(c == '-')f = 0; else res+= (c-'0'); while (isdigit(c = getchar())) { res = (LL)res * 10 + (c-'0'); } if (f) return res; return res*-1; } int main(){ n = read(); m = read(); for(int i=0;i\u003cm;i++){ int a =read(),c = read(),len = read(); MAP[a][c] = len; if(a == 1) dp[c] = len; } dp[1] = 0; vector\u003cint\u003epre = dp; //å¤–å±‚å¾ªç¯ç»è¿‡æœ€å¤šiæ¡è·¯åˆ°è¾¾è¯¥ç»“ç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œæœ€å¤šç»è¿‡n-1æ¡ //é‡Œé¢å‡ å±‚éƒ½æ˜¯ç”¨äºæ›´æ–°æ²¡ä¸€è¡Œçš„æ•°æ® for(int i=2;i\u003c=n-1;i++){ for(int j=2;j\u003c=n;j++){ for(int k = 1;k\u003c=n;k++){ int t = MAP[k][j]; if(t) dp[j] = min(dp[j],pre[k]+t); } } pre = dp; } for(int i=2;i\u003c=n;i++){ cout\u003c\u003cdp[i]\u003c\u003cendl; } } ","date":"2022-02-07","objectID":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/:2:0","tags":["BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£"],"title":"BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£","uri":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"Bellman fordæŒ‰è¾¹éå†è§£å†³(é€Ÿåº¦ç«Ÿæ¯”SPFAå¿«ï¼Œæˆ‘æƒŠäº†) #include\u003cbits/stdc++.h\u003eusing namespace std; #define LL long long int n,m; //ä»¥è¾¹ä¸ºå•ä½éå†æ›´æ–° struct pos{ int i; int j; int len; }; vector\u003cint\u003edp(20001,INT_MAX/2); LL read() { LL res = 0; bool f = 1; char c; //å…ˆè€—æ‰ä¸€ä¸ªgetcharæ¥è¿›è¡Œåˆ¤æ–­ç¬¦å· c = getchar(); if(c == '-')f = 0; else res+= (c-'0'); while (isdigit(c = getchar())) { res = (LL)res * 10 + (c-'0'); } if (f) return res; return res*-1; } int main(){ n = read(); m = read(); //è®°å½•mæ¡è¾¹çš„å…³ç³» pos MAP[m]; for(int i=0;i\u003cm;i++){ int a =read(),c = read(),len = read(); MAP[i] = {a,c,len}; } dp[1] = 0; //å¤–é¢ä¸€å±‚ä»£è¡¨éå†è¾¹çš„æ¬¡æ•°ï¼Œæœ€å¤šä¸ºn-1æ¬¡ for(int i=1;i\u003c=n-1;i++){ bool flag = true; for(int k=0;k\u003cm;k++){ if(dp[MAP[k].j]\u003edp[MAP[k].i]+MAP[k].len){ dp[MAP[k].j] = dp[MAP[k].i]+MAP[k].len; flag = false; } } //ä¸€æ—¦æœ‰ä¸€è½®éå†æœªæ›´æ–°ä¸€æ¬¡ï¼Œåˆ™å¼¹å‡ºå¾ªç¯ï¼Œå¾—å‡ºç­”æ¡ˆ if(flag) break; } for(int i=2;i\u003c=n;i++){ cout\u003c\u003cdp[i]\u003c\u003cendl; } } ","date":"2022-02-07","objectID":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/:3:0","tags":["BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£"],"title":"BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£","uri":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"æœ€ç»ˆä¼˜åŒ–â€“SPFAç®—æ³• æ¯•ç«ŸSPFAçš„å…¨ç§°ä¸ºShortest Path Faster Algorithmï¼Œä¹Ÿå¾—å½“æ‹…å¾—èµ·è¿™ä¸ªåå­—å•ŠğŸ¤£ ä¸»è¦å› ä¸ºç”¨STLå®¹å™¨å­˜å‚¨æ•°æ®çš„åŸå› ï¼Œæ‰€ä»¥ä¼¼ä¹ç¨æ…¢ã€‚ #include\u003cbits/stdc++.h\u003eusing namespace std; #define LL long long int n,m; //ä»¥è¾¹ä¸ºå•ä½éå†æ›´æ–°,å†è¿›ä¸€æ­¥ä¼˜åŒ–ä¾¿å¾—åˆ°å¾—åˆ°SPFAç®—æ³• //æˆ‘ä»¬éœ€è¦æ„é€ ä¸€ä¸ªä»¥ä»»ä¸€ç‚¹ä¸ºèµ·ç‚¹çš„ï¼Œå®ƒæ‰€è¿æ¥çš„é€šè·¯çš„ç»“æ„ï¼Œä»¥æ–¹ä¾¿é˜Ÿåˆ—è¿›è¡Œæ“ä½œï¼Œç”¨å“ˆå¸Œè¡¨è¿›è¡Œæ˜ å°„æœ€å¥½ map\u003cint,vector\u003cpair\u003cint,int\u003e \u003e \u003eMAP; vector\u003cint\u003edp(20001,INT_MAX/2); queue\u003cint\u003eQ; //æ ‡è®°ç»“ç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¹‹ä¸­ bool check[20001] = {false}; LL read() { LL res = 0; bool f = 1; char c; //å…ˆè€—æ‰ä¸€ä¸ªgetcharæ¥è¿›è¡Œåˆ¤æ–­ç¬¦å· c = getchar(); if(c == '-')f = 0; else res+= (c-'0'); while (isdigit(c = getchar())) { res = (LL)res * 10 + (c-'0'); } if (f) return res; return res*-1; } int main(){ n = read(); m = read(); for(int i=0;i\u003cm;i++){ int a =read(),c = read(),len = read(); MAP[a].push_back(make_pair(c,len)); } dp[1] = 0; Q.push(1); check[1] = true; while(!Q.empty()){ int node = Q.front();Q.pop();check[node] = false; vector\u003cpair\u003cint,int\u003e \u003e\u0026 t = MAP[node]; //ä»¥nodeä¸ºèµ·ç‚¹å¼€å§‹æ›´æ–°ï¼Œä¸€æ—¦è¢«æ›´æ–°ä¸”é˜Ÿä¸­æ— è¯¥ç»“ç‚¹ï¼Œåˆ™å…¥é˜Ÿã€‚ for(int i=0;i\u003ct.size();i++) { if(dp[t[i].first]\u003edp[node]+t[i].second){ dp[t[i].first] = dp[node]+t[i].second; //å…¥é˜Ÿæ“ä½œ if(!check[t[i].first]) Q.push(t[i].first); check[t[i].first] = true; } } } for(int i=2;i\u003c=n;i++){ cout\u003c\u003cdp[i]\u003c\u003cendl; } } ","date":"2022-02-07","objectID":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/:4:0","tags":["BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£"],"title":"BellmanFordå’ŒSPFAç®—æ³•è¯¦è§£","uri":"/posts/bellmanford%E5%92%8Cspfa%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","date":"2022-02-07","objectID":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/","tags":["Dijkstraç®—æ³•æ¨¡æ¿è®²è§£"],"title":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","uri":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"(ä¹Ÿå°±5min)å…ˆç‚¹å¼€é“¾æ¥æŠŠDijkstraç®—æ³•è¿‡ç¨‹çœ‹ä¸€çœ‹(å¦åˆ™è‚¯å®šçœ‹ä¸æ‡‚ä»£ç ). è§†é¢‘è¯¦è§£Dijkstraç®—æ³•è¿‡ç¨‹ æ­¤æ–¹æ³•æœ€çŸ­è·¯å¾„çš„é€‚ç”¨èŒƒå›´ï¼šå•æºå¸¦æƒå›¾ï¼Œè¦æ˜¯ä¸å¸¦æƒå®Œå…¨å¯ä»¥ç”¨bfsã€‚ è¯¦è§£ä»£ç å®ç°è¿‡ç¨‹(è¯·ç»“åˆè§†é¢‘è¿‡ç¨‹åˆ†æ) ","date":"2022-02-07","objectID":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/:0:0","tags":["Dijkstraç®—æ³•æ¨¡æ¿è®²è§£"],"title":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","uri":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"ç”¨åˆ°çš„åŸºæœ¬æ•°æ®è¡¨ç¤º æ ¹æ®è§†é¢‘ä¸­è®²è§£çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å¤šä¸ªæ•°ç»„æ¥å®ç°è¯¥è¿‡ç¨‹ã€‚ dist[i]æ•°ç»„(ä¸‹æ ‡è¡¨ç¤ºç¬¬å‡ ä¸ªç»“ç‚¹)ç”¨äºæ ‡è®°èµ·ç‚¹Såˆ°içš„æœ€çŸ­è·ç¦»ï¼Œåˆå§‹å€¼å…¨ä¸ºæ— ç©·å¤§ï¼Œè¿™ä¸ªå€¼åªè¦è¶³å¤Ÿå¤§å°±è¡Œã€‚ visit[i]æ•°ç»„(ä¸‹æ ‡åŒä¸Š)ç”¨äºæ ‡è®°æ¯ä¸ªå·²ç»å¾—åˆ°æœ€çŸ­è·ç¦»çš„ç»“ç‚¹ï¼Œåˆå§‹å€¼å…¨ä¸ºfalse,è¡¨ç¤ºè¯¥ç»“ç‚¹è¿˜æœªæ‰¾åˆ°æœ€çŸ­è·ç¦»ã€‚ path[i]æ•°ç»„(ä¸‹æ ‡åŒä¸Š)ç”¨äºæ ‡è®°æ¯ä¸ªå·²ç»å¾—åˆ°æœ€çŸ­è·ç¦»çš„ç»“ç‚¹çš„å‰é©±(æœ€çŸ­è·¯å¾„ä¸­çš„ä¸Šä¸€ä¸ªç»“ç‚¹)ï¼Œåˆå§‹å€¼å…¨ä¸º-1ã€‚ Graph[i][j]è¿™æ˜¯ä¸€ä¸ªå¸¦æƒçŸ©é˜µï¼Œè¡¨ç¤ºä»»æ„iç»“ç‚¹åˆ°jç»“ç‚¹é—´è¾¹çš„è·ç¦»,è‹¥ä¸¤è€…é—´æ— è¾¹åˆ™åˆå§‹ä¸ºæ— ç©·å¤§ã€‚ ","date":"2022-02-07","objectID":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/:1:0","tags":["Dijkstraç®—æ³•æ¨¡æ¿è®²è§£"],"title":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","uri":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"å„ä¸ªå‡½æ•°æ¨¡å—å®ç°(é‡åœ¨Dijkstraå‡½æ•°) init() void init()//åœ¨è¯»å…¥æ•°æ®ä¹‹å‰åˆå§‹åŒ–å›¾ {//Graphå’Œdiståœ¨è¯»å–æ•°æ®ä¹‹å‰éƒ½åˆå§‹åŒ–ä¸ºINFï¼Œpathåˆå§‹åŒ–ä¸º-1 for(int i = 1; i \u003c= N; i++){ path[i] = -1; dist[i] = INF; for(int j = 1; j \u003c= N; j++){ Graph[j][i] = INF;//INFä¸ºè‡ªå®šä¹‰çš„è¾ƒå¤§çš„å€¼ } } memset(visit,0,sizeof(visit));//èµ·åˆï¼Œæ²¡æœ‰ä¸€ä¸ªç»“ç‚¹è¢«æ ‡è®° } FIndMin() int FindMin()//æ‰¾å‡ºæœªè¢«visitæ ‡è®°çš„ç»“ç‚¹ä¸­æœ€å°çš„è·ç¦»ç»“ç‚¹,å¹¶è¿”å›è¯¥ç»“ç‚¹ { int minV = S;//åˆå§‹ä¸ºSï¼Œå¦‚æœæœªè¢«æ›´æ–°åˆ™è·¯å¾„æ›´æ–°è¿‡ç¨‹ç»“æŸ int minDist = INF; for(int i = 0; i \u003c N; i++){ if(!visit[i] \u0026\u0026 dist[i] \u003c minDist){//æ²¡æœ‰è¢«æ ‡è®°\u0026\u0026è·ç¦»æœ€å° minV = i; minDist = dist[i]; } }//è¿”å›æ²¡æœ‰è¢«æ ‡è®°çš„æœ€å°ç»“ç‚¹ return minV; } Dijkstra() void Dijkstra() {//Sè¡¨ç¤ºèµ·ç‚¹ï¼ŒTè¡¨ç¤ºç»ˆç‚¹ dist[S] = 0;//èµ·ç‚¹åˆ°è‡ªå·±çš„è·ç¦»è®¾ä¸º0 visit[S] = true;//å°†èµ·ç‚¹æ ‡è®° for(int i = 1; i \u003c= N; i++){ //æ›´æ–°ä¸èµ·ç‚¹Sç›¸è¿çš„ç»“ç‚¹çš„è·ç¦»å€¼ int t = Graph[i][S]; if(t \u003c INF){ dist[i] = t; path[i] = S; } } //è¦ä¹ˆæ— æ³•åˆ°è¾¾ï¼Œè¦ä¹ˆå°±æ˜¯æ‰¾åˆ°åˆ°è¾¾ç»ˆç‚¹çš„æœ€å°å€¼ï¼Œå¦åˆ™ä¸€ç›´å¾ªç¯ã€‚ while(1){ //å¾—åˆ°æœªè¢«æ ‡è®°çš„æœ€å°ç»“ç‚¹ï¼Œå°†å…¶æ ‡è®° int v = FindMin(); if(v==S)//å¦‚æœæœªè¢«æ›´æ–°ï¼Œåˆ™æ— éœ€å†æ›´æ–°äº†ï¼Œè¦ä¹ˆå…¨è¢«æ ‡è®°ï¼Œè¦ä¹ˆå°±æ˜¯å‰©ä¸‹çš„æ— æ³•åˆ°è¾¾ return; visit[v] = true;//å°†è¯¥ç»“ç‚¹æ ‡è®° if(visit[T])return;//ä¸€æ—¦Tè¢«æ ‡è®°ï¼Œåˆ™è¯´æ˜åˆ°è¾¾ç»ˆç‚¹çš„æœ€å°å€¼å·²ç»æ‰¾åˆ° for(int i = 1; i \u003c= N; i++){ //è¿™ä¸ªç»“åˆè§†é¢‘çš„æ›´æ–°è¿‡ç¨‹æƒ³æƒ³å°±æ‡‚äº† if(!visit[i]\u0026\u0026Graph[v][i]!=INF){//æ²¡è¢«æ ‡è®°\u0026\u0026ä¸¤è€…ä¹‹é—´å­˜åœ¨è¾¹ if(dist[v] + Graph[v][i] \u003c dist[i]){ dist[i] = dist[v] + Graph[v][i]; path[i] = v; } } } } } ä»¥é¢˜ä»£è®²â€“å…·ä½“å®ç° ","date":"2022-02-07","objectID":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/:2:0","tags":["Dijkstraç®—æ³•æ¨¡æ¿è®²è§£"],"title":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","uri":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"è“æ¡¥æ¯â€“æ–‡åŒ–ä¹‹æ—… çœ‹å®Œé¢˜ç›®ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºè¿˜éœ€è¦é¢å¤–åˆ¤æ–­æ–‡åŒ–æ˜¯å¦æ’æ–¥ï¼Œè¿™ä¸ªåœ¨å‡½æ•°ä¸­å¤šæ·»åŠ ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶å°±è¡Œã€‚ ","date":"2022-02-07","objectID":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/:3:0","tags":["Dijkstraç®—æ³•æ¨¡æ¿è®²è§£"],"title":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","uri":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"è§£é¢˜è¿‡ç¨‹ æˆ‘ä»¬æŒ‰ç…§ä¸Šè¿°çš„è¿‡ç¨‹ä¸‰æ­¥èµ°è¯•è¯•ï¼š åˆå§‹åŒ–è¿‡ç¨‹(æˆ‘æ¯”è¾ƒä¹ æƒ¯ç”¨vectorå®¹å™¨æ‰€ä»¥å°±æ²¡æœ‰å•ç‹¬å†™initå‡½æ•°äº†) //vectorå®¹å™¨çš„åˆå§‹åŒ–æ–¹æ³•--vector\u003cç±»å‹\u003eå˜é‡å(é•¿åº¦,åˆå§‹å€¼); const int size = 505;//ç”¨äºåˆå§‹åŒ–ä¸€ä¸ªsizeé•¿åº¦çš„æ•°ç»„ vector\u003cint\u003epath(size,-1); vector\u003cint\u003edist(size,INT_MAX); vector\u003cbool\u003evisit(size,false); vector\u003cvector\u003cint\u003e \u003eGraphics(size,vector\u003cint\u003e(size,INT_MAX)); //ä¸‹é¢ä¸¤ä¸ªæ˜¯æœ¬é¢˜æ–°åŠ çš„å±æ€§ï¼Œæˆ‘ä»¬å»ºç«‹æ‰€å±æ–‡åŒ–ä»¥åŠæ–‡åŒ–å…³ç³»æ•°ç»„æ¥å­˜å‚¨ã€‚ vector\u003cint\u003ecultures(size); bool cultureLinks[size][size] = {false}; æ‰¾æœ€å°ç»“ç‚¹çš„å‡½æ•°FindMin() int FindMin() { int minV = S; int minDist = INT_MAX; for(int i = 1; i \u003c= N; i++){ if(!visit[i] \u0026\u0026 dist[i] \u003c minDist){ minV = i; minDist = dist[i]; } } return minV; } Dijkstra() å‡½æ•° void Dijkstra() { dist[S] = 0; visit[S] = true; for(int i = 1; i \u003c= N; i++){ int t = Graphics[S][i]; if(t \u003c INT_MAX\u0026\u0026!cultureLinks[cultures[i]][cultures[S]]){ dist[i] = t; path[i] = S;} } while(1){ int v = FindMin(); if(v==S) return; visit[v] = true;//å°†æ­¤æ¬¡æœ€å°è·¯å¾„ç»“ç‚¹æ ‡è®° //ä¸€æ—¦Tç»ˆç‚¹è¢«æ ‡è®°åˆ™è¯´æ˜ç­”æ¡ˆå·²ç»å‡ºç° if(visit[T])return; for(int i = 1; i \u003c= N; i++){ if(!visit[i]\u0026\u0026Graphics[v][i]!=INT_MAX\u0026\u0026!cultureLinks[cultures[i]][cultures[v]]){//åªæœ‰ç»“ç‚¹æœªè¢«æ ‡è®° \u0026\u0026 æ–‡åŒ–ä¸ä¼šæ’æ–¥ \u0026\u0026 è·¯å¾„é•¿åº¦ä¸æ˜¯æ— ç©·å¤§ if(dist[v] + Graphics[v][i] \u003c dist[i]){ dist[i] = dist[v] + Graphics[v][i]; path[i] = v; } } } } } mainå‡½æ•°æµ‹è¯•æ¥å£ int main(){ cin\u003e\u003eN\u003e\u003eK\u003e\u003eM\u003e\u003eS\u003e\u003eT; for(int i=1;i\u003c=N;i++) cin\u003e\u003ecultures[i]; for(int i=1;i\u003c=K;i++) for(int j=1;j\u003c=K;j++) cin\u003e\u003ecultureLinks[i][j]; for(int i=1;i\u003c=M;i++){ int u,v,d;cin\u003e\u003eu\u003e\u003ev\u003e\u003ed;//æ— å‘å›¾ Graphics[u][v] = Graphics[v][u] = d; } Dijkstra(); if(dist[T]!=INT_MAX) cout\u003c\u003cdist[T]; else cout\u003c\u003c-1; return 0; } ","date":"2022-02-07","objectID":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/:4:0","tags":["Dijkstraç®—æ³•æ¨¡æ¿è®²è§£"],"title":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","uri":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/"},{"categories":["ç®—æ³•â€”â€”æœ€çŸ­è·¯é—®é¢˜"],"content":"æ±‡æ€»ä»£ç æäº¤ #include\u003cbits/stdc++.h\u003eusing namespace std; const int size = 505; vector\u003cint\u003epath(size,-1); vector\u003cint\u003edist(size,INT_MAX); vector\u003cbool\u003evisit(size,false); vector\u003cvector\u003cint\u003e \u003eGraphics(size,vector\u003cint\u003e(size,INT_MAX)); vector\u003cint\u003ecultures(size); bool cultureLinks[size][size] = {false}; int N,K,M,S,T; int FindMin() { int minV = S; int minDist = INT_MAX; for(int i = 1; i \u003c= N; i++){ if(!visit[i] \u0026\u0026 dist[i] \u003c minDist){ minV = i; minDist = dist[i]; } } return minV; } void Dijkstra() { dist[S] = 0; visit[S] = true; for(int i = 1; i \u003c= N; i++){ int t = Graphics[S][i]; if(t \u003c INT_MAX\u0026\u0026!cultureLinks[cultures[i]][cultures[S]]){ dist[i] = t; path[i] = S;} } while(1){ int v = FindMin(); if(v==S) return; visit[v] = true;//å°†æ­¤æ¬¡æœ€å°è·¯å¾„ç»“ç‚¹æ ‡è®° //ä¸€æ—¦Tç»ˆç‚¹è¢«æ ‡è®°åˆ™è¯´æ˜ç­”æ¡ˆå·²ç»å‡ºç° if(visit[T])return; for(int i = 1; i \u003c= N; i++){ if(!visit[i]\u0026\u0026Graphics[v][i]!=INT_MAX\u0026\u0026!cultureLinks[cultures[i]][cultures[v]]){//åªæœ‰ç»“ç‚¹æœªè¢«æ ‡è®° \u0026\u0026 æ–‡åŒ–ä¸ä¼šæ’æ–¥ \u0026\u0026 è·¯å¾„é•¿åº¦ä¸æ˜¯æ— ç©·å¤§ if(dist[v] + Graphics[v][i] \u003c dist[i]){ dist[i] = dist[v] + Graphics[v][i]; path[i] = v; } } } } } int main(){ cin\u003e\u003eN\u003e\u003eK\u003e\u003eM\u003e\u003eS\u003e\u003eT; for(int i=1;i\u003c=N;i++) cin\u003e\u003ecultures[i]; for(int i=1;i\u003c=K;i++) for(int j=1;j\u003c=K;j++) cin\u003e\u003ecultureLinks[i][j]; for(int i=1;i\u003c=M;i++){ int u,v,d;cin\u003e\u003eu\u003e\u003ev\u003e\u003ed;//æ— å‘å›¾ Graphics[u][v] = Graphics[v][u] = d; } Dijkstra(); if(dist[T]!=INT_MAX) cout\u003c\u003cdist[T]; else cout\u003c\u003c-1; return 0; } ","date":"2022-02-07","objectID":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/:5:0","tags":["Dijkstraç®—æ³•æ¨¡æ¿è®²è§£"],"title":"Dijkstraç®—æ³•æ¨¡æ¿è®²è§£","uri":"/posts/dijkstra%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E8%AE%B2%E8%A7%A3/"},{"categories":["C++å®æˆ˜"],"content":"C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","date":"2022-02-05","objectID":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/","tags":["C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ"],"title":"C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","uri":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"},{"categories":["C++å®æˆ˜"],"content":"Qtå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ æƒ³æŸ¥çœ‹æºç æˆ–è€…ç›´æ¥ä¸‹è½½è½¯ä»¶å®‰è£…åŒ…å¯ä»¥åˆ°ä¸‹é¢çš„é“¾æ¥ï¼š è½¯ä»¶å®‰è£…åŒ…å¤§æ¦‚åœ¨è¿™ä¸ªä½ç½® GitHubåœ°å€ï¼šé“¾æ¥ Giteeåœ°å€(æ–¹ä¾¿å›½å†…è®¿é—®)ï¼šé“¾æ¥ ","date":"2022-02-05","objectID":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/:0:0","tags":["C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ"],"title":"C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","uri":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"},{"categories":["C++å®æˆ˜"],"content":"åŸºæœ¬æºç ä»‹ç» æœ¬é¡¹ç›®åŸºäºQt6+cmakeï¼Œæ•…ç›´æ¥æ‹¿åˆ°æºç æ˜¯æ— æ³•è·‘èµ·æ¥çš„ï¼Œéœ€è¦Qt6çš„åº“ã€‚ä¸Šä¼ æºç ä¸»è¦æ˜¯è®°å½•æºç é‡Œé¢çš„ä¸€äº›æ€è·¯ã€‚ ä»¥ä¸‹æ˜¯æºç çš„è§£æå›¾ï¼šï¼ˆå…¶ä¸­çš„uiå¸ƒå±€ç•Œé¢å’Œqssç•Œé¢ç¾åŒ–æ˜¯æœ€è€—æ—¶é—´çš„éƒ¨åˆ†ï¼ï¼‰ uiç•Œé¢å¸ƒå±€ç”¨åˆ°çš„ç‰¹æ®Šä¹‹å¤„ï¼š é‡å†™ç•Œé¢é¡¶éƒ¨é€»è¾‘ã€‚ é‡å†™ä¸€äº›äº‹ä»¶ã€‚ å¢åŠ è½¯ä»¶è¿è¡Œæ•ˆç‡çš„ç‰¹æ®Šä¹‹å¤„ï¼š é€šè¿‡å¼€ä¸€ä¸ªçº¿ç¨‹å°†æ•°æ®åº“ä¸­çš„æ•°æ®æå‰è½½å…¥å†…å­˜ï¼Œåç»­çš„ä»»ä½•æŸ¥è¯¢ç­‰æ“ä½œéƒ½æ˜¯ç›´æ¥å’Œå†…å­˜æ‰“äº¤é“ï¼Œå¤§å¤§åŠ å¿«äº†è¿è¡Œæ•ˆç‡ã€‚ å¯¹æ•°æ®åº“çš„å¢åˆ ï¼Œä¸æ˜¯ä¸€æ¬¡ä¸€æ¬¡çš„è¿›è¡Œï¼Œè€Œæ˜¯å¼€ä¸€ä¸ªç¼“å†²åŒºï¼Œå½“ç¼“å†²æ»¡äº†ï¼Œå†ä¸€æ¬¡æ€§å¢æˆ–è€…åˆ ã€‚å‡å°‘äº†ç£ç›˜ioæ¬¡æ•°ï¼Œå¤§å¤§å¢åŠ äº†è½¯ä»¶è¿è¡Œæ•ˆç‡ã€‚ ä½¿ç”¨çš„æ•°æ®åº“ä¸ºQtè‡ªå¸¦çš„sqliteæ•°æ®åº“ã€‚ ","date":"2022-02-05","objectID":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/:1:0","tags":["C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ"],"title":"C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","uri":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"},{"categories":["C++å®æˆ˜"],"content":"å®ç°æ•ˆæœ åŸºæœ¬å­¦ç”Ÿ/ç”¨æˆ·æ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€‚ æ•°æ®å­˜å‚¨çš„æŒä¹…åŒ–ã€‚ è¾ƒä¸ºä¼˜ç¾çš„å›¾å½¢åŒ–ç•Œé¢ã€‚ è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½æ²¡æœ‰è¿›è¡Œæ‹“å±•ï¼šæ¯”å¦‚ç”¨æˆ·æƒé™æ²¡æœ‰è¿›è¡Œä»»ä½•çš„é™åˆ¶ï¼Œæ¯”å¦‚Excleè¡¨æ ¼è¯»å–æ²¡æœ‰è¿›è¡Œä»»ä½•çš„è®¾ç½®ï¼Œåªæ˜¯æŠŠexcleè¯»å–çš„åŠŸèƒ½ç»™åŠ ä¸Šäº†ï¼Œå…·ä½“è¯»å–åˆ°çš„æ•°æ®æ²¡æœ‰è¿›è¡Œä»»ä½•æ“ä½œï¼Œè¿™äº›å¤§å®¶éƒ½å¯ä»¥åç»­æœ‰å…´è¶£æ·»åŠ ä¸€ä¸ªã€‚ ","date":"2022-02-05","objectID":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/:2:0","tags":["C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ"],"title":"C++å›¾å½¢åŒ–å®ç°å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","uri":"/posts/c++%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘","date":"2022-02-04","objectID":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/","tags":["C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘"],"title":"C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘","uri":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"ä»€ä¹ˆæ˜¯å®Œç¾è½¬å‘ï¼Ÿ ç†Ÿæ‚‰ç°ä»£C++è¯­æ³•çš„éƒ½åº”è¯¥æ¸…æ¥šï¼ŒC++æŠŠå˜é‡åˆ†ä¸ºå·¦å€¼å’Œå³å€¼ï¼Œä¸ºäº†å®ç°å¯¹èµ„æºçš„è½¬ç§»è€Œä¸æ˜¯æ‹·è´ï¼Œå³å€¼å’Œå¯¹åº”çš„ç§»åŠ¨æ„é€ å‡½æ•°åº”è¿è€Œç”Ÿï¼Œä½†æˆ‘ä»¬å‘ç°ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸èƒ½æŠŠå·¦å€¼å’Œå³å€¼ç²¾ç¡®çš„ä¼ é€’ç»™å¯¹åº”ç‰ˆæœ¬çš„å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ä¸‹é¢ä¸€ä¸ªç®€å•çš„ä»£ç ï¼Œä½ ä¼šå‘ç°å³ä½¿æˆ‘ä»¬æŠŠå‡½æ•°çš„å‚æ•°ç±»å‹è®¾ç½®ä¸ºå³å€¼å¼•ç”¨ï¼Œä½†å½“æ‹¿å®ƒå»è°ƒç”¨å¯¹åº”çš„æ„é€ å‡½æ•°æ—¶ï¼Œå®ƒç»™å‡ºçš„ç«Ÿç„¶æ˜¯æ‹·è´æ„é€ ï¼æ•…è¿™ä¸ªè½¬å‘è¿˜ä¸å¤Ÿå®Œç¾ï¼ #include\u003ciostream\u003eusing namespace std; class test{ public: test() = default; test(test\u0026\u0026 p){ cout\u003c\u003c\"move construct call\"\u003c\u003cendl; } test(const test\u0026 p){ cout\u003c\u003c\"copy construct call\"\u003c\u003cendl; } }; void test_fun(test\u0026\u0026 p){ test q(p); return; } int main() { test_fun(test()); return 0; } ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿ å› ä¸ºæ— è®ºä¼ å…¥çš„å½¢å‚æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œå¯¹äºå‡½æ•°å†…éƒ¨æ¥è¯´ï¼Œå½¢å‚æ—¢æœ‰åç§°åˆèƒ½å¯»å€ï¼Œå› æ­¤å®ƒéƒ½è¢«è®¤ä¸ºæ˜¯å·¦å€¼ã€‚ ","date":"2022-02-04","objectID":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/:1:0","tags":["C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘"],"title":"C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘","uri":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"å¦‚ä½•å®ç°å®Œç¾è½¬å‘ï¼Ÿ å®ç°å®Œç¾è½¬å‘å¾ˆç®€å•ï¼Œæˆ‘ä»¬åœ¨ç°ä»£C++ä¸­åªéœ€è¦ forward\u003cT\u003e è¿™ä¸ªæ¨¡æ¿å‡½æ•°å³å¯å®Œæˆï¼Œå…¶å®é™…åŸç†å°±æ˜¯åˆ©ç”¨çš„ C++11 æ¨¡æ¿ä¸­æä¾›çš„æŠ˜å å¼•ç”¨çš„è¯­æ³•ï¼Œæœ€ç»ˆè¾¾åˆ°çš„æ•ˆæœå°±æ˜¯ï¼ŒæŠŠå‚æ•°çš„ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºå®ƒè¯¥æœ‰çš„ç±»å‹ï¼Œæ˜¯å·¦å€¼å°±è½¬ä¸ºå·¦å€¼ï¼Œæ˜¯å³å€¼å°±è½¬ä¸ºå³å€¼ï¼Œä»è€Œå®ç°è¯¥è°ƒç”¨å“ªä¸ªç‰ˆæœ¬çš„å‡½æ•°å°±è°ƒç”¨å“ªä¸ªç‰ˆæœ¬çš„å‡½æ•°ï¼Œä¸å†åªè¢«è®¤å®šä¸ºå³å€¼äº†ï¼ å…ˆå‰çš„ä»£ç å¯ä»¥å¦‚æ­¤å®ç°å®Œç¾è½¬å‘ï¼š #include\u003ciostream\u003eusing namespace std; class test{ public: test() = default; test(test\u0026\u0026 p){ cout\u003c\u003c\"move construct call\"\u003c\u003cendl; } test(const test\u0026 p){ cout\u003c\u003c\"copy construct call\"\u003c\u003cendl; } }; void test_fun(test\u0026\u0026 p){ test q(forward\u003ctest\u003e(p)); //ä¿®æ”¹çš„åœ°æ–¹ return; } int main() { test_fun(test()); return 0; } ","date":"2022-02-04","objectID":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/:2:0","tags":["C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘"],"title":"C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘","uri":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"ä»»ä½•æ¨¡æ¿åº“éƒ½ç¦»ä¸å¼€å®Œç¾è½¬å‘ å…¶å®ç°åœ¨åªè¦æ˜¯C++çš„æ¨¡æ¿åº“ï¼Œæ²¡æœ‰å“ªä¸ªæ˜¯ä¸ç”¨å®Œç¾è½¬å‘çš„ï¼ŒåŒæ—¶å®Œç¾è½¬å‘çš„é—®é¢˜ä¹Ÿæ˜¯äº§ç”Ÿè‡ªæ¨¡æ¿ï¼Œè€Œ forward å‡½æ•°çš„å®ç°å…¶å®ä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ï¼Œå®é™…å°±æ˜¯åˆ©ç”¨ C++11 å¯¹æ¨¡æ¿æä¾›çš„ä¸‡èƒ½æŠ˜å è¯­ä¹‰ï¼š å½“å®å‚ä¸ºå·¦å€¼æˆ–è€…å·¦å€¼å¼•ç”¨ï¼ˆA\u0026ï¼‰æ—¶ï¼Œå‡½æ•°æ¨¡æ¿ä¸­ T\u0026\u0026 å°†è½¬å˜ä¸º A\u0026ï¼ˆA\u0026 \u0026\u0026 = A\u0026ï¼‰ï¼› å½“å®å‚ä¸ºå³å€¼æˆ–è€…å³å€¼å¼•ç”¨ï¼ˆA\u0026\u0026ï¼‰æ—¶ï¼Œå‡½æ•°æ¨¡æ¿ä¸­ T\u0026\u0026 å°†è½¬å˜ä¸º A\u0026\u0026ï¼ˆA\u0026\u0026 \u0026\u0026 = A\u0026\u0026ï¼‰ã€‚ ä»¥ä¸‹ä¸ºä¸€ä¸ªç®€å•çš„åˆ©ç”¨å®Œç¾è½¬å‘è®¾è®¡çš„åˆ›å»ºå·¥å‚ï¼š #include\u003ciostream\u003e#include \u003cmemory\u003e using namespace std; class test{ public: test() = default; test(int\u0026\u0026 arg):m_iData(arg){ cout\u003c\u003c\"move construct call\"\u003c\u003cendl; } test(const int\u0026 arg):m_iData(arg){ cout\u003c\u003c\"copy construct call\"\u003c\u003cendl; } private: int m_iData; }; template\u003ctypename T,typename Arg\u003e //ä¸ç›´æ¥ç”¨T\u0026\u0026çš„åŸå› åœ¨äºï¼Œå¦‚æœåªä½¿ç”¨ä¸€ä¸ªæ¨¡æ¿å‚æ•°ä¼šå¯¼è‡´factoryå‚æ•°æ— æ³•è·å¾—ä¸‡èƒ½å¼•ç”¨çš„æ•ˆæœ shared_ptr\u003cT\u003e factory(Arg\u0026\u0026 arg){ return shared_ptr\u003cT\u003e(new T(forward\u003cArg\u003e(arg)));//ä½¿ç”¨å®Œç¾è½¬å‘è°ƒç”¨æ­£ç¡®çš„æ„é€ å‡½æ•° } int main() { int val = 5; auto p1 = factory\u003ctest\u003e(val); auto p2 = factory\u003ctest\u003e(5); return 0; } ","date":"2022-02-04","objectID":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/:3:0","tags":["C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘"],"title":"C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘","uri":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"std::forwardçš„å®ç°åŸç† gcc çš„æºä»£ç å®ç°å¦‚ä¸‹ï¼š template\u003ctypename _Tp\u003e constexpr _Tp \u0026\u0026 forward(typename std::remove_reference\u003c_Tp\u003e::type \u0026__t) noexcept { return static_cast\u003c_Tp \u0026\u0026\u003e(__t); } template\u003ctypename _Tp\u003e constexpr _Tp \u0026\u0026 forward(typename std::remove_reference\u003c_Tp\u003e::type \u0026\u0026__t) noexcept { static_assert(!std::is_lvalue_reference\u003c_Tp\u003e::value, \"template argument\" \" substituting _Tp is an lvalue reference type\"); return static_cast\u003c_Tp \u0026\u0026\u003e(__t); } æˆ‘ä»¬å‘ç°ï¼Œæºä»£ç ä¸­å®ç°äº†ä¸¤ä¸ªæ¨¡æ¿ç‰¹åŒ–ï¼Œ_Tp\u0026 å’Œ _Tp\u0026\u0026 ä½†æœ€ç»ˆéƒ½æ˜¯é€šè¿‡ static_cast + æŠ˜å å¼•ç”¨çš„ç‰¹æ€§æ¥å®ç°å¼ºåˆ¶è½¬åŒ–çš„ã€‚ä¹Ÿå°±æ˜¯ç®€å•çš„å¼ºè½¬è€Œå·²ï¼ ","date":"2022-02-04","objectID":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/:4:0","tags":["C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘"],"title":"C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘","uri":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"æ”¶è· åœ¨è®¾è®¡æ¨¡æ¿åº“çš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦æ ¹æ®å·¦å€¼å³å€¼è¯­ä¹‰æ¯”è¾ƒæ¸…æ™°çš„å®ç°è½¬å‘ï¼Œä¸€å®šè¦ç”¨forwardï¼Œå¦åˆ™å‚æ•°åªä¼šè¢«å½“ä½œå·¦å€¼ï¼ ","date":"2022-02-04","objectID":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/:5:0","tags":["C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘"],"title":"C++å³å€¼è¯­ä¹‰çš„åŸºçŸ³â€”â€”å®Œç¾è½¬å‘","uri":"/posts/c++%E5%8F%B3%E5%80%BC%E8%AF%AD%E4%B9%89%E7%9A%84%E5%9F%BA%E7%9F%B3%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”å’Œä¸ºKçš„æœ€å°‘æ–æ³¢é‚£å¥‘æ•°å­—æ•°ç›®","date":"2022-02-03","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/","tags":["fibçš„è´ªå¿ƒå¯è¡Œæ€§"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”å’Œä¸ºKçš„æœ€å°‘æ–æ³¢é‚£å¥‘æ•°å­—æ•°ç›®","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-02-03","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/:1:0","tags":["fibçš„è´ªå¿ƒå¯è¡Œæ€§"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”å’Œä¸ºKçš„æœ€å°‘æ–æ³¢é‚£å¥‘æ•°å­—æ•°ç›®","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"é¢˜ç›®è¯¦è§£ æˆ‘å¼€å§‹æ˜¯æƒ³ç€æ„é€ å¥½fibæ•°ç»„çš„å€¼ï¼Œç„¶åç”¨èƒŒåŒ…é—®é¢˜å»è§£å†³å®ƒã€‚å¯æƒœï¼Œç›´æ¥è¶…æ—¶äº†ï¼ åé¢ç›´æ¥ç”¨æœ€ç®€å•çš„è´ªå¿ƒæ–¹å¼æ²¡æƒ³åˆ°çœŸçš„å¯è¡Œã€‚ã€‚ ç„¶åçœ‹äº†é¢˜è§£æ‰çŸ¥é“åŸæ¥fibçš„ã€Œæ¯æ¬¡é€‰æ‹©ä¸è¶…è¿‡å½“å‰ k çš„æœ€å¤§æ•°ã€è¿™æ˜¯ä¸€ä¸ªç‰¹æœ‰çš„ç»“è®ºï¼Œç„¶åå¤§å®¶éƒ½åœ¨è¯æ˜ä»–ï¼Œè™½ç„¶æˆ‘çœ‹ä¸æ‡‚ï¼Œä½†æˆ‘å¤§å—éœ‡æ’¼ğŸ˜‚ è¯¦è§£é“¾æ¥ ","date":"2022-02-03","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/:2:0","tags":["fibçš„è´ªå¿ƒå¯è¡Œæ€§"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”å’Œä¸ºKçš„æœ€å°‘æ–æ³¢é‚£å¥‘æ•°å­—æ•°ç›®","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"è§£é¢˜ä»£ç  class Solution { public: int findMinFibonacciNumbers(int k) { vector\u003cint\u003eitems(2,1); int ret = 0; while(items.back()\u003ck){ items.push_back(items.back()+items[items.size()-2]); } for(int i=items.size()-1;i\u003e=0;i--){ ret += k/items[i]; k %= items[i]; } return ret; } }; ","date":"2022-02-03","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/:3:0","tags":["fibçš„è´ªå¿ƒå¯è¡Œæ€§"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”å’Œä¸ºKçš„æœ€å°‘æ–æ³¢é‚£å¥‘æ•°å­—æ•°ç›®","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%92%8C%E4%B8%BAk%E7%9A%84%E6%9C%80%E5%B0%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE/"},{"categories":["ç®—æ³•â€”â€”å­—ç¬¦ä¸²"],"content":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","date":"2022-02-01","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/","tags":["é€’å½’åˆ†æ²»ã€æ»‘åŠ¨çª—å£ã€ä½è¿ç®—"],"title":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"},{"categories":["ç®—æ³•â€”â€”å­—ç¬¦ä¸²"],"content":"é¢˜ç›®ä¸€ï¼šè‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² 395. è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² ","date":"2022-02-01","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/:1:0","tags":["é€’å½’åˆ†æ²»ã€æ»‘åŠ¨çª—å£ã€ä½è¿ç®—"],"title":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"},{"categories":["ç®—æ³•â€”â€”å­—ç¬¦ä¸²"],"content":"é¢˜ç›®è§£æ æœ‰ä¸¤ç§æ–¹æ³•ï¼š é€’å½’åˆ†æ²»è§£å†³ï¼šè¯¥åˆ†æ²»æ³•çš„åº”ç”¨å¯¹è±¡ï¼šè§£å†³é‚£ç§ä¸ä¼šå»è·¨è¶Šä»»ä½•ä¸€ä¸ªæ®µæ›´æ–°ç­”æ¡ˆçš„é¢˜ç›®ã€‚æ¯”å¦‚æ­¤é¢˜è¿™ç§å…³äºå­—ç¬¦ä¸²å­ä¸²çš„é¢˜ã€‚é¦–å…ˆåœ¨æ•´ä¸ªå­—ç¬¦ä¸²å¤§èŒƒå›´å†…å¯ä»¥ç¡®å®šå“ªäº›å­—ç¬¦æ²¡æœ‰è¾¾åˆ°kæ¬¡ï¼Œæ•…åªè¦å­˜åœ¨è¿™äº›å­—ç¬¦çš„å­ä¸²éƒ½è¢«æ’é™¤åœ¨å¤–ã€‚å…·ä½“åˆ°é€’å½’åˆ†æ²»çš„ä»£ç ä¸Šå°±æ˜¯ï¼š åˆ†æ²»çš„æ¯ä¸€æ®µéƒ½ä¸å«ä¸Šä¸€ä¸ªæ€»å­—ç¬¦ä¸²çš„è¢« ban (è¢«ç¦)å­—ç¬¦ï¼Œæ•…æ¯ä¸ªåˆ†æ²»çš„å¯¹è±¡éƒ½è¦è¿›è¡Œä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š ä¸€ã€è®¡ç®— [l,r] ä¹‹é—´æ‰€æœ‰å­—ç¬¦çš„å‡ºç°æ¬¡æ•°ã€‚ äºŒã€æ ¹æ®å‡ºç°æ¬¡æ•°è®¡ç®—å‡ºè¢« ban æ‰çš„å­—ç¬¦ç±»å‹ã€‚ ä¸‰ã€æ ¹æ®æ˜¯å¦æœ‰è¢« ban çš„å­—ç¬¦ç±»å‹ï¼Œæ¥ç¡®å®šæ˜¯å¦è¿˜éœ€è¦å†å¾€ä¸‹é€’å½’åˆ†æ²»ï¼Œå¦‚æœæ²¡æœ‰è¢« ban çš„å­—ç¬¦ç±»å‹ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ã€‚å¦åˆ™ç»§ç»­å¾€ä¸‹é€’å½’åˆ†æ²»ï¼Œåˆ†æ²»çš„å­å¯¹è±¡éƒ½ä¸èƒ½å«æœ‰è¯¥è¢« ban å­—ç¬¦ç±»å‹ã€‚ æ ¹æ®æšä¸¾ç±»å‹çš„æ»‘åŠ¨çª—å£è§£å†³ï¼šæŒ‰ç…§å­—ç¬¦ç±»å‹çš„æ»‘åŠ¨çª—å£æŠ€å·§ï¼Œæœ€å¤–å±‚ç”¨äºæšä¸¾å›ºå®šå½“å‰çª—å£å†…æœ€å¤šæœ‰å¤šå°‘ç±»å‹ã€‚è¿™ä¸ªæŠ€å·§å°±æ˜¯ï¼Œå½“æˆ‘ä»¬æ— æ³•ç›´æ¥æ‰¾åˆ°æ»‘åŠ¨çª—å£çš„è¾¹ç•Œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æœ‰é™çš„ç±»å‹æ¥æ„é€ æ»‘åŠ¨çª—å£çš„è¾¹ç•Œï¼Œç”±äºæœ€å¤šæœ‰26ä¸ªç±»å‹çš„å­—ç¬¦ï¼Œè€Œæˆ‘ä»¬æ»‘åŠ¨çª—å£è¿‡ç¨‹å¯ä»¥æ ¹æ®æŸä¸ªç±»å‹çš„å­—ç¬¦æ•°é‡æ˜¯å¦ç¬¦åˆæ¡ä»¶æ¥å¾—åˆ°çª—å£å†…ç¬¦åˆæ¡ä»¶çš„ç±»å‹æ•°é‡ï¼Œåªè¦çª—å£å†…çš„ç±»å‹æ•°é‡ç­‰äºç¬¦åˆæ¡ä»¶çš„ç±»å‹æ•°é‡ï¼Œé‚£ä¹ˆè¯¥çª—å£å†…çš„å­—ç¬¦ä¸²å³ä¸ºä¸€ä¸ªç­”æ¡ˆã€‚ä½†é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ä¸æ¸…æ¥šçª—å£å†…çš„ç±»å‹æ•°é‡æ˜¯å¤šå¤§ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æ˜ç¡®çš„è¾¹ç•Œï¼Œæ­¤æ—¶æˆ‘ä»¬æ ¹æ®æšä¸¾ 1~26 ä¸ªç±»å‹æ¥è¿›è¡Œçª—å£çš„æ»‘åŠ¨é™åˆ¶å³å¯ã€‚ ","date":"2022-02-01","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/:1:1","tags":["é€’å½’åˆ†æ²»ã€æ»‘åŠ¨çª—å£ã€ä½è¿ç®—"],"title":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"},{"categories":["ç®—æ³•â€”â€”å­—ç¬¦ä¸²"],"content":"è§£é¢˜ä»£ç  æ³•ä¸€ï¼šé€’å½’åˆ†æ²» class Solution { public: int dfs(string\u0026 s,int l,int r,int k){ int cnt[26] = {0}; for(int i=l;i\u003c=r;i++){//è®¡ç®—å­—ç¬¦çš„æ¬¡æ•°æ–¹ä¾¿è®¡ç®—banæ‰çš„å­—ç¬¦ç±»å‹ cnt[s[i]-'a']++; } char split = 0; for(int i=0;i\u003c26;i++){ if(cnt[i]!=0\u0026\u0026cnt[i]\u003ck){ //å¾ˆæ˜æ˜¾åœ¨è¿™ä¸ªå¤§èŒƒå›´å†…è¦æ˜¯è¿™ä¸ªå­—ç¬¦ç±»å‹æ¬¡æ•°éƒ½å°äºkäº†ï¼Œè‚¯å®šå°±æ˜¯è¦è¢«bançš„ split = i+'a'; break; } } if(split==0)//å¦‚æœè¯¥æ®µå­—ç¬¦ä¸²æ²¡æœ‰è¢«bançš„å­—ç¬¦ç±»å‹åˆ™è¯¥å­—ç¬¦ä¸²å°±æ˜¯ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² return r-l+1; int ret = 0; //å¼€å§‹æšä¸¾åˆ†æ²»åˆ°ä¸‹é¢å» while(l\u003c=r){ while(l\u003c=r\u0026\u0026s[l]==split){//ä¸è®©èµ·å§‹ç‚¹ä»è¢«bançš„å­—ç¬¦å¼€å§‹ l++; } if(l\u003er) break;//è¯´æ˜å…¨æ˜¯è¢«bançš„å­—ç¬¦ int start = l; while(l\u003c=r\u0026\u0026s[l]!=split){//è®¡ç®—æœ¬æ¬¡åˆ†æ®µçš„é•¿åº¦ï¼ˆç»“æŸä½ç½®ï¼‰ l++; } int length = dfs(s,start,l-1,k); ret = max(ret,length); } return ret; } int longestSubstring(string s, int k) { return dfs(s,0,s.size()-1,k); } }; æ³•äºŒï¼šæšä¸¾ç±»å‹çš„æ»‘åŠ¨çª—å£ class Solution { public: int longestSubstring(string s, int k) { int n = s.size(); int cnt[26]{0};//ç”¨äºè®°å½•çª—å£å†…å­—ç¬¦çš„å‡ºç°æ¬¡æ•° int maxLen = 0; for(int i=1;i\u003c=26;i++){ memset(cnt,0,sizeof(cnt)); for(int l=0,r=0,sum=0,tot=0;r\u003cn;r++){//sumã€totåˆ†åˆ«è¡¨ç¤ºçª—å£å†…çš„æœ‰æ•ˆå­—ç¬¦ç§ç±»æ•°å’Œæ€»çš„ç§ç±»æ•° cnt[s[r]-'a']++; if(cnt[s[r]-'a']==1) //å¢åŠ ç§ç±»æ•° tot++; if(cnt[s[r]-'a']==k) //ä¸ºäº†é˜²æ­¢å¤šæ¬¡æ›´æ–°åƒä¸‡åˆ«å–å¤§äºå· sum++; //å¢åŠ æœ‰æ•ˆç§ç±»æ•° while(tot\u003ei){ //è¾¾åˆ°æ”¶ç¼©çª—å£æ¡ä»¶ï¼Œå› ä¸ºçª—å£å†…çš„ç§ç±»æ•°é™åˆ¶ä¸ºiä¸ª int dup = (s[l++]-'a'); cnt[dup]--; if(cnt[dup]==0) //ç§ç±»æ•°æ­¤æ—¶éœ€è¦-1 tot--; if(cnt[dup]==k-1)//æœ‰æ•ˆç§ç±»æ•°-1 sum--; } if(sum==tot) maxLen = max(maxLen,r-l+1); } } return maxLen; } }; ","date":"2022-02-01","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/:1:2","tags":["é€’å½’åˆ†æ²»ã€æ»‘åŠ¨çª—å£ã€ä½è¿ç®—"],"title":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"},{"categories":["ç®—æ³•â€”â€”å­—ç¬¦ä¸²"],"content":"é¢˜ç›®äºŒï¼šæœ€é•¿çš„ç¾å¥½å­å­—ç¬¦ä¸² æœ€é•¿çš„ç¾å¥½å­å­—ç¬¦ä¸² ","date":"2022-02-01","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/:2:0","tags":["é€’å½’åˆ†æ²»ã€æ»‘åŠ¨çª—å£ã€ä½è¿ç®—"],"title":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"},{"categories":["ç®—æ³•â€”â€”å­—ç¬¦ä¸²"],"content":"é¢˜ç›®è§£æ è¿™é¢˜è™½ç„¶ç”±äºæ•°æ®é‡çš„å…³ç³»ï¼Œè¢«åˆ’åˆ†ä¸ºç®€å•é¢˜ï¼Œä½†å®é™…ä¸Šå®Œå…¨ä¸äºšäºç¬¬ä¸€é¢˜ã€‚ç”šè‡³è¿˜å¾—ç”¨ä¸Šä¸€äº›ä½è¿ç®—çš„æ€æƒ³ã€‚ è¿™é¢˜æˆ‘ä¼šçš„åšæ³•åªæœ‰ä¸¤ç§ï¼š æ™®é€šä½è¿ç®—æšä¸¾æ³•ï¼šå…¶å®å°±æ˜¯æ­¤é¢˜çš„æš´åŠ›è§£æ³•ï¼Œåªæ˜¯ç”¨äº†ä½è¿ç®—ä½¿å¾—æ›´ä¸ºä¼˜é›…ï¼Œç”±äºæ­¤é¢˜éœ€è¦æ±‚æœ€é•¿çš„å¤§å°å†™éƒ½åŒ…å«çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªintä½æ¥è¡¨ç¤ºæ‰€æœ‰å°å†™å­—æ¯çš„å‡ºç°ï¼Œç”¨å¦ä¸€ä¸ªintä½æ¥è¡¨ç¤ºæ‰€æœ‰å¤§å†™å­—æ¯çš„å‡ºç°ï¼Œåˆ™å¯¹äºæ¯ä¸ªå­—ç¬¦ä¸²ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªintæ˜¯å¦ç›¸ç­‰æ¥åˆ¤æ–­æ˜¯å¦æ­£å¥½æ˜¯å¤§å°å†™éƒ½å«æœ‰ï¼Œç„¶åå°±æ˜¯æš´åŠ›çš„éå†æ‰€æœ‰å­ä¸²çš„è¿‡ç¨‹äº†ã€‚ é€’å½’åˆ†æ²»æ³•ï¼šæ­¤é¢˜å’Œä¸Šé¢˜å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ä¸ä¼šè·¨è¶Šä»»ä½•ä¸€ä¸ªæ®µå»æ›´æ–°ç­”æ¡ˆï¼Œæ‰€ä»¥ä¹Ÿèƒ½ä½¿ç”¨é€’å½’åˆ†æ²»çš„æ–¹å¼æ¥è¿›è¡Œè§£å†³ã€‚ä½†å‰æœŸå¤„ç†è¢«banå­—ç¬¦å’Œä¸Šé¢˜æ˜¯ä¸ä¸€æ ·çš„ï¼Œå…¶ä½™éƒ½ä¸€æ ·ï¼Œè¿™é¢˜è¦æ ¹æ® [l,r] ä¹‹é—´å­—ç¬¦çš„ä½è¿ç®—ç»“æœ lower å’Œ upper å†ä¸è¿ç®—å¾—åˆ°ä¸¤è€…çš„äº¤é›†æ¥åˆ¤æ–­æ˜¯å¦æœ‰è¢« ban å­—ç¬¦ï¼Œæˆ–è€…æ˜¯ä¸è¢«bançš„å­—ç¬¦ã€‚ ","date":"2022-02-01","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/:2:1","tags":["é€’å½’åˆ†æ²»ã€æ»‘åŠ¨çª—å£ã€ä½è¿ç®—"],"title":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"},{"categories":["ç®—æ³•â€”â€”å­—ç¬¦ä¸²"],"content":"è§£é¢˜ä»£ç  æ–¹æ³•ä¸€ï¼šä½è¿ç®—+æš´åŠ›éå† class Solution { public: string longestNiceSubstring(string s) { int sz = s.size(); int start,len=0; for(int i=0;i\u003csz;i++){ int lower = 0,upper = 0; for(int j=i;j\u003csz;j++){ if(islower(s[j])){ lower |= (1\u003c\u003c(s[j]-'a')); }else{ upper |= (1\u003c\u003c(s[j]-'A')); } if(lower==upper\u0026\u0026(j-i+1\u003elen)){ start = i; len = j-i+1; } } } return len==0?\"\":s.substr(start,len); } }; æ–¹æ³•äºŒï¼šé€’å½’åˆ†æ²» class Solution { public: void dfs(string \u0026s, int l, int r, pair\u003cint, int\u003e \u0026ret) { int lower = 0, upper = 0; for (int i = l; i \u003c= r; i++) { if (islower(s[i])) { lower |= (1 \u003c\u003c (s[i] - 'a')); } else { upper |= (1 \u003c\u003c (s[i] - 'A')); } } if (lower == upper) {//æˆ‘ä¹‹å‰è¿™é‡Œçš„åˆ¤æ–­æ¡ä»¶å¯¼è‡´äº†æ— é™å¾ªç¯ï¼Œä¸€æ—¦æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä½†ä¸æ»¡è¶³ç¬¬äºŒä¸ªæ¡ä»¶ï¼Œå°±å‘ç”Ÿæ— é™å¾ªç¯ï¼ï¼ï¼æ‰€ä»¥æ³¨æ„æ”¾åˆ°ä¸‹é¢å» if (r - l + 1 \u003e ret.second) { ret.first = l; ret.second = r - l + 1; } return; } int valid = lower \u0026 upper;//è¿™ä¸¤çš„äº¤é›†ä»£è¡¨å¤§å°å†™éƒ½å‡ºç°çš„ç±»å‹ï¼Œä¸ºç¬¦åˆæ¡ä»¶çš„ç±»å‹ï¼Œè€Œè¢«bançš„å°±æ˜¯ä¸å¤„äºè¿™é‡Œé¢çš„å­—ç¬¦ç±»å‹ int start; while (l \u003c= r) { while (l \u003c= r \u0026\u0026 !(valid \u0026 (1 \u003c\u003c (tolower(s[l]) - 'a')))) {//è®©startå¤„äºç¬¦åˆæ¡ä»¶çš„ç±»å‹ l++; } if (l \u003e r) break; start = l; while (l \u003c= r \u0026\u0026 (valid \u0026 (1 \u003c\u003c (tolower(s[l]) - 'a')))) {//å¾—åˆ°ç¬¦åˆæ¡ä»¶çš„åˆ†æ®µå³ç«¯ç‚¹ l++; } dfs(s, start, l - 1, ret); } } string longestNiceSubstring(string s) { pair\u003cint, int\u003e ret{0, 0}; dfs(s, 0, s.size() - 1, ret); return s.substr(ret.first, ret.second); } }; ","date":"2022-02-01","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/:2:2","tags":["é€’å½’åˆ†æ²»ã€æ»‘åŠ¨çª—å£ã€ä½è¿ç®—"],"title":"å­—ç¬¦ä¸²ç±»å‹æ»‘åŠ¨çª—å£æˆ–é€’å½’åˆ†æ²»è§£è¢«banå­—ç¬¦æ±‚æœ€é•¿å­ä¸²","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%88%96%E9%80%92%E5%BD%92%E5%88%86%E6%B2%BB%E8%A7%A3%E8%A2%ABban%E5%AD%97%E7%AC%A6%E6%B1%82%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"åˆ’åˆ†æ•°é—®é¢˜","date":"2022-01-30","objectID":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/","tags":["åˆ’åˆ†æ•°é—®é¢˜"],"title":"åˆ’åˆ†æ•°é—®é¢˜","uri":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-01-30","objectID":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/:1:0","tags":["åˆ’åˆ†æ•°é—®é¢˜"],"title":"åˆ’åˆ†æ•°é—®é¢˜","uri":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"é¢˜ç›®è¯¦è§£ åˆ’åˆ†æ•°ç±»å‹é¢˜ç›®éƒ½æ˜¯dpè§£å†³ï¼Œè€Œä¸”éƒ½æœ‰å›ºå®šçš„å¥—è·¯å’Œå…¬å¼ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨å‰äººçš„å…¬å¼ä¸ŠåŠ ä»¥ç†è§£ï¼ åˆ’åˆ†æ•°é—®é¢˜dpæ€»ç»“ æˆ‘è¿™é‡Œå°±æä¸¤ä¸ªæ¯”è¾ƒå¸¸è§çš„åˆ’åˆ†æ•°é—®é¢˜çš„dpåŸç†ï¼š å¦‚æœå¯¹æ•°å­—åˆ’åˆ†è¾ƒä¸ºæŠ½è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ä¸ªæ•°å­—å¯ä»¥æ¯”ä½œè‹¹æœï¼Œå³æœ‰nä¸ªè‹¹æœéœ€è¦åˆ’åˆ†åˆ°mä¸ªç›˜å­é‡Œé¢ï¼Œè€Œè¿™å‡ ä¸ªç›˜å­çš„é¡ºåºè‚¯å®šæ˜¯ä¸è€ƒè™‘çš„ï¼Œä¹Ÿå°±æ˜¯5ä¸ªè‹¹æœåˆ’åˆ†ç»™3ä¸ªç›˜å­ï¼Œåˆ™1 2 2å’Œ2 1 2æ˜¯å®Œå…¨ä¸€æ ·çš„æƒ…å†µï¼Œåªçœ‹å…·ä½“çš„æ•°å­—ç»„åˆä¸çœ‹å†…éƒ¨æ’åˆ—ï¼ å°†nåˆ’åˆ†æˆä¸å¤§äºmçš„åˆ’åˆ†ã€‚ $dp[n][m] = dp[n-m][m]+dp[n][m-1]$ å¯¹äºä»¥ä¸Šçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œ dp[n-m][m] è¡¨ç¤ºnä¸ªè‹¹æœæ”¾å…¥mä¸ªç›˜å­ä¸­ï¼Œæ— ç©ºç›˜çš„æƒ…å†µã€‚ dp[n][m-1] è¡¨ç¤ºnä¸ªè‹¹æœæ”¾å…¥mä¸ªç›˜å­ä¸­ï¼Œæœ‰ç©ºç›˜çš„æƒ…å†µ(è¿™å°±æ˜¯åˆ’åˆ†æˆä¸å¤§äºmç›˜çš„å…³é”®æ‰€åœ¨)ã€‚è¿™ä¹ˆå†™è‚¯å®šæ˜¯æœ‰äº›éš¾ä»¥ç†è§£ï¼Œä½†å½“ä½ å»ä¸¾ä¾‹å­ï¼Œå°†å®ƒé€’å½’å¾€ä¸‹å†™çš„æ—¶å€™ï¼Œä½ å°±ä¼šå‘ç°è¿™ä¸ªdp[n][m-1] åŒ…å«äº†ä» dp[n][1] åˆ° dp[n][m-1] çš„æ‰€æœ‰æƒ…å†µï¼ åº•å±‚çš„åŸºæœ¬caseæœ‰ï¼š å½“ n==1||m==1 ï¼Œå³ç›˜å­æˆ–è€…è‹¹æœæ•°é‡ä¸º1ä¸ªçš„æ—¶å€™ï¼Œé‚£è‚¯å®šå°±åªæœ‰ä¸€ç§æƒ…å†µã€‚å³dp[n][m]=1ã€‚ å½“ n\u003em ï¼Œåˆ™è¿˜èƒ½ç»§ç»­åˆ’åˆ†å³dp[n][m] = dp[n-m][m]+dp[n][m-1]ã€‚ å½“ n==m ï¼Œåˆ™æœ‰ä¸¤ç§æƒ…å†µï¼Œå½“åˆ’åˆ†ä¸ºmä¸ªæ—¶ï¼Œç»“æœä¸º1ï¼Œç„¶åç»§ç»­ç©ºç›˜å­åˆ’åˆ†ï¼Œå³ dp[n][m]=dp[n][m-1]+1ã€‚ å½“ n\u003cmï¼Œç”±äºå¯ä»¥ç©ºç›˜ï¼Œæ‰€ä»¥æ˜¯å…è®¸å­˜åœ¨çš„ï¼Œä½†æ­¤æ—¶ä¸å¯èƒ½æ»¡ç›˜ï¼Œæ‰€ä»¥ç­‰äºç©ºç›˜çš„æƒ…å†µï¼Œå³ dp[n][m] = dp[n][m-1]ã€‚ å†™æˆä»£ç å½¢å¼å°±æ˜¯ï¼ˆæˆ‘æ¯”è¾ƒå–œæ¬¢å†™è®°å¿†åŒ–dfsï¼Œæ¯•ç«Ÿä¸éœ€è¦è€ƒè™‘åˆå§‹åŒ–é—®é¢˜ï¼Œåªéœ€è€ƒè™‘æœ€åçš„è·³å‡ºï¼‰ï¼š ä»¥ä¸‹çš„ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶å°±æŠŠæ‰€æœ‰æ˜¯ä»¥ä¸Šå››ç§æƒ…å†µåŒ…å«åœ¨å†…äº†ï¼ int memo[202][8];//è®°å¿†åŒ–çš„å¤‡å¿˜å½• //TODO åˆ’åˆ†æ•°è®°å¿†åŒ–æ–¹å¼ int dfs(int n,int m){ if(n\u003c0||m\u003c0) return 0; if(n==1||n==0||m==1) return 1; return memo[n][m] = dfs(n-m,m)+dfs(n,m-1); } å°†nä¸¥æ ¼åˆ’åˆ†ä¸ºmä¸ªæ•°ã€‚(å³nä¸ªè‹¹æœä¸¥æ ¼åˆ’åˆ†ä¸ºmç›˜ï¼Œä¸è¦æœ‰ç©ºä½ï¼) $dp[n][m] = dp[n-m][m]+dp[n-1][m-1]$ ä¸‹é¢ç»™å‡ºæˆ‘çš„ä¸€æ®µæ‰‹å†™æ¨å¯¼ï¼š base caseä¹Ÿåœ¨æ‰‹å†™é¢˜è§£é‡Œé¢æåˆ°äº†ï¼Œæ‰€ä»¥ç›´æ¥ä¸Šä»£ç ï¼š int memo[202][8]; //TODO åˆ’åˆ†æ•°nåˆ’æˆkä»½çš„è®°å¿†åŒ–æ–¹å¼ int dfs(int n,int k){ if(n\u003ck) return 0; if(n==k||k==1) return 1; if(memo[n][k])return memo[n][k]; return memo[n][k] = dfs(n-k, k) + dfs(n-1,k-1); } ","date":"2022-01-30","objectID":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/:2:0","tags":["åˆ’åˆ†æ•°é—®é¢˜"],"title":"åˆ’åˆ†æ•°é—®é¢˜","uri":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’"],"content":"è§£é¢˜ä»£ç  å‰é¢å·²ç»ä»‹ç»äº†ä¸¤ç§åˆ’åˆ†æ•°çš„dpï¼Œé‚£ä¹ˆæœ¬é¢˜å°±å±äºç¬¬äºŒç§åˆ’åˆ†æ•°çš„dpï¼ ç›´æ¥æŠŠä¸Šé¢çš„ä»£ç æ‹¿ä¸‹æ¥ç›´æ¥ç§’ï¼ #include\u003cbits/stdc++.h\u003eusing namespace std; using ll = long long; ll memo[202][8]; int n,k; //TODO åˆ’åˆ†æ•°è®°å¿†åŒ–æ–¹å¼ ll dfs(int a,int b){ if(a\u003cb) return 0; if(a==b||b==1) return 1; if(memo[a][b])return memo[a][b]; return memo[a][b] = dfs(a-b, b) + dfs(a-1,b-1); } int main(){ cin\u003e\u003en\u003e\u003ek; cout\u003c\u003cdfs(n, k); return 0; } ","date":"2022-01-30","objectID":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/:3:0","tags":["åˆ’åˆ†æ•°é—®é¢˜"],"title":"åˆ’åˆ†æ•°é—®é¢˜","uri":"/posts/%E5%88%92%E5%88%86%E6%95%B0%E9%97%AE%E9%A2%98/"},{"categories":["ç®—æ³•â€”â€”è·¯å¾„æ›´æ–°é—®é¢˜"],"content":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹","date":"2022-01-29","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/"},{"categories":["ç®—æ³•â€”â€”è·¯å¾„æ›´æ–°é—®é¢˜"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-01-29","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/:1:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/"},{"categories":["ç®—æ³•â€”â€”è·¯å¾„æ›´æ–°é—®é¢˜"],"content":"è§£é¢˜æ€è·¯ ä¸¤ç§è§£é¢˜æ€è·¯ï¼Œéƒ½æ˜¯æ ¹æ®é¢˜ç›®çš„æ„æ€æ›´æ–°è·¯å¾„ä¿¡æ¯å³å¯ï¼š bfsæ€è·¯ï¼šç”±äºç›¸é‚»çš„ä¸¤ä¸ªæ ¼å­å¿…é¡»é«˜åº¦å·®ä¸º1ï¼Œè€Œæ°´åŸŸå¿…é¡»é«˜åº¦ä¸º0ï¼Œæ‰€ä»¥ï¼Œç›´æ¥ä»¥æ°´åŸŸä¸ºbfsæºç‚¹ï¼Œè¿›è¡ŒbfsæŠŠæ•´ä¸ªåŒºåŸŸçš„å€¼ç»™æ›´æ–°å°±è¡Œäº†ã€‚è¿™æ˜¯bfsæ€è·¯ã€‚ dpæ€è·¯ï¼šç”±äºdpéƒ½ä¾èµ–ä¸Šä¸€æ¬¡æ›´æ–°çš„ç»“æœï¼Œè€Œæˆ‘ä»¬ä¸€èˆ¬å°±æ˜¯ä»å·¦åˆ°å³çš„éå†æ›´æ–°ï¼Œè€Œè¿™é¢˜æ˜¯å’Œå››ä¸ªä½ç½®ç›¸å…³ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ†ä¸ºï¼šä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³æ›´æ–°ï¼Œå¯ä»¥æŠŠä¾èµ–ä¸Šå’Œå·¦çš„ç­”æ¡ˆç»™æ›´æ–°ï¼Œä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦æ›´æ–°ï¼Œå¯ä»¥æŠŠä¾èµ–ä¸‹å’Œå³çš„ç»“æœç»™æ›´æ–°å®Œã€‚ ","date":"2022-01-29","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/:2:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/"},{"categories":["ç®—æ³•â€”â€”è·¯å¾„æ›´æ–°é—®é¢˜"],"content":"è§£é¢˜ä»£ç  BFSä»£ç  class Solution { public: const int dx[4]={-1,1,0,0}; const int dy[4]={0,0,-1,1}; int n,m; bool isValid(int x,int y){ return x\u003cn\u0026\u0026x\u003e=0\u0026\u0026y\u003cm\u0026\u0026y\u003e=0; } const int maxn = 1e3+5; vector\u003cvector\u003cint\u003e\u003e highestPeak(vector\u003cvector\u003cint\u003e\u003e\u0026 isWater) { n = isWater.size(); m = isWater[0].size(); bool visit[maxn][maxn]; memset(visit,0,sizeof(visit)); queue\u003cpair\u003cint,int\u003e\u003eQ; for(int i=0;i\u003cn;i++){ for(int j=0;j\u003cm;j++){ if(isWater[i][j]){ visit[i][j] = 1; isWater[i][j] = 0; Q.push({i,j}); } } } int step = 1; while(!Q.empty()){ for(int i=Q.size();i\u003e0;i--){ auto[x,y] = Q.front();Q.pop(); for(int k=0;k\u003c4;k++){ int nx = x+dx[k]; int ny = y+dy[k]; if(isValid(nx,ny)\u0026\u0026!visit[nx][ny]){ visit[nx][ny] = 1; isWater[nx][ny] = step; Q.push({nx,ny}); } } } step++; } return isWater; } }; dpä»£ç  class Solution { public: vector\u003cvector\u003cint\u003e\u003e highestPeak(vector\u003cvector\u003cint\u003e\u003e\u0026 isWater) { int n = isWater.size(); int m = isWater[0].size(); vector\u003cvector\u003cint\u003e\u003e dp(n, vector\u003cint\u003e(m, 1e9+7)); for(int i=0; i\u003cn; i++) { //ä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³ for(int j=0; j\u003cm; j++) { if(isWater[i][j]) dp[i][j] = 0; else { if(i \u003e 0) dp[i][j] = min(dp[i][j], dp[i-1][j]+1); if(j \u003e 0) dp[i][j] = min(dp[i][j], dp[i][j-1]+1); } } } for(int i=n-1; i\u003e=0; i--) { //ä»ä¸‹åˆ°ä¸Šä»å³åˆ°å·¦ for(int j=m-1; j\u003e=0; j--) { if(isWater[i][j]) dp[i][j] = 0; else { if(i \u003c n-1) dp[i][j] = min(dp[i][j], dp[i+1][j]+1); if(j \u003c m-1) dp[i][j] = min(dp[i][j], dp[i][j+1]+1); } } } return dp; } }; ","date":"2022-01-29","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/:3:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜â€”â€”åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%9C%80%E9%AB%98%E7%82%B9/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"leetcodeæ¯æ—¥ä¸€é¢˜-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡","date":"2022-01-28","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/","tags":["åˆ©ç”¨æ’åºåŸºäºéå†è¿‡ç¨‹å¤„ç†çš„è´ªå¿ƒ-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-01-28","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/:1:0","tags":["åˆ©ç”¨æ’åºåŸºäºéå†è¿‡ç¨‹å¤„ç†çš„è´ªå¿ƒ-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"è§£é¢˜æ€è·¯ ä¸€å¥è¯è§£å†³ï¼šä»¥ç¬¬ä¸€ä¸ªå­—æ®µä¸ºæ ‡å‡†ä»å¤§åˆ°å°æ’åºï¼Œç„¶åå†éå†æ•°ç»„ï¼Œå¯¹æ¯”ç¬¬äºŒå­—æ®µçš„æœ€å¤§å€¼å³å¯ã€‚ å…³é”®ç»†èŠ‚ï¼š ä¸ºäº†é¿å…ç¬¬ä¸€ä¸ªå­—æ®µç›¸åŒçš„æƒ…å†µä¸‹è¢«æ›´æ–°ï¼Œæ‰€ä»¥åœ¨æ’åºæ—¶é‡‡å–ï¼Œæ”»å‡»åŠ›é™åºé˜²å¾¡åŠ›å‡åºçš„æ–¹å¼(å…³é”®)æ¥è¿›è¡Œã€‚ è¿™æ ·å°±è®©ç¬¬ä¸€ä¸ªå­—æ®µç›¸åŒæ—¶ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„éå†é¡ºåºæ˜¯ä¸å¯èƒ½æŠŠç¬¬ä¸€ä¸ªå­—æ®µç›¸åŒçš„æƒ…å†µæ‹¿æ¥æ›´æ–° cnt ã€‚ ","date":"2022-01-28","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/:2:0","tags":["åˆ©ç”¨æ’åºåŸºäºéå†è¿‡ç¨‹å¤„ç†çš„è´ªå¿ƒ-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"è§£é¢˜ä»£ç  æ³¨æ„ï¼šgolang çš„ä»£ç ä¸­çš„æ–­è¨€å‹å‡½æ•°æ¥å£æœ‰ç‚¹ä¸ä¸€æ ·ã€‚ã€‚å®ƒè°ƒç”¨æ—¶ç”¨çš„æ˜¯æ•°ç»„ä¸‹æ ‡çš„å½¢å¼æ¥è°ƒç”¨ã€‚ cpp version class Solution { public: //ä¸€å¥è¯è§£å†³ï¼šä»¥ç¬¬ä¸€ä¸ªå­—æ®µä¸ºæ ‡å‡†ä»å¤§åˆ°å°æ’åºï¼Œç„¶åå†éå†æ•°ç»„ï¼Œå¯¹æ¯”ç¬¬äºŒå­—æ®µçš„æœ€å¤§å€¼å³å¯ã€‚ //ä½†ä¸ºäº†é¿å…ç¬¬ä¸€ä¸ªå­—æ®µç›¸åŒçš„æƒ…å†µä¸‹è¢«æ›´æ–°ï¼Œæ‰€ä»¥åœ¨æ’åºæ—¶é‡‡å–ï¼Œæ”»å‡»åŠ›é™åºé˜²å¾¡åŠ›å‡åºçš„æ–¹å¼(å…³é”®)æ¥è¿›è¡Œ //è¿™æ ·å°±è®©ç¬¬ä¸€ä¸ªå­—æ®µç›¸åŒæ—¶ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„éå†é¡ºåºæ˜¯ä¸å¯èƒ½æŠŠç¬¬ä¸€ä¸ªå­—æ®µç›¸åŒçš„æƒ…å†µæ‹¿æ¥æ›´æ–°cntã€‚ int numberOfWeakCharacters(vector\u003cvector\u003cint\u003e\u003e\u0026 properties) { int n = properties.size(); auto cmp = [](vector\u003cint\u003e\u0026 t1,vector\u003cint\u003e\u0026t2){return t1[0]==t2[0]?t1[1]\u003ct2[1]:t1[0]\u003et2[0];}; sort(properties.begin(),properties.end(),cmp); int mx = INT_MIN; int cnt = 0; for(int i=0;i\u003cn;i++){ if(mx\u003eproperties[i][1]) cnt++; mx = max(mx,properties[i][1]); } return cnt; } }; java version class Solution { public int numberOfWeakCharacters(int[][] properties) { Arrays.sort(properties,(o1,o2)-\u003e o1[0]==o2[0]?o1[1]-o2[1]:o2[0]-o1[0]); int max = -1,cnt = 0; for(int[] p : properties){ if(p[1]\u003cmax) cnt++; max = Math.max(max,p[1]); } return cnt; } } golang version func numberOfWeakCharacters(properties [][]int) int { sort.Slice(properties,func (i int,j int) bool{//æ³¨æ„è¿™ä¸ªæ¥å£è¢«å†™æ­»åªèƒ½ç”¨intå‹ p, q := properties[i], properties[j] return p[0] \u003e q[0] || p[0] == q[0] \u0026\u0026 p[1] \u003c q[1] }) var max = -1 cnt := 0 for _,v := range properties{ if max\u003ev[1] { cnt++ } max = int(math.Max(float64(max), float64(v[1]))) } return cnt } ","date":"2022-01-28","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/:3:0","tags":["åˆ©ç”¨æ’åºåŸºäºéå†è¿‡ç¨‹å¤„ç†çš„è´ªå¿ƒ-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”è´ªå¿ƒ"],"content":"æ”¶è· è¢«å‘äº†ï¼Œå¾€äºŒåˆ†+å“ˆå¸Œè¡¨æ–¹å‘å»å†™äº†ã€‚å®Œå…¨æ²¡æƒ³åˆ°ä¹‹é—´æ’åº+éå†å°±èƒ½è§£å†³ã€‚ã€‚ã€‚ æ’åºçš„å¤„ç†éå¸¸ä¹‹ç²¾é«“ã€‚ ","date":"2022-01-28","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/:4:0","tags":["åˆ©ç”¨æ’åºåŸºäºéå†è¿‡ç¨‹å¤„ç†çš„è´ªå¿ƒ-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ¸¸æˆä¸­å¼±è§’è‰²çš„æ•°é‡","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%BC%B1%E8%A7%92%E8%89%B2%E7%9A%84%E6%95%B0%E9%87%8F/"},{"categories":["ç®—æ³•â€”â€”è®¡ç®—å‡ ä½•"],"content":"leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢","date":"2022-01-27","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/","tags":["leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/"},{"categories":["ç®—æ³•â€”â€”è®¡ç®—å‡ ä½•"],"content":"é¢˜ç›® é¢˜ç›®é“¾æ¥ ","date":"2022-01-27","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/:1:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/"},{"categories":["ç®—æ³•â€”â€”è®¡ç®—å‡ ä½•"],"content":"é¢˜ç›®è§£æ æ³¨æ„æ­¤é¢˜ä¸ºè®¡ç®—å‡ ä½•ç±»å‹çš„é¢˜ç›®ï¼Œæˆ‘è®¤ä¸ºè¿™ç±»é—®é¢˜æœ€é‡è¦çš„å°±æ˜¯æŠŠè¿™ä¸ªå‡ ä½•å›¾å½¢ç”¨å¥½ç”¨çš„æ–¹æ³•å»è¡¨ç¤ºå‡ºæ¥ã€‚ ä¸‰ä¸ªé‡ç‚¹ï¼š ç‚¹çš„è¡¨ç¤ºï¼šæˆ‘ä»¬é€šè¿‡ä¸Šä¸‹ä¸¤ç‚¹ç¡®å®šæ­£æ–¹å½¢çš„åŸåˆ™æ¥è¡¨ç¤ºï¼Œä¸”ç‚¹çš„å­˜å‚¨æ–¹å¼ä¸€ç‚¹ä¸èƒ½ç”¨pairï¼Œè¿™æ ·æ•ˆç‡åŠå…¶ä½ä¸‹ï¼Œä¸”éš¾ä»¥æœ‰ä¸€å®šçš„è‡ªç”±åº¦å–æ“ä½œ xï¼Œy è½´ï¼Œæˆ‘ä»¬é‡‡ç”¨å“ˆå¸Œè¡¨å¥—å“ˆå¸Œè¡¨çš„æ–¹å¼å–å­˜å‚¨ï¼ ç‚¹çš„è®°å½•ï¼šé€šè¿‡åµŒå¥—å“ˆå¸Œè¡¨å®Œæˆç‚¹çš„æ¬¡æ•°è®°å½•ï¼Œæ¯”å¦‚ï¼š unordered_map\u003cint, unordered_map\u003cint, int\u003e\u003e cnt; cnt[y][x]++; ç‚¹çš„æšä¸¾ï¼šé€šè¿‡åµŒå¥—å“ˆå¸Œè¡¨ï¼Œå¯ä»¥å¾ˆå¥½çš„æŠŠ xï¼Œy åæ ‡çš„å¯¹åº”ç‚¹æ•°ç»™é™åˆ¶ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ ¹æ®è¿™ç‚¹å¯ä»¥åˆ©ç”¨countæ–¹æ³•ç›´æ¥æŠŠä¸æ˜¯åŒä¸€ä¸ªçºµè½´çš„ç‚¹ç»™æ’é™¤ï¼Œæ¯”å¦‚ï¼š res += (colCnt.count(x) ? colCnt[x] : 0) * (yCnt.count(x + d) ? yCnt[x + d] : 0) * (colCnt.count(x + d)? colCnt[x + d] : 0); //ä¸€æ—¦ä»¥ä¸Šçš„countæ–¹æ³•è¿”å›0ï¼Œå³è¡¨ç¤ºè¯¥ç‚¹ä¸æ˜¯åŒä¸€ä¸ªçºµè½´ä¸Šçš„ç‚¹ï¼Œåˆ™å¾—å‡ºç»“æœ0ï¼Œæ•´ä¸ªreså°±ç›¸å½“äºæ²¡æœ‰åŠ ä»»ä½•æ•°å­—ã€‚ å†æ¯”å¦‚é€šè¿‡yCntæå‰å–å‡ºåœ¨åŒä¸€ä¸ªæ¨ªè½´çš„ç‚¹ï¼š unordered_map\u003cint, int\u003e \u0026 yCnt = cnt[y]; //å–å’Œpointåœ¨åŒä¸€è¡Œçš„æ‰€æœ‰ç‚¹ //è¿™æ ·åç»­çš„æšä¸¾è¿‡ç¨‹ç›´æ¥å¯ä»¥å¥—ç”¨yCnt[x+d]æˆ–è€…yCnt[x-d]æ¥å¾—åˆ°å¯¹åº”å·¦å³ä¸¤ç§æƒ…å†µæ­£æ–¹å½¢çš„ç‚¹ä¸ªæ•°ã€‚ æœ€åä¸€ä¸ªä¼˜åŒ–ï¼šç”±äºæˆ‘ä»¬æ¯æ¬¡æšä¸¾åŒä¸€çºµè½´ä¸Šçš„ç‚¹ä¸ç¡®å®šæ˜¯ä¸Šé¢è¿˜æ˜¯ä¸‹é¢ï¼Œå®é™…ä¸Šæ ¹æœ¬ä¸é‡è¦ï¼Œç”±äºåœ¨è®¡ç®—æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæŠŠå·¦å³ä¸¤ç§æ­£æ–¹å½¢çš„æƒ…å†µç»™è®¡ç®—å®Œï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹æ­£å¥½æ˜¯ä¸¤ä¸ªç›¸åçš„ +- è¿‡ç¨‹ï¼Œæ‰€ä»¥æ— è®ºæšä¸¾å¾—åˆ°çš„æ­£æ–¹å½¢è¾¹é•¿ä¸ºæ­£è¿˜æ˜¯ä¸ºè´Ÿæ•°ï¼Œéƒ½ä¸å½±å“ï¼ ","date":"2022-01-27","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/:2:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/"},{"categories":["ç®—æ³•â€”â€”è®¡ç®—å‡ ä½•"],"content":"è§£é¢˜ä»£ç  éå¸¸è¯¦ç»†çš„æ³¨é‡Šäº† class DetectSquares { public: unordered_map\u003cint, unordered_map\u003cint, int\u003e\u003e cnt; DetectSquares() { } void add(vector\u003cint\u003e point) { int x = point[0], y = point[1]; cnt[y][x]++; } int count(vector\u003cint\u003e point) { int res = 0; int x = point[0], y = point[1]; if (!cnt.count(y)) { return 0; } unordered_map\u003cint, int\u003e \u0026 yCnt = cnt[y]; //å–å’Œpointåœ¨åŒä¸€è¡Œçš„æ‰€æœ‰ç‚¹ for (auto \u0026 [col, colCnt] : cnt) { if (col != y) {//ç”±äºæˆ‘ä»¬æ„é€ æ­£æ–¹å½¢æ˜¯æ ¹æ®ä¸Šä¸‹ä¸¤æ¡è¾¹ï¼Œæ•…æ­¤å¤„æšä¸¾çš„å¦å¤–ä¸€ç‚¹ä¸èƒ½åœ¨åŒä¸€è¡Œ // æ ¹æ®å¯¹ç§°æ€§ï¼Œè¿™é‡Œå¯ä»¥ä¸ç”¨å–ç»å¯¹å€¼ï¼Œå…·ä½“è€Œè¨€å°±æ˜¯æ‰€æœ‰æƒ…å†µæ ¹æ®+-å·²ç»åŒ…æ‹¬ int d = col - y;//å¾—åˆ°æ­£æ–¹å½¢è¾¹é•¿ï¼Œæ ¹æ®è¿™ä¸ªå€¼å¯ä»¥ç›´æ¥å–åˆ°å¯¹åº”çš„å¦å¤–å‡ ä¸ªç‚¹(å¦‚æœå­˜åœ¨çš„è¯) //è¿™é‡Œçš„colCnt.count(x)ç”¨äºåˆ¤æ–­æ˜¯å¦å’Œå½“å‰ç‚¹åœ¨åŒä¸€ä¸ªçºµè½´ï¼Œè¿™æ ·æ‰å¯èƒ½æ„é€ ä¸Šä¸‹ä¸¤è¾¹ï¼Œæ•…ä¸‹é¢åªè¦æœ‰1ä¸ªä¸º0ï¼Œåˆ™åŠ çš„éƒ½æ˜¯0 //ç”±äºæˆ‘ä»¬æŒ‡å®šäº†å¿…é¡»æ˜¯åŒä¸€ä¸ªçºµè½´ä¸Šçš„ç‚¹ï¼Œæ‰€ä»¥ä¸å¯èƒ½æ„é€ å‡ºä¸¤ä¸ªç›¸åŒçš„æ­£æ–¹å½¢ï¼ res += (colCnt.count(x) ? colCnt[x] : 0) * (yCnt.count(x + d) ? yCnt[x + d] : 0) * (colCnt.count(x + d)? colCnt[x + d] : 0); res += (colCnt.count(x) ? colCnt[x] : 0) * (yCnt.count(x - d) ? yCnt[x - d] : 0) * (colCnt.count(x - d) ? colCnt[x - d] : 0); } } return res; } }; ","date":"2022-01-27","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/:3:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/"},{"categories":["ç®—æ³•â€”â€”è®¡ç®—å‡ ä½•"],"content":"æ€»ç»“ å­¦åˆ°ä»¥ä¸‹ï¼š å¦‚ä½•é€šè¿‡åµŒå¥—å“ˆå¸Œè¡¨è¡¨ç¤ºç‚¹ï¼Œä»¥åŠç”¨å®ƒè¡¨ç¤ºçš„è€Œä¸ç”¨pairè¡¨ç¤ºçš„å¥½å¤„ã€‚ é‡ç‚¹å¥½åƒä¹Ÿå°±ä¸Šé¢é‚£æ¡ã€‚ ","date":"2022-01-27","objectID":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/:4:0","tags":["leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢"],"title":"leetcodeæ¯æ—¥ä¸€é¢˜-æ£€æµ‹æ­£æ–¹å½¢","uri":"/posts/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-%E6%A3%80%E6%B5%8B%E6%AD%A3%E6%96%B9%E5%BD%A2/"},{"categories":["JavaWebç¬”è®°"],"content":"Javaç½‘ç»œç¼–ç¨‹","date":"2022-01-26","objectID":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/","tags":["JavaWebç¬¬ä¸€èŠ‚"],"title":"Javaç½‘ç»œç¼–ç¨‹","uri":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"categories":["JavaWebç¬”è®°"],"content":"Javaç½‘ç»œç¼–ç¨‹ é…å¥—è§†é¢‘ åœ¨JavaSEé˜¶æ®µï¼Œæˆ‘ä»¬å­¦ä¹ äº†I/Oæµï¼Œæ—¢ç„¶I/Oæµå¦‚æ­¤å¼ºå¤§ï¼Œé‚£ä¹ˆèƒ½å¦è·¨è¶Šä¸åŒçš„ä¸»æœºè¿›è¡ŒI/Oæ“ä½œå‘¢ï¼Ÿè¿™å°±è¦æåˆ°Javaçš„ç½‘ç»œç¼–ç¨‹äº†ã€‚ æ³¨æ„ï¼šæœ¬ç« ä¼šæ¶‰åŠåˆ°è®¡ç®—æœºç½‘ç»œç›¸å…³å†…å®¹ï¼ˆåªä¼šè®²è§£å¤§è‡´å†…å®¹ï¼Œä¸ä¼šå®Œæ•´çš„è®²è§£è®¡ç®—æœºç½‘ç»œçŸ¥è¯†ï¼‰ è‹¥æ²¡æœ‰è®¡ç®—æœºç½‘ç»œåŸºç¡€ï¼Œå®é™…ä¸ŠJavaè¿™é‡Œå°è£…çš„Socketç½‘ç»œIOæ“ä½œå·²ç»ç®€å•åˆ°å®Œå…¨ä¸éœ€è¦ä»»ä½•åŸºç¡€çš„ï¼Œä½†æ˜¯æ²¡æœ‰è®¡ç®—æœºç½‘ç»œç›¸å…³çš„åº•å±‚çŸ¥è¯†ï¼Œä»¥åçš„æ·±å…¥å­¦ä¹ ä¼šéå¸¸ä¸çŸ¥æ‰€äº‘ã€‚ ","date":"2022-01-26","objectID":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/:0:0","tags":["JavaWebç¬¬ä¸€èŠ‚"],"title":"Javaç½‘ç»œç¼–ç¨‹","uri":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"categories":["JavaWebç¬”è®°"],"content":"è®¡ç®—æœºç½‘ç»œåŸºç¡€ åˆ©ç”¨é€šä¿¡çº¿è·¯å’Œé€šä¿¡è®¾å¤‡ï¼Œå°†åœ°ç†ä½ç½®ä¸åŒçš„ã€åŠŸèƒ½ç‹¬ç«‹çš„å¤šå°è®¡ç®—æœºäº’è¿èµ·æ¥ï¼Œä»¥åŠŸèƒ½å®Œå–„çš„ç½‘ç»œè½¯ä»¶æ¥å®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’ï¼Œå°±æ„æˆäº†è®¡ç®—æœºç½‘ç»œç³»ç»Ÿã€‚ æ¯”å¦‚æˆ‘ä»¬å®¶é‡Œçš„è·¯ç”±å™¨ï¼Œé€šè¿‡å°†æˆ‘ä»¬çš„è®¾å¤‡ï¼ˆæ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ã€ç”µè§†å‰§ï¼‰è¿æ¥åˆ°è·¯ç”±å™¨ï¼Œæ¥å®ç°å¯¹äº’è”ç½‘çš„è®¿é—®ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„è·¯ç”±å™¨è¿æ¥åœ¨äº’è”ç½‘ä¸Šï¼Œè€Œæˆ‘ä»¬çš„è®¾å¤‡åˆè¿æ¥äº†è·¯ç”±å™¨ï¼Œè¿™æ ·æˆ‘ä»¬çš„è®¾å¤‡å°±å¯ä»¥é€šè¿‡è·¯ç”±å™¨è®¿é—®åˆ°äº’è”ç½‘äº†ã€‚é€šè¿‡ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®äº’è”ç½‘ä¸Šçš„å¦ä¸€å°ä¸»æœºï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æŠŠQQçš„æ¶ˆæ¯å‘é€ç»™æˆ‘ä»¬çš„æœ‹å‹ï¼Œæˆ–æ˜¯é€šè¿‡è¿œç¨‹æ¡Œé¢ç®¡ç†æ¥æ“ä½œå¦ä¸€å°ç”µè„‘ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿æ¥æœ¬åœ°ç½‘ç»œä¸Šçš„æ‰“å°æœºã€‚ æ—¢ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ç½‘ç»œè®¿é—®å…¶ä»–è®¡ç®—æœºï¼Œé‚£ä¹ˆå¦‚ä½•åŒºåˆ«ä¸åŒçš„è®¡ç®—æœºå‘¢ï¼Ÿé€šè¿‡IPåœ°å€ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŒºåˆ†ä¸åŒçš„è®¡ç®—æœºäº†ï¼š æ¯ä¸€å°ç”µè„‘åœ¨åŒä¸€ä¸ªç½‘ç»œä¸Šéƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„IPåœ°å€ï¼Œç”¨äºåŒºåˆ«äºå…¶ä»–çš„ç”µè„‘ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æ–¹ä¸»æœºçš„IPåœ°å€å¯¹å…¶è¿›è¡Œè®¿é—®ã€‚é‚£ä¹ˆæˆ‘æ‰‹æœºè¿æ¥çš„ç§»åŠ¨æµé‡ï¼Œèƒ½è®¿é—®åˆ°è¿æ¥å®¶é‡Œè·¯ç”±å™¨çš„ç”µè„‘å—ï¼Ÿï¼ˆä¸èƒ½ï¼Œå› ä¸ºä»–ä»¬ä¸å±äºåŒä¸€ä¸ªç½‘ç»œï¼‰ è€Œæˆ‘ä»¬çš„ç”µè„‘ä¸Šå¯èƒ½è¿è¡Œç€å¤§é‡çš„ç¨‹åºï¼Œæ¯ä¸€ä¸ªç¨‹åºå¯èƒ½éƒ½éœ€è¦é€šè¿‡ç½‘ç»œæ¥è®¿é—®å…¶ä»–è®¡ç®—æœºï¼Œé‚£è¿™æ—¶è¯¥å¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ç«¯å£å·æ¥åŒºåˆ†ï¼š å› æ­¤ï¼Œæˆ‘ä»¬ä¸€èˆ¬çœ‹åˆ°çš„æ˜¯è¿™æ ·çš„ï¼š192.168.0.11:8080ï¼Œé€šè¿‡IP:ç«¯å£çš„å½¢å¼æ¥è®¿é—®ç›®æ ‡ä¸»æœºä¸Šçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºæœåŠ¡ã€‚æ³¨æ„ç«¯å£å·åªèƒ½æ˜¯0-65535ä¹‹é—´çš„å€¼ï¼ IPåœ°å€åˆ†ä¸ºIPv4å’ŒIPv6ï¼ŒIPv4ç±»ä¼¼äº192.168.0.11ï¼Œæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ä¾‹å­éƒ½æ˜¯ä½¿ç”¨çš„IPv4ï¼Œå®ƒä¸€å…±æœ‰å››ç»„æ•°å­—ï¼Œæ¯ç»„æ•°å­—å 8ä¸ªbitä½ï¼ŒIPv4åœ°å€0.0.0.0è¡¨ç¤ºä¸º2è¿›åˆ¶å°±æ˜¯ï¼š00000000.00000000.00000000.00000000ï¼Œå…±32ä¸ªbitï¼Œæœ€å¤§ä¸º255.255.255.255ï¼Œå®é™…ä¸Šï¼ŒIPv4èƒ½å¤Ÿè¡¨ç¤ºçš„æ‰€æœ‰åœ°å€ï¼Œæ—©å°±å·²ç»è¢«ç”¨å®Œäº†ã€‚IPv6èƒ½å¤Ÿä¿å­˜128ä¸ªbitä½ï¼Œå› æ­¤å®ƒä¹Ÿå¯ä»¥è¡¨ç¤ºæ›´å¤šçš„IPåœ°å€ï¼Œä¸€ä¸ªIPv6åœ°å€çœ‹èµ·æ¥åƒè¿™æ ·ï¼š1030::C9B4:FF12:48AA:1A2Bï¼Œç›®å‰ä¹Ÿæ­£åœ¨å‘IPv6çš„é˜¶æ®µè¿‡åº¦ã€‚ TCPå’ŒUDPæ˜¯ä¸¤ç§ä¸åŒçš„ä¼ è¾“å±‚åè®®ï¼š TCPï¼šå½“ä¸€å°è®¡ç®—æœºæƒ³è¦ä¸å¦ä¸€å°è®¡ç®—æœºé€šè®¯æ—¶ï¼Œä¸¤å°è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡éœ€è¦ç•…é€šä¸”å¯é ï¼ˆä¼šè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œæ–­å¼€ä¹Ÿä¼šè¿›è¡Œå››æ¬¡æŒ¥æ‰‹ï¼‰ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ­£ç¡®æ”¶å‘æ•°æ®ï¼Œå› æ­¤TCPæ›´é€‚åˆä¸€äº›å¯é çš„æ•°æ®ä¼ è¾“åœºæ™¯ã€‚ UDPï¼šå®ƒæ˜¯ä¸€ç§æ— è¿æ¥åè®®ï¼Œæ•°æ®æƒ³å‘å°±å‘ï¼Œè€Œä¸”ä¸ä¼šå»ºç«‹å¯é ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ è¾“è¿‡ç¨‹ä¸­æœ‰å¯èƒ½ä¼šå¯¼è‡´éƒ¨åˆ†æ•°æ®ä¸¢å¤±ï¼Œä½†æ˜¯å®ƒæ¯”TCPä¼ è¾“æ›´åŠ ç®€å•é«˜æ•ˆï¼Œé€‚åˆè§†é¢‘ç›´æ’­ä¹‹ç±»çš„ã€‚ ","date":"2022-01-26","objectID":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/:1:0","tags":["JavaWebç¬¬ä¸€èŠ‚"],"title":"Javaç½‘ç»œç¼–ç¨‹","uri":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"categories":["JavaWebç¬”è®°"],"content":"äº†è§£SocketæŠ€æœ¯ é€šè¿‡SocketæŠ€æœ¯ï¼ˆå®ƒæ˜¯è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡çš„ä¸€ç§çº¦å®šæˆ–ä¸€ç§æ–¹å¼ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸¤å°è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ï¼ŒSocketä¹Ÿè¢«ç¿»è¯‘ä¸ºå¥—æ¥å­—ï¼Œæ˜¯æ“ä½œç³»ç»Ÿåº•å±‚æä¾›çš„ä¸€é¡¹é€šä¿¡æŠ€æœ¯ï¼Œå®ƒæ”¯æŒTCPå’ŒUDPã€‚è€ŒJavaå°±å¯¹socketåº•å±‚æ”¯æŒè¿›è¡Œäº†ä¸€å¥—å®Œæ•´çš„å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Javaæ¥å®ç°Socketé€šä¿¡ã€‚ è¦å®ç°Socketé€šä¿¡ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªæ•°æ®å‘é€è€…å’Œä¸€ä¸ªæ•°æ®æ¥æ”¶è€…ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œæˆ‘ä»¬éœ€è¦æå‰å¯åŠ¨æœåŠ¡ç«¯ï¼Œæ¥ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œè€Œå®¢æˆ·ç«¯åªéœ€è¦éšæ—¶å¯åŠ¨å»è¿æ¥æœåŠ¡ç«¯å³å¯ï¼ //æœåŠ¡ç«¯ public static void main(String[] args) { try(ServerSocket server = new ServerSocket(8080)){ //å°†æœåŠ¡ç«¯åˆ›å»ºåœ¨ç«¯å£8080ä¸Š System.out.println(\"æ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...\"); Socket socket = server.accept(); //å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œçº¿ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰å®¢æˆ·ç«¯è¿æ¥ä¸ºæ­¢ System.out.println(\"å®¢æˆ·ç«¯å·²è¿æ¥ï¼ŒIPåœ°å€ä¸ºï¼š\"+socket.getInetAddress().getHostAddress()); }catch (IOException e){ e.printStackTrace(); } } //å®¢æˆ·ç«¯ public static void main(String[] args) { try (Socket socket = new Socket(\"localhost\", 8080)){ System.out.println(\"å·²è¿æ¥åˆ°æœåŠ¡ç«¯ï¼\"); }catch (IOException e){ System.out.println(\"æœåŠ¡ç«¯è¿æ¥å¤±è´¥ï¼\"); e.printStackTrace(); } } å®é™…ä¸Šå®ƒå°±æ˜¯ä¸€ä¸ªTCPè¿æ¥çš„å»ºç«‹è¿‡ç¨‹ï¼š ä¸€æ—¦TCPè¿æ¥å»ºç«‹ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´å°±å¯ä»¥ç›¸äº’å‘é€æ•°æ®ï¼Œç›´åˆ°å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥ã€‚å½“ç„¶ï¼ŒæœåŠ¡ç«¯ä¸ä»…ä»…åªå¯ä»¥è®©ä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œè¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è®©æœåŠ¡ç«¯ä¸€ç›´è¿è¡Œæ¥ä¸æ–­æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥ï¼š public static void main(String[] args) { try(ServerSocket server = new ServerSocket(8080)){ //å°†æœåŠ¡ç«¯åˆ›å»ºåœ¨ç«¯å£8080ä¸Š System.out.println(\"æ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...\"); while (true){ //æ— é™å¾ªç¯ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ Socket socket = server.accept(); System.out.println(\"å®¢æˆ·ç«¯å·²è¿æ¥ï¼ŒIPåœ°å€ä¸ºï¼š\"+socket.getInetAddress().getHostAddress()); } }catch (IOException e){ e.printStackTrace(); } } ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¤šæ¬¡å»è¿æ¥æ­¤æœåŠ¡ç«¯äº†ã€‚ ","date":"2022-01-26","objectID":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/:2:0","tags":["JavaWebç¬¬ä¸€èŠ‚"],"title":"Javaç½‘ç»œç¼–ç¨‹","uri":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨Socketè¿›è¡Œæ•°æ®ä¼ è¾“ é€šè¿‡Socketå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å–åˆ°å¯¹åº”çš„I/Oæµè¿›è¡Œç½‘ç»œæ•°æ®ä¼ è¾“ï¼š public static void main(String[] args) { try (Socket socket = new Socket(\"localhost\", 8080); Scanner scanner = new Scanner(System.in)){ System.out.println(\"å·²è¿æ¥åˆ°æœåŠ¡ç«¯ï¼\"); OutputStream stream = socket.getOutputStream(); OutputStreamWriter writer = new OutputStreamWriter(stream); //é€šè¿‡è½¬æ¢æµæ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå†™å…¥å†…å®¹ System.out.println(\"è¯·è¾“å…¥è¦å‘é€ç»™æœåŠ¡ç«¯çš„å†…å®¹ï¼š\"); String text = scanner.nextLine(); writer.write(text+'\\n'); //å› ä¸ºå¯¹æ–¹æ˜¯readLine()è¿™é‡ŒåŠ ä¸ªæ¢è¡Œç¬¦ writer.flush(); System.out.println(\"æ•°æ®å·²å‘é€ï¼š\"+text); }catch (IOException e){ System.out.println(\"æœåŠ¡ç«¯è¿æ¥å¤±è´¥ï¼\"); e.printStackTrace(); }finally { System.out.println(\"å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼\"); } } } public static void main(String[] args) { try(ServerSocket server = new ServerSocket(8080)){ //å°†æœåŠ¡ç«¯åˆ›å»ºåœ¨ç«¯å£8080ä¸Š System.out.println(\"æ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...\"); Socket socket = server.accept(); System.out.println(\"å®¢æˆ·ç«¯å·²è¿æ¥ï¼ŒIPåœ°å€ä¸ºï¼š\"+socket.getInetAddress().getHostAddress()); BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream())); //é€šè¿‡ System.out.print(\"æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ•°æ®ï¼š\"); System.out.println(reader.readLine()); socket.close(); //å’ŒæœåŠ¡ç«¯TCPè¿æ¥å®Œæˆä¹‹åï¼Œè®°å¾—å…³é—­socket }catch (IOException e){ e.printStackTrace(); } } åŒç†ï¼Œæ—¢ç„¶æœåŠ¡ç«¯å¯ä»¥è¯»å–å®¢æˆ·ç«¯çš„å†…å®¹ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥åœ¨å‘é€åç­‰å¾…æœåŠ¡ç«¯ç»™äºˆå“åº”ï¼š public static void main(String[] args) { try (Socket socket = new Socket(\"localhost\", 8080); Scanner scanner = new Scanner(System.in)){ System.out.println(\"å·²è¿æ¥åˆ°æœåŠ¡ç«¯ï¼\"); OutputStream stream = socket.getOutputStream(); OutputStreamWriter writer = new OutputStreamWriter(stream); //é€šè¿‡è½¬æ¢æµæ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå†™å…¥å†…å®¹ System.out.println(\"è¯·è¾“å…¥è¦å‘é€ç»™æœåŠ¡ç«¯çš„å†…å®¹ï¼š\"); String text = scanner.nextLine(); writer.write(text+'\\n'); //å› ä¸ºå¯¹æ–¹æ˜¯readLine()è¿™é‡ŒåŠ ä¸ªæ¢è¡Œç¬¦ writer.flush(); System.out.println(\"æ•°æ®å·²å‘é€ï¼š\"+text); BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream())); System.out.println(\"æ”¶åˆ°æœåŠ¡å™¨è¿”å›ï¼š\"+reader.readLine()); }catch (IOException e){ System.out.println(\"æœåŠ¡ç«¯è¿æ¥å¤±è´¥ï¼\"); e.printStackTrace(); }finally { System.out.println(\"å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼\"); } } public static void main(String[] args) { try(ServerSocket server = new ServerSocket(8080)){ //å°†æœåŠ¡ç«¯åˆ›å»ºåœ¨ç«¯å£8080ä¸Š System.out.println(\"æ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...\"); Socket socket = server.accept(); System.out.println(\"å®¢æˆ·ç«¯å·²è¿æ¥ï¼ŒIPåœ°å€ä¸ºï¼š\"+socket.getInetAddress().getHostAddress()); BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream())); //é€šè¿‡ System.out.print(\"æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ•°æ®ï¼š\"); System.out.println(reader.readLine()); OutputStreamWriter writer = new OutputStreamWriter(socket.getOutputStream()); writer.write(\"å·²æ”¶åˆ°ï¼\"); writer.flush(); }catch (IOException e){ e.printStackTrace(); } } æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å…³é—­å•å‘çš„æµï¼š socket.shutdownOutput(); //å…³é—­è¾“å‡ºæ–¹å‘çš„æµ socket.shutdownInput(); //å…³é—­è¾“å…¥æ–¹å‘çš„æµ å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›æœåŠ¡ç«¯ç­‰å¾…å¤ªé•¿çš„æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨setSoTimeout()æ–¹æ³•æ¥è®¾å®šIOè¶…æ—¶æ—¶é—´ï¼š socket.setSoTimeout(3000); å½“è¶…è¿‡è®¾å®šæ—¶é—´éƒ½ä¾ç„¶æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯æˆ–æ˜¯æœåŠ¡ç«¯çš„æ•°æ®æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼š java.net.SocketTimeoutException: Read timed out at java.net.SocketInputStream.socketRead0(Native Method) at java.net.SocketInputStream.socketRead(SocketInputStream.java:116) at java.net.SocketInputStream.read(SocketInputStream.java:171) at java.net.SocketInputStream.read(SocketInputStream.java:141) at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284) at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326) at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178) at java.io.InputStreamReader.read(InputStreamReader.java:184) at java.io.BufferedReader.fill(BufferedReader.java:161) at java.io.BufferedReader.readLine(BufferedReader.java:324) at java.io.BufferedReader.readLine(BufferedReader.java:389) at com.test.Main.main(Main.java:41) æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„éƒ½æ˜¯é€šè¿‡æ„é€ æ–¹æ³•ç›´æ¥è¿æ¥æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥ç­‰åˆ°æˆ‘ä»¬æƒ³è¦çš„æ—¶å€™å†å»è¿æ¥å‘¢ï¼Ÿ try (Socket socket = new Socket(); //è°ƒç”¨æ— å‚æ„é€ ä¸ä¼šè‡ªåŠ¨è¿æ¥ Scanner scanner = new Scanner(System.in)){ socket.connect(new InetSocketAddress(\"localhost\", 8080), 1000); //æ‰‹åŠ¨è°ƒç”¨connectæ–¹æ³•è¿›è¡Œè¿æ¥ å¦‚æœè¿æ¥çš„åŒæ–¹å‘ç”Ÿæ„å¤–è€Œé€šçŸ¥ä¸åˆ°å¯¹æ–¹ï¼Œå¯¼è‡´ä¸€æ–¹è¿˜æŒæœ‰è¿æ¥ï¼Œè¿™æ ·å°±ä¼šå ç”¨èµ„æºï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨setKeepAlive()æ–¹æ³•æ¥é˜²æ­¢æ­¤ç±»æƒ…å†µå‘ç”Ÿï¼š socket.setKeepAlive(true); å½“å®¢æˆ·ç«¯è¿æ¥åï¼Œå¦‚æœè®¾ç½®äº†keepliveä¸º trueï¼Œå½“å¯¹æ–¹æ²¡æœ‰å‘é€ä»»ä½•æ•°æ®è¿‡æ¥ï¼Œè¶…è¿‡ä¸€ä¸ªæ—¶é—´(çœ‹ç³»ç»Ÿå†…æ ¸å‚æ•°é…ç½®)ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿™è¾¹ä¼šå‘é€ä¸€ä¸ªackæ¢æµ‹åŒ…å‘åˆ°å¯¹æ–¹ï¼Œæ¢æµ‹åŒæ–¹çš„TCP/IPè¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚ TCPåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå®é™…ä¸Šä¼šæœ‰ä¸€ä¸ªç¼“å†²åŒºç”¨äºæ•°æ®çš„å‘é€å’Œæ¥æ”¶ï¼š æ­¤ç¼“å†²åŒºå¤§å°ä¸ºï¼š8192ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è°ƒæ•´å…¶å¤§å°æ¥ä¼˜åŒ–ä¼ è¾“æ•ˆç‡ï¼š socket.setReceiveBufferSize(25565); /","date":"2022-01-26","objectID":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/:3:0","tags":["JavaWebç¬¬ä¸€èŠ‚"],"title":"Javaç½‘ç»œç¼–ç¨‹","uri":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨Socketä¼ è¾“æ–‡ä»¶ æ—¢ç„¶Socketä¸ºæˆ‘ä»¬æä¾›äº†IOæµä¾¿äºæ•°æ®ä¼ è¾“ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è½»æ¾åœ°å®ç°æ–‡ä»¶ä¼ è¾“äº†ã€‚ ","date":"2022-01-26","objectID":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/:4:0","tags":["JavaWebç¬¬ä¸€èŠ‚"],"title":"Javaç½‘ç»œç¼–ç¨‹","uri":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"categories":["JavaWebç¬”è®°"],"content":"ä½¿ç”¨æµè§ˆå™¨è®¿é—®SocketæœåŠ¡å™¨ åœ¨äº†è§£äº†å¦‚ä½•ä½¿ç”¨Socketä¼ è¾“æ–‡ä»¶åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œæµè§ˆå™¨æ˜¯å¦‚ä½•å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„ï¼š public static void main(String[] args) { try(ServerSocket server = new ServerSocket(8080)){ //å°†æœåŠ¡ç«¯åˆ›å»ºåœ¨ç«¯å£8080ä¸Š System.out.println(\"æ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...\"); Socket socket = server.accept(); System.out.println(\"å®¢æˆ·ç«¯å·²è¿æ¥ï¼ŒIPåœ°å€ä¸ºï¼š\"+socket.getInetAddress().getHostAddress()); InputStream in = socket.getInputStream(); //é€šè¿‡ System.out.println(\"æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ•°æ®ï¼š\"); while (true){ int i = in.read(); if(i == -1) break; System.out.print((char) i); } }catch (Exception e){ e.printStackTrace(); } } æˆ‘ä»¬ç°åœ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥http://localhost:8080æˆ–æ˜¯http://127.0.0.1:8080/ï¼Œæ¥è¿æ¥æˆ‘ä»¬æœ¬åœ°å¼€æ”¾çš„æœåŠ¡å™¨ã€‚ æˆ‘ä»¬å‘ç°æµè§ˆå™¨æ˜¯æ— æ³•æ‰“å¼€è¿™ä¸ªé“¾æ¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æœåŠ¡ç«¯å´æ”¶åˆ°äº†ä¸å°‘çš„ä¿¡æ¯ï¼š GET / HTTP/1.1\rHost: 127.0.0.1:8080\rConnection: keep-alive\rCache-Control: max-age=0\rsec-ch-ua: \"Chromium\";v=\"94\", \"Google Chrome\";v=\"94\", \";Not A Brand\";v=\"99\"\rsec-ch-ua-mobile: ?0\rsec-ch-ua-platform: \"macOS\"\rUpgrade-Insecure-Requests: 1\rUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36\rAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\rSec-Fetch-Site: none\rSec-Fetch-Mode: navigate\rSec-Fetch-User: ?1\rSec-Fetch-Dest: document\rAccept-Encoding: gzip, deflate, br\rAccept-Language: zh-CN,zh;q=0.9,und;q=0.8,en;q=0.7\rå®é™…ä¸Šè¿™äº›å†…å®¹éƒ½æ˜¯Httpåè®®è§„å®šçš„è¯·æ±‚å¤´å†…å®¹ã€‚HTTPæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå…¨ç§°ä¸ºè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œå®ƒæœ¬è´¨ä¹Ÿæ˜¯åŸºäºTCPåè®®è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå› æ­¤æˆ‘ä»¬çš„æœåŠ¡ç«¯èƒ½å¤Ÿè¯»å–HTTPè¯·æ±‚ã€‚ä½†æ˜¯Httpåè®®å¹¶ä¸ä¼šä¿æŒé•¿è¿æ¥ï¼Œåœ¨å¾—åˆ°æˆ‘ä»¬å“åº”çš„æ•°æ®åä¼šç«‹å³å…³é—­TCPè¿æ¥ã€‚ æ—¢ç„¶ä½¿ç”¨çš„æ˜¯Httpè¿æ¥ï¼Œå¦‚æœæˆ‘ä»¬çš„æœåŠ¡å™¨è¦æ”¯æŒå“åº”HTTPè¯·æ±‚ï¼Œé‚£ä¹ˆå°±éœ€è¦æŒ‰ç…§HTTPåè®®çš„è§„åˆ™ï¼Œè¿”å›ä¸€ä¸ªè§„èŒƒçš„å“åº”æ–‡æœ¬ï¼Œé¦–å…ˆæ˜¯å“åº”å¤´ï¼Œå®ƒè‡³å°‘è¦åŒ…å«ä¸€ä¸ªå“åº”ç ï¼š HTTP/1.1 200 Accpeted\rç„¶åå°±æ˜¯å“åº”å†…å®¹ï¼ˆæ³¨æ„ä¸€å®šè¦æ¢è¡Œå†å†™ï¼‰ï¼Œæˆ‘ä»¬å°è¯•æ¥ç¼–å†™ä¸€ä¸‹æ”¯æŒHTTPåè®®çš„å“åº”å†…å®¹ï¼š public static void main(String[] args) { try(ServerSocket server = new ServerSocket(8080)){ //å°†æœåŠ¡ç«¯åˆ›å»ºåœ¨ç«¯å£8080ä¸Š System.out.println(\"æ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...\"); Socket socket = server.accept(); System.out.println(\"å®¢æˆ·ç«¯å·²è¿æ¥ï¼ŒIPåœ°å€ä¸ºï¼š\"+socket.getInetAddress().getHostAddress()); BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream())); //é€šè¿‡ System.out.println(\"æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ•°æ®ï¼š\"); while (reader.ready()) System.out.println(reader.readLine()); //readyæ˜¯åˆ¤æ–­å½“å‰æµä¸­æ˜¯å¦è¿˜æœ‰å¯è¯»å†…å®¹ OutputStreamWriter writer = new OutputStreamWriter(socket.getOutputStream()); writer.write(\"HTTP/1.1 200 Accepted\\r\\n\"); //200æ˜¯å“åº”ç ï¼ŒHttpåè®®è§„å®š200ä¸ºæ¥å—è¯·æ±‚ï¼Œ400ä¸ºé”™è¯¯çš„è¯·æ±‚ï¼Œ404ä¸ºæ‰¾ä¸åˆ°æ­¤èµ„æºï¼ˆä¸æ­¢è¿™äº›ï¼Œè¿˜æœ‰å¾ˆå¤šï¼‰ writer.write(\"\\r\\n\"); //åœ¨è¯·æ±‚å¤´å†™å®Œä¹‹åè¿˜è¦è¿›è¡Œä¸€æ¬¡æ¢è¡Œï¼Œç„¶åå†™å…¥æˆ‘ä»¬çš„å“åº”å®ä½“ï¼ˆä¼šåœ¨æµè§ˆå™¨ä¸Šå±•ç¤ºçš„å†…å®¹ï¼‰ writer.write(\"lbwnb!\"); writer.flush(); }catch (Exception e){ e.printStackTrace(); } } æˆ‘ä»¬å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…æ¨¡å¼ï¼ˆè¿™é‡Œæ¨èä½¿ç”¨Chrome/Edgeæµè§ˆå™¨ï¼ŒæŒ‰ä¸‹F12å³å¯æ‰“å¼€ï¼‰ï¼Œæˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹æµè§ˆå™¨çš„å®é™…è¯·æ±‚è¿‡ç¨‹ã€‚ ","date":"2022-01-26","objectID":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/:5:0","tags":["JavaWebç¬¬ä¸€èŠ‚"],"title":"Javaç½‘ç»œç¼–ç¨‹","uri":"/posts/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":" åŸºäº TCP çš„ç½‘ç»œç¼–ç¨‹å¼€å‘åˆ†ä¸ºæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä¸¤éƒ¨åˆ†ï¼Œå¸¸è§çš„æ ¸å¿ƒæ­¥éª¤å’Œæµç¨‹å¦‚ä¸‹ï¼š æ•´ä¸ªå‡½æ•°è°ƒç”¨(image)\"\ræ•´ä¸ªå‡½æ•°è°ƒç”¨(image)\r ","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/:0:0","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"accept()å‡½æ•° å¯¹äºå®¢æˆ·ç«¯çš„ connect() å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„åŠŸèƒ½ä¸ºå®¢æˆ·ç«¯ä¸»åŠ¨è¿æ¥æœåŠ¡å™¨ï¼Œå»ºç«‹è¿æ¥æ˜¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œè¿™ä¸ªè¿æ¥çš„è¿‡ç¨‹æ˜¯ç”±å†…æ ¸å®Œæˆï¼Œä¸æ˜¯è¿™ä¸ªå‡½æ•°å®Œæˆçš„ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä»…ä»…æ˜¯é€šçŸ¥ Linux å†…æ ¸ï¼Œè®© Linux å†…æ ¸è‡ªåŠ¨å®Œæˆ TCP ä¸‰æ¬¡æ¡æ‰‹è¿æ¥ï¼Œæœ€åæŠŠè¿æ¥çš„ç»“æœè¿”å›ç»™è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼ˆæˆåŠŸè¿æ¥ä¸º0ï¼Œ å¤±è´¥ä¸º-1ï¼‰ã€‚ é€šå¸¸çš„æƒ…å†µï¼Œå®¢æˆ·ç«¯çš„ connect() å‡½æ•°é»˜è®¤ä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸæˆ–è¶…æ—¶å¤±è´¥æ‰è¿”å›ï¼ˆæ­£å¸¸çš„æƒ…å†µï¼Œè¿™ä¸ªè¿‡ç¨‹å¾ˆå¿«å®Œæˆï¼‰ã€‚ ","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/:1:0","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"listen()å‡½æ•° å¯¹äºæœåŠ¡å™¨ï¼Œå®ƒæ˜¯è¢«åŠ¨è¿æ¥çš„ã€‚ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œé€šå¸¸çš„æƒ…å†µä¸‹ï¼Œç§»åŠ¨çš„å®¢æœï¼ˆç›¸å½“äºæœåŠ¡å™¨ï¼‰æ˜¯ç­‰å¾…ç€å®¢æˆ·ï¼ˆç›¸å½“äºå®¢æˆ·ç«¯ï¼‰ç”µè¯çš„åˆ°æ¥ã€‚è€Œè¿™ä¸ªè¿‡ç¨‹ï¼Œéœ€è¦è°ƒç”¨listen()å‡½æ•°ã€‚ #include\u003csys/socket.h\u003eint listen(int sockfd, int backlog); listen() å‡½æ•°çš„ä¸»è¦ä½œç”¨å°±æ˜¯å°†å¥—æ¥å­—( sockfd )å˜æˆè¢«åŠ¨çš„è¿æ¥ç›‘å¬å¥—æ¥å­—ï¼ˆè¢«åŠ¨ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ï¼‰ï¼Œè‡³äºå‚æ•° backlog çš„ä½œç”¨æ˜¯è®¾ç½®å†…æ ¸ä¸­è¿æ¥é˜Ÿåˆ—çš„é•¿åº¦ï¼ˆè¿™ä¸ªé•¿åº¦æœ‰ä»€ä¹ˆç”¨ï¼Œåé¢åšè¯¦ç»†çš„è§£é‡Šï¼‰ï¼ŒTCP ä¸‰æ¬¡æ¡æ‰‹ä¹Ÿä¸æ˜¯ç”±è¿™ä¸ªå‡½æ•°å®Œæˆï¼Œlisten()çš„ä½œç”¨ä»…ä»…å‘Šè¯‰å†…æ ¸ä¸€äº›ä¿¡æ¯ã€‚ è¿™æ ·çš„è¯ï¼Œå½“æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯ä¸»åŠ¨è¿æ¥ connect()ï¼ŒLinux å†…æ ¸å°±è‡ªåŠ¨å®ŒæˆTCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå°†å»ºç«‹å¥½çš„é“¾æ¥è‡ªåŠ¨å­˜å‚¨åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¦‚æ­¤é‡å¤ã€‚ æ‰€ä»¥ï¼Œåªè¦ TCP æœåŠ¡å™¨è°ƒç”¨äº† listen()ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥é€šè¿‡ connect() å’ŒæœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œè€Œè¿™ä¸ªè¿æ¥çš„è¿‡ç¨‹æ˜¯ç”±å†…æ ¸å®Œæˆã€‚ ä¸‰æ¬¡æ¡æ‰‹\"\rä¸‰æ¬¡æ¡æ‰‹\r ä¸‹é¢ä¸ºæµ‹è¯•çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä»£ç ï¼Œè¿è¡Œç¨‹åºæ—¶ï¼Œè¦å…ˆè¿è¡ŒæœåŠ¡å™¨ï¼Œå†è¿è¡Œå®¢æˆ·ç«¯ï¼š æœåŠ¡å™¨ï¼š #include \u003cstdio.h\u003e#include \u003cstdlib.h\u003e#include \u003cstring.h\u003e #include \u003cunistd.h\u003e#include \u003csys/socket.h\u003e#include \u003cnetinet/in.h\u003e#include \u003carpa/inet.h\u003e int main(int argc, char *argv[]) { unsigned short port = 8000; int sockfd; sockfd = socket(AF_INET, SOCK_STREAM, 0);// åˆ›å»ºé€šä¿¡ç«¯ç‚¹ï¼šå¥—æ¥å­— if(sockfd \u003c 0) { perror(\"socket\"); exit(-1); } struct sockaddr_in my_addr; bzero(\u0026my_addr, sizeof(my_addr)); my_addr.sin_family = AF_INET; my_addr.sin_port = htons(port); my_addr.sin_addr.s_addr = htonl(INADDR_ANY); int err_log = bind(sockfd, (struct sockaddr*)\u0026my_addr, sizeof(my_addr)); if( err_log != 0) { perror(\"binding\"); close(sockfd); exit(-1); } err_log = listen(sockfd, 10); if(err_log != 0) { perror(\"listen\"); close(sockfd); exit(-1); } printf(\"listen client @port=%d...\\n\",port); sleep(10); // å»¶æ—¶10s system(\"netstat -an | grep 8000\"); // æŸ¥çœ‹è¿æ¥çŠ¶æ€ return 0; } å®¢æˆ·ç«¯ #include \u003cstdio.h\u003e#include \u003cunistd.h\u003e#include \u003cstring.h\u003e#include \u003cstdlib.h\u003e#include \u003carpa/inet.h\u003e#include \u003csys/socket.h\u003e#include \u003cnetinet/in.h\u003eint main(int argc, char *argv[]) { unsigned short port = 8000; // æœåŠ¡å™¨çš„ç«¯å£å· char *server_ip = \"10.221.20.12\"; // æœåŠ¡å™¨ipåœ°å€ int sockfd; sockfd = socket(AF_INET, SOCK_STREAM, 0);// åˆ›å»ºé€šä¿¡ç«¯ç‚¹ï¼šå¥—æ¥å­— if(sockfd \u003c 0) { perror(\"socket\"); exit(-1); } struct sockaddr_in server_addr; bzero(\u0026server_addr,sizeof(server_addr)); // åˆå§‹åŒ–æœåŠ¡å™¨åœ°å€ server_addr.sin_family = AF_INET; server_addr.sin_port = htons(port); inet_pton(AF_INET, server_ip, \u0026server_addr.sin_addr); int err_log = connect(sockfd, (struct sockaddr*)\u0026server_addr, sizeof(server_addr)); // ä¸»åŠ¨è¿æ¥æœåŠ¡å™¨ if(err_log != 0) { perror(\"connect\"); close(sockfd); exit(-1); } system(\"netstat -an | grep 8000\"); // æŸ¥çœ‹è¿æ¥çŠ¶æ€ while(1); return 0; } è¿è¡Œç»“æœï¼š ","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/:2:0","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"ä¸‰æ¬¡æ¡æ‰‹çš„è¿æ¥é˜Ÿåˆ— è¿™é‡Œè¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹ listen() å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ backlogï¼‰çš„ä½œç”¨ï¼šå‘Šè¯‰å†…æ ¸è¿æ¥é˜Ÿåˆ—çš„é•¿åº¦ã€‚ ä¸ºäº†æ›´å¥½çš„ç†è§£ backlog å‚æ•°ï¼Œæˆ‘ä»¬å¿…é¡»è®¤è¯†åˆ°å†…æ ¸ä¸ºä»»ä½•ä¸€ä¸ªç»™å®šçš„ç›‘å¬å¥—æ¥å£ç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—ï¼š æœªå®Œæˆè¿æ¥é˜Ÿåˆ—ï¼ˆincomplete connection queueï¼‰ï¼Œä»¥æŸä¸ªå®¢æˆ·å‘å‡ºå¹¶åˆ°è¾¾æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨æ­£åœ¨ç­‰å¾…å®Œæˆç›¸åº”çš„ TCP ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ã€‚è¿™äº›ç«¯å£éƒ½å¤„äºå¤„äº SYN_RCVD çŠ¶æ€ã€‚ å·²å®Œæˆè¿æ¥é˜Ÿåˆ—ï¼ˆcompleted connection queueï¼‰ï¼Œè¿™äº›ç«¯å£å¤„äº ESTABLISHED çŠ¶æ€ã€‚ å½“æ¥è‡ªå®¢æˆ·çš„ SYN åˆ°è¾¾æ—¶ï¼ŒTCP åœ¨æœªå®Œæˆè¿æ¥é˜Ÿåˆ—ä¸­åˆ›å»ºä¸€ä¸ªæ–°é¡¹ï¼Œç„¶åå“åº”ä»¥ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬äºŒä¸ªåˆ†èŠ‚ï¼šæœåŠ¡å™¨çš„ SYN å“åº”ï¼Œå…¶ä¸­ç¨å¸¦å¯¹å®¢æˆ· SYN çš„ ACKï¼ˆå³SYN+ACKï¼‰ï¼Œè¿™ä¸€é¡¹ä¸€ç›´ä¿ç•™åœ¨æœªå®Œæˆè¿æ¥é˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸‰ä¸ªåˆ†èŠ‚ï¼ˆå®¢æˆ·å¯¹æœåŠ¡å™¨ SYN çš„ ACK ï¼‰åˆ°è¾¾æˆ–è€…è¯¥é¡¹è¶…æ—¶ä¸ºæ­¢ï¼ˆæºè‡ªBerkeleyçš„å®ç°ä¸ºè¿™äº›æœªå®Œæˆè¿æ¥çš„é¡¹è®¾ç½®çš„è¶…æ—¶å€¼ä¸º75ç§’ï¼‰ã€‚ å¦‚æœä¸‰æ¬¡æ¡æ‰‹æ­£å¸¸å®Œæˆï¼Œè¯¥é¡¹å°±ä»æœªå®Œæˆè¿æ¥é˜Ÿåˆ—ç§»åˆ°å·²å®Œæˆè¿æ¥é˜Ÿåˆ—çš„é˜Ÿå°¾ã€‚ backlog å‚æ•°å†å²ä¸Šè¢«å®šä¹‰ä¸ºä¸Šé¢ä¸¤ä¸ªé˜Ÿåˆ—çš„å¤§å°ä¹‹å’Œï¼Œå¤§å¤šæ•°å®ç°é»˜è®¤å€¼ä¸º 5ï¼Œå½“æœåŠ¡å™¨æŠŠè¿™ä¸ªå®Œæˆè¿æ¥é˜Ÿåˆ—çš„æŸä¸ªè¿æ¥å–èµ°åï¼Œè¿™ä¸ªé˜Ÿåˆ—çš„ä½ç½®åˆç©ºå‡ºä¸€ä¸ªï¼Œè¿™æ ·æ¥å›å®ç°åŠ¨æ€å¹³è¡¡ï¼Œä½†åœ¨é«˜å¹¶å‘ web æœåŠ¡å™¨ä¸­æ­¤å€¼æ˜¾ç„¶ä¸å¤Ÿã€‚ ","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/:3:0","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"accept()å‡½æ•° accept()å‡½æ•°åŠŸèƒ½æ˜¯ï¼Œä»å¤„äº established çŠ¶æ€çš„è¿æ¥é˜Ÿåˆ—å¤´éƒ¨å–å‡ºä¸€ä¸ªå·²ç»å®Œæˆçš„è¿æ¥ï¼Œå¦‚æœè¿™ä¸ªé˜Ÿåˆ—æ²¡æœ‰å·²ç»å®Œæˆçš„è¿æ¥ï¼Œaccept()å‡½æ•°å°±ä¼šé˜»å¡ï¼Œç›´åˆ°å–å‡ºé˜Ÿåˆ—ä¸­å·²å®Œæˆçš„ç”¨æˆ·è¿æ¥ä¸ºæ­¢ã€‚ å¦‚æœï¼ŒæœåŠ¡å™¨ä¸èƒ½åŠæ—¶è°ƒç”¨ accept() å–èµ°é˜Ÿåˆ—ä¸­å·²å®Œæˆçš„è¿æ¥ï¼Œé˜Ÿåˆ—æ»¡æ‰åä¼šæ€æ ·å‘¢ï¼ŸUNPï¼ˆã€Šunixç½‘ç»œç¼–ç¨‹ã€‹ï¼‰å‘Šè¯‰æˆ‘ä»¬ï¼ŒæœåŠ¡å™¨çš„è¿æ¥é˜Ÿåˆ—æ»¡æ‰åï¼ŒæœåŠ¡å™¨ä¸ä¼šå¯¹å†å¯¹å»ºç«‹æ–°è¿æ¥çš„synè¿›è¡Œåº”ç­”ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯çš„ connect å°±ä¼šè¿”å› ETIMEDOUTã€‚ä½†å®é™…ä¸ŠLinuxçš„å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼ ","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/:4:0","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"å®éªŒ ä¸‹é¢ä¸ºæµ‹è¯•ä»£ç ï¼ŒæœåŠ¡å™¨ listen() å‡½æ•°åªæŒ‡å®šé˜Ÿåˆ—é•¿åº¦ä¸º 2ï¼Œå®¢æˆ·ç«¯æœ‰ 6 ä¸ªä¸åŒçš„å¥—æ¥å­—ä¸»åŠ¨è¿æ¥æœåŠ¡å™¨ï¼ŒåŒæ—¶ï¼Œä¿è¯å®¢æˆ·ç«¯çš„ 6 ä¸ª connect()å‡½æ•°éƒ½å…ˆè°ƒç”¨å®Œæ¯•ï¼ŒæœåŠ¡å™¨çš„ accpet() æ‰å¼€å§‹è°ƒç”¨ã€‚ æœåŠ¡ç«¯ï¼š #include \u003cstdio.h\u003e#include \u003cstdlib.h\u003e#include \u003cstring.h\u003e #include \u003cunistd.h\u003e#include \u003csys/socket.h\u003e#include \u003cnetinet/in.h\u003e#include \u003carpa/inet.h\u003e int main(int argc, char *argv[]) { unsigned short port = 8000; int sockfd = socket(AF_INET, SOCK_STREAM, 0); if(sockfd \u003c 0) { perror(\"socket\"); exit(-1); } struct sockaddr_in my_addr; bzero(\u0026my_addr, sizeof(my_addr)); my_addr.sin_family = AF_INET; my_addr.sin_port = htons(port); my_addr.sin_addr.s_addr = htonl(INADDR_ANY); int err_log = bind(sockfd, (struct sockaddr*)\u0026my_addr, sizeof(my_addr)); if( err_log != 0) { perror(\"binding\"); close(sockfd); exit(-1); } err_log = listen(sockfd, 2); // ç­‰å¾…é˜Ÿåˆ—ä¸º2 if(err_log != 0) { perror(\"listen\"); close(sockfd); exit(-1); } printf(\"after listen\\n\"); sleep(20); //å»¶æ—¶ 20ç§’ printf(\"listen client @port=%d...\\n\",port); int i = 0; while(1) { struct sockaddr_in client_addr; char cli_ip[INET_ADDRSTRLEN] = \"\"; socklen_t cliaddr_len = sizeof(client_addr); int connfd; connfd = accept(sockfd, (struct sockaddr*)\u0026client_addr, \u0026cliaddr_len); if(connfd \u003c 0) { perror(\"accept\"); continue; } inet_ntop(AF_INET, \u0026client_addr.sin_addr, cli_ip, INET_ADDRSTRLEN); printf(\"-----------%d------\\n\", ++i); printf(\"client ip=%s,port=%d\\n\", cli_ip,ntohs(client_addr.sin_port)); char recv_buf[512] = {0}; while( recv(connfd, recv_buf, sizeof(recv_buf), 0) \u003e 0 ) { printf(\"recv data ==%s\\n\",recv_buf); break; } close(connfd); //å…³é—­å·²è¿æ¥å¥—æ¥å­— //printf(\"client closed!\\n\"); } close(sockfd); //å…³é—­ç›‘å¬å¥—æ¥å­— return 0; } å®¢æˆ·ç«¯ï¼š #include \u003cstdio.h\u003e#include \u003cunistd.h\u003e#include \u003cstring.h\u003e#include \u003cstdlib.h\u003e#include \u003carpa/inet.h\u003e#include \u003csys/socket.h\u003e#include \u003cnetinet/in.h\u003e void test_connect() { unsigned short port = 8000; // æœåŠ¡å™¨çš„ç«¯å£å· char *server_ip = \"10.221.20.12\"; // æœåŠ¡å™¨ipåœ°å€ int sockfd; sockfd = socket(AF_INET, SOCK_STREAM, 0);// åˆ›å»ºé€šä¿¡ç«¯ç‚¹ï¼šå¥—æ¥å­— if(sockfd \u003c 0) { perror(\"socket\"); exit(-1); } struct sockaddr_in server_addr; bzero(\u0026server_addr,sizeof(server_addr)); // åˆå§‹åŒ–æœåŠ¡å™¨åœ°å€ server_addr.sin_family = AF_INET; server_addr.sin_port = htons(port); inet_pton(AF_INET, server_ip, \u0026server_addr.sin_addr); int err_log = connect(sockfd, (struct sockaddr*)\u0026server_addr, sizeof(server_addr)); // ä¸»åŠ¨è¿æ¥æœåŠ¡å™¨ if(err_log != 0) { perror(\"connect\"); close(sockfd); exit(-1); } printf(\"err_log ========= %d\\n\", err_log); char send_buf[100]=\"this is for test\"; send(sockfd, send_buf, strlen(send_buf), 0); // å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ system(\"netstat -an | grep 8000\"); // æŸ¥çœ‹è¿æ¥çŠ¶æ€ //close(sockfd); } int main(int argc, char *argv[]) { pid_t pid; pid = fork(); if(0 == pid){ test_connect(); // 1 pid_t pid = fork(); if(0 == pid){ test_connect(); // 2 }else if(pid \u003e 0){ test_connect(); // 3 } }else if(pid \u003e 0){ test_connect(); // 4 pid_t pid = fork(); if(0 == pid){ test_connect(); // 5 }else if(pid \u003e 0){ test_connect(); // 6 } } while(1); return 0; } æœåŠ¡å™¨è°ƒç”¨ accept()å‡½æ•°å‰å»¶æ—¶äº† 20 ç§’ã€‚ä¿è¯äº†å®¢æˆ·ç«¯çš„ connect() å…¨éƒ¨è°ƒç”¨å®Œæ¯•åå†è°ƒç”¨ accept(),è¿è¡Œç»“æœå¦‚ä¸‹ï¼š å®¢æˆ·ç«¯è¿è¡Œæ•ˆæœå›¾ï¼š æŒ‰ç…§ UNP çš„è¯´æ³•ï¼Œè¿æ¥é˜Ÿåˆ—æ»¡åï¼ˆè¿™é‡Œè®¾ç½®é•¿åº¦ä¸º 2ï¼Œå‘äº† 6 ä¸ªè¿æ¥ï¼‰ï¼Œä»¥åå†è°ƒç”¨ connect() åº”è¯¥ç»Ÿç»Ÿè¶…æ—¶å¤±è´¥ï¼Œä½†å®é™…ä¸Šæµ‹è¯•ç»“æœæ˜¯ï¼šæœ‰çš„ connect()ç«‹åˆ»æˆåŠŸè¿”å›äº†ï¼Œæœ‰çš„ç»è¿‡æ˜æ˜¾å»¶è¿ŸåæˆåŠŸè¿”å›äº†ã€‚å¯¹äºæœåŠ¡å™¨ accpet() å‡½æ•°ä¹Ÿæ˜¯è¿™æ ·çš„ç»“æœï¼šæœ‰çš„ç«‹é©¬æˆåŠŸè¿”å›ï¼Œæœ‰çš„å»¶è¿ŸåæˆåŠŸè¿”å›ã€‚ å¯¹äºä¸Šé¢æœåŠ¡å™¨çš„ä»£ç ï¼Œæˆ‘ä»¬æŠŠlisen()çš„ç¬¬äºŒä¸ªå‚æ•°æ”¹ä¸º 0 ï¼Œé‡æ–°è¿è¡Œç¨‹åºï¼Œå‘ç°ï¼š å®¢æˆ·ç«¯ connect() å…¨éƒ¨è¿”å›è¿æ¥æˆåŠŸï¼ˆæœ‰äº›ä¼šå»¶æ—¶ï¼‰ï¼š æœåŠ¡å™¨ accpet() å‡½æ•°å´ä¸èƒ½æŠŠè¿æ¥é˜Ÿåˆ—çš„æ‰€æœ‰è¿æ¥éƒ½å–å‡ºæ¥ï¼š å¯¹äºä¸Šé¢æœåŠ¡å™¨çš„ä»£ç ï¼Œæˆ‘ä»¬æŠŠlisen()çš„ç¬¬äºŒä¸ªå‚æ•°æ”¹ä¸ºå¤§äº 6 çš„æ•°(å¦‚ 10)ï¼Œé‡æ–°è¿è¡Œç¨‹åºï¼Œå‘ç°ï¼Œå®¢æˆ·ç«¯ connect() ç«‹é©¬è¿”å›è¿æ¥æˆåŠŸï¼Œ æœåŠ¡å™¨ accpet() å‡½æ•°ä¹Ÿç«‹é©¬è¿”å›æˆåŠŸã€‚ ","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/:4:1","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["Linuxç½‘ç»œç¼–ç¨‹"],"content":"æ€»ç»“ TCP çš„è¿æ¥é˜Ÿåˆ—æ»¡åï¼ŒLinux ä¸ä¼šå¦‚ä¹¦ä¸­æ‰€è¯´çš„æ‹’ç»è¿æ¥ï¼Œåªæ˜¯æœ‰äº›ä¼šå»¶æ—¶è¿æ¥ï¼Œä½†åƒä¸‡æ³¨æ„æ­¤æ—¶accept()å°±ä¸ä¸€å®šèƒ½æŠŠå·²ç»å»ºç«‹å¥½çš„è¿æ¥å…¨éƒ¨å–å‡ºæ¥ï¼ˆå¦‚ï¼šå½“é˜Ÿåˆ—çš„é•¿åº¦æŒ‡å®šä¸º 0 ï¼‰ï¼Œå†™ç¨‹åºæ—¶æœåŠ¡å™¨çš„ listen() çš„ç¬¬äºŒä¸ªå‚æ•°æœ€å¥½è¿˜æ˜¯æ ¹æ®éœ€è¦å¡«å†™ï¼Œå†™å¤ªå¤§ä¸å¥½ï¼ˆå…·ä½“å¯ä»¥çœ‹cat /proc/sys/net/core/somaxconnï¼Œé»˜è®¤æœ€å¤§å€¼é™åˆ¶æ˜¯ 128ï¼‰ï¼Œæµªè´¹èµ„æºï¼Œå†™å¤ªå°ä¹Ÿä¸å¥½ï¼Œå»¶æ—¶å»ºç«‹è¿æ¥ã€‚ ","date":"2022-01-26","objectID":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/:4:2","tags":["TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»"],"title":"TCPç½‘ç»œç¼–ç¨‹ä¸­connectã€listenã€acceptä¸‰è€…ä¹‹é—´çš„å…³ç³»","uri":"/posts/tcp%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%ADconnectlistenaccept%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"C++17 å’Œ python ä¸­å¥½ç”¨çš„æ–‡ä»¶æ“ä½œ | filesystem | os | shutil C++ 17 python åŠŸèƒ½ filesystem::path::is_absolute() os.path.isabs() åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ filesystem::path::parent_path() os.path.dirname() è·¯å¾„åˆ†å‰² filesystem::path::filename() os.path.basename() è·¯å¾„åˆ†å‰² filesystem::operator/() os.path.join() è·¯å¾„æ‹¼æ¥ filesystem::current_path() os.getcwd() è·å–å½“å‰è·¯å¾„ filesystem::directory_iterator os.listdir() è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹ filesystem::recursive_directory_iterator os.walk() é€’å½’è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹ filesystem::exists() os.path.exists() åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ filesystem::is_regular_file() os.path.isfile() åˆ¤æ–­è·¯å¾„æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½• filesystem::is_directory() os.path.isdir() åˆ¤æ–­è·¯å¾„æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½• filesystem::absolute() os.path.abspath() è¿”å›ç»å¯¹è·¯å¾„ filesystem::copy_file() shutil.copyfile() æ–‡ä»¶æ‹·è´ filesystem::remove() os.remove() æ–‡ä»¶åˆ é™¤ filesystem::copy() shutil.copytree è·¯å¾„æ‹·è´ filesystem::remove_all shutil.rmtree() è·¯å¾„åˆ é™¤ ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:0:0","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"filesystem::path vs. os.path filesystem::pathæ˜¯ä¸€ä¸ªç±»ï¼Œé‡Œé¢å°è£…äº†å¾ˆå¤šæ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡å®ä¾‹åŒ–ä¹‹åç›´æ¥è°ƒç”¨æ–¹æ³•ã€‚ os.pathæ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:1:0","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ ä»€ä¹ˆæ˜¯ç»å¯¹è·¯å¾„ï¼Ÿæˆ‘ä¸ªäººçš„ç†è§£æ˜¯ä»æ ¹ç›®å½•å¼€å§‹çš„å°±æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚/usr/localå’ŒC:\\\\Usersï¼Œå…¶ä½™éƒ½æ˜¯ç›¸å¯¹è·¯å¾„ã€‚å¯ä»¥å‘ç°ï¼Œåœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸­è·¯å¾„çš„åˆ†å‰²ç¬¦æ˜¯ä¸åŒçš„ã€‚åŒæ—¶åœ¨ç›¸å¯¹è·¯å¾„ä¸­./å’Œ../æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œ./è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œ../è¡¨ç¤ºä¸Šä¸€å±‚ç›®å½•ï¼Œç›¸åº”åœ°ï¼Œ../../å°±æ˜¯ä¸Šä¸¤å±‚ç›®å½•ã€‚ 1.filesystem::pathä¸­æä¾›äº†åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„/ç›¸å¯¹è·¯å¾„æ–¹æ³•ã€‚ _LIBCPP_INLINE_VISIBILITY bool is_absolute() const { return has_root_directory(); } _LIBCPP_INLINE_VISIBILITY bool is_relative() const { return !is_absolute(); } å¯ä»¥å‘ç°ï¼Œåˆ¤æ–­ç›¸å¯¹è·¯å¾„çš„ç»“æœå°±æ˜¯ç»å¯¹è·¯å¾„å–åã€‚ void eg1_1() { /*åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„*/ // std::filesystem::path abs_path = \"C:\\\\Users\"; std::filesystem::path abs_path = \"/usr/local\"; // æ³¨æ„ï¼Œå®ä¾‹åŒ–pathçš„æ—¶å€™å¯ä»¥ç›´æ¥ç”¨ç­‰å· std::cout \u003c\u003c \"abs_path.is_absolute() : \" \u003c\u003c abs_path.is_absolute() \u003c\u003c std::endl; std::cout \u003c\u003c \"abs_path.is_relative() : \" \u003c\u003c abs_path.is_relative() \u003c\u003c std::endl; std::filesystem::path rel_path = \"../\"; std::cout \u003c\u003c \"rel_path.is_absolute() : \" \u003c\u003c rel_path.is_absolute() \u003c\u003c std::endl; std::cout \u003c\u003c \"rel_path.is_relative() : \" \u003c\u003c rel_path.is_relative() \u003c\u003c std::endl; } abs_path.is_absolute() : 1 abs_path.is_relative() : 0 rel_path.is_absolute() : 0 rel_path.is_relative() : 1 os.pathä¸­æä¾›äº†isabs()å‡½æ•°ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ã€‚ def eg1_1(): \"\"\"åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„\"\"\" # abs_path = \"C:\\\\Users\" abs_path = \"/usr/local\" print(\"os.path.isabs({}) : {}\".format(abs_path, os.path.isabs(abs_path))) rel_path = \"../\" print(\"os.path.isabs({}) : {}\".format(rel_path, os.path.isabs(rel_path))) os.path.isabs(/usr/local) : True os.path.isabs(../) : False ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:1:1","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"è·¯å¾„åˆ†å‰² filesystem::pathä¸­æä¾›äº†è·¯å¾„åˆ†å‰²çš„æ–¹æ³•ã€‚ // decomposition _LIBCPP_INLINE_VISIBILITY path root_name() const { return string_type(__root_name()); } _LIBCPP_INLINE_VISIBILITY path root_directory() const { return string_type(__root_directory()); } _LIBCPP_INLINE_VISIBILITY path root_path() const { return root_name().append(string_type(__root_directory())); } _LIBCPP_INLINE_VISIBILITY path relative_path() const { return string_type(__relative_path()); } _LIBCPP_INLINE_VISIBILITY path parent_path() const { return string_type(__parent_path()); } _LIBCPP_INLINE_VISIBILITY path filename() const { return string_type(__filename()); } _LIBCPP_INLINE_VISIBILITY path stem() const { return string_type(__stem()); } _LIBCPP_INLINE_VISIBILITY path extension() const { return string_type(__extension()); } void eg1_2() { /*è·¯å¾„åˆ†å‰²*/ std::filesystem::path path = \"../test_dir/1.txt\"; std::cout \u003c\u003c \"path.relative_path() : \" \u003c\u003c path.relative_path() \u003c\u003c std::endl; std::cout \u003c\u003c \"path.parent_path() : \" \u003c\u003c path.parent_path() \u003c\u003c std::endl; std::cout \u003c\u003c \"path.filename() : \" \u003c\u003c path.filename() \u003c\u003c std::endl; std::cout \u003c\u003c \"path.stem() : \" \u003c\u003c path.stem() \u003c\u003c std::endl; std::cout \u003c\u003c \"path.extension() : \" \u003c\u003c path.extension() \u003c\u003c std::endl; } path.relative_path() : \"../test_dir/1.txt\" path.parent_path() : \"../test_dir\" path.filename() : \"1.txt\" path.stem() : \"1\" path.extension() : \".txt\" os.pathä¸­æä¾›äº†åˆ†å‰²å‡½æ•°split()ä»¥åŠdirname()ï¼Œbasename()ã€‚ def eg1_2(): \"\"\"è·¯å¾„åˆ†å‰²\"\"\" path = \"../test_dir/1.txt\" print(\"os.path.split(path) : {}\".format(os.path.split(path))) print(\"os.path.dirname(path) : {}\".format(os.path.dirname(path))) print(\"os.path.basename(path) : {}\".format(os.path.basename(path))) os.path.split(path) : ('../test_dir', '1.txt') os.path.dirname(path) : ../test_dir os.path.basename(path) : 1.txt ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:1:2","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"è·¯å¾„æ‹¼æ¥ filesystem::pathä¸­é‡è½½äº†ç¬¦å·/å’Œ/=ã€‚ friend _LIBCPP_INLINE_VISIBILITY path operator/(const path\u0026 __lhs, const path\u0026 __rhs) { path __result(__lhs); __result /= __rhs; return __result; } void eg1_3() { /*è·¯å¾„æ‹¼æ¥*/ std::filesystem::path path = \"../test_dir\"; std::filesystem::path txt1_path = path / \"1.txt\"; std::filesystem::path txt2_path = path / \"1_dir\" / \"2.txt\"; std::cout \u003c\u003c \"txt1_path : \" \u003c\u003c txt1_path \u003c\u003c std::endl; std::cout \u003c\u003c \"txt2_path : \" \u003c\u003c txt2_path \u003c\u003c std::endl; path /= \"1.txt\"; std::cout \u003c\u003c \"path : \" \u003c\u003c path \u003c\u003c std::endl; } txt1_path : \"../test_dir/1.txt\" txt2_path : \"../test_dir/1_dir/2.txt\" path : \"../test_dir/1.txt\" os.pathä¸­æä¾›äº†join()å‡½æ•°ã€‚ def eg1_3(): \"\"\"è·¯å¾„æ‹¼æ¥\"\"\" path = \"../test_dir\" txt1_path = os.path.join(path, \"1.txt\") txt2_path = os.path.join(path, \"1_dir\", \"2.txt\") print(\"txt1_path : {}\".format(txt1_path)) print(\"txt2_path : {}\".format(txt2_path)) txt1_path : ../test_dir/1.txt txt2_path : ../test_dir/1_dir/2.txt æ³¨æ„ï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„åˆ†éš”ç¬¦ä¸åŒï¼Œæ‰€ä»¥åœ¨Windowsä¸­è¿è¡Œç»“æœå¦‚ä¸‹ã€‚ txt1_path : ../test_dir\\1.txt txt2_path : ../test_dir\\1_dir\\2.txt ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:1:3","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"filesystem vs. os ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:2:0","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"è·å–å½“å‰å·¥ä½œç›®å½• filesystemæä¾›äº†è·å–å½“å‰è·¯å¾„çš„å‡½æ•°current_path()ï¼Œæ³¨æ„è¿”å›çš„æ˜¯ç»å¯¹è·¯å¾„ã€‚ void eg2_1() { /*è·å–å½“å‰è·¯å¾„*/ std::filesystem::path current_path = std::filesystem::current_path(); std::cout \u003c\u003c \"current_path : \" \u003c\u003c current_path \u003c\u003c std::endl; } current_path : \"/Users/xxx/Github/intro_to_C-python/xxx/cmake-build-debug\" osæä¾›äº†å‡½æ•°getcwd()ã€‚ def eg2_1(): \"\"\"è·å–å½“å‰è·¯å¾„\"\"\" current_path = os.getcwd() print(\"current_path : {}\".format(current_path)) current_path : /Users/xxx/Github/intro_to_C-python/xxx è¿™é‡Œå…ˆå±•ç¤ºä¸€ä¸‹ç›®å½•æ ‘ï¼Œæ–¹ä¾¿ç†è§£åè¾¹çš„ä¾‹å­ã€‚ â””â”€â”€ test_dir â”œâ”€â”€ 1.txt â””â”€â”€ 1_dir â”œâ”€â”€ 2.txt â””â”€â”€ empty_dir ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:2:1","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹ filesystemçš„ç±»directory_iteratorå¯ä»¥å®ç°è¯¥åŠŸèƒ½ã€‚ void eg2_2() { /*è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹*/ std::filesystem::directory_iterator iter(\"../test_dir\"); for(const auto \u0026i : iter) { std::cout \u003c\u003c i.path() \u003c\u003cstd::endl; } } \"../test_dir/1.txt\" \"../test_dir/1_dir\" osä¸­æä¾›äº†å‡½æ•°listdir()ã€‚ def eg2_2(): \"\"\"è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹\"\"\" for i in os.listdir(\"./test_dir\"): print(i) 1.txt 1_dir ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:2:2","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"é€’å½’è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹ filesystemçš„ç±»recursive_directory_iteratorå¯ä»¥å®ç°è¯¥åŠŸèƒ½ã€‚ void eg2_3() { /*é€’å½’è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹*/ std::filesystem::recursive_directory_iterator iter(\"../test_dir\"); for(const auto \u0026i : iter) { std::cout \u003c\u003c i.path() \u003c\u003cstd::endl; } } \"../test_dir/1.txt\" \"../test_dir/1_dir\" \"../test_dir/1_dir/empty_dir\" \"../test_dir/1_dir/2.txt\" osä¸­æä¾›äº†å‡½æ•°walk()ã€‚ def eg2_3(): \"\"\"é€’å½’è¿”å›æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹\"\"\" for root, dirs, files in os.walk(\"./test_dir\"): print(\"root : {}, dirs : {}, files : {}\".format(root, dirs, files)) root : ./test_dir, dirs : ['1_dir'], files : ['1.txt'] root : ./test_dir/1_dir, dirs : ['empty_dir'], files : ['2.txt'] root : ./test_dir/1_dir/empty_dir, dirs : [], files : [] ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:2:3","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ filesystemæä¾›äº†åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨çš„å‡½æ•°exists()ã€‚ void eg2_4() { /*åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨*/ bool exist = std::filesystem::exists(\"C:\\\\Users\"); std::cout \u003c\u003c \"exist : \" \u003c\u003c exist \u003c\u003c std::endl; } exist : 0 os.pathä¸­æä¾›äº†å‡½æ•°exists()ã€‚ def eg2_4(): \"\"\"åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨\"\"\" path = \"C:\\\\Users\" print(\"os.path.exists({}) : {}\".format(path, os.path.exists(path))) os.path.exists(C:\\Users) : False ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:2:4","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"åˆ¤æ–­è·¯å¾„æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½• filesystemæä¾›äº†åˆ¤æ–­è·¯å¾„æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½•çš„å‡½æ•°ã€‚ï¼ˆæ¯”è¾ƒå¤šï¼‰ inline _LIBCPP_INLINE_VISIBILITY bool is_block_file(file_status __s) noexcept { return __s.type() == file_type::block; } inline _LIBCPP_INLINE_VISIBILITY bool is_block_file(const path\u0026 __p) { return is_block_file(__status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_block_file(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_block_file(__status(__p, \u0026__ec)); } inline _LIBCPP_INLINE_VISIBILITY bool is_character_file(file_status __s) noexcept { return __s.type() == file_type::character; } inline _LIBCPP_INLINE_VISIBILITY bool is_character_file(const path\u0026 __p) { return is_character_file(__status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_character_file(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_character_file(__status(__p, \u0026__ec)); } inline _LIBCPP_INLINE_VISIBILITY bool is_directory(file_status __s) noexcept { return __s.type() == file_type::directory; } inline _LIBCPP_INLINE_VISIBILITY bool is_directory(const path\u0026 __p) { return is_directory(__status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_directory(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_directory(__status(__p, \u0026__ec)); } inline _LIBCPP_INLINE_VISIBILITY bool is_empty(const path\u0026 __p) { return __fs_is_empty(__p); } inline _LIBCPP_INLINE_VISIBILITY bool is_empty(const path\u0026 __p, error_code\u0026 __ec) { return __fs_is_empty(__p, \u0026__ec); } inline _LIBCPP_INLINE_VISIBILITY bool is_fifo(file_status __s) noexcept { return __s.type() == file_type::fifo; } inline _LIBCPP_INLINE_VISIBILITY bool is_fifo(const path\u0026 __p) { return is_fifo(__status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_fifo(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_fifo(__status(__p, \u0026__ec)); } inline _LIBCPP_INLINE_VISIBILITY bool is_regular_file(file_status __s) noexcept { return __s.type() == file_type::regular; } inline _LIBCPP_INLINE_VISIBILITY bool is_regular_file(const path\u0026 __p) { return is_regular_file(__status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_regular_file(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_regular_file(__status(__p, \u0026__ec)); } inline _LIBCPP_INLINE_VISIBILITY bool is_socket(file_status __s) noexcept { return __s.type() == file_type::socket; } inline _LIBCPP_INLINE_VISIBILITY bool is_socket(const path\u0026 __p) { return is_socket(__status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_socket(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_socket(__status(__p, \u0026__ec)); } inline _LIBCPP_INLINE_VISIBILITY bool is_symlink(file_status __s) noexcept { return __s.type() == file_type::symlink; } inline _LIBCPP_INLINE_VISIBILITY bool is_symlink(const path\u0026 __p) { return is_symlink(__symlink_status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_symlink(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_symlink(__symlink_status(__p, \u0026__ec)); } inline _LIBCPP_INLINE_VISIBILITY bool is_other(file_status __s) noexcept { return exists(__s) \u0026\u0026 !is_regular_file(__s) \u0026\u0026 !is_directory(__s) \u0026\u0026 !is_symlink(__s); } inline _LIBCPP_INLINE_VISIBILITY bool is_other(const path\u0026 __p) { return is_other(__status(__p)); } inline _LIBCPP_INLINE_VISIBILITY bool is_other(const path\u0026 __p, error_code\u0026 __ec) noexcept { return is_other(__status(__p, \u0026__ec)); } void eg2_5() { /*åˆ¤æ–­è·¯å¾„æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½•*/ std::filesystem::path file_path = \"../test_dir/1.txt\"; std::filesystem::path dir_path = \"../test_dir/1_dir\"; std::cout \u003c\u003c \"is_regular_file(file_path) : \" \u003c\u003c std::filesystem::is_regular_file(file_path) \u003c\u003c std::endl; std::cout \u003c\u003c \"is_directory(dir_path) : \" \u003c\u003c std::filesystem::is_directory(dir_path) \u003c\u003c std::endl; } is_regular_file(file_path) : 1 is_directory(dir_path) : 1 os.pathä¸­æä¾›äº†å‡½æ•°isfile()å’Œisdir()ã€‚ def eg2_5(): \"\"\"åˆ¤æ–­è·¯å¾„æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½•\"\"\" file_path = \"./test_dir/1.txt\" dir_path = \"./test_dir/1_dir\" print(\"os.path.isfile({}) : {}\".format(file_path, os.path.isfile(file_path))) print(\"os.path.isdir({}) : {}\".format(dir_path, os.path.isdir(dir_path))) os.path.isfile(./test_dir/1.txt) : True os.path.i","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:2:5","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"è¿”å›ç»å¯¹è·¯å¾„ã€ç¥å¥‡ã€‘ filesystemä¸­æä¾›äº†å‡½æ•°absolute()ã€‚ void eg2_6() { /*è¿”å›ç»å¯¹è·¯å¾„*/ std::filesystem::path path = \"../test_dir\"; std::filesystem::path abs_path = std::filesystem::absolute(path); std::cout \u003c\u003c \"abs_path : \" \u003c\u003c abs_path \u003c\u003c std::endl; std::cout \u003c\u003c \"exists(abs_path) : \" \u003c\u003c std::filesystem::exists(abs_path) \u003c\u003c std::endl; } abs_path : \"/Users/xxx/Github/intro_to_C-python/xxx/cmake-build-debug/../test_dir\" exists(abs_path) : 1 åœ¨Windowsç³»ç»Ÿä¸­ç»“æœå¦‚ä¸‹ã€‚ abs_path : \"D:\\\\GitHub\\\\intro_to_C-python\\\\xxx\\\\test_dir\" exists(abs_path) : 1 os.pathä¸­æä¾›äº†å‡½æ•°abspath()ã€‚ def eg2_6(): \"\"\"è¿”å›ç»å¯¹è·¯å¾„\"\"\" path = \"../../-PyTorch-\" abs_path = os.path.abspath(path) print(\"abs_path : {}\".format(abs_path)) print(\"os.path.exists({}) : {}\".format(abs_path, os.path.exists(abs_path))) abs_path : /Users/xxx/Github/-PyTorch- os.path.exists(/Users/xxx/Github/-PyTorch-) : True ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:2:6","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"filesystem vs. shutil shutil = shell + utilï¼Œå¯¹osè¿›è¡Œä¸€äº›è¡¥å……ã€‚ ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:3:0","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"æ–‡ä»¶æ‹·è´ filesystemä¸­æä¾›äº†copy_file()å‡½æ•°ï¼Œå¯ä»¥æ‹·è´æ–‡ä»¶æˆ–ç©ºæ–‡ä»¶å¤¹ã€‚ void eg3_1() { /*æ–‡ä»¶æ‹·è´*/ std::cout \u003c\u003c \"~~~~~~before copy_file~~~~~~\" \u003c\u003c std::endl; for (const auto \u0026i :std::filesystem::directory_iterator(\"../test_dir\")) { std::cout \u003c\u003c i.path() \u003c\u003c std::endl; } std::filesystem::copy_file(\"../test_dir/1.txt\", \"../test_dir/eg3_1.txt\"); std::cout \u003c\u003c \"~~~~~~after copy_file~~~~~~\" \u003c\u003c std::endl; for (const auto \u0026i :std::filesystem::directory_iterator(\"../test_dir\")) { std::cout \u003c\u003c i.path() \u003c\u003c std::endl; } } ~~~~~~before copy_file~~~~~~ \"../test_dir/1.txt\" \"../test_dir/1_dir\" ~~~~~~after copy_file~~~~~~ \"../test_dir/eg3_1.txt\" \"../test_dir/1.txt\" \"../test_dir/1_dir\" shutilä¸­æä¾›å‡½æ•°copyfile()ã€‚ def eg3_1(): \"\"\"æ–‡ä»¶æ‹·è´\"\"\" print(\"~~~~~~before copy_file~~~~~~\") for i in os.listdir(\"./test_dir\"): print(i) src_path = \"./test_dir/1.txt\" dst_path = \"./test_dir/eg3_1.txt\" shutil.copyfile(src_path, dst_path) print(\"~~~~~~after copy_file~~~~~~\") for i in os.listdir(\"./test_dir\"): print(i) ~~~~~~before copy_file~~~~~~ 1.txt 1_dir ~~~~~~after copy_file~~~~~~ eg3_1.txt 1.txt 1_dir ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:3:1","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"æ–‡ä»¶åˆ é™¤ filesystemä¸­æä¾›äº†remove()å‡½æ•°ï¼Œå¯ä»¥åˆ é™¤æ–‡ä»¶æˆ–ç©ºæ–‡ä»¶å¤¹ã€‚ void eg3_2() { /*æ–‡ä»¶åˆ é™¤*/ std::cout \u003c\u003c \"~~~~~~before remove~~~~~~\" \u003c\u003c std::endl; for (const auto \u0026i :std::filesystem::directory_iterator(\"../test_dir\")) { std::cout \u003c\u003c i.path() \u003c\u003c std::endl; } std::filesystem::remove(\"../test_dir/eg3_1.txt\"); std::cout \u003c\u003c \"~~~~~~after remove~~~~~~\" \u003c\u003c std::endl; for (const auto \u0026i :std::filesystem::directory_iterator(\"../test_dir\")) { std::cout \u003c\u003c i.path() \u003c\u003c std::endl; } } ~~~~~~before remove~~~~~~ \"../test_dir/eg3_1.txt\" \"../test_dir/1.txt\" \"../test_dir/1_dir\" ~~~~~~after remove~~~~~~ \"../test_dir/1.txt\" \"../test_dir/1_dir\" osä¸­æä¾›äº†å‡½æ•°remove()ã€‚ def eg3_2(): \"\"\"æ–‡ä»¶åˆ é™¤\"\"\" print(\"~~~~~~before remove~~~~~~\") for i in os.listdir(\"./test_dir\"): print(i) rm_path = \"./test_dir/eg3_1.txt\" os.remove(rm_path) print(\"~~~~~~after remove~~~~~~\") for i in os.listdir(\"./test_dir\"): print(i) ~~~~~~before remove~~~~~~ eg3_1.txt 1.txt 1_dir ~~~~~~after remove~~~~~~ 1.txt 1_dir ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:3:2","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"è·¯å¾„æ‹·è´ filesystemä¸­æä¾›äº†copy()å‡½æ•°ï¼Œå¯ä»¥æŒ‰ç…§é€‰é¡¹ï¼ˆæ˜¯å¦é€’å½’ï¼‰æ‹·è´æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚ void eg3_3() { /*è·¯å¾„æ‹·è´*/ std::cout \u003c\u003c \"~~~~~~before copy[1_dir]~~~~~~\" \u003c\u003c std::endl; for (const auto \u0026i :std::filesystem::directory_iterator(\"../test_dir/1_dir\")) { std::cout \u003c\u003c i.path() \u003c\u003c std::endl; } std::filesystem::copy(\"../test_dir/1_dir\", \"../test_dir/eg3_3_dir\", std::filesystem::copy_options::recursive); std::cout \u003c\u003c \"~~~~~~after copy[eg3_3_dir]~~~~~~\" \u003c\u003c std::endl; for (const auto \u0026i :std::filesystem::directory_iterator(\"../test_dir/eg3_3_dir\")) { std::cout \u003c\u003c i.path() \u003c\u003c std::endl; } } ~~~~~~before copy[1_dir]~~~~~~ \"../test_dir/1_dir/empty_dir\" \"../test_dir/1_dir/2.txt\" ~~~~~~after copy[eg3_3_dir]~~~~~~ \"../test_dir/eg3_3_dir/empty_dir\" \"../test_dir/eg3_3_dir/2.txt\" shutilæä¾›äº†å‡½æ•°copytree()ã€‚ def eg3_3(): \"\"\"è·¯å¾„æ‹·è´\"\"\" print(\"~~~~~~before copy[1_dir]~~~~~~\") for i in os.listdir(\"./test_dir/1_dir\"): print(i) src_path = \"./test_dir/1_dir\" dst_path = \"./test_dir/eg3_3_dir\" shutil.copytree(src_path, dst_path) print(\"~~~~~~after copy[eg3_3_dir]~~~~~~\") for i in os.listdir(\"./test_dir/eg3_3_dir\"): print(i) ~~~~~~before copy[1_dir]~~~~~~ empty_dir 2.txt ~~~~~~after copy[eg3_3_dir]~~~~~~ empty_dir 2.txt ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:3:3","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["ç°ä»£C++è¯­æ³•"],"content":"é€’å½’åˆ é™¤ filesystemä¸­æä¾›äº†remove_all()å‡½æ•°ï¼Œå¯ä»¥é€’å½’åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚ void eg3_4() { /*é€’å½’åˆ é™¤*/ std::filesystem::path dir_path = \"../test_dir/eg3_3_dir\"; std::cout \u003c\u003c \"exists(dir_path) : \" \u003c\u003c std::filesystem::exists(dir_path) \u003c\u003c std::endl; std::filesystem::remove_all(dir_path); std::cout \u003c\u003c \"exists(dir_path) : \" \u003c\u003c std::filesystem::exists(dir_path) \u003c\u003c std::endl; } exists(dir_path) : 1 exists(dir_path) : 0 shutilæä¾›äº†å‡½æ•°rmtree()ã€‚ def eg3_4(): \"\"\"é€’å½’åˆ é™¤\"\"\" dir_path = \"./test_dir/eg3_3_dir\" print(\"os.path.exists({}) : {}\".format(dir_path, os.path.exists(dir_path))) shutil.rmtree(dir_path) print(\"os.path.exists({}) : {}\".format(dir_path, os.path.exists(dir_path))) os.path.exists(./test_dir/eg3_3_dir) : True os.path.exists(./test_dir/eg3_3_dir) : False ","date":"2022-01-25","objectID":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/:3:4","tags":["C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”"],"title":"C++ä¸pythonæ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”","uri":"/posts/c++%E4%B8%8Epython%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94/"},{"categories":["JavaSEç¬”è®°"],"content":"Java I/O","date":"2022-01-23","objectID":"/posts/java-io/","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"Java I/O é…å¥—è§†é¢‘ æ³¨æ„ï¼šè¿™å—ä¼šæ¶‰åŠåˆ°æ“ä½œç³»ç»Ÿå’Œè®¡ç®—æœºç»„æˆåŸç†ç›¸å…³å†…å®¹ã€‚ I/Oç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¾“å…¥è¾“å‡ºï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæœ‰I/Oå‘¢ï¼Ÿå…¶å®I/Oæ— æ—¶æ— åˆ»éƒ½åœ¨æˆ‘ä»¬çš„èº«è¾¹ï¼Œæ¯”å¦‚è¯»å–ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œç½‘ç»œæ–‡ä»¶ä¼ è¾“ï¼Œé¼ æ ‡é”®ç›˜è¾“å…¥ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¥å—å•ç‰‡æœºå‘å›çš„æ•°æ®ï¼Œè€Œèƒ½å¤Ÿæ”¯æŒè¿™äº›æ“ä½œçš„è®¾å¤‡å°±æ˜¯I/Oè®¾å¤‡ã€‚ æˆ‘ä»¬å¯ä»¥å¤§è‡´çœ‹ä¸€ä¸‹æ•´ä¸ªè®¡ç®—æœºçš„æ€»çº¿ç»“æ„ï¼š å¸¸è§çš„I/Oè®¾å¤‡ä¸€èˆ¬æ˜¯é¼ æ ‡ã€é”®ç›˜è¿™ç±»é€šè¿‡USBè¿›è¡Œä¼ è¾“çš„å¤–è®¾æˆ–è€…æ˜¯é€šè¿‡Sataæ¥å£æˆ–æ˜¯M.2è¿æ¥çš„ç¡¬ç›˜ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™äº›è®¾å¤‡æ˜¯ç”±CPUå‘å‡ºæŒ‡ä»¤é€šè¿‡å—æ¡¥èŠ¯ç‰‡é—´æ¥è¿›è¡Œæ§åˆ¶ï¼Œè€Œä¸æ˜¯ç”±CPUç›´æ¥æ“ä½œã€‚ è€Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­ï¼Œæƒ³è¦è¯»å–è¿™äº›å¤–éƒ¨è¿æ¥çš„I/Oè®¾å¤‡ä¸­çš„å†…å®¹ï¼Œå°±éœ€è¦å°†æ•°æ®ä¼ è¾“åˆ°å†…å­˜ä¸­ã€‚è€Œéœ€è¦å®ç°è¿™æ ·çš„æ“ä½œï¼Œå•å•å‡­å€Ÿä¸€ä¸ªå°çš„ç¨‹åºæ˜¯æ— æ³•åšåˆ°çš„ï¼Œè€Œæ“ä½œç³»ç»Ÿï¼ˆå¦‚ï¼šWindows/Linux/MacOSï¼‰å°±æ˜¯ä¸“é—¨ç”¨äºæ§åˆ¶å’Œç®¡ç†è®¡ç®—æœºç¡¬ä»¶å’Œè½¯ä»¶èµ„æºçš„è½¯ä»¶ï¼Œæˆ‘ä»¬éœ€è¦è¯»å–ä¸€ä¸ªIOè®¾å¤‡çš„å†…å®¹æ—¶ï¼Œå¯ä»¥å‘æ“ä½œç³»ç»Ÿå‘å‡ºè¯·æ±‚ï¼Œç”±æ“ä½œç³»ç»Ÿå¸®åŠ©æˆ‘ä»¬æ¥å’Œåº•å±‚çš„ç¡¬ä»¶äº¤äº’ä»¥å®Œæˆæˆ‘ä»¬çš„è¯»å–/å†™å…¥è¯·æ±‚ã€‚ä»è¯»å–ç¡¬ç›˜æ–‡ä»¶çš„è§’åº¦æ¥è¯´ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿæœ‰ç€ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå°±æ˜¯æ–‡ä»¶åœ¨ç¡¬ç›˜ä¸­çš„å­˜å‚¨æ’åˆ—æ–¹å¼ï¼Œå¦‚Windowså°±æ˜¯NTFSã€MacOSå°±æ˜¯APFSï¼‰ï¼Œç¡¬ç›˜åªèƒ½å­˜å‚¨ä¸€ä¸ªä¸ª0å’Œ1è¿™æ ·çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œè‡³äº0å’Œ1å¦‚ä½•æ’åˆ—ï¼Œå„è‡ªåˆä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Œå°±æ˜¯ç”±æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿæ¥å†³å®šçš„ã€‚ä»ç½‘ç»œé€šä¿¡è§’åº¦æ¥è¯´ï¼Œç½‘ç»œä¿¡å·é€šè¿‡ç½‘å¡ç­‰è®¾å¤‡ç¿»è¯‘ä¸ºäºŒè¿›åˆ¶ä¿¡å·ï¼Œå†äº¤ç»™ç³»ç»Ÿè¿›è¡Œè¯»å–ï¼Œæœ€åå†ç”±æ“ä½œç³»ç»Ÿæ¥ç»™åˆ°ç¨‹åºã€‚ JDKæä¾›äº†ä¸€å¥—ç”¨äºIOæ“ä½œçš„æ¡†æ¶ï¼Œæ ¹æ®æµçš„ä¼ è¾“æ–¹å‘å’Œè¯»å–å•ä½ï¼Œåˆ†ä¸ºå­—èŠ‚æµInputStreamå’ŒOutputStreamä»¥åŠå­—ç¬¦æµReaderå’ŒWriterï¼Œå½“ç„¶ï¼Œè¿™é‡Œçš„Streamå¹¶ä¸æ˜¯å‰é¢é›†åˆæ¡†æ¶è®¤è¯†çš„Streamï¼Œè¿™é‡Œçš„æµæŒ‡çš„æ˜¯æ•°æ®æµï¼Œé€šè¿‡æµï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€ç›´ä»æµä¸­è¯»å–æ•°æ®ï¼Œç›´åˆ°è¯»å–åˆ°å°½å¤´ï¼Œæˆ–æ˜¯ä¸æ–­å‘å…¶ä¸­å†™å…¥æ•°æ®ï¼Œç›´åˆ°æˆ‘ä»¬å†™å…¥å®Œæˆã€‚è€Œè¿™ç±»IOå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„BIOï¼Œ å­—èŠ‚æµä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªbyteçš„å¤§å°ï¼Œè€Œå­—ç¬¦æµé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªcharçš„å¤§å°ï¼ˆåœ¨è¯»å–çº¯æ–‡æœ¬æ–‡ä»¶çš„æ—¶å€™æ›´åŠ é€‚åˆï¼‰ï¼Œæœ‰å…³è¿™ä¸¤ç§æµï¼Œä¼šåœ¨åé¢è¯¦ç»†ä»‹ç»ï¼Œè¿™ä¸ªç« èŠ‚æˆ‘ä»¬éœ€è¦å­¦ä¹ 16ä¸ªå…³é”®çš„æµã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:0:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"æ–‡ä»¶æµ è¦å­¦ä¹ å’Œä½¿ç”¨IOï¼Œé¦–å…ˆå°±è¦ä»æœ€æ˜“äºç†è§£çš„è¯»å–æ–‡ä»¶å¼€å§‹è¯´èµ·ã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:1:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"æ–‡ä»¶å­—èŠ‚æµ é¦–å…ˆä»‹ç»ä¸€ä¸‹FileInputStreamï¼Œé€šè¿‡å®ƒæ¥è·å–æ–‡ä»¶çš„è¾“å…¥æµã€‚ public static void main(String[] args) { try { FileInputStream inputStream = new FileInputStream(\"è·¯å¾„\"); //è·¯å¾„æ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ } catch (FileNotFoundException e) { e.printStackTrace(); } } ç›¸å¯¹è·¯å¾„æ˜¯åœ¨å½“å‰è¿è¡Œçš„è·¯å¾„ä¸‹å¯»æ‰¾æ–‡ä»¶ï¼Œè€Œç»å¯¹è·¯å¾„ï¼Œæ˜¯ä»æ ¹ç›®å½•å¼€å§‹å¯»æ‰¾ã€‚è·¯å¾„åˆ†å‰²ç¬¦æ”¯æŒä½¿ç”¨/æˆ–æ˜¯\\\\ï¼Œä½†æ˜¯ä¸èƒ½å†™ä¸º\\å› ä¸ºå®ƒæ˜¯è½¬ä¹‰å­—ç¬¦ï¼ åœ¨ä½¿ç”¨å®Œæˆä¸€ä¸ªæµä¹‹åï¼Œå¿…é¡»å…³é—­è¿™ä¸ªæµæ¥å®Œæˆå¯¹èµ„æºçš„é‡Šæ”¾ï¼Œå¦åˆ™èµ„æºä¼šè¢«ä¸€ç›´å ç”¨ï¼ public static void main(String[] args) { FileInputStream inputStream = null; //å®šä¹‰å¯ä»¥å…ˆæ”¾åœ¨tryå¤–éƒ¨ try { inputStream = new FileInputStream(\"è·¯å¾„\"); } catch (FileNotFoundException e) { e.printStackTrace(); } finally { try { //å»ºè®®åœ¨finallyä¸­è¿›è¡Œï¼Œå› ä¸ºè¿™ä¸ªæ˜¯ä»»ä½•æƒ…å†µéƒ½å¿…é¡»è¦æ‰§è¡Œçš„ï¼ if(inputStream != null) inputStream.close(); } catch (IOException e) { e.printStackTrace(); } } } è™½ç„¶è¿™æ ·çš„å†™æ³•æ‰æ˜¯æœ€ä¿é™©çš„ï¼Œä½†æ˜¯æ˜¾å¾—è¿‡äºç¹çäº†ï¼Œå°¤å…¶æ˜¯finallyä¸­å†æ¬¡åµŒå¥—äº†ä¸€ä¸ªtry-catchå—ï¼Œå› æ­¤åœ¨JDK1.7æ–°å¢äº†try-with-resourceè¯­æ³•ï¼Œç”¨äºç®€åŒ–è¿™æ ·çš„å†™æ³•ï¼ˆæœ¬è´¨ä¸Šè¿˜æ˜¯å’Œè¿™æ ·çš„æ“ä½œä¸€è‡´ï¼Œåªæ˜¯æ¢äº†ä¸ªå†™æ³•ï¼‰ public static void main(String[] args) { //æ³¨æ„ï¼Œè¿™ç§è¯­æ³•åªæ”¯æŒå®ç°äº†AutoCloseableæ¥å£çš„ç±»ï¼ try(FileInputStream inputStream = new FileInputStream(\"è·¯å¾„\")) { //ç›´æ¥åœ¨try()ä¸­å®šä¹‰è¦åœ¨å®Œæˆä¹‹åé‡Šæ”¾çš„èµ„æº } catch (IOException e) { //è¿™é‡Œå˜æˆIOExceptionæ˜¯å› ä¸ºè°ƒç”¨close()å¯èƒ½ä¼šå‡ºç°ï¼Œè€ŒFileNotFoundExceptionæ˜¯ç»§æ‰¿è‡ªIOExceptionçš„ e.printStackTrace(); } //æ— éœ€å†ç¼–å†™finallyè¯­å¥å—ï¼Œå› ä¸ºåœ¨æœ€åè‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒç”¨äº†close() } ä¹‹åä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨æ­¤è¯­æ³•è¿›è¡Œæ•™å­¦ã€‚ public static void main(String[] args) { //test.txtï¼ša try(FileInputStream inputStream = new FileInputStream(\"test.txt\")) { //ä½¿ç”¨read()æ–¹æ³•è¿›è¡Œå­—ç¬¦è¯»å– System.out.println((char) inputStream.read()); //è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼ˆè‹±æ–‡å­—æ¯åªå 1å­—èŠ‚ï¼Œä¸­æ–‡å 2å­—èŠ‚ï¼‰ System.out.println(inputStream.read()); //å”¯ä¸€ä¸€ä¸ªå­—èŠ‚çš„å†…å®¹å·²ç»è¯»å®Œäº†ï¼Œå†æ¬¡è¯»å–è¿”å›-1è¡¨ç¤ºæ²¡æœ‰å†…å®¹äº† }catch (IOException e){ e.printStackTrace(); } } ä½¿ç”¨readå¯ä»¥ç›´æ¥è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œæ³¨æ„ï¼Œæµçš„å†…å®¹æ˜¯æœ‰é™çš„ï¼Œè¯»å–ä¸€ä¸ªå°‘ä¸€ä¸ªï¼æˆ‘ä»¬å¦‚æœæƒ³ä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€ä¸ªwhileå¾ªç¯æ¥å®Œæˆï¼š public static void main(String[] args) { //test.txtï¼šabcd try(FileInputStream inputStream = new FileInputStream(\"test.txt\")) { int tmp; while ((tmp = inputStream.read()) != -1){ //é€šè¿‡whileå¾ªç¯æ¥ä¸€æ¬¡æ€§è¯»å®Œå†…å®¹ System.out.println((char)tmp); } }catch (IOException e){ e.printStackTrace(); } } ä½¿ç”¨æ–¹æ³•èƒ½æŸ¥çœ‹å½“å‰å¯è¯»çš„å‰©ä½™å­—èŠ‚æ•°é‡ï¼ˆæ³¨æ„ï¼šå¹¶ä¸ä¸€å®šçœŸå®çš„æ•°æ®é‡å°±æ˜¯è¿™ä¹ˆå¤šï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œI/Oæ“ä½œæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•åªèƒ½è¿›è¡Œä¸€ä¸ªé¢„ä¼°ä¹Ÿå¯ä»¥è¯´æ˜¯æš‚æ—¶èƒ½ä¸€æ¬¡æ€§è¯»å–çš„æ•°é‡ï¼‰ try(FileInputStream inputStream = new FileInputStream(\"test.txt\")) { System.out.println(inputStream.available()); //æŸ¥çœ‹å‰©ä½™æ•°é‡ }catch (IOException e){ e.printStackTrace(); } å½“ç„¶ï¼Œä¸€ä¸ªä¸€ä¸ªè¯»å–æ•ˆç‡å¤ªä½äº†ï¼Œé‚£èƒ½å¦ä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é¢„ç½®ä¸€ä¸ªåˆé€‚å®¹é‡çš„byte[]æ•°ç»„æ¥å­˜æ”¾ã€‚ public static void main(String[] args) { //test.txtï¼šabcd try(FileInputStream inputStream = new FileInputStream(\"test.txt\")) { byte[] bytes = new byte[inputStream.available()]; //æˆ‘ä»¬å¯ä»¥æå‰å‡†å¤‡å¥½åˆé€‚å®¹é‡çš„byteæ•°ç»„æ¥å­˜æ”¾ System.out.println(inputStream.read(bytes)); //ä¸€æ¬¡æ€§è¯»å–å…¨éƒ¨å†…å®¹ï¼ˆè¿”å›å€¼æ˜¯è¯»å–çš„å­—èŠ‚æ•°ï¼‰ System.out.println(new String(bytes)); //é€šè¿‡String(byte[])æ„é€ æ–¹æ³•å¾—åˆ°å­—ç¬¦ä¸² }catch (IOException e){ e.printStackTrace(); } } ä¹Ÿå¯ä»¥æ§åˆ¶è¦è¯»å–æ•°é‡ï¼š System.out.println(inputStream.read(bytes, 1, 2)); //ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»ç»™å®šæ•°ç»„çš„å“ªä¸ªä½ç½®å¼€å§‹æ”¾å…¥å†…å®¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¯»å–æµä¸­çš„å­—èŠ‚æ•° æ³¨æ„ï¼šä¸€æ¬¡æ€§è¯»å–åŒå•ä¸ªè¯»å–ä¸€æ ·ï¼Œå½“æ²¡æœ‰ä»»ä½•æ•°æ®å¯è¯»æ—¶ï¼Œä¾ç„¶ä¼šè¿”å›-1 é€šè¿‡skip()æ–¹æ³•å¯ä»¥è·³è¿‡æŒ‡å®šæ•°é‡çš„å­—èŠ‚ï¼š public static void main(String[] args) { //test.txtï¼šabcd try(FileInputStream inputStream = new FileInputStream(\"test.txt\")) { System.out.println(inputStream.skip(1)); System.out.println((char) inputStream.read()); //è·³è¿‡äº†ä¸€ä¸ªå­—èŠ‚ }catch (IOException e){ e.printStackTrace(); } } æ³¨æ„ï¼šFileInputStreamæ˜¯ä¸æ”¯æŒreset()çš„ï¼Œè™½ç„¶æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œå…ˆä¸æåŠã€‚ æ—¢ç„¶æœ‰è¾“å…¥æµï¼Œé‚£ä¹ˆæ–‡ä»¶è¾“å‡ºæµä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ï¼š public static void main(String[] args) { //è¾“å‡ºæµä¹Ÿéœ€è¦åœ¨æœ€åè°ƒç”¨close()æ–¹æ³•ï¼Œå¹¶ä¸”åŒæ ·æ”¯æŒtry-with-resource try(FileOutputStream outputStream = new FileOutputStream(\"output.txt\")) { //æ³¨æ„ï¼šè‹¥æ­¤æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šç›´æ¥åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼ }catch (IOException e){ e.printStackTrace(); } } è¾“å‡ºæµæ²¡æœ‰read()æ“ä½œè€Œæ˜¯write()æ“ä½œï¼Œä½¿ç”¨æ–¹æ³•åŒè¾“å…¥æµä¸€æ ·ï¼Œåªä¸è¿‡ç°åœ¨çš„æ–¹å‘å˜ä¸ºæˆ‘ä»¬å‘æ–‡ä»¶é‡Œå†™å…¥å†…å®¹ï¼š public static void main(String[] args) { try(FileOutputStream outputStream = new FileOutputStream(\"output.txt\")) { outputStream.write('c'); //åŒreadä¸€æ ·ï¼Œå¯ä»¥ç›´æ¥å†™å…¥å†…å®¹ outputStream.write(\"lbwnb\".getBytes()); //ä¹Ÿå¯ä»¥ç›´æ¥å†™å…¥byte[] outputStream.write(\"lbwnb\".getBytes(), 0, 1); //åŒä¸Šè¾“å…¥æµ outputStream.flush(); //å»ºè®®åœ¨æœ€åæ‰§è¡Œä¸€æ¬¡åˆ·æ–°æ“ä½œï¼ˆå¼ºåˆ¶å†™å…¥ï¼‰æ¥ä¿è¯æ•°æ®æ­£ç¡®å†™å…¥åˆ°ç¡¬ç›˜æ–‡ä»¶ä¸­ }catch (IOException e){ e.printStackTrace(); } } é‚£ä¹ˆå¦‚æœæ˜¯æˆ‘åªæƒ³åœ¨æ–‡ä»¶å°¾éƒ¨è¿›è¡Œè¿½åŠ å†™å…¥æ•°æ®å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•æ¥å®ç°ï¼š public static void main(String[] args) { try(FileOutputStream outputStream = new FileOutputStream(\"output.txt\", true)) { outputStream.write(\"lb\".getBytes()); //ç°åœ¨åªä¼šè¿›è¡Œè¿½åŠ å†™å…¥ï¼Œè€Œä¸æ˜¯ç›´æ¥æ›¿æ¢åŸæ–‡ä»¶å†…å®¹ outputStream.flush(); }catch (IOException e){ e.printStackTrace(); } } ","date":"2022-01-23","objectID":"/posts/java-io/:1:1","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"æ–‡ä»¶å­—ç¬¦æµ å­—ç¬¦æµä¸åŒäºå­—èŠ‚ï¼Œå­—ç¬¦æµæ˜¯ä»¥ä¸€ä¸ªå…·ä½“çš„å­—ç¬¦è¿›è¡Œè¯»å–ï¼Œå› æ­¤å®ƒåªé€‚åˆè¯»çº¯æ–‡æœ¬çš„æ–‡ä»¶ï¼Œå¦‚æœæ˜¯å…¶ä»–ç±»å‹çš„æ–‡ä»¶ä¸é€‚ç”¨ï¼š public static void main(String[] args) { try(FileReader reader = new FileReader(\"test.txt\")){ reader.skip(1); //ç°åœ¨è·³è¿‡çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ System.out.println((char) reader.read()); //ç°åœ¨æ˜¯æŒ‰å­—ç¬¦è¿›è¡Œè¯»å–ï¼Œè€Œä¸æ˜¯å­—èŠ‚ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è¯»å–åˆ°ä¸­æ–‡å­—ç¬¦ }catch (IOException e){ e.printStackTrace(); } } åŒç†ï¼Œå­—ç¬¦æµåªæ”¯æŒchar[]ç±»å‹ä½œä¸ºå­˜å‚¨ï¼š public static void main(String[] args) { try(FileReader reader = new FileReader(\"test.txt\")){ char[] str = new char[10]; reader.read(str); System.out.println(str); //ç›´æ¥è¯»å–åˆ°char[]ä¸­ }catch (IOException e){ e.printStackTrace(); } } æ—¢ç„¶æœ‰äº†Readerè‚¯å®šä¹Ÿæœ‰Writerï¼š public static void main(String[] args) { try(FileWriter writer = new FileWriter(\"output.txt\")){ writer.getEncoding(); //æ”¯æŒè·å–ç¼–ç ï¼ˆä¸åŒçš„æ–‡æœ¬æ–‡ä»¶å¯èƒ½ä¼šæœ‰ä¸åŒçš„ç¼–ç ç±»å‹ï¼‰ writer.write('ç‰›'); writer.append('ç‰›'); //å…¶å®åŠŸèƒ½å’Œwriteä¸€æ · writer.flush(); //åˆ·æ–° }catch (IOException e){ e.printStackTrace(); } } æˆ‘ä»¬å‘ç°ä¸ä»…æœ‰write()æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªappend()æ–¹æ³•ï¼Œä½†æ˜¯å®é™…ä¸Šä»–ä»¬æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œçœ‹æºç ï¼š /** * Appends the specified character to this writer. * * \u003cp\u003e An invocation of this method of the form \u003ctt\u003eout.append(c)\u003c/tt\u003e * behaves in exactly the same way as the invocation * * \u003cpre\u003e * out.write(c) \u003c/pre\u003e * * @param c * The 16-bit character to append * * @return This writer * * @throws IOException * If an I/O error occurs * * @since 1.5 */ public Writer append(char c) throws IOException { write(c); return this; } appendæ”¯æŒåƒStringBuilderé‚£æ ·çš„é“¾å¼è°ƒç”¨ï¼Œè¿”å›çš„æ˜¯Writerå¯¹è±¡æœ¬èº«ã€‚ ç»ƒä¹ ï¼šå°è¯•ä¸€ä¸‹ç”¨Readerå’ŒWriteræ¥æ‹·è´çº¯æ–‡æœ¬æ–‡ä»¶ ","date":"2022-01-23","objectID":"/posts/java-io/:1:2","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"Fileç±» Fileç±»ä¸“é—¨ç”¨äºè¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œåªä¸è¿‡å®ƒåªæ˜¯ä»£è¡¨è¿™ä¸ªæ–‡ä»¶ï¼Œä½†å¹¶ä¸æ˜¯è¿™ä¸ªæ–‡ä»¶æœ¬èº«ã€‚é€šè¿‡Fileå¯¹è±¡ï¼Œå¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œæ“ä½œç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ã€‚ public static void main(String[] args) { File file = new File(\"test.txt\"); //ç›´æ¥åˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ System.out.println(file.exists()); //æ­¤æ–‡ä»¶æ˜¯å¦å­˜åœ¨ System.out.println(file.length()); //è·å–æ–‡ä»¶çš„å¤§å° System.out.println(file.isDirectory()); //æ˜¯å¦ä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹ System.out.println(file.canRead()); //æ˜¯å¦å¯è¯» System.out.println(file.canWrite()); //æ˜¯å¦å¯å†™ System.out.println(file.canExecute()); //æ˜¯å¦å¯æ‰§è¡Œ } é€šè¿‡Fileå¯¹è±¡ï¼Œæˆ‘ä»¬å°±èƒ½å¿«é€Ÿå¾—åˆ°æ–‡ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œè¿˜å¯ä»¥è·å–æ–‡ä»¶å¤¹å†…éƒ¨çš„æ–‡ä»¶åˆ—è¡¨ç­‰å†…å®¹ï¼š File file = new File(\"/\"); System.out.println(Arrays.toString(file.list())); //å¿«é€Ÿè·å–æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åç§°åˆ—è¡¨ for (File f : file.listFiles()){ //æ‰€æœ‰å­æ–‡ä»¶çš„Fileå¯¹è±¡ System.out.println(f.getAbsolutePath()); //è·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ } å¦‚æœæˆ‘ä»¬å¸Œæœ›è¯»å–æŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå¯ä»¥ç›´æ¥å°†Fileä½œä¸ºå‚æ•°ä¼ å…¥å­—èŠ‚æµæˆ–æ˜¯å­—ç¬¦æµï¼š File file = new File(\"test.txt\"); try (FileInputStream inputStream = new FileInputStream(file)){ //ç›´æ¥åšå‚æ•° System.out.println(inputStream.available()); }catch (IOException e){ e.printStackTrace(); } ç»ƒä¹ ï¼šå°è¯•æ‹·è´æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ ","date":"2022-01-23","objectID":"/posts/java-io/:1:3","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"ç¼“å†²æµ è™½ç„¶æ™®é€šçš„æ–‡ä»¶æµè¯»å–æ–‡ä»¶æ•°æ®éå¸¸ä¾¿æ·ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦ä»å¤–éƒ¨I/Oè®¾å¤‡å»è·å–æ•°æ®ï¼Œç”±äºå¤–éƒ¨I/Oè®¾å¤‡çš„é€Ÿåº¦ä¸€èˆ¬éƒ½è¾¾ä¸åˆ°å†…å­˜çš„è¯»å–é€Ÿåº¦ï¼Œå¾ˆæœ‰å¯èƒ½é€ æˆç¨‹åºååº”è¿Ÿé’ï¼Œå› æ­¤æ€§èƒ½è¿˜ä¸å¤Ÿé«˜ï¼Œè€Œç¼“å†²æµæ­£å¦‚å…¶åç§°ä¸€æ ·ï¼Œå®ƒèƒ½å¤Ÿæä¾›ä¸€ä¸ªç¼“å†²ï¼Œæå‰å°†éƒ¨åˆ†å†…å®¹å­˜å…¥å†…å­˜ï¼ˆç¼“å†²åŒºï¼‰åœ¨ä¸‹æ¬¡è¯»å–æ—¶ï¼Œå¦‚æœç¼“å†²åŒºä¸­å­˜åœ¨æ­¤æ•°æ®ï¼Œåˆ™æ— éœ€å†å»è¯·æ±‚å¤–éƒ¨è®¾å¤‡ã€‚åŒç†ï¼Œå½“å‘å¤–éƒ¨è®¾å¤‡å†™å…¥æ•°æ®æ—¶ï¼Œä¹Ÿæ˜¯ç”±ç¼“å†²åŒºå¤„ç†ï¼Œè€Œä¸æ˜¯ç›´æ¥å‘å¤–éƒ¨è®¾å¤‡å†™å…¥ã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:2:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"ç¼“å†²å­—èŠ‚æµ è¦åˆ›å»ºä¸€ä¸ªç¼“å†²å­—èŠ‚æµï¼Œåªéœ€è¦å°†åŸæœ¬çš„æµä½œä¸ºæ„é€ å‚æ•°ä¼ å…¥BufferedInputStreamå³å¯ï¼š public static void main(String[] args) { try (BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(\"test.txt\"))){ //ä¼ å…¥FileInputStream System.out.println((char) bufferedInputStream.read()); //æ“ä½œå’ŒåŸæ¥çš„æµæ˜¯ä¸€æ ·çš„ }catch (IOException e){ e.printStackTrace(); } } å®é™…ä¸Šè¿›è¡ŒI/Oæ“ä½œçš„å¹¶ä¸æ˜¯BufferedInputStreamï¼Œè€Œæ˜¯æˆ‘ä»¬ä¼ å…¥çš„FileInputStreamï¼Œè€ŒBufferedInputStreamè™½ç„¶æœ‰ç€åŒæ ·çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿›è¡Œäº†ä¸€äº›é¢å¤–çš„å¤„ç†ç„¶åå†è°ƒç”¨FileInputStreamçš„åŒåæ–¹æ³•ï¼Œè¿™æ ·çš„å†™æ³•ç§°ä¸ºè£…é¥°è€…æ¨¡å¼ public void close() throws IOException { byte[] buffer; while ( (buffer = buf) != null) { if (bufUpdater.compareAndSet(this, buffer, null)) { //CASæ— é”ç®—æ³•ï¼Œå¹¶å‘ä¼šç”¨åˆ°ï¼Œæš‚æ—¶ä¸ç®¡ InputStream input = in; in = null; if (input != null) input.close(); return; } // Else retry in case a new buf was CASed in fill() } } å®é™…ä¸Šè¿™ç§æ¨¡å¼æ˜¯çˆ¶ç±»FilterInputStreamæä¾›çš„è§„èŒƒï¼Œåé¢æˆ‘ä»¬è¿˜ä¼šè®²åˆ°æ›´å¤šFilterInputStreamçš„å­ç±»ã€‚ æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨BufferedInputStreamä¸­è¿˜å­˜åœ¨ä¸€ä¸ªä¸“é—¨ç”¨äºç¼“å­˜çš„æ•°ç»„ï¼š /** * The internal buffer array where the data is stored. When necessary, * it may be replaced by another array of * a different size. */ protected volatile byte buf[]; I/Oæ“ä½œä¸€èˆ¬ä¸èƒ½é‡å¤è¯»å–å†…å®¹ï¼ˆæ¯”å¦‚é”®ç›˜å‘é€çš„ä¿¡å·ï¼Œä¸»æœºæ¥æ”¶äº†å°±æ²¡äº†ï¼‰ï¼Œè€Œç¼“å†²æµæä¾›äº†ç¼“å†²æœºåˆ¶ï¼Œä¸€éƒ¨åˆ†å†…å®¹å¯ä»¥è¢«æš‚æ—¶ä¿å­˜ï¼ŒBufferedInputStreamæ”¯æŒreset()å’Œmark()æ“ä½œï¼Œé¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹mark()æ–¹æ³•çš„ä»‹ç»ï¼š /** * Marks the current position in this input stream. A subsequent * call to the \u003ccode\u003ereset\u003c/code\u003e method repositions this stream at * the last marked position so that subsequent reads re-read the same bytes. * \u003cp\u003e * The \u003ccode\u003ereadlimit\u003c/code\u003e argument tells this input stream to * allow that many bytes to be read before the mark position gets * invalidated. * \u003cp\u003e * This method simply performs \u003ccode\u003ein.mark(readlimit)\u003c/code\u003e. * * @param readlimit the maximum limit of bytes that can be read before * the mark position becomes invalid. * @see java.io.FilterInputStream#in * @see java.io.FilterInputStream#reset() */ public synchronized void mark(int readlimit) { in.mark(readlimit); } å½“è°ƒç”¨mark()ä¹‹åï¼Œè¾“å…¥æµä¼šä»¥æŸç§æ–¹å¼ä¿ç•™ä¹‹åè¯»å–çš„readlimitæ•°é‡çš„å†…å®¹ï¼Œå½“è¯»å–çš„å†…å®¹æ•°é‡è¶…è¿‡readlimitåˆ™ä¹‹åçš„å†…å®¹ä¸ä¼šè¢«ä¿ç•™ï¼Œå½“è°ƒç”¨reset()ä¹‹åï¼Œä¼šä½¿å¾—å½“å‰çš„è¯»å–ä½ç½®å›åˆ°mark()è°ƒç”¨æ—¶çš„ä½ç½®ã€‚ public static void main(String[] args) { try (BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(\"test.txt\"))){ bufferedInputStream.mark(1); //åªä¿ç•™ä¹‹åçš„1ä¸ªå­—ç¬¦ System.out.println((char) bufferedInputStream.read()); System.out.println((char) bufferedInputStream.read()); bufferedInputStream.reset(); //å›åˆ°markæ—¶çš„ä½ç½® System.out.println((char) bufferedInputStream.read()); System.out.println((char) bufferedInputStream.read()); }catch (IOException e) { e.printStackTrace(); } } æˆ‘ä»¬å‘ç°è™½ç„¶åé¢çš„éƒ¨åˆ†æ²¡æœ‰ä¿å­˜ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿæ­£å¸¸è¯»å–ï¼Œå…¶å®mark()åä¿å­˜çš„è¯»å–å†…å®¹æ˜¯å–readlimitå’ŒBufferedInputStreamç±»çš„ç¼“å†²åŒºå¤§å°ä¸¤è€…ä¸­çš„æœ€å¤§å€¼ï¼Œè€Œå¹¶éå®Œå…¨ç”±readlimitç¡®å®šã€‚å› æ­¤æˆ‘ä»¬é™åˆ¶ä¸€ä¸‹ç¼“å†²åŒºå¤§å°ï¼Œå†æ¥è§‚å¯Ÿä¸€ä¸‹ç»“æœï¼š public static void main(String[] args) { try (BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(\"test.txt\"), 1)){ //å°†ç¼“å†²åŒºå¤§å°è®¾ç½®ä¸º1 bufferedInputStream.mark(1); //åªä¿ç•™ä¹‹åçš„1ä¸ªå­—ç¬¦ System.out.println((char) bufferedInputStream.read()); System.out.println((char) bufferedInputStream.read()); //å·²ç»è¶…è¿‡äº†readlimitï¼Œç»§ç»­è¯»å–ä¼šå¯¼è‡´markå¤±æ•ˆ bufferedInputStream.reset(); //markå·²ç»å¤±æ•ˆï¼Œæ— æ³•reset() System.out.println((char) bufferedInputStream.read()); System.out.println((char) bufferedInputStream.read()); }catch (IOException e) { e.printStackTrace(); } } äº†è§£å®Œäº†BufferedInputStreamä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹BufferedOutputStreamï¼Œå…¶å®å’ŒBufferedInputStreamåŸç†å·®ä¸å¤šï¼Œåªæ˜¯åå‘æ“ä½œï¼š public static void main(String[] args) { try (BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(\"output.txt\"))){ outputStream.write(\"lbwnb\".getBytes()); outputStream.flush(); }catch (IOException e) { e.printStackTrace(); } } æ“ä½œå’ŒFileOutputStreamä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å¤šåšä»‹ç»äº†ã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:2:1","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"ç¼“å†²å­—ç¬¦æµ ç¼“å­˜å­—ç¬¦æµå’Œç¼“å†²å­—èŠ‚æµä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸€ä¸ªä¸“é—¨çš„ç¼“å†²åŒºï¼ŒBufferedReaderæ„é€ æ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ªReaderå¯¹è±¡ï¼š public static void main(String[] args) { try (BufferedReader reader = new BufferedReader(new FileReader(\"test.txt\"))){ System.out.println((char) reader.read()); }catch (IOException e) { e.printStackTrace(); } } ä½¿ç”¨å’Œreaderä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå†…éƒ¨ä¹ŸåŒ…å«ä¸€ä¸ªç¼“å­˜æ•°ç»„ï¼š private char cb[]; ç›¸æ¯”Readeræ›´æ–¹ä¾¿çš„æ˜¯ï¼Œå®ƒæ”¯æŒæŒ‰è¡Œè¯»å–ï¼š public static void main(String[] args) { try (BufferedReader reader = new BufferedReader(new FileReader(\"test.txt\"))){ System.out.println(reader.readLine()); //æŒ‰è¡Œè¯»å– }catch (IOException e) { e.printStackTrace(); } } è¯»å–åç›´æ¥å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“ç„¶ï¼Œå®ƒè¿˜èƒ½æŠŠæ¯ä¸€è¡Œå†…å®¹ä¾æ¬¡è½¬æ¢ä¸ºé›†åˆç±»æåˆ°çš„Streamæµï¼š public static void main(String[] args) { try (BufferedReader reader = new BufferedReader(new FileReader(\"test.txt\"))){ reader .lines() .limit(2) .distinct() .sorted() .forEach(System.out::println); }catch (IOException e) { e.printStackTrace(); } } å®ƒåŒæ ·ä¹Ÿæ”¯æŒmark()å’Œreset()æ“ä½œï¼š public static void main(String[] args) { try (BufferedReader reader = new BufferedReader(new FileReader(\"test.txt\"))){ reader.mark(1); System.out.println((char) reader.read()); reader.reset(); System.out.println((char) reader.read()); }catch (IOException e) { e.printStackTrace(); } } BufferedReaderå¤„ç†çº¯æ–‡æœ¬æ–‡ä»¶æ—¶å°±æ›´åŠ æ–¹ä¾¿äº†ï¼ŒBufferedWriteråœ¨å¤„ç†æ—¶ä¹ŸåŒæ ·æ–¹ä¾¿ï¼š public static void main(String[] args) { try (BufferedWriter reader = new BufferedWriter(new FileWriter(\"output.txt\"))){ reader.newLine(); //ä½¿ç”¨newLineè¿›è¡Œæ¢è¡Œ reader.write(\"æ±‰å ¡åšæ»´å½³äºä¸å½³äº\"); //å¯ä»¥ç›´æ¥å†™å…¥ä¸€ä¸ªå­—ç¬¦ä¸² reader.flush(); //æ¸…ç©ºç¼“å†²åŒº }catch (IOException e) { e.printStackTrace(); } } ","date":"2022-01-23","objectID":"/posts/java-io/:2:2","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"è½¬æ¢æµ æœ‰æ—¶ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªå¾ˆéº»çƒ¦çš„é—®é¢˜ï¼šæˆ‘è¿™é‡Œè¯»å–çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªä¸ªå­—ç¬¦ï¼Œä½†æ˜¯æˆ‘åªèƒ½å¾€ä¸€ä¸ªOutputStreamé‡Œè¾“å‡ºï¼Œä½†æ˜¯OutputStreamåˆåªæ”¯æŒbyteç±»å‹ï¼Œå¦‚æœè¦å¾€é‡Œé¢å†™å…¥å†…å®¹ï¼Œè¿›è¡Œæ•°æ®è½¬æ¢å°±ä¼šå¾ˆéº»çƒ¦ï¼Œé‚£ä¹ˆèƒ½å¦æœ‰æ›´åŠ ç®€ä¾¿çš„æ–¹å¼æ¥åšè¿™æ ·çš„äº‹æƒ…å‘¢ï¼Ÿ public static void main(String[] args) { try(OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream(\"test.txt\"))){ //è™½ç„¶ç»™å®šçš„æ˜¯FileOutputStreamï¼Œä½†æ˜¯ç°åœ¨æ”¯æŒä»¥Writerçš„æ–¹å¼è¿›è¡Œå†™å…¥ writer.write(\"lbwnb\"); //ä»¥æ“ä½œWriterçš„æ ·å­å†™å…¥OutputStream }catch (IOException e){ e.printStackTrace(); } } åŒæ ·çš„ï¼Œæˆ‘ä»¬ç°åœ¨åªæ‹¿åˆ°äº†ä¸€ä¸ªInputStreamï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›èƒ½å¤ŸæŒ‰å­—ç¬¦çš„æ–¹å¼è¯»å–ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨InputStreamReaderæ¥å¸®åŠ©æˆ‘ä»¬å®ç°ï¼š public static void main(String[] args) { try(InputStreamReader reader = new InputStreamReader(new FileInputStream(\"test.txt\"))){ //è™½ç„¶ç»™å®šçš„æ˜¯FileInputStreamï¼Œä½†æ˜¯ç°åœ¨æ”¯æŒä»¥Readerçš„æ–¹å¼è¿›è¡Œè¯»å– System.out.println((char) reader.read()); }catch (IOException e){ e.printStackTrace(); } } InputStreamReaderå’ŒOutputStreamWriteræœ¬è´¨ä¹Ÿæ˜¯Readerå’ŒWriterï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ”¾å…¥BufferedReaderæ¥å®ç°æ›´åŠ æ–¹ä¾¿çš„æ“ä½œã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:3:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"æ‰“å°æµ æ‰“å°æµå…¶å®æˆ‘ä»¬ä»ä¸€å¼€å§‹å°±åœ¨ä½¿ç”¨äº†ï¼Œæ¯”å¦‚System.outå°±æ˜¯ä¸€ä¸ªPrintStreamï¼ŒPrintStreamä¹Ÿç»§æ‰¿è‡ªFilterOutputStreamç±»å› æ­¤ä¾ç„¶æ˜¯è£…é¥°æˆ‘ä»¬ä¼ å…¥çš„è¾“å‡ºæµï¼Œä½†æ˜¯å®ƒå­˜åœ¨è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ï¼Œä¾‹å¦‚å½“å‘PrintStreamæµä¸­å†™å…¥ä¸€ä¸ªå­—èŠ‚æ•°ç»„åè‡ªåŠ¨è°ƒç”¨flush()æ–¹æ³•ã€‚PrintStreamä¹Ÿæ°¸è¿œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯ä½¿ç”¨å†…éƒ¨æ£€æŸ¥æœºåˆ¶checkError()æ–¹æ³•è¿›è¡Œé”™è¯¯æ£€æŸ¥ã€‚æœ€æ–¹ä¾¿çš„æ˜¯ï¼Œå®ƒèƒ½å¤Ÿæ ¼å¼åŒ–ä»»æ„çš„ç±»å‹ï¼Œå°†å®ƒä»¬ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å†™å…¥åˆ°è¾“å‡ºæµã€‚ public final static PrintStream out = null; å¯ä»¥çœ‹åˆ°System.outä¹Ÿæ˜¯PrintStreamï¼Œä¸è¿‡é»˜è®¤æ˜¯å‘æ§åˆ¶å°æ‰“å°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å®ƒå‘æ–‡ä»¶ä¸­æ‰“å°ï¼š public static void main(String[] args) { try(PrintStream stream = new PrintStream(new FileOutputStream(\"test.txt\"))){ stream.println(\"lbwnb\"); //å…¶å®System.outå°±æ˜¯ä¸€ä¸ªPrintStream }catch (IOException e){ e.printStackTrace(); } } æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„printlnæ–¹æ³•å°±æ˜¯PrintStreamä¸­çš„æ–¹æ³•ï¼Œå®ƒä¼šç›´æ¥æ‰“å°åŸºæœ¬æ•°æ®ç±»å‹æˆ–æ˜¯è°ƒç”¨å¯¹è±¡çš„toString()æ–¹æ³•å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ï¼Œæ”¾å…¥ç¼“å†²åŒºå†ç»è¿‡è½¬æ¢æµè¾“å‡ºåˆ°ç»™å®šçš„è¾“å‡ºæµä¸Šã€‚ å› æ­¤å®é™…ä¸Šå†…éƒ¨è¿˜åŒ…å«è¿™ä¸¤ä¸ªå†…å®¹ï¼š /** * Track both the text- and character-output streams, so that their buffers * can be flushed without flushing the entire stream. */ private BufferedWriter textOut; private OutputStreamWriter charOut; ä¸æ­¤ç›¸åŒçš„è¿˜æœ‰ä¸€ä¸ªPrintWriterï¼Œä¸è¿‡ä»–ä»¬çš„åŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼ŒPrintWriterçš„æ„é€ æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªWriterä½œä¸ºå‚æ•°ï¼Œè¿™é‡Œå°±ä¸å†åšè¿‡å¤šé˜è¿°äº†ã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:4:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"æ•°æ®æµ æ•°æ®æµDataInputStreamä¹Ÿæ˜¯FilterInputStreamçš„å­ç±»ï¼ŒåŒæ ·é‡‡ç”¨è£…é¥°è€…æ¨¡å¼ï¼Œæœ€å¤§çš„ä¸åŒæ˜¯å®ƒæ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹çš„ç›´æ¥è¯»å–ï¼š public static void main(String[] args) { try (DataInputStream dataInputStream = new DataInputStream(new FileInputStream(\"test.txt\"))){ System.out.println(dataInputStream.readBoolean()); //ç›´æ¥å°†æ•°æ®è¯»å–ä¸ºä»»æ„åŸºæœ¬æ•°æ®ç±»å‹ }catch (IOException e) { e.printStackTrace(); } } ç”¨äºå†™å…¥åŸºæœ¬æ•°æ®ç±»å‹ï¼š public static void main(String[] args) { try (DataOutputStream dataOutputStream = new DataOutputStream(new FileOutputStream(\"output.txt\"))){ dataOutputStream.writeBoolean(false); }catch (IOException e) { e.printStackTrace(); } } æ³¨æ„ï¼Œå†™å…¥çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶ä¸æ˜¯å†™å…¥çš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨DataInputStreamå¯ä»¥è¯»å–ï¼Œä¸€èˆ¬ä»–ä»¬æ˜¯é…åˆä¸€èµ·ä½¿ç”¨çš„ã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:5:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"å¯¹è±¡æµ æ—¢ç„¶åŸºæœ¬æ•°æ®ç±»å‹èƒ½å¤Ÿè¯»å–å’Œå†™å…¥åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆèƒ½å¦å°†å¯¹è±¡ä¹Ÿæ”¯æŒå‘¢ï¼ŸObjectOutputStreamä¸ä»…æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œé€šè¿‡å¯¹å¯¹è±¡çš„åºåˆ—åŒ–æ“ä½œï¼Œä»¥æŸç§æ ¼å¼ä¿å­˜å¯¹è±¡ï¼Œæ¥æ”¯æŒå¯¹è±¡ç±»å‹çš„IOï¼Œæ³¨æ„ï¼šå®ƒä¸æ˜¯ç»§æ‰¿è‡ªFilterInputStreamçš„ã€‚ public static void main(String[] args) { try (ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(\"output.txt\")); ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream(\"output.txt\"))){ People people = new People(\"lbw\"); outputStream.writeObject(people); outputStream.flush(); people = (People) inputStream.readObject(); System.out.println(people.name); }catch (IOException | ClassNotFoundException e) { e.printStackTrace(); } } static class People implements Serializable{ //å¿…é¡»å®ç°Serializableæ¥å£æ‰èƒ½è¢«åºåˆ—åŒ– String name; public People(String name){ this.name = name; } } åœ¨æˆ‘ä»¬åç»­çš„æ“ä½œä¸­ï¼Œæœ‰å¯èƒ½ä¼šä½¿å¾—è¿™ä¸ªç±»çš„ä¸€äº›ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œè€ŒåŸæ¥ä¿å­˜çš„æ•°æ®åªé€‚ç”¨äºä¹‹å‰ç‰ˆæœ¬çš„è¿™ä¸ªç±»ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥åŒºåˆ†ç±»çš„ä¸åŒç‰ˆæœ¬ï¼š static class People implements Serializable{ private static final long serialVersionUID = 123456; //åœ¨åºåˆ—åŒ–æ—¶ï¼Œä¼šè¢«è‡ªåŠ¨æ·»åŠ è¿™ä¸ªå±æ€§ï¼Œå®ƒä»£è¡¨å½“å‰ç±»çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬ã€‚ String name; public People(String name){ this.name = name; } } å½“å‘ç”Ÿç‰ˆæœ¬ä¸åŒ¹é…æ—¶ï¼Œä¼šæ— æ³•ååºåˆ—åŒ–ä¸ºå¯¹è±¡ï¼š java.io.InvalidClassException: com.test.Main$People; local class incompatible: stream classdesc serialVersionUID = 123456, local class serialVersionUID = 1234567 at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:699) at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2003) at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1850) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2160) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1667) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461) at com.test.Main.main(Main.java:27) å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›æŸäº›å±æ€§å‚ä¸åˆ°åºåˆ—åŒ–ä¸­è¿›è¡Œä¿å­˜ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ transientå…³é”®å­—ï¼š public static void main(String[] args) { try (ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(\"output.txt\")); ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream(\"output.txt\"))){ People people = new People(\"lbw\"); outputStream.writeObject(people); outputStream.flush(); people = (People) inputStream.readObject(); System.out.println(people.name); //è™½ç„¶èƒ½å¾—åˆ°å¯¹è±¡ï¼Œä½†æ˜¯nameå±æ€§å¹¶æ²¡æœ‰ä¿å­˜ï¼Œå› æ­¤ä¸ºnull }catch (IOException | ClassNotFoundException e) { e.printStackTrace(); } } static class People implements Serializable{ private static final long serialVersionUID = 1234567; transient String name; public People(String name){ this.name = name; } } å…¶å®æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸€äº›JDKå†…éƒ¨çš„æºç ä¸­ï¼Œä¹Ÿå­˜åœ¨å¤§é‡çš„transientå…³é”®å­—ï¼Œä½¿å¾—æŸäº›å±æ€§ä¸å‚ä¸åºåˆ—åŒ–ï¼Œå–æ¶ˆè¿™äº›ä¸å¿…è¦ä¿å­˜çš„å±æ€§ï¼Œå¯ä»¥èŠ‚çœæ•°æ®ç©ºé—´å ç”¨ä»¥åŠå‡å°‘åºåˆ—åŒ–æ—¶é—´ã€‚ ","date":"2022-01-23","objectID":"/posts/java-io/:6:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"Java I/Oç¼–ç¨‹å®æˆ˜ ","date":"2022-01-23","objectID":"/posts/java-io/:7:0","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ è¦æ±‚å®ç°ä¸€ä¸ªå›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼ˆæ§åˆ¶å°ï¼‰ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼šä¿å­˜ä¹¦ç±ä¿¡æ¯ï¼ˆè¦æ±‚æŒä¹…åŒ–ï¼‰ï¼ŒæŸ¥è¯¢ã€æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ä¹¦ç±ä¿¡æ¯ã€‚ å‚è€ƒä»£ç ï¼š import java.io.*; import java.util.HashSet; import java.util.Objects; import java.util.Scanner; public class Library { static private HashSet\u003cBook\u003e MAP; public static void main(String[] args) { //TODO æ³¨æ„å…ˆåˆ†é…å†…å­˜ Scanner scan = new Scanner(System.in); readData(); while (true) { System.out.println(\"============å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ===========\"); System.out.println(\"1.æ’å…¥æ•°æ®\"); System.out.println(\"2.ä¿®æ”¹æ•°æ®\"); System.out.println(\"3.æŸ¥è¯¢å›¾ä¹¦åˆ—è¡¨\"); System.out.println(\"4.åˆ é™¤å›¾ä¹¦\"); System.out.println(\"(æŒ‰ä¸‹ä»»æ„å…¶ä»–é”®é€€å‡ºç¨‹åº)\"); String str = scan.nextLine(); switch (str) { case \"1\": insertBooks(scan); break; case \"2\": modifyBook(scan); break; case \"3\": showBooks(); break; case \"4\": deleteBooks(scan); break; default: saveData(); scan.close(); return; } } } //TODO ç¨‹åºå¯åŠ¨å‰ï¼Œè¯»å–æŒä¹…åŒ–æ•°æ® private static void readData(){ File file = new File(\"data\"); if(file.exists()){ try(ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream(\"data\"))){ MAP = (HashSet\u003cBook\u003e) inputStream.readObject(); }catch (IOException|ClassNotFoundException e){ e.printStackTrace(); } }else { MAP = new HashSet\u003c\u003e(); } } //TODO ç¨‹åºç»“æŸæ—¶ï¼ŒæŒä¹…åºåˆ—åŒ–ä¿å­˜æ•°æ® private static void saveData(){ try(ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(\"data\"))){ outputStream.writeObject(MAP); outputStream.flush(); }catch (IOException e){ e.printStackTrace(); } } //TODO ä¿®æ”¹å›¾ä¹¦æ•°æ® private static void modifyBook(Scanner scan) { showBooks(); System.out.println(\"è¾“å…¥æ‚¨è¦ä¿®æ”¹ä¹¦ç±çš„ç´¢ä¹¦å·ï¼š\"); int index = scan.nextInt(); scan.nextLine(); Book t = new Book().setIndex(index); if (!MAP.contains(t)) { System.out.println(\"è¾“å…¥é”™è¯¯å›¾ä¹¦é¦†å†…æ— è¯¥ä¹¦ç±!\"); } else { System.out.println(\"è¯·è¾“å…¥æ‚¨è¦æ›´æ”¹çš„ä¿¡æ¯ï¼šä¹¦åï¼Œä½œè€…ï¼Œä»·æ ¼\"); String name = scan.nextLine(); String author = scan.nextLine(); double price = scan.nextDouble(); scan.nextLine(); for (Book tt : MAP) { if (tt.equals(t)) { tt.setAuthor(author); tt.setName(name); tt.setPrice(price); break; } } } } //TODO åˆ é™¤ä¹¦ç± private static void deleteBooks(Scanner scan) { showBooks(); System.out.println(\"è¯·è¾“å…¥è¦åˆ é™¤ä¹¦ç±çš„ç´¢ä¹¦å·ï¼š\"); int index = scan.nextInt(); scan.nextLine(); Book t = new Book().setIndex(index); if (!MAP.contains(t)) { System.out.println(\"ç´¢ä¹¦å·å‡ºé”™æ²¡æœ‰è¿™æ ·çš„ä¹¦ç±\"); } else { System.out.printf(\"åˆ é™¤ç´¢ä¹¦å·ä¸º:%d çš„ä¹¦ç±æˆåŠŸ!\\n\", index); MAP.remove(t); } } //TODO æ˜¾ç¤ºå›¾ä¹¦ä¿¡æ¯ private static void showBooks() { MAP.forEach(System.out::println); } //TODO æ’å…¥ä¹¦ç± private static void insertBooks(Scanner scan) { System.out.println(\"è¯·è¾“å…¥ ç´¢ä¹¦å· ä¹¦å ä½œè€… ä»·æ ¼ã€‚æ¯è¾“å…¥ä¸€ä¸ªä¿¡æ¯æŒ‰ä¸‹å›è½¦é”®ç¡®è®¤ï¼\"); MAP.add(new Book().setIndex(scan.nextInt()) .setName(scan.nextLine() + scan.nextLine()) .setAuthor(scan.nextLine()) .setPrice(scan.nextDouble()) ); scan.nextLine(); } //TODO ä¹¦ç±ç±» private static class Book implements Serializable{ int index;//ç´¢ä¹¦å· String name;//ä¹¦å String author;//ä½œè€… double price;//ä»·æ ¼ public Book setName(String name) { this.name = name; return this; } public Book setIndex(int index) { this.index = index; return this; } public Book setAuthor(String author) { this.author = author; return this; } public Book setPrice(double price) { this.price = price; return this; } @Override public String toString() { return \"ä¹¦ç±{\" + \"ç´¢ä¹¦å·=\" + index + \", ä¹¦å='\" + name + '\\'' + \", ä½œè€…='\" + author + '\\'' + \", ä»·æ ¼=\" + price + '}'; } @Override public boolean equals(Object o) { if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; Book book = (Book) o; return index == book.index; } @Override public int hashCode() { return Objects.hash(index); } } } ","date":"2022-01-23","objectID":"/posts/java-io/:7:1","tags":["Java I/O"],"title":"Java I/O","uri":"/posts/java-io/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaåå°„ä¸æ³¨è§£","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaåå°„å’Œæ³¨è§£ é…å¥—è§†é¢‘ **æ³¨æ„ï¼š**æœ¬ç« èŠ‚æ¶‰åŠåˆ°JVMç›¸å…³åº•å±‚åŸç†ï¼Œéš¾åº¦ä¼šæœ‰ä¸€äº›å¤§ã€‚ åå°„å°±æ˜¯æŠŠJavaç±»ä¸­çš„å„ä¸ªæˆåˆ†æ˜ å°„æˆä¸€ä¸ªä¸ªçš„Javaå¯¹è±¡ã€‚å³åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½è°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ã€‚è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½å«Javaçš„åå°„æœºåˆ¶ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æœºåˆ¶ï¼Œè·å–åˆ°ç±»çš„ä¸€äº›å±æ€§ï¼ŒåŒ…æ‹¬ç±»é‡Œé¢æœ‰å“ªäº›å­—æ®µï¼Œæœ‰å“ªäº›æ–¹æ³•ï¼Œç»§æ‰¿è‡ªå“ªä¸ªç±»ï¼Œç”šè‡³è¿˜èƒ½è·å–åˆ°æ³›å‹ï¼å®ƒçš„æƒé™éå¸¸é«˜ï¼Œæ…é‡ä½¿ç”¨ï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:0:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaç±»åŠ è½½æœºåˆ¶ åœ¨å­¦ä¹ Javaçš„åå°„æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ç±»çš„åŠ è½½æœºåˆ¶ï¼Œä¸€ä¸ªç±»æ˜¯å¦‚ä½•è¢«åŠ è½½å’Œä½¿ç”¨çš„ï¼š åœ¨Javaç¨‹åºå¯åŠ¨æ—¶ï¼ŒJVMä¼šå°†ä¸€éƒ¨åˆ†ç±»ï¼ˆclassæ–‡ä»¶ï¼‰å…ˆåŠ è½½ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç±»éƒ½ä¼šåœ¨ä¸€å¼€å§‹åŠ è½½ï¼‰ï¼Œé€šè¿‡ClassLoaderå°†ç±»åŠ è½½ï¼Œåœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼Œä¼šå°†ç±»çš„ä¿¡æ¯æå–å‡ºæ¥ï¼ˆå­˜æ”¾åœ¨å…ƒç©ºé—´ä¸­ï¼ŒJDK1.8ä¹‹å‰å­˜æ”¾åœ¨æ°¸ä¹…ä»£ï¼‰ï¼ŒåŒæ—¶ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªClasså¯¹è±¡å­˜æ”¾åœ¨å†…å­˜ï¼ˆå †å†…å­˜ï¼‰ï¼Œæ³¨æ„æ­¤Classå¯¹è±¡åªä¼šå­˜åœ¨ä¸€ä¸ªï¼Œä¸åŠ è½½çš„ç±»å”¯ä¸€å¯¹åº”ï¼ **æ€è€ƒï¼š**æ—¢ç„¶è¯´å’Œä¸åŠ è½½çš„ç±»å”¯ä¸€å¯¹åº”ï¼Œé‚£å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªä¸JDKåŒ…åä¸€æ ·ï¼ŒåŒæ—¶ç±»åä¹Ÿä¿æŒä¸€è‡´ï¼Œé‚£ä¹ˆJVMä¼šåŠ è½½è¿™ä¸ªç±»å—ï¼Ÿ package java.lang; public class String { //JDKæä¾›çš„Stringç±»ä¹Ÿæ˜¯ public static void main(String[] args) { System.out.println(\"æˆ‘å§“ğŸ´ï¼Œæˆ‘å«ğŸ´nb\"); } } æˆ‘ä»¬å‘ç°ï¼Œä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š é”™è¯¯: åœ¨ç±» java.lang.String ä¸­æ‰¾ä¸åˆ° main æ–¹æ³•, è¯·å°† main æ–¹æ³•å®šä¹‰ä¸º: public static void main(String[] args) ä½†æ˜¯æˆ‘ä»¬æ˜æ˜åœ¨è‡ªå·±å†™çš„Stringç±»ä¸­å®šä¹‰äº†mainæ–¹æ³•å•Šï¼Œä¸ºä»€ä¹ˆä¼šæ‰¾ä¸åˆ°æ­¤æ–¹æ³•å‘¢ï¼Ÿå®é™…ä¸Šè¿™æ˜¯ClassLoaderçš„åŒäº²å§”æ´¾æœºåˆ¶åœ¨ä¿æŠ¤Javaç¨‹åºçš„æ­£å¸¸è¿è¡Œï¼š å®é™…ä¸Šæˆ‘ä»¬çš„ç±»æœ€å¼€å§‹æ˜¯ç”±BootstarpClassLoaderè¿›è¡ŒåŠ è½½ï¼ŒBootstarpClassLoaderç”¨äºåŠ è½½JDKæä¾›çš„ç±»ï¼Œè€Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ç±»å®é™…ä¸Šæ˜¯AppClassLoaderï¼Œåªæœ‰BootstarpClassLoaderéƒ½æ²¡æœ‰åŠ è½½çš„ç±»ï¼Œæ‰ä¼šè®©AppClassLoaderæ¥åŠ è½½ï¼Œå› æ­¤æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„åŒååŒ…åŒåç±»ä¸ä¼šè¢«åŠ è½½ï¼Œè€Œå®é™…è¦å»å¯åŠ¨çš„æ˜¯çœŸæ­£çš„Stringç±»ï¼Œä¹Ÿå°±è‡ªç„¶æ‰¾ä¸åˆ°mainæ–¹æ³•äº†ï¼ public class Main { public static void main(String[] args) { System.out.println(Main.class.getClassLoader()); //æŸ¥çœ‹å½“å‰ç±»çš„ç±»åŠ è½½å™¨ System.out.println(Main.class.getClassLoader().getParent()); //çˆ¶åŠ è½½å™¨ System.out.println(Main.class.getClassLoader().getParent().getParent()); //çˆ·çˆ·åŠ è½½å™¨ System.out.println(String.class.getClassLoader()); //Stringç±»çš„åŠ è½½å™¨ } } ç”±äºBootstarpClassLoaderæ˜¯C++ç¼–å†™çš„ï¼Œæˆ‘ä»¬åœ¨Javaä¸­æ˜¯è·å–ä¸åˆ°çš„ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:1:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"Classå¯¹è±¡ é€šè¿‡å‰é¢ï¼Œæˆ‘ä»¬äº†è§£äº†ç±»çš„åŠ è½½ï¼ŒåŒæ—¶ä¼šæå–ä¸€ä¸ªç±»çš„ä¿¡æ¯ç”ŸæˆClasså¯¹è±¡å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œè€Œåå°„æœºåˆ¶å…¶å®å°±æ˜¯åˆ©ç”¨è¿™äº›å­˜æ”¾çš„ç±»ä¿¡æ¯ï¼Œæ¥è·å–ç±»çš„ä¿¡æ¯å’Œæ“ä½œç±»ã€‚é‚£ä¹ˆå¦‚ä½•è·å–åˆ°æ¯ä¸ªç±»å¯¹åº”çš„Classå¯¹è±¡å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š public static void main(String[] args) throws ClassNotFoundException { Class\u003cString\u003e clazz = String.class; //ä½¿ç”¨classå…³é”®å­—ï¼Œé€šè¿‡ç±»åè·å– Class\u003c?\u003e clazz2 = Class.forName(\"java.lang.String\"); //ä½¿ç”¨Classç±»é™æ€æ–¹æ³•forName()ï¼Œé€šè¿‡åŒ…å.ç±»åè·å–ï¼Œæ³¨æ„è¿”å›å€¼æ˜¯Class\u003c?\u003e Class\u003c?\u003e clazz3 = new String(\"cpdd\").getClass(); //é€šè¿‡å®ä¾‹å¯¹è±¡è·å– } æ³¨æ„Classç±»ä¹Ÿæ˜¯ä¸€ä¸ªæ³›å‹ç±»ï¼Œåªæœ‰ç¬¬ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤Ÿç›´æ¥è·å–åˆ°å¯¹åº”ç±»å‹çš„Classå¯¹è±¡ï¼Œè€Œä»¥ä¸‹ä¸¤ç§æ–¹æ³•ä½¿ç”¨äº†?é€šé…ç¬¦ä½œä¸ºè¿”å›å€¼ï¼Œä½†æ˜¯å®é™…ä¸Šéƒ½å’Œç¬¬ä¸€ä¸ªè¿”å›çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼š Class\u003cString\u003e clazz = String.class; //ä½¿ç”¨classå…³é”®å­—ï¼Œé€šè¿‡ç±»åè·å– Class\u003c?\u003e clazz2 = Class.forName(\"java.lang.String\"); //ä½¿ç”¨Classç±»é™æ€æ–¹æ³•forName()ï¼Œé€šè¿‡åŒ…å.ç±»åè·å–ï¼Œæ³¨æ„è¿”å›å€¼æ˜¯Class\u003c?\u003e Class\u003c?\u003e clazz3 = new String(\"cpdd\").getClass(); System.out.println(clazz == clazz2); System.out.println(clazz == clazz3); é€šè¿‡æ¯”è¾ƒï¼ŒéªŒè¯äº†æˆ‘ä»¬ä¸€å¼€å§‹çš„ç»“è®ºï¼Œåœ¨JVMä¸­æ¯ä¸ªç±»å§‹ç»ˆåªå­˜åœ¨ä¸€ä¸ªClasså¯¹è±¡ï¼Œæ— è®ºé€šè¿‡ä»€ä¹ˆæ–¹æ³•è·å–ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚ç°åœ¨æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜ï¼š public static void main(String[] args) { Class\u003c?\u003e clazz = int.class; //åŸºæœ¬æ•°æ®ç±»å‹æœ‰Classå¯¹è±¡å—ï¼Ÿ System.out.println(clazz); } è¿·äº†ï¼Œä¸æ˜¯æ¯ä¸ªç±»æ‰æœ‰Classå¯¹è±¡å—ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹åˆä¸æ˜¯ç±»ï¼Œè¿™ä¹Ÿè¡Œå—ï¼Ÿå®é™…ä¸Šï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿæœ‰å¯¹åº”çš„Classå¯¹è±¡ï¼ˆåå°„æ“ä½œå¯èƒ½éœ€è¦ç”¨åˆ°ï¼‰ï¼Œè€Œä¸”æˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡classå…³é”®å­—è·å–ï¼Œå…¶å®æœ¬è´¨ä¸Šæ˜¯å®šä¹‰åœ¨å¯¹åº”çš„åŒ…è£…ç±»ä¸­çš„ï¼š /** * The {@code Class} instance representing the primitive type * {@code int}. * * @since JDK1.1 */ @SuppressWarnings(\"unchecked\") public static final Class\u003cInteger\u003e TYPE = (Class\u003cInteger\u003e) Class.getPrimitiveClass(\"int\"); /* * Return the Virtual Machine's Class object for the named * primitive type */ static native Class\u003c?\u003e getPrimitiveClass(String name); //C++å®ç°ï¼Œå¹¶éJavaå®šä¹‰ æ¯ä¸ªåŒ…è£…ç±»ä¸­ï¼ˆåŒ…æ‹¬Voidï¼‰ï¼Œéƒ½æœ‰ä¸€ä¸ªè·å–åŸå§‹ç±»å‹Classæ–¹æ³•ï¼Œæ³¨æ„ï¼ŒgetPrimitiveClassè·å–çš„æ˜¯åŸå§‹ç±»å‹ï¼Œå¹¶ä¸æ˜¯åŒ…è£…ç±»å‹ï¼Œåªæ˜¯å¯ä»¥ä½¿ç”¨åŒ…è£…ç±»æ¥è¡¨ç¤ºã€‚ public static void main(String[] args) { Class\u003c?\u003e clazz = int.class; System.out.println(Integer.TYPE == int.class); } é€šè¿‡å¯¹æ¯”ï¼Œæˆ‘ä»¬å‘ç°å®é™…ä¸ŠåŒ…è£…ç±»å‹éƒ½æœ‰ä¸€ä¸ªTYPEï¼Œå…¶å®ä¹Ÿå°±æ˜¯åŸºæœ¬ç±»å‹çš„Classï¼Œé‚£ä¹ˆåŒ…è£…ç±»çš„Classå’ŒåŸºæœ¬ç±»çš„Classä¸€æ ·å—ï¼Ÿ public static void main(String[] args) { System.out.println(Integer.TYPE == Integer.class); } æˆ‘ä»¬å‘ç°ï¼ŒåŒ…è£…ç±»å‹çš„Classå¯¹è±¡å¹¶ä¸æ˜¯åŸºæœ¬ç±»å‹Classå¯¹è±¡ã€‚æ•°ç»„ç±»å‹ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œåªæ˜¯ç¼–ç¨‹ä¸å¯è§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥è·å–æ•°ç»„çš„Classå¯¹è±¡ï¼š public static void main(String[] args) { Class\u003cString[]\u003e clazz = String[].class; System.out.println(clazz.getName()); //è·å–ç±»åç§°ï¼ˆå¾—åˆ°çš„æ˜¯åŒ…å+ç±»åçš„å®Œæ•´åç§°ï¼‰ System.out.println(clazz.getSimpleName()); System.out.println(clazz.getTypeName()); System.out.println(clazz.getClassLoader()); //è·å–å®ƒçš„ç±»åŠ è½½å™¨ System.out.println(clazz.cast(new Integer(\"10\"))); //å¼ºåˆ¶ç±»å‹è½¬æ¢ } ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:2:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"å†è°ˆinstanceof æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨instanceofè¿›è¡Œç±»å‹æ¯”è¾ƒï¼š public static void main(String[] args) { String str = \"\"; System.out.println(str instanceof String); } å®ƒå¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ­¤æ¥å£æˆ–æ˜¯ç±»çš„å®ç°æˆ–æ˜¯å­ç±»ï¼Œè€Œç°åœ¨æˆ‘ä»¬æœ‰äº†æ›´å¤šçš„æ–¹å¼å»åˆ¤æ–­ç±»å‹ï¼š public static void main(String[] args) { String str = \"\"; System.out.println(str.getClass() == String.class); //ç›´æ¥åˆ¤æ–­æ˜¯å¦ä¸ºè¿™ä¸ªç±»å‹ } å¦‚æœéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºå­ç±»æˆ–æ˜¯æ¥å£/æŠ½è±¡ç±»çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨asSubClass()æ–¹æ³•ï¼š public static void main(String[] args) { Integer i = 10; i.getClass().asSubclass(Number.class); //å½“Integerä¸æ˜¯Numberçš„å­ç±»æ—¶ï¼Œä¼šäº§ç”Ÿå¼‚å¸¸ } ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:2:1","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"è·å–çˆ¶ç±»ä¿¡æ¯ é€šè¿‡getSuperclass()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°çˆ¶ç±»çš„Classå¯¹è±¡ï¼š public static void main(String[] args) { Integer i = 10; System.out.println(i.getClass().getSuperclass()); } ä¹Ÿå¯ä»¥é€šè¿‡getGenericSuperclass()è·å–çˆ¶ç±»çš„åŸå§‹ç±»å‹çš„Typeï¼š public static void main(String[] args) { Integer i = 10; Type type = i.getClass().getGenericSuperclass(); System.out.println(type); System.out.println(type instanceof Class); } æˆ‘ä»¬å‘ç°Typeå®é™…ä¸Šæ˜¯Classç±»çš„çˆ¶æ¥å£ï¼Œä½†æ˜¯è·å–åˆ°çš„Typeçš„å®ç°å¹¶ä¸ä¸€å®šæ˜¯Classã€‚ åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒä¸Šé¢è¿™æ ·è·å–çˆ¶æ¥å£ï¼š public static void main(String[] args) { Integer i = 10; for (Class\u003c?\u003e anInterface : i.getClass().getInterfaces()) { System.out.println(anInterface.getName()); } for (Type genericInterface : i.getClass().getGenericInterfaces()) { System.out.println(genericInterface.getTypeName()); } } ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:2:2","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"åˆ›å»ºç±»å¯¹è±¡ æ—¢ç„¶æˆ‘ä»¬æ‹¿åˆ°äº†ç±»çš„å®šä¹‰ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥é€šè¿‡Classå¯¹è±¡æ¥åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•ã€ä¿®æ”¹å˜é‡å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œé‚£æˆ‘ä»¬é¦–å…ˆæ¥æ¢è®¨ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡ï¼š public static void main(String[] args) throws InstantiationException, IllegalAccessException { Class\u003cStudent\u003e clazz = Student.class; Student student = clazz.newInstance(); student.test(); } static class Student{ public void test(){ System.out.println(\"è¨æ—¥æœ—\"); } } é€šè¿‡ä½¿ç”¨newInstance()æ–¹æ³•æ¥åˆ›å»ºå¯¹åº”ç±»å‹çš„å®ä¾‹ï¼Œè¿”å›æ³›å‹Tï¼Œæ³¨æ„å®ƒä¼šæŠ›å‡ºInstantiationExceptionå’ŒIllegalAccessExceptionå¼‚å¸¸ï¼Œé‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°å¼‚å¸¸å‘¢ï¼Ÿ public static void main(String[] args) throws InstantiationException, IllegalAccessException { Class\u003cStudent\u003e clazz = Student.class; Student student = clazz.newInstance(); student.test(); } static class Student{ public Student(String text){ } public void test(){ System.out.println(\"è¨æ—¥æœ—\"); } } å½“ç±»é»˜è®¤çš„æ„é€ æ–¹æ³•è¢«å¸¦å‚æ„é€ è¦†ç›–æ—¶ï¼Œä¼šå‡ºç°InstantiationExceptionå¼‚å¸¸ï¼Œå› ä¸ºnewInstance()åªé€‚ç”¨äºé»˜è®¤æ— å‚æ„é€ ã€‚ public static void main(String[] args) throws InstantiationException, IllegalAccessException { Class\u003cStudent\u003e clazz = Student.class; Student student = clazz.newInstance(); student.test(); } static class Student{ private Student(){} public void test(){ System.out.println(\"è¨æ—¥æœ—\"); } } å½“é»˜è®¤æ— å‚æ„é€ çš„æƒé™ä¸æ˜¯publicæ—¶ï¼Œä¼šå‡ºç°IllegalAccessExceptionå¼‚å¸¸ï¼Œè¡¨ç¤ºæˆ‘ä»¬æ— æƒå»è°ƒç”¨é»˜è®¤æ„é€ æ–¹æ³•ã€‚åœ¨JDK9ä¹‹åï¼Œä¸å†æ¨èä½¿ç”¨newInstance()æ–¹æ³•äº†ï¼Œè€Œæ˜¯ä½¿ç”¨æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»åˆ°çš„ï¼Œé€šè¿‡è·å–æ„é€ å™¨ï¼Œæ¥å®ä¾‹åŒ–å¯¹è±¡ï¼š public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException { Class\u003cStudent\u003e clazz = Student.class; Student student = clazz.getConstructor(String.class).newInstance(\"what's up\"); student.test(); } static class Student{ public Student(String str){} public void test(){ System.out.println(\"è¨æ—¥æœ—\"); } } é€šè¿‡è·å–ç±»çš„æ„é€ æ–¹æ³•ï¼ˆæ„é€ å™¨ï¼‰æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¼šæ›´åŠ åˆç†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨getConstructor()æ–¹æ³•æ¥è·å–ç±»çš„æ„é€ æ–¹æ³•ï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦å‘å…¶ä¸­å¡«å…¥å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ„é€ æ–¹æ³•éœ€è¦çš„ç±»å‹ï¼Œå½“ç„¶æˆ‘ä»¬è¿™é‡Œåªæ¼”ç¤ºäº†ã€‚é‚£ä¹ˆï¼Œå½“è®¿é—®æƒé™ä¸æ˜¯publicçš„æ—¶å€™å‘¢ï¼Ÿ public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException { Class\u003cStudent\u003e clazz = Student.class; Student student = clazz.getConstructor(String.class).newInstance(\"what's up\"); student.test(); } static class Student{ private Student(String str){} public void test(){ System.out.println(\"è¨æ—¥æœ—\"); } } æˆ‘ä»¬å‘ç°ï¼Œå½“è®¿é—®æƒé™ä¸è¶³æ—¶ï¼Œä¼šæ— æ³•æ‰¾åˆ°æ­¤æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°épublicçš„æ„é€ æ–¹æ³•å‘¢ï¼Ÿ Class\u003cStudent\u003e clazz = Student.class; Constructor\u003cStudent\u003e constructor = clazz.getDeclaredConstructor(String.class); constructor.setAccessible(true); //ä¿®æ”¹è®¿é—®æƒé™ Student student = constructor.newInstance(\"what's up\"); student.test(); ä½¿ç”¨getDeclaredConstructor()æ–¹æ³•å¯ä»¥æ‰¾åˆ°ç±»ä¸­çš„épublicæ„é€ æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä¿®æ”¹è®¿é—®æƒé™ï¼Œåœ¨ä¿®æ”¹è®¿é—®æƒé™ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨épublicæ–¹æ³•äº†ï¼ˆè¿™æ„å‘³ç€ï¼Œåå°„å¯ä»¥æ— è§†æƒé™ä¿®é¥°ç¬¦è®¿é—®ç±»çš„å†…å®¹ï¼‰ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:3:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"è°ƒç”¨ç±»çš„æ–¹æ³• æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æ¥è°ƒç”¨ç±»çš„æ–¹æ³•ï¼ˆæœ¬è´¨ä¸Šè¿˜æ˜¯ç±»çš„å®ä¾‹è¿›è¡Œè°ƒç”¨ï¼‰åªæ˜¯åˆ©ç”¨åå°„æœºåˆ¶å®ç°äº†æ–¹æ³•çš„è°ƒç”¨ï¼Œæˆ‘ä»¬åœ¨åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼š package com.test; public class Student { public void test(String str){ System.out.println(\"è¨æ—¥æœ—\"+str); } } è¿™æ¬¡æˆ‘ä»¬é€šè¿‡forName(String)æ¥æ‰¾åˆ°è¿™ä¸ªç±»å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼š public static void main(String[] args) throws ReflectiveOperationException { Class\u003c?\u003e clazz = Class.forName(\"com.test.Student\"); Object instance = clazz.newInstance(); //åˆ›å»ºå‡ºå­¦ç”Ÿå¯¹è±¡ Method method = clazz.getMethod(\"test\", String.class); //é€šè¿‡æ–¹æ³•åå’Œå½¢å‚ç±»å‹è·å–ç±»ä¸­çš„æ–¹æ³• method.invoke(instance, \"what's up\"); //é€šè¿‡Methodå¯¹è±¡çš„invokeæ–¹æ³•æ¥è°ƒç”¨æ–¹æ³• } é€šè¿‡è°ƒç”¨getMethod()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°ç±»ä¸­æ‰€æœ‰å£°æ˜ä¸ºpublicçš„æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªMethodå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Methodå¯¹è±¡çš„invoke()æ–¹æ³•ï¼ˆè¿”å›å€¼å°±æ˜¯æ–¹æ³•çš„è¿”å›å€¼ï¼Œå› ä¸ºè¿™é‡Œæ˜¯voidï¼Œè¿”å›å€¼ä¸ºnullï¼‰æ¥è°ƒç”¨å·²ç»è·å–åˆ°çš„æ–¹æ³•ï¼Œæ³¨æ„ä¼ å‚ã€‚ æˆ‘ä»¬å‘ç°ï¼Œåˆ©ç”¨åå°„ä¹‹åï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä»æ„é€ åˆ°æ–¹æ³•è°ƒç”¨ï¼Œæ²¡æœ‰ä»»ä½•ä¸€å¤„éœ€è¦å¼•ç”¨åˆ°å¯¹è±¡çš„å®é™…ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¯¼å…¥Studentç±»ï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯åå°„åœ¨ä»£æ›¿è¿›è¡Œæ“ä½œï¼Œä½¿å¾—æ•´ä¸ªè¿‡ç¨‹è¢«æ¨¡ç³Šäº†ï¼Œè¿‡å¤šçš„ä½¿ç”¨åå°„ï¼Œä¼šæå¤§åœ°é™ä½åæœŸç»´æŠ¤æ€§ã€‚ åŒæ„é€ æ–¹æ³•ä¸€æ ·ï¼Œå½“å‡ºç°épublicæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æ¥æ— è§†æƒé™ä¿®é¥°ç¬¦ï¼Œè·å–épublicæ–¹æ³•å¹¶è°ƒç”¨ï¼Œç°åœ¨æˆ‘ä»¬å°†test()æ–¹æ³•çš„æƒé™ä¿®é¥°ç¬¦æ”¹ä¸ºprivateï¼š public static void main(String[] args) throws ReflectiveOperationException { Class\u003c?\u003e clazz = Class.forName(\"com.test.Student\"); Object instance = clazz.newInstance(); //åˆ›å»ºå‡ºå­¦ç”Ÿå¯¹è±¡ Method method = clazz.getDeclaredMethod(\"test\", String.class); //é€šè¿‡æ–¹æ³•åå’Œå½¢å‚ç±»å‹è·å–ç±»ä¸­çš„æ–¹æ³• method.setAccessible(true); method.invoke(instance, \"what's up\"); //é€šè¿‡Methodå¯¹è±¡çš„invokeæ–¹æ³•æ¥è°ƒç”¨æ–¹æ³• } Methodå’ŒConstructoréƒ½å’ŒClassä¸€æ ·ï¼Œä»–ä»¬å­˜å‚¨äº†æ–¹æ³•çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–¹æ³•çš„å½¢å¼å‚æ•°åˆ—è¡¨ï¼Œè¿”å›å€¼ï¼Œæ–¹æ³•çš„åç§°ç­‰å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡Methodå¯¹è±¡æ¥è·å–è¿™äº›ä¿¡æ¯ï¼š public static void main(String[] args) throws ReflectiveOperationException { Class\u003c?\u003e clazz = Class.forName(\"com.test.Student\"); Method method = clazz.getDeclaredMethod(\"test\", String.class); //é€šè¿‡æ–¹æ³•åå’Œå½¢å‚ç±»å‹è·å–ç±»ä¸­çš„æ–¹æ³• System.out.println(method.getName()); //è·å–æ–¹æ³•åç§° System.out.println(method.getReturnType()); //è·å–è¿”å›å€¼ç±»å‹ } å½“æ–¹æ³•çš„å‚æ•°ä¸ºå¯å˜å‚æ•°æ—¶ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è·å–æ–¹æ³•å‘¢ï¼Ÿå®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰å°±å·²ç»æåˆ°è¿‡ï¼Œå¯å˜å‚æ•°å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æ•°ç»„çš„classå¯¹è±¡è¡¨ç¤ºï¼š Method method = clazz.getDeclaredMethod(\"test\", String[].class); åå°„éå¸¸å¼ºå¤§ï¼Œå°¤å…¶æ˜¯æˆ‘ä»¬æåˆ°çš„è¶Šæƒè®¿é—®ï¼Œä½†æ˜¯è¯·ä¸€å®šè°¨æ…ä½¿ç”¨ï¼Œåˆ«äººå°†æŸä¸ªæ–¹æ³•è®¾ç½®ä¸ºprivateä¸€å®šæœ‰ä»–çš„ç†ç”±ï¼Œå¦‚æœå®åœ¨æ˜¯éœ€è¦ä½¿ç”¨åˆ«äººå®šä¹‰ä¸ºprivateçš„æ–¹æ³•ï¼Œå°±å¿…é¡»ç¡®ä¿è¿™æ ·åšæ˜¯å®‰å…¨çš„ï¼Œåœ¨æ²¡æœ‰äº†è§£åˆ«äººä»£ç çš„æ•´ä¸ªè¿‡ç¨‹å°±å¼ºè¡Œè¶Šæƒè®¿é—®ï¼Œå¯èƒ½ä¼šå‡ºç°æ— æ³•é¢„çŸ¥çš„é”™è¯¯ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:4:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"ä¿®æ”¹ç±»çš„å±æ€§ æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡åå°„è®¿é—®ä¸€ä¸ªç±»ä¸­å®šä¹‰çš„æˆå‘˜å­—æ®µä¹Ÿå¯ä»¥ä¿®æ”¹ä¸€ä¸ªç±»çš„å¯¹è±¡ä¸­çš„æˆå‘˜å­—æ®µå€¼ï¼Œé€šè¿‡getField()æ–¹æ³•æ¥è·å–ä¸€ä¸ªç±»å®šä¹‰çš„æŒ‡å®šå­—æ®µï¼š public static void main(String[] args) throws ReflectiveOperationException { Class\u003c?\u003e clazz = Class.forName(\"com.test.Student\"); Object instance = clazz.newInstance(); Field field = clazz.getField(\"i\"); //è·å–ç±»çš„æˆå‘˜å­—æ®µi field.set(instance, 100); //å°†ç±»å®ä¾‹instanceçš„æˆå‘˜å­—æ®µiè®¾ç½®ä¸º100 Method method = clazz.getMethod(\"test\"); method.invoke(instance); } åœ¨å¾—åˆ°Fieldä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é€šè¿‡set()æ–¹æ³•ä¸ºæŸä¸ªå¯¹è±¡ï¼Œè®¾å®šæ­¤å±æ€§çš„å€¼ï¼Œæ¯”å¦‚ä¸Šé¢ï¼Œæˆ‘ä»¬å°±ä¸ºinstanceå¯¹è±¡è®¾å®šå€¼ä¸º100ï¼Œå½“è®¿é—®privateå­—æ®µæ—¶ï¼ŒåŒæ ·å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„æ“ä½œè¿›è¡Œè¶Šæƒè®¿é—®ï¼š public static void main(String[] args) throws ReflectiveOperationException { Class\u003c?\u003e clazz = Class.forName(\"com.test.Student\"); Object instance = clazz.newInstance(); Field field = clazz.getDeclaredField(\"i\"); //è·å–ç±»çš„æˆå‘˜å­—æ®µi field.setAccessible(true); field.set(instance, 100); //å°†ç±»å®ä¾‹instanceçš„æˆå‘˜å­—æ®µiè®¾ç½®ä¸º100 Method method = clazz.getMethod(\"test\"); method.invoke(instance); } ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œåå°„å‡ ä¹å¯ä»¥æŠŠä¸€ä¸ªç±»çš„è€åº•éƒ½ç»™æ‰’å‡ºæ¥ï¼Œä»»ä½•å±æ€§ï¼Œä»»ä½•å†…å®¹ï¼Œéƒ½å¯ä»¥è¢«åå°„ä¿®æ”¹ï¼Œæ— è®ºæƒé™ä¿®é¥°ç¬¦æ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆï¼Œå¦‚æœæˆ‘çš„å­—æ®µè¢«æ ‡è®°ä¸ºfinalå‘¢ï¼Ÿç°åœ¨åœ¨å­—æ®µiå‰é¢æ·»åŠ finalå…³é”®å­—ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ•ˆæœï¼š private final int i = 10; è¿™æ—¶ï¼Œå½“å­—æ®µä¸ºfinalæ—¶ï¼Œå°±ä¿®æ”¹å¤±è´¥äº†ï¼å½“ç„¶ï¼Œé€šè¿‡åå°„å¯ä»¥ç›´æ¥å°†finalä¿®é¥°ç¬¦ç›´æ¥å»é™¤ï¼Œå»é™¤åï¼Œå°±å¯ä»¥éšæ„ä¿®æ”¹å†…å®¹äº†ï¼Œæˆ‘ä»¬æ¥å°è¯•ä¿®æ”¹Integerçš„valueå€¼ï¼š public static void main(String[] args) throws ReflectiveOperationException { Integer i = 10; Field field = Integer.class.getDeclaredField(\"value\"); Field modifiersField = Field.class.getDeclaredField(\"modifiers\"); //è¿™é‡Œè¦è·å–Fieldç±»çš„modifierså­—æ®µè¿›è¡Œä¿®æ”¹ modifiersField.setAccessible(true); modifiersField.setInt(field,field.getModifiers()\u0026~Modifier.FINAL); //å»é™¤finalæ ‡è®° field.setAccessible(true); field.set(i, 100); //å¼ºè¡Œè®¾ç½®å€¼ System.out.println(i); } æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåå°„éå¸¸æš´åŠ›ï¼Œå°±è¿è¢«å®šä¹‰ä¸ºfinalå­—æ®µçš„å€¼éƒ½èƒ½å¼ºè¡Œä¿®æ”¹ï¼Œå‡ ä¹èƒ½å¤Ÿæ— è§†ä¸€åˆ‡é˜»æ‹¦ã€‚æˆ‘ä»¬æ¥è¯•è¯•çœ‹ä¿®æ”¹ä¸€äº›å…¶ä»–çš„ç±»å‹ï¼š public static void main(String[] args) throws ReflectiveOperationException { List\u003cString\u003e i = new ArrayList\u003c\u003e(); Field field = ArrayList.class.getDeclaredField(\"size\"); field.setAccessible(true); field.set(i, 10); i.add(\"æµ‹è¯•\"); //åªæ·»åŠ ä¸€ä¸ªå…ƒç´  System.out.println(i.size()); //å¤§å°ç›´æ¥å˜æˆ11 i.remove(10); //çç§»é™¤éƒ½ä¸å¸¦æŠ¥é”™çš„ï¼Œæ·¦ } å®é™…ä¸Šï¼Œæ•´ä¸ªArrayListä½“ç³»ç”±äºæˆ‘ä»¬çš„åå°„æ“ä½œï¼Œå¯¼è‡´è¢«ç ´åï¼Œå› æ­¤å®ƒå·²ç»æ— æ³•æ­£å¸¸å·¥ä½œäº†ï¼ å†æ¬¡å¼ºè°ƒï¼Œåœ¨è¿›è¡Œåå°„æ“ä½œæ—¶ï¼Œå¿…é¡»æ³¨æ„æ˜¯å¦å®‰å…¨ï¼Œè™½ç„¶æ‹¥æœ‰äº†åˆ›ä¸–ä¸»çš„èƒ½åŠ›ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½æ»¥ç”¨ï¼Œæˆ‘ä»¬åªèƒ½æŠŠå®ƒå½“åšä¸€ä¸ªä¸å¾—å·²æ‰å»ä½¿ç”¨çš„å·¥å…·ï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:5:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"è‡ªå®šä¹‰ClassLoaderåŠ è½½ç±» æˆ‘ä»¬å¯ä»¥è‡ªå·±æ‰‹åŠ¨å°†classæ–‡ä»¶åŠ è½½åˆ°JVMä¸­å—ï¼Ÿå…ˆå†™å¥½æˆ‘ä»¬å®šä¹‰çš„ç±»ï¼š package com.test; public class Test { public String text; public void test(String str){ System.out.println(text+\" \u003e æˆ‘æ˜¯æµ‹è¯•æ–¹æ³•ï¼\"+str); } } é€šè¿‡javacå‘½ä»¤ï¼Œæ‰‹åŠ¨ç¼–è¯‘ä¸€ä¸ª.classæ–‡ä»¶ï¼š nagocoler@NagodeMacBook-Pro HelloWorld % javac src/main/java/com/test/Test.java ç¼–è¯‘åï¼Œå¾—åˆ°ä¸€ä¸ªclassæ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒæ”¾åˆ°æ ¹ç›®å½•ä¸‹ï¼Œç„¶åç¼–å†™ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ClassLoaderï¼Œå› ä¸ºæ™®é€šçš„ClassLoaderæ— æ³•åŠ è½½äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„æ¥è®©å®ƒæ”¯æŒï¼š //å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„ClassLoader static class MyClassLoader extends ClassLoader{ public Class\u003c?\u003e defineClass(String name, byte[] b){ return defineClass(name, b, 0, b.length); //è°ƒç”¨protectedæ–¹æ³•ï¼Œæ”¯æŒè½½å…¥å¤–éƒ¨classæ–‡ä»¶ } } public static void main(String[] args) throws IOException { MyClassLoader classLoader = new MyClassLoader(); FileInputStream stream = new FileInputStream(\"Test.class\"); byte[] bytes = new byte[stream.available()]; stream.read(bytes); Class\u003c?\u003e clazz = classLoader.defineClass(\"com.test.Test\", bytes); //ç±»åå¿…é¡»å’Œæˆ‘ä»¬å®šä¹‰çš„ä¿æŒä¸€è‡´ System.out.println(clazz.getName()); //æˆåŠŸåŠ è½½å¤–éƒ¨classæ–‡ä»¶ } ç°åœ¨ï¼Œæˆ‘ä»¬å°±å°†æ­¤classæ–‡ä»¶è¯»å–å¹¶è§£æä¸ºClassäº†ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¯¹æ­¤ç±»è¿›è¡Œæ“ä½œäº†ï¼ˆæ³¨æ„ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨æ­¤ç±»å‹ï¼Œå› ä¸ºå®ƒæ˜¯æˆ‘ä»¬ç›´æ¥åŠ è½½çš„ï¼‰ï¼Œæˆ‘ä»¬æ¥è¯•è¯•çœ‹åˆ›å»ºä¸€ä¸ªæ­¤ç±»çš„å¯¹è±¡å¹¶è°ƒç”¨å…¶æ–¹æ³•ï¼š try { Object obj = clazz.newInstance(); Method method = clazz.getMethod(\"test\", String.class); //è·å–æˆ‘ä»¬å®šä¹‰çš„test(String str)æ–¹æ³• method.invoke(obj, \"å“¥ä»¬è¿™ç“œå¤šå°‘é’±ä¸€æ–¤ï¼Ÿ\"); }catch (Exception e){ e.printStackTrace(); } æˆ‘ä»¬æ¥è¯•è¯•çœ‹ä¿®æ”¹æˆå‘˜å­—æ®µä¹‹åï¼Œå†æ¥è°ƒç”¨æ­¤æ–¹æ³•ï¼š try { Object obj = clazz.newInstance(); Field field = clazz.getField(\"text\"); //è·å–æˆå‘˜å˜é‡ String text; field.set(obj, \"åå¼º\"); Method method = clazz.getMethod(\"test\", String.class); //è·å–æˆ‘ä»¬å®šä¹‰çš„test(String str)æ–¹æ³• method.invoke(obj, \"å“¥ä»¬è¿™ç“œå¤šå°‘é’±ä¸€æ–¤ï¼Ÿ\"); }catch (Exception e){ e.printStackTrace(); } é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¤–éƒ¨åŠ è½½ç”šè‡³æ˜¯ç½‘ç»œåŠ è½½ä¸€ä¸ªç±»ï¼Œåªéœ€è¦æŠŠç±»æ–‡ä»¶ä¼ é€’å³å¯ï¼Œè¿™æ ·å°±æ— éœ€å†å°†ä»£ç å†™åœ¨æœ¬åœ°ï¼Œè€Œæ˜¯åŠ¨æ€è¿›è¡Œä¼ é€’ï¼Œä¸ä»…å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šé˜²æ­¢æºä»£ç è¢«åç¼–è¯‘ï¼ˆåªæ˜¯ä¸€å®šç¨‹åº¦ä¸Šï¼Œæƒ³ç ´è§£ä½ ä»£ç æœ‰çš„æ˜¯æ–¹æ³•ï¼‰ï¼Œè€Œä¸”åœ¨æ›´å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹byte[]è¿›è¡ŒåŠ å¯†ï¼Œä¿è¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:6:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"æ³¨è§£ å…¶å®æˆ‘ä»¬åœ¨ä¹‹å‰å°±æ¥è§¦åˆ°æ³¨è§£äº†ï¼Œæ¯”å¦‚@Overrideè¡¨ç¤ºé‡å†™çˆ¶ç±»æ–¹æ³•ï¼ˆå½“ç„¶ä¸åŠ æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ­¤æ³¨è§£åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è‡ªåŠ¨ä¸¢å¼ƒï¼‰æ³¨è§£æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œåªä¸è¿‡å®ƒçš„ç”¨æ³•æ¯”è¾ƒç‰¹æ®Šã€‚ æ³¨è§£å¯ä»¥è¢«æ ‡æ³¨åœ¨ä»»æ„åœ°æ–¹ï¼ŒåŒ…æ‹¬æ–¹æ³•ä¸Šã€ç±»åä¸Šã€å‚æ•°ä¸Šã€æˆå‘˜å±æ€§ä¸Šã€æ³¨è§£å®šä¹‰ä¸Šç­‰ï¼Œå°±åƒæ³¨é‡Šä¸€æ ·ï¼Œå®ƒç›¸å½“äºæˆ‘ä»¬å¯¹æŸæ ·ä¸œè¥¿çš„ä¸€ä¸ªæ ‡è®°ã€‚è€Œä¸æ³¨é‡Šä¸åŒçš„æ˜¯ï¼Œæ³¨è§£å¯ä»¥é€šè¿‡åå°„åœ¨è¿è¡Œæ—¶è·å–ï¼Œæ³¨è§£ä¹Ÿå¯ä»¥é€‰æ‹©æ˜¯å¦ä¿ç•™åˆ°è¿è¡Œæ—¶ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:7:0","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"é¢„è®¾æ³¨è§£ JDKé¢„è®¾äº†ä»¥ä¸‹æ³¨è§£ï¼Œä½œç”¨äºä»£ç ï¼š @Override - æ£€æŸ¥ï¼ˆä»…ä»…æ˜¯æ£€æŸ¥ï¼Œä¸ä¿ç•™åˆ°è¿è¡Œæ—¶ï¼‰è¯¥æ–¹æ³•æ˜¯å¦æ˜¯é‡å†™æ–¹æ³•ã€‚å¦‚æœå‘ç°å…¶çˆ¶ç±»ï¼Œæˆ–è€…æ˜¯å¼•ç”¨çš„æ¥å£ä¸­å¹¶æ²¡æœ‰è¯¥æ–¹æ³•æ—¶ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚ @Deprecated - æ ‡è®°è¿‡æ—¶æ–¹æ³•ã€‚å¦‚æœä½¿ç”¨è¯¥æ–¹æ³•ï¼Œä¼šæŠ¥ç¼–è¯‘è­¦å‘Šã€‚ @SuppressWarnings - æŒ‡ç¤ºç¼–è¯‘å™¨å»å¿½ç•¥æ³¨è§£ä¸­å£°æ˜çš„è­¦å‘Šï¼ˆä»…ä»…ç¼–è¯‘å™¨é˜¶æ®µï¼Œä¸ä¿ç•™åˆ°è¿è¡Œæ—¶ï¼‰ @FunctionalInterface - Java 8 å¼€å§‹æ”¯æŒï¼Œæ ‡è¯†ä¸€ä¸ªåŒ¿åå‡½æ•°æˆ–å‡½æ•°å¼æ¥å£ã€‚ @SafeVarargs - Java 7 å¼€å§‹æ”¯æŒï¼Œå¿½ç•¥ä»»ä½•ä½¿ç”¨å‚æ•°ä¸ºæ³›å‹å˜é‡çš„æ–¹æ³•æˆ–æ„é€ å‡½æ•°è°ƒç”¨äº§ç”Ÿçš„è­¦å‘Šã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:7:1","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"å…ƒæ³¨è§£ å…ƒæ³¨è§£æ˜¯ä½œç”¨äºæ³¨è§£ä¸Šçš„æ³¨è§£ï¼Œç”¨äºæˆ‘ä»¬ç¼–å†™è‡ªå®šä¹‰çš„æ³¨è§£ï¼š @Retention - æ ‡è¯†è¿™ä¸ªæ³¨è§£æ€ä¹ˆä¿å­˜ï¼Œæ˜¯åªåœ¨ä»£ç ä¸­ï¼Œè¿˜æ˜¯ç¼–å…¥classæ–‡ä»¶ä¸­ï¼Œæˆ–è€…æ˜¯åœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡åå°„è®¿é—®ã€‚ @Documented - æ ‡è®°è¿™äº›æ³¨è§£æ˜¯å¦åŒ…å«åœ¨ç”¨æˆ·æ–‡æ¡£ä¸­ã€‚ @Target - æ ‡è®°è¿™ä¸ªæ³¨è§£åº”è¯¥æ˜¯å“ªç§ Java æˆå‘˜ã€‚ @Inherited - æ ‡è®°è¿™ä¸ªæ³¨è§£æ˜¯ç»§æ‰¿äºå“ªä¸ªæ³¨è§£ç±»(é»˜è®¤ æ³¨è§£å¹¶æ²¡æœ‰ç»§æ‰¿äºä»»ä½•å­ç±») @Repeatable - Java 8 å¼€å§‹æ”¯æŒï¼Œæ ‡è¯†æŸæ³¨è§£å¯ä»¥åœ¨åŒä¸€ä¸ªå£°æ˜ä¸Šä½¿ç”¨å¤šæ¬¡ã€‚ çœ‹äº†è¿™ä¹ˆå¤šé¢„è®¾çš„æ³¨è§£ï¼Œä½ ä»¬è‚¯å®šçœ¼èŠ±ç¼­ä¹±äº†ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹çœ‹@Overrideæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š @Target(ElementType.METHOD) @Retention(RetentionPolicy.SOURCE) public @interface Override { } è¯¥æ³¨è§£ç”±@Targeté™å®šä¸ºåªèƒ½ä½œç”¨äºæ–¹æ³•ä¸Šï¼ŒElementTypeæ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºæ­¤æšä¸¾çš„ä½œç”¨åŸŸï¼Œä¸€ä¸ªæ³¨è§£å¯ä»¥æœ‰å¾ˆå¤šä¸ªä½œç”¨åŸŸã€‚@Retentionè¡¨ç¤ºæ­¤æ³¨è§£çš„ä¿ç•™ç­–ç•¥ï¼ŒåŒ…æ‹¬ä¸‰ç§ç­–ç•¥ï¼Œåœ¨ä¸Šè¿°ä¸­æœ‰å†™åˆ°ï¼Œè€Œè¿™é‡Œå®šä¹‰ä¸ºåªåœ¨ä»£ç ä¸­ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰çš„æ³¨è§£éœ€è¦å®šä¹‰1ä¸ª@Retentionå’Œ1-nä¸ª@Targetã€‚ æ—¢ç„¶äº†è§£äº†å…ƒæ³¨è§£çš„ä½¿ç”¨å’Œæ³¨è§£çš„å®šä¹‰æ–¹å¼ï¼Œæˆ‘ä»¬å°±æ¥å°è¯•å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„æ³¨è§£ï¼š @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) public @interface Test { } è¿™é‡Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªTestæ³¨è§£ï¼Œå¹¶å°†å…¶ä¿ç•™åˆ°è¿è¡Œæ—¶ï¼ŒåŒæ—¶æ­¤æ³¨è§£å¯ä»¥ä½œç”¨äºæ–¹æ³•æˆ–æ˜¯ç±»ä¸Šï¼š @Test public class Main { @Test public static void main(String[] args) { } } è¿™æ ·ï¼Œä¸€ä¸ªæœ€ç®€å•çš„æ³¨è§£å°±è¢«æˆ‘ä»¬åˆ›å»ºäº†ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:7:2","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"æ³¨è§£çš„ä½¿ç”¨ æˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ³¨è§£ä¸­å®šä¹‰ä¸€äº›å±æ€§ï¼Œæ³¨è§£çš„å±æ€§ä¹Ÿå«åšæˆå‘˜å˜é‡ï¼Œæ³¨è§£åªæœ‰æˆå‘˜å˜é‡ï¼Œæ²¡æœ‰æ–¹æ³•ã€‚æ³¨è§£çš„æˆå‘˜å˜é‡åœ¨æ³¨è§£çš„å®šä¹‰ä¸­ä»¥â€œæ— å½¢å‚çš„æ–¹æ³•â€å½¢å¼æ¥å£°æ˜ï¼Œå…¶æ–¹æ³•åå®šä¹‰äº†è¯¥æˆå‘˜å˜é‡çš„åå­—ï¼Œå…¶è¿”å›å€¼å®šä¹‰äº†è¯¥æˆå‘˜å˜é‡çš„ç±»å‹ï¼š @Target({ElementType.METHOD, ElementType.TYPE}) @Retention(RetentionPolicy.RUNTIME) public @interface Test { String value(); } é»˜è®¤åªæœ‰ä¸€ä¸ªå±æ€§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åå­—è®¾å®šä¸ºvalueï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä½¿ç”¨æ—¶æ‰‹åŠ¨æŒ‡å®šæ³¨è§£çš„å±æ€§åç§°ï¼Œä½¿ç”¨valueåˆ™æ— éœ€å¡«å…¥ï¼š @Target({ElementType.METHOD, ElementType.TYPE}) @Retention(RetentionPolicy.RUNTIME) public @interface Test { String test(); } public class Main { @Test(test = \"\") public static void main(String[] args) { } } æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨defaultå…³é”®å­—æ¥ä¸ºè¿™äº›å±æ€§æŒ‡å®šé»˜è®¤å€¼ï¼š @Target({ElementType.METHOD, ElementType.TYPE}) @Retention(RetentionPolicy.RUNTIME) public @interface Test { String value() default \"éƒ½çœ‹åˆ°è¿™é‡Œäº†ï¼Œç»™ä¸ªä¸‰è¿å§ï¼\"; } å½“å±æ€§å­˜åœ¨é»˜è®¤å€¼æ—¶ï¼Œä½¿ç”¨æ³¨è§£çš„æ—¶å€™å¯ä»¥ä¸ç”¨ä¼ å…¥å±æ€§å€¼ã€‚å½“å±æ€§ä¸ºæ•°ç»„æ—¶å‘¢ï¼Ÿ @Target({ElementType.METHOD, ElementType.TYPE}) @Retention(RetentionPolicy.RUNTIME) public @interface Test { String[] value(); } å½“å±æ€§ä¸ºæ•°ç»„ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ³¨è§£ä¼ å‚æ—¶ï¼Œå¦‚æœæ•°ç»„é‡Œé¢åªæœ‰ä¸€ä¸ªå†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼š @Test(\"å…³æ³¨ç‚¹äº†å—\") public static void main(String[] args) { } public class Main { @Test({\"value1\", \"value2\"}) //å¤šä¸ªå€¼æ—¶å°±ä½¿ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥ public static void main(String[] args) { } } ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:7:3","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"åå°„è·å–æ³¨è§£ æ—¢ç„¶æˆ‘ä»¬çš„æ³¨è§£å¯ä»¥ä¿ç•™åˆ°è¿è¡Œæ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¦‚ä½•è·å–æˆ‘ä»¬ç¼–å†™çš„æ³¨è§£ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°åå°„æœºåˆ¶ï¼š public static void main(String[] args) { Class\u003cStudent\u003e clazz = Student.class; for (Annotation annotation : clazz.getAnnotations()) { System.out.println(annotation.annotationType()); //è·å–ç±»å‹ System.out.println(annotation instanceof Test); //ç›´æ¥åˆ¤æ–­æ˜¯å¦ä¸ºTest Test test = (Test) annotation; System.out.println(test.value()); //è·å–æˆ‘ä»¬åœ¨æ³¨è§£ä¸­å†™å…¥çš„å†…å®¹ } } é€šè¿‡åå°„æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè·å–åˆ°æˆ‘ä»¬æ ‡è®°çš„æ³¨è§£ï¼ŒåŒæ—¶è¿˜èƒ½è·å–åˆ°æ³¨è§£ä¸­å¡«å…¥çš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œæ–¹æ³•ä¸Šçš„æ ‡è®°æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è·å–æ³¨è§£ï¼š public static void main(String[] args) throws NoSuchMethodException { Class\u003cStudent\u003e clazz = Student.class; for (Annotation annotation : clazz.getMethod(\"test\").getAnnotations()) { System.out.println(annotation.annotationType()); //è·å–ç±»å‹ System.out.println(annotation instanceof Test); //ç›´æ¥åˆ¤æ–­æ˜¯å¦ä¸ºTest Test test = (Test) annotation; System.out.println(test.value()); //è·å–æˆ‘ä»¬åœ¨æ³¨è§£ä¸­å†™å…¥çš„å†…å®¹ } } æ— è®ºæ˜¯æ–¹æ³•ã€ç±»ã€è¿˜æ˜¯å­—æ®µï¼Œéƒ½å¯ä»¥ä½¿ç”¨getAnnotations()æ–¹æ³•ï¼ˆè¿˜æœ‰å‡ ä¸ªåŒåçš„ï¼‰æ¥å¿«é€Ÿè·å–æˆ‘ä»¬æ ‡è®°çš„æ³¨è§£ã€‚ æ‰€ä»¥è¯´å‘¢ï¼Œè¿™ç©æ„å­¦æ¥æœ‰å•¥ç”¨ï¼Ÿä¸æ¯«getä¸åˆ°è¿™ç©æ„çš„ç”¨å¤„ã€‚å…¶å®ä¸æ˜¯ï¼Œç°é˜¶æ®µä½ ä»¬è¿˜ä½“ä¼šä¸åˆ°æ³¨è§£å¸¦æ¥çš„å¿«ä¹ï¼Œåœ¨æ¥è§¦åˆ°Springå’ŒSpringBootç­‰å¤§å‹æ¡†æ¶åï¼Œå°±èƒ½æ„Ÿå—åˆ°æ³¨è§£å¸¦æ¥çš„é­…åŠ›äº†ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/:7:4","tags":["Javaåå°„ä¸æ³¨è§£"],"title":"Javaåå°„ä¸æ³¨è§£","uri":"/posts/java%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E5%B0%84/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaå¤šçº¿ç¨‹","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaå¤šçº¿ç¨‹ é…å¥—è§†é¢‘ **æ³¨æ„ï¼š**æœ¬ç« èŠ‚ä¼šæ¶‰åŠåˆ° æ“ä½œç³»ç»Ÿ ç›¸å…³çŸ¥è¯†ã€‚ åœ¨äº†è§£å¤šçº¿ç¨‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ“ä½œç³»ç»Ÿä¸­æåˆ°çš„è¿›ç¨‹æ¦‚å¿µï¼š è¿›ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„å®ä½“ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆæ¯”å¦‚æˆ‘ä»¬è¿è¡ŒQQã€æµè§ˆå™¨ã€LOLã€ç½‘æ˜“äº‘éŸ³ä¹ç­‰è½¯ä»¶ï¼‰ï¼Œéƒ½æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼ŒCPUä¸€ä¸ªæ ¸å¿ƒåŒæ—¶åªèƒ½å¤„ç†ä¸€ä»¶äº‹æƒ…ï¼Œå½“å‡ºç°å¤šä¸ªè¿›ç¨‹éœ€è¦åŒæ—¶è¿è¡Œæ—¶ï¼ŒCPUä¸€èˆ¬é€šè¿‡æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼Œæ¥å®ç°å¤šä¸ªè¿›ç¨‹çš„åŒæ—¶è¿è¡Œã€‚ åœ¨æ—©æœŸçš„è®¡ç®—æœºä¸­ï¼Œè¿›ç¨‹æ˜¯æ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è¿è¡Œçš„æœ€å°å•ä½ï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘å¸Œæœ›ä¸¤ä¸ªä»»åŠ¡åŒæ—¶è¿›è¡Œï¼Œå°±å¿…é¡»è¿è¡Œä¸¤ä¸ªè¿›ç¨‹ï¼Œç”±äºæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡å°±å˜å¾—éå¸¸éº»çƒ¦ï¼ˆæ¯”å¦‚è¦å…±äº«æŸäº›æ•°æ®ï¼‰è€Œä¸”æ‰§è¡Œä¸åŒè¿›ç¨‹ä¼šäº§ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œéå¸¸è€—æ—¶ï¼Œé‚£ä¹ˆèƒ½å¦å®ç°åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å°±èƒ½å¤Ÿæ‰§è¡Œå¤šä¸ªä»»åŠ¡å‘¢ï¼Ÿ åæ¥ï¼Œçº¿ç¨‹æ¨ªç©ºå‡ºä¸–ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œä¸­ä¸€ä¸ªå•ä¸€çš„é¡ºåºæ§åˆ¶æµç¨‹ï¼Œç°åœ¨çº¿ç¨‹æ‰æ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆä¹Ÿå°±æ˜¯æ‰€åœ¨è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼‰ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢é€Ÿåº¦ä¹Ÿé«˜äºè¿›ç¨‹ã€‚ åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ä»å¼€å§‹ï¼Œä¸€ç›´ä»¥æ¥ç¼–å†™çš„éƒ½æ˜¯å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼ˆè¿è¡Œmain()æ–¹æ³•çš„å†…å®¹ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´åªèƒ½åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼ˆæ— è®ºä½ æ˜¯è°ƒç”¨æ–¹æ³•ã€è¿˜æ˜¯è¿›è¡Œè®¡ç®—ï¼Œå§‹ç»ˆéƒ½æ˜¯ä¾æ¬¡è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯åŒæ­¥çš„ï¼‰ï¼Œè€Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼ˆä¸¤ä¸ªæ–¹æ³•åŒæ—¶åœ¨è¿è¡Œæˆ–è€…æ˜¯ä¸¤ä¸ªè®¡ç®—åŒæ—¶åœ¨è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥çš„ï¼‰ï¼Œå°±éœ€è¦ç”¨åˆ°Javaå¤šçº¿ç¨‹æ¡†æ¶ã€‚å®é™…ä¸Šä¸€ä¸ªJavaç¨‹åºå¯åŠ¨åï¼Œä¼šåˆ›å»ºå¾ˆå¤šçº¿ç¨‹ï¼Œä¸ä»…ä»…åªè¿è¡Œä¸€ä¸ªä¸»çº¿ç¨‹ï¼š public static void main(String[] args) { ThreadMXBean bean = ManagementFactory.getThreadMXBean(); long[] ids = bean.getAllThreadIds(); ThreadInfo[] infos = bean.getThreadInfo(ids); for (ThreadInfo info : infos) { System.out.println(info.getThreadName()); } } å…³äºé™¤äº†mainçº¿ç¨‹é»˜è®¤ä»¥å¤–çš„çº¿ç¨‹ï¼Œæ¶‰åŠåˆ°JVMç›¸å…³åº•å±‚åŸç†ï¼Œåœ¨è¿™é‡Œä¸åšè®²è§£ï¼Œäº†è§£å°±è¡Œã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:0:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"çº¿ç¨‹çš„åˆ›å»ºå’Œå¯åŠ¨ é€šè¿‡åˆ›å»ºThreadå¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒThreadæ„é€ æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªRunnableæ¥å£çš„å®ç°ï¼ˆå…¶å®å°±æ˜¯ç¼–å†™è¦åœ¨å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œçš„å†…å®¹é€»è¾‘ï¼‰åŒæ—¶Runnableåªæœ‰ä¸€ä¸ªæœªå®ç°æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼š @FunctionalInterface public interface Runnable { /** * When an object implementing interface \u003ccode\u003eRunnable\u003c/code\u003e is used * to create a thread, starting the thread causes the object's * \u003ccode\u003erun\u003c/code\u003e method to be called in that separately executing * thread. * \u003cp\u003e * The general contract of the method \u003ccode\u003erun\u003c/code\u003e is that it may * take any action whatsoever. * * @see java.lang.Thread#run() */ public abstract void run(); } åˆ›å»ºå¥½åï¼Œé€šè¿‡è°ƒç”¨start()æ–¹æ³•æ¥è¿è¡Œæ­¤çº¿ç¨‹ï¼š public static void main(String[] args) { Thread t = new Thread(() -\u003e { //ç›´æ¥ç¼–å†™é€»è¾‘ System.out.println(\"æˆ‘æ˜¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼\"); }); t.start(); //è°ƒç”¨æ­¤æ–¹æ³•æ¥å¼€å§‹æ‰§è¡Œæ­¤çº¿ç¨‹ } å¯èƒ½ä¸Šé¢çš„ä¾‹å­çœ‹èµ·æ¥å’Œæ™®é€šçš„å•çº¿ç¨‹æ²¡ä¸¤æ ·ï¼Œé‚£æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç çš„è¿è¡Œç»“æœï¼š public static void main(String[] args) { Thread t = new Thread(() -\u003e { System.out.println(\"æˆ‘æ˜¯çº¿ç¨‹ï¼š\"+Thread.currentThread().getName()); System.out.println(\"æˆ‘æ­£åœ¨è®¡ç®— 0-10000 ä¹‹é—´æ‰€æœ‰æ•°çš„å’Œ...\"); int sum = 0; for (int i = 0; i \u003c= 10000; i++) { sum += i; } System.out.println(\"ç»“æœï¼š\"+sum); }); t.start(); System.out.println(\"æˆ‘æ˜¯ä¸»çº¿ç¨‹ï¼\"); } æˆ‘ä»¬å‘ç°ï¼Œè¿™æ®µä»£ç æ‰§è¡Œè¾“å‡ºç»“æœå¹¶ä¸æ˜¯æŒ‰ç…§ä»ä¸Šå¾€ä¸‹çš„é¡ºåºäº†ï¼Œå› ä¸ºä»–ä»¬åˆ†åˆ«ä½äºä¸¤ä¸ªçº¿ç¨‹ï¼Œä»–ä»¬æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼å¦‚æœä½ è¿˜æ˜¯è§‰å¾—å¾ˆç–‘æƒ‘ï¼Œæˆ‘ä»¬æ¥ç€æ¥çœ‹ä¸‹é¢çš„ä»£ç è¿è¡Œç»“æœï¼š public static void main(String[] args) { Thread t1 = new Thread(() -\u003e { for (int i = 0; i \u003c 50; i++) { System.out.println(\"æˆ‘æ˜¯ä¸€å·çº¿ç¨‹ï¼š\"+i); } }); Thread t2 = new Thread(() -\u003e { for (int i = 0; i \u003c 50; i++) { System.out.println(\"æˆ‘æ˜¯äºŒå·çº¿ç¨‹ï¼š\"+i); } }); t1.start(); t2.start(); } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°å®é™…ä¸Šæ˜¯åœ¨äº¤æ›¿è¿›è¡Œçš„ï¼Œä¹Ÿè¯æ˜äº†ä»–ä»¬æ˜¯åœ¨åŒæ—¶è¿è¡Œï¼ æ³¨æ„ï¼šæˆ‘ä»¬å‘ç°è¿˜æœ‰ä¸€ä¸ªrunæ–¹æ³•ï¼Œä¹Ÿèƒ½æ‰§è¡Œçº¿ç¨‹é‡Œé¢å®šä¹‰çš„å†…å®¹ï¼Œä½†æ˜¯runæ˜¯ç›´æ¥åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œï¼Œå¹¶ä¸æ˜¯åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼ å®é™…ä¸Šï¼Œçº¿ç¨‹å’Œè¿›ç¨‹å·®ä¸å¤šï¼Œä¹Ÿä¼šç­‰å¾…è·å–CPUèµ„æºï¼Œä¸€æ—¦è·å–åˆ°ï¼Œå°±å¼€å§‹æŒ‰é¡ºåºæ‰§è¡Œæˆ‘ä»¬ç»™å®šçš„ç¨‹åºï¼Œå½“éœ€è¦ç­‰å¾…å¤–éƒ¨IOæ“ä½œï¼ˆæ¯”å¦‚Scannerè·å–è¾“å…¥çš„æ–‡æœ¬ï¼‰ï¼Œå°±ä¼šæš‚æ—¶å¤„äºä¼‘çœ çŠ¶æ€ï¼Œç­‰å¾…é€šçŸ¥ï¼Œæˆ–æ˜¯è°ƒç”¨sleep()æ–¹æ³•æ¥è®©å½“å‰çº¿ç¨‹ä¼‘çœ ä¸€æ®µæ—¶é—´ï¼š public static void main(String[] args) throws InterruptedException { System.out.println(\"l\"); Thread.sleep(1000); //ä¼‘çœ æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œ1000ms = 1s System.out.println(\"b\"); Thread.sleep(1000); System.out.println(\"w\"); Thread.sleep(1000); System.out.println(\"nb!\"); } æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨stop()æ–¹æ³•æ¥å¼ºè¡Œç»ˆæ­¢æ­¤çº¿ç¨‹ï¼š public static void main(String[] args) throws InterruptedException { Thread t = new Thread(() -\u003e { Thread me = Thread.currentThread(); //è·å–å½“å‰çº¿ç¨‹å¯¹è±¡ for (int i = 0; i \u003c 50; i++) { System.out.println(\"æ‰“å°:\"+i); if(i == 20) me.stop(); //æ­¤æ–¹æ³•ä¼šç›´æ¥ç»ˆæ­¢æ­¤çº¿ç¨‹ } }); t.start(); } è™½ç„¶stop()æ–¹æ³•èƒ½å¤Ÿç»ˆæ­¢æ­¤çº¿ç¨‹ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æ¨èçš„åšæ³•ï¼Œæœ‰å…³çº¿ç¨‹ä¸­æ–­ç›¸å…³é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢ç»§ç»­äº†è§£ã€‚ æ€è€ƒï¼šçŒœçŒœä»¥ä¸‹ç¨‹åºè¾“å‡ºç»“æœï¼š private static int value = 0; public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) value++; System.out.println(\"çº¿ç¨‹1å®Œæˆ\"); }); Thread t2 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) value++; System.out.println(\"çº¿ç¨‹2å®Œæˆ\"); }); t1.start(); t2.start(); Thread.sleep(1000); //ä¸»çº¿ç¨‹åœæ­¢1ç§’ï¼Œä¿è¯ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆ System.out.println(value); } æˆ‘ä»¬å‘ç°ï¼Œvalueæœ€åçš„å€¼å¹¶ä¸æ˜¯æˆ‘ä»¬ç†æƒ³çš„ç»“æœï¼Œæœ‰å…³ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Œåœ¨æˆ‘ä»¬å­¦ä¹ åˆ°çº¿ç¨‹é”çš„æ—¶å€™ï¼Œå†æ¥æ¢è®¨ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:1:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"çº¿ç¨‹çš„ä¼‘çœ å’Œä¸­æ–­ æˆ‘ä»¬å‰é¢æåˆ°ï¼Œä¸€ä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ä¸‹ï¼Œçº¿ç¨‹çš„ä¸‹ä¸€ä¸ªçŠ¶æ€ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š å½“CPUç»™äºˆçš„è¿è¡Œæ—¶é—´ç»“æŸæ—¶ï¼Œä¼šä»è¿è¡ŒçŠ¶æ€å›åˆ°å°±ç»ªï¼ˆå¯è¿è¡Œï¼‰çŠ¶æ€ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è·å¾—CPUèµ„æºã€‚ å½“çº¿ç¨‹è¿›å…¥ä¼‘çœ  / é˜»å¡(å¦‚ç­‰å¾…IOè¯·æ±‚) / æ‰‹åŠ¨è°ƒç”¨wait()æ–¹æ³•æ—¶ï¼Œä¼šä½¿å¾—çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå½“ç­‰å¾…çŠ¶æ€ç»“æŸåä¼šå›åˆ°å°±ç»ªçŠ¶æ€ã€‚ å½“çº¿ç¨‹å‡ºç°å¼‚å¸¸æˆ–é”™è¯¯ / è¢«stop() æ–¹æ³•å¼ºè¡Œåœæ­¢ / æ‰€æœ‰ä»£ç æ‰§è¡Œç»“æŸæ—¶ï¼Œä¼šä½¿å¾—çº¿ç¨‹çš„è¿è¡Œç»ˆæ­¢ã€‚ è€Œè¿™ä¸ªéƒ¨åˆ†æˆ‘ä»¬ç€é‡äº†è§£ä¸€ä¸‹çº¿ç¨‹çš„ä¼‘çœ å’Œä¸­æ–­ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å¦‚ä½•ä½¿å¾—çº¿ç¨‹è¿›å¦‚ä¼‘çœ çŠ¶æ€ï¼š public static void main(String[] args) { Thread t = new Thread(() -\u003e { try { System.out.println(\"l\"); Thread.sleep(1000); //sleepæ–¹æ³•æ˜¯Threadçš„é™æ€æ–¹æ³•ï¼Œå®ƒåªä½œç”¨äºå½“å‰çº¿ç¨‹ï¼ˆå®ƒçŸ¥é“å½“å‰çº¿ç¨‹æ˜¯å“ªä¸ªï¼‰ System.out.println(\"b\"); //è°ƒç”¨sleepåï¼Œçº¿ç¨‹ä¼šç›´æ¥è¿›å…¥åˆ°ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°æ—¶é—´ç»“æŸ } catch (InterruptedException e) { e.printStackTrace(); } }); t.start(); } é€šè¿‡è°ƒç”¨sleep()æ–¹æ³•æ¥å°†å½“å‰çº¿ç¨‹è¿›å…¥ä¼‘çœ ï¼Œä½¿å¾—çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ä¸€æ®µæ—¶é—´ã€‚æˆ‘ä»¬å‘ç°ï¼Œæ­¤æ–¹æ³•æ˜¾ç¤ºå£°æ˜äº†ä¼šæŠ›å‡ºä¸€ä¸ªInterruptedExceptionå¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸åœ¨ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿå‘¢ï¼Ÿ public static void main(String[] args) { Thread t = new Thread(() -\u003e { try { Thread.sleep(10000); //ä¼‘çœ 10ç§’ } catch (InterruptedException e) { e.printStackTrace(); } }); t.start(); try { Thread.sleep(3000); //ä¼‘çœ 3ç§’ï¼Œä¸€å®šæ¯”çº¿ç¨‹tå…ˆé†’æ¥ t.interrupt(); //è°ƒç”¨tçš„interruptæ–¹æ³• } catch (InterruptedException e) { e.printStackTrace(); } } æˆ‘ä»¬å‘ç°ï¼Œæ¯ä¸€ä¸ªThreadå¯¹è±¡ä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ªinterrupt()æ–¹æ³•ï¼Œè°ƒç”¨æ­¤æ–¹æ³•åï¼Œä¼šç»™æŒ‡å®šçº¿ç¨‹æ·»åŠ ä¸€ä¸ªä¸­æ–­æ ‡è®°ä»¥å‘ŠçŸ¥çº¿ç¨‹éœ€è¦ç«‹å³åœæ­¢è¿è¡Œæˆ–æ˜¯è¿›è¡Œå…¶ä»–æ“ä½œï¼Œç”±çº¿ç¨‹æ¥å“åº”æ­¤ä¸­æ–­å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæˆ‘ä»¬å‰é¢æåˆ°çš„stop()æ–¹æ³•æ˜¯å¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹ï¼Œè¿™æ ·çš„åšæ³•è™½ç„¶ç®€å•ç²—æš´ï¼Œä½†æ˜¯å¾ˆæœ‰å¯èƒ½å¯¼è‡´èµ„æºä¸èƒ½å®Œå…¨é‡Šæ”¾ï¼Œè€Œç±»ä¼¼è¿™æ ·çš„å‘é€é€šçŸ¥æ¥å‘ŠçŸ¥çº¿ç¨‹éœ€è¦ä¸­æ–­ï¼Œè®©çº¿ç¨‹è‡ªè¡Œå¤„ç†åç»­ï¼Œä¼šæ›´åŠ åˆç†ä¸€äº›ï¼Œä¹Ÿæ˜¯æ›´åŠ æ¨èçš„åšæ³•ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹interruptçš„ç”¨æ³•ï¼š public static void main(String[] args) { Thread t = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹å¼€å§‹è¿è¡Œï¼\"); while (true){ //æ— é™å¾ªç¯ if(Thread.currentThread().isInterrupted()){ //åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸­æ–­æ ‡å¿— break; //å“åº”ä¸­æ–­ } } System.out.println(\"çº¿ç¨‹è¢«ä¸­æ–­äº†ï¼\"); }); t.start(); try { Thread.sleep(3000); //ä¼‘çœ 3ç§’ï¼Œä¸€å®šæ¯”çº¿ç¨‹tå…ˆé†’æ¥ t.interrupt(); //è°ƒç”¨tçš„interruptæ–¹æ³• } catch (InterruptedException e) { e.printStackTrace(); } } é€šè¿‡isInterrupted()å¯ä»¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å­˜åœ¨ä¸­æ–­æ ‡å¿—ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¯´æ˜å¤–éƒ¨å¸Œæœ›å½“å‰çº¿ç¨‹ç«‹å³åœæ­¢ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç»™å½“å‰çº¿ç¨‹å‘é€ä¸€ä¸ªå…¶ä»–çš„ä¿¡å·ï¼Œå¦‚æœæˆ‘ä»¬å¹¶ä¸æ˜¯å¸Œæœ›æ”¶åˆ°ä¸­æ–­ä¿¡å·å°±æ˜¯ç»“æŸç¨‹åºï¼Œè€Œæ˜¯é€šçŸ¥ç¨‹åºåšå…¶ä»–äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ”¶åˆ°ä¸­æ–­ä¿¡å·åï¼Œå¤ä½ä¸­æ–­æ ‡è®°ï¼Œç„¶åç»§ç»­åšæˆ‘ä»¬çš„äº‹æƒ…ï¼š public static void main(String[] args) { Thread t = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹å¼€å§‹è¿è¡Œï¼\"); while (true){ if(Thread.currentThread().isInterrupted()){ //åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸­æ–­æ ‡å¿— System.out.println(\"å‘ç°ä¸­æ–­ä¿¡å·ï¼Œå¤ä½ï¼Œç»§ç»­è¿è¡Œ...\"); Thread.interrupted(); //å¤ä½ä¸­æ–­æ ‡è®°ï¼ˆè¿”å›å€¼æ˜¯å½“å‰æ˜¯å¦æœ‰ä¸­æ–­æ ‡è®°ï¼Œè¿™é‡Œä¸ç”¨ç®¡ï¼‰ } } }); t.start(); try { Thread.sleep(3000); //ä¼‘çœ 3ç§’ï¼Œä¸€å®šæ¯”çº¿ç¨‹tå…ˆé†’æ¥ t.interrupt(); //è°ƒç”¨tçš„interruptæ–¹æ³• } catch (InterruptedException e) { e.printStackTrace(); } } å¤ä½ä¸­æ–­æ ‡è®°åï¼Œä¼šç«‹å³æ¸…é™¤ä¸­æ–­æ ‡è®°ã€‚é‚£ä¹ˆï¼Œå¦‚æœç°åœ¨æˆ‘ä»¬æƒ³æš‚åœçº¿ç¨‹å‘¢ï¼Ÿæˆ‘ä»¬å¸Œæœ›çº¿ç¨‹æš‚æ—¶åœä¸‹ï¼Œæ¯”å¦‚ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œå†ç»§ç»­è¿è¡Œï¼Œé‚£è¿™æ ·çš„æ“ä½œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ public static void main(String[] args) { Thread t = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹å¼€å§‹è¿è¡Œï¼\"); Thread.currentThread().suspend(); //æš‚åœæ­¤çº¿ç¨‹ System.out.println(\"çº¿ç¨‹ç»§ç»­è¿è¡Œï¼\"); }); t.start(); try { Thread.sleep(3000); //ä¼‘çœ 3ç§’ï¼Œä¸€å®šæ¯”çº¿ç¨‹tå…ˆé†’æ¥ t.resume(); //æ¢å¤æ­¤çº¿ç¨‹ } catch (InterruptedException e) { e.printStackTrace(); } } è™½ç„¶è¿™æ ·å¾ˆæ–¹ä¾¿åœ°æ§åˆ¶äº†çº¿ç¨‹çš„æš‚åœçŠ¶æ€ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•æˆ‘ä»¬å‘ç°å®é™…ä¸Šä¹Ÿæ˜¯ä¸æ¨èçš„åšæ³•ï¼Œå®ƒå¾ˆå®¹æ˜“å¯¼è‡´æ­»é”ï¼æœ‰å…³ä¸ºä»€ä¹ˆè¢«å¼ƒç”¨çš„åŸå› ï¼Œæˆ‘ä»¬ä¼šåœ¨çº¿ç¨‹é”ç»§ç»­æ¢è®¨ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:2:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"çº¿ç¨‹çš„ä¼˜å…ˆçº§ å®é™…ä¸Šï¼ŒJavaç¨‹åºä¸­çš„æ¯ä¸ªçº¿ç¨‹å¹¶ä¸æ˜¯å¹³å‡åˆ†é…CPUæ—¶é—´çš„ï¼Œä¸ºäº†ä½¿å¾—çº¿ç¨‹èµ„æºåˆ†é…æ›´åŠ åˆç†ï¼ŒJavaé‡‡ç”¨çš„æ˜¯æŠ¢å å¼è°ƒåº¦æ–¹å¼ï¼Œä¼˜å…ˆçº§è¶Šé«˜çš„çº¿ç¨‹ï¼Œä¼˜å…ˆä½¿ç”¨CPUèµ„æºï¼æˆ‘ä»¬å¸Œæœ›CPUèŠ±è´¹æ›´å¤šçš„æ—¶é—´å»å¤„ç†æ›´é‡è¦çš„ä»»åŠ¡ï¼Œè€Œä¸å¤ªé‡è¦çš„ä»»åŠ¡ï¼Œåˆ™å¯ä»¥å…ˆè®©å‡ºä¸€éƒ¨åˆ†èµ„æºã€‚çº¿ç¨‹çš„ä¼˜å…ˆçº§ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š MIN_PRIORITY æœ€ä½ä¼˜å…ˆçº§ MAX_PRIORITY æœ€é«˜ä¼˜å…ˆçº§ NOM_PRIORITY å¸¸è§„ä¼˜å…ˆçº§ public static void main(String[] args) { Thread t = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹å¼€å§‹è¿è¡Œï¼\"); }); t.start(); t.setPriority(Thread.MIN_PRIORITY); //é€šè¿‡ä½¿ç”¨setPriorityæ–¹æ³•æ¥è®¾å®šä¼˜å…ˆçº§ } ä¼˜å…ˆçº§è¶Šé«˜çš„çº¿ç¨‹ï¼Œè·å¾—CPUèµ„æºçš„æ¦‚ç‡ä¼šè¶Šå¤§ï¼Œå¹¶ä¸æ˜¯è¯´ä¸€å®šä¼˜å…ˆçº§è¶Šé«˜çš„çº¿ç¨‹è¶Šå…ˆæ‰§è¡Œï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:3:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"çº¿ç¨‹çš„ç¤¼è®©å’ŒåŠ å…¥ æˆ‘ä»¬è¿˜å¯ä»¥åœ¨å½“å‰çº¿ç¨‹çš„å·¥ä½œä¸é‡è¦æ—¶ï¼Œå°†CPUèµ„æºè®©ä½ç»™å…¶ä»–çº¿ç¨‹ï¼Œé€šè¿‡ä½¿ç”¨yield()æ–¹æ³•æ¥å°†å½“å‰èµ„æºè®©ä½ç»™å…¶ä»–åŒä¼˜å…ˆçº§çº¿ç¨‹ï¼š public static void main(String[] args) { Thread t1 = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹1å¼€å§‹è¿è¡Œï¼\"); for (int i = 0; i \u003c 50; i++) { if(i % 5 == 0) { System.out.println(\"è®©ä½ï¼\"); Thread.yield(); } System.out.println(\"1æ‰“å°ï¼š\"+i); } System.out.println(\"çº¿ç¨‹1ç»“æŸï¼\"); }); Thread t2 = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹2å¼€å§‹è¿è¡Œï¼\"); for (int i = 0; i \u003c 50; i++) { System.out.println(\"2æ‰“å°ï¼š\"+i); } }); t1.start(); t2.start(); } è§‚å¯Ÿç»“æœï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨è®©ä½ä¹‹åï¼Œå°½å¯èƒ½å¤šçš„åœ¨æ‰§è¡Œçº¿ç¨‹2çš„å†…å®¹ã€‚ å½“æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆåå†ç»§ç»­è¿›è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨join()æ–¹æ³•æ¥å®ç°çº¿ç¨‹çš„åŠ å…¥ï¼š public static void main(String[] args) { Thread t1 = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹1å¼€å§‹è¿è¡Œï¼\"); for (int i = 0; i \u003c 50; i++) { System.out.println(\"1æ‰“å°ï¼š\"+i); } System.out.println(\"çº¿ç¨‹1ç»“æŸï¼\"); }); Thread t2 = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹2å¼€å§‹è¿è¡Œï¼\"); for (int i = 0; i \u003c 50; i++) { System.out.println(\"2æ‰“å°ï¼š\"+i); if(i == 10){ try { System.out.println(\"çº¿ç¨‹1åŠ å…¥åˆ°æ­¤çº¿ç¨‹ï¼\"); t1.join(); //åœ¨i==10æ—¶ï¼Œè®©çº¿ç¨‹1åŠ å…¥ï¼Œå…ˆå®Œæˆçº¿ç¨‹1çš„å†…å®¹ï¼Œåœ¨ç»§ç»­å½“å‰å†…å®¹ } catch (InterruptedException e) { e.printStackTrace(); } } } }); t1.start(); t2.start(); } æˆ‘ä»¬å‘ç°ï¼Œçº¿ç¨‹1åŠ å…¥åï¼Œçº¿ç¨‹2ç­‰å¾…çº¿ç¨‹1å¾…æ‰§è¡Œçš„å†…å®¹å…¨éƒ¨æ‰§è¡Œå®Œæˆä¹‹åï¼Œå†ç»§ç»­æ‰§è¡Œçš„çº¿ç¨‹2å†…å®¹ã€‚æ³¨æ„ï¼Œçº¿ç¨‹çš„åŠ å…¥åªæ˜¯ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„å®Œæˆï¼Œå¹¶ä¸æ˜¯å°†å¦ä¸€ä¸ªçº¿ç¨‹å’Œå½“å‰çº¿ç¨‹åˆå¹¶ï¼æˆ‘ä»¬æ¥çœ‹çœ‹ï¼š public static void main(String[] args) { Thread t1 = new Thread(() -\u003e { System.out.println(Thread.currentThread().getName()+\"å¼€å§‹è¿è¡Œï¼\"); for (int i = 0; i \u003c 50; i++) { System.out.println(Thread.currentThread().getName()+\"æ‰“å°ï¼š\"+i); } System.out.println(\"çº¿ç¨‹1ç»“æŸï¼\"); }); Thread t2 = new Thread(() -\u003e { System.out.println(\"çº¿ç¨‹2å¼€å§‹è¿è¡Œï¼\"); for (int i = 0; i \u003c 50; i++) { System.out.println(\"2æ‰“å°ï¼š\"+i); if(i == 10){ try { System.out.println(\"çº¿ç¨‹1åŠ å…¥åˆ°æ­¤çº¿ç¨‹ï¼\"); t1.join(); //åœ¨i==10æ—¶ï¼Œè®©çº¿ç¨‹1åŠ å…¥ï¼Œå…ˆå®Œæˆçº¿ç¨‹1çš„å†…å®¹ï¼Œåœ¨ç»§ç»­å½“å‰å†…å®¹ } catch (InterruptedException e) { e.printStackTrace(); } } } }); t1.start(); t2.start(); } å®é™…ä¸Šï¼Œt2çº¿ç¨‹åªæ˜¯æš‚æ—¶å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå½“t1æ‰§è¡Œç»“æŸæ—¶ï¼Œt2æ‰å¼€å§‹ç»§ç»­æ‰§è¡Œï¼Œåªæ˜¯åœ¨æ•ˆæœä¸Šçœ‹èµ·æ¥å¥½åƒæ˜¯ä¸¤ä¸ªçº¿ç¨‹åˆå¹¶ä¸ºä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œè€Œå·²ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:4:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"çº¿ç¨‹é”å’Œçº¿ç¨‹åŒæ­¥ åœ¨å¼€å§‹è®²è§£çº¿ç¨‹åŒæ­¥ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹å¤šçº¿ç¨‹æƒ…å†µä¸‹Javaçš„å†…å­˜ç®¡ç†ï¼š çº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡ï¼ˆæ¯”å¦‚ä¹‹å‰æ‚¬å¿µä¸­çš„valueå˜é‡ï¼‰å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆmain memoryï¼‰ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„å·¥ä½œå†…å­˜ï¼ˆæœ¬åœ°å†…å­˜ï¼‰ï¼Œå·¥ä½œå†…å­˜ä¸­å­˜å‚¨äº†è¯¥çº¿ç¨‹ä»¥è¯»/å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚å®ƒç±»ä¼¼äºæˆ‘ä»¬åœ¨è®¡ç®—æœºç»„æˆåŸç†ä¸­å­¦ä¹ çš„å¤šå¤„ç†å™¨é«˜é€Ÿç¼“å­˜æœºåˆ¶ï¼š é«˜é€Ÿç¼“å­˜é€šè¿‡ä¿å­˜å†…å­˜ä¸­æ•°æ®çš„å‰¯æœ¬æ¥æä¾›æ›´åŠ å¿«é€Ÿçš„æ•°æ®è®¿é—®ï¼Œä½†æ˜¯å¦‚æœå¤šä¸ªå¤„ç†å™¨çš„è¿ç®—ä»»åŠ¡éƒ½æ¶‰åŠåŒä¸€å—å†…å­˜åŒºåŸŸï¼Œå°±å¯èƒ½å¯¼è‡´å„è‡ªçš„é«˜é€Ÿç¼“å­˜æ•°æ®ä¸ä¸€è‡´ï¼Œåœ¨å†™å›ä¸»å†…å­˜æ—¶å°±ä¼šå‘ç”Ÿå†²çªï¼Œè¿™å°±æ˜¯å¼•å…¥é«˜é€Ÿç¼“å­˜å¼•å‘çš„æ–°é—®é¢˜ï¼Œç§°ä¹‹ä¸ºï¼šç¼“å­˜ä¸€è‡´æ€§ã€‚ å®é™…ä¸Šï¼ŒJavaçš„å†…å­˜æ¨¡å‹ä¹Ÿæ˜¯è¿™æ ·ç±»ä¼¼è®¾è®¡çš„ï¼Œå½“æˆ‘ä»¬åŒæ—¶å»æ“ä½œä¸€ä¸ªå…±äº«å˜é‡æ—¶ï¼Œå¦‚æœä»…ä»…æ˜¯è¯»å–è¿˜å¥½ï¼Œä½†æ˜¯å¦‚æœåŒæ—¶å†™å…¥å†…å®¹ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼å¥½æ¯”è¯´ä¸€ä¸ªé“¶è¡Œï¼Œå¦‚æœæˆ‘å’Œæˆ‘çš„æœ‹å‹åŒæ—¶åœ¨é“¶è¡Œå–æˆ‘è´¦æˆ·é‡Œé¢çš„é’±ï¼Œéš¾é“å–1000è¿˜å¯èƒ½å2000å‡ºæ¥å—ï¼Ÿæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ å®‰å…¨çš„æœºåˆ¶æ¥ç»´æŒç§©åºï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§ï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:5:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"æ‚¬å¿µç ´æ¡ˆ æˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹ä¹‹å‰ç•™ç»™å¤§å®¶çš„æ‚¬å¿µï¼š private static int value = 0; public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) value++; System.out.println(\"çº¿ç¨‹1å®Œæˆ\"); }); Thread t2 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) value++; System.out.println(\"çº¿ç¨‹2å®Œæˆ\"); }); t1.start(); t2.start(); Thread.sleep(1000); //ä¸»çº¿ç¨‹åœæ­¢1ç§’ï¼Œä¿è¯ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆ System.out.println(value); } å®é™…ä¸Šï¼Œå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¯»å–valueçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šåŒæ—¶æ‹¿åˆ°åŒæ ·çš„å€¼ï¼Œè€Œè¿›è¡Œè‡ªå¢æ“ä½œä¹‹åï¼Œä¹Ÿæ˜¯åŒæ ·çš„å€¼ï¼Œå†å†™å›ä¸»å†…å­˜åï¼Œæœ¬æ¥åº”è¯¥è¿›è¡Œ2æ¬¡è‡ªå¢æ“ä½œï¼Œå®é™…ä¸Šåªæ‰§è¡Œäº†ä¸€æ¬¡ï¼ é‚£ä¹ˆè¦å»è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¿…é¡»é‡‡å–æŸç§åŒæ­¥æœºåˆ¶ï¼Œæ¥é™åˆ¶ä¸åŒçº¿ç¨‹å¯¹äºå…±äº«å˜é‡çš„è®¿é—®ï¼æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ä¿è¯å…±äº«å˜é‡valueè‡ªå¢æ“ä½œçš„åŸå­æ€§ï¼ˆåŸå­æ€§æ˜¯æŒ‡ä¸€ä¸ªæ“ä½œæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼ŒåŒ…æ‹¬å…¶ä»–çº¿ç¨‹ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œï¼‰ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:5:1","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"çº¿ç¨‹é” é€šè¿‡synchronizedå…³é”®å­—æ¥åˆ›é€ ä¸€ä¸ªçº¿ç¨‹é”ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹synchronizedä»£ç å—ï¼Œå®ƒéœ€è¦åœ¨æ‹¬å·ä¸­å¡«å…¥ä¸€ä¸ªå†…å®¹ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ˜¯ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬åœ¨valueè‡ªå¢æ“ä½œå¤–å¥—ä¸ŠåŒæ­¥ä»£ç å—ï¼š private static int value = 0; public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) { synchronized (Main.class){ value++; } } System.out.println(\"çº¿ç¨‹1å®Œæˆ\"); }); Thread t2 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) { synchronized (Main.class){ value++; } } System.out.println(\"çº¿ç¨‹2å®Œæˆ\"); }); t1.start(); t2.start(); Thread.sleep(1000); //ä¸»çº¿ç¨‹åœæ­¢1ç§’ï¼Œä¿è¯ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆ System.out.println(value); } æˆ‘ä»¬å‘ç°ï¼Œç°åœ¨å¾—åˆ°çš„ç»“æœå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„å†…å®¹äº†ï¼Œå› ä¸ºåœ¨åŒæ­¥ä»£ç å—æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‹¿åˆ°äº†æˆ‘ä»¬ä¼ å…¥å¯¹è±¡æˆ–ç±»çš„é”ï¼ˆä¼ å…¥çš„å¦‚æœæ˜¯å¯¹è±¡ï¼Œå°±æ˜¯å¯¹è±¡é”ï¼Œä¸åŒçš„å¯¹è±¡ä»£è¡¨ä¸åŒçš„å¯¹è±¡é”ï¼Œå¦‚æœæ˜¯ç±»ï¼Œå°±æ˜¯ç±»é”ï¼Œç±»é”åªæœ‰ä¸€ä¸ªï¼Œå®é™…ä¸Šç±»é”ä¹Ÿæ˜¯å¯¹è±¡é”ï¼Œæ˜¯Classç±»å®ä¾‹ï¼Œä½†æ˜¯Classç±»å®ä¾‹åŒæ ·çš„ç±»æ— è®ºæ€ä¹ˆè·å–éƒ½æ˜¯åŒä¸€ä¸ªï¼‰ï¼Œä½†æ˜¯æ³¨æ„ä¸¤ä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”ï¼ å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åˆ°åŒæ­¥ä»£ç å—æ—¶ï¼Œä¼šè·å–åˆ°å½“å‰çš„é”ï¼Œè€Œè¿™æ—¶å¦‚æœå…¶ä»–ä½¿ç”¨åŒæ ·çš„é”çš„åŒæ­¥ä»£ç å—ä¹Ÿæƒ³æ‰§è¡Œå†…å®¹ï¼Œå°±å¿…é¡»ç­‰å¾…å½“å‰åŒæ­¥ä»£ç å—çš„å†…å®¹æ‰§è¡Œå®Œæ¯•ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•åä¼šè‡ªåŠ¨é‡Šæ”¾è¿™æŠŠé”ï¼Œè€Œå…¶ä»–çš„çº¿ç¨‹æ‰èƒ½æ‹¿åˆ°è¿™æŠŠé”å¹¶å¼€å§‹æ‰§è¡ŒåŒæ­¥ä»£ç å—é‡Œé¢çš„å†…å®¹ã€‚ï¼ˆå®é™…ä¸Šsynchronizedæ˜¯ä¸€ç§æ‚²è§‚é”ï¼Œéšæ—¶éƒ½è®¤ä¸ºæœ‰å…¶ä»–çº¿ç¨‹åœ¨å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œåé¢æœ‰æœºä¼šæˆ‘ä»¬è¿˜ä¼šè®²åˆ°ä¹è§‚é”ï¼Œå¦‚CASç®—æ³•ï¼‰ é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ä¸åŒå¯¹è±¡çš„é”ï¼Œé‚£ä¹ˆè¿˜èƒ½é¡ºåˆ©è¿›è¡Œå—ï¼Ÿ private static int value = 0; public static void main(String[] args) throws InterruptedException { Main main1 = new Main(); Main main2 = new Main(); Thread t1 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) { synchronized (main1){ value++; } } System.out.println(\"çº¿ç¨‹1å®Œæˆ\"); }); Thread t2 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) { synchronized (main2){ value++; } } System.out.println(\"çº¿ç¨‹2å®Œæˆ\"); }); t1.start(); t2.start(); Thread.sleep(1000); //ä¸»çº¿ç¨‹åœæ­¢1ç§’ï¼Œä¿è¯ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆ System.out.println(value); } å½“å¯¹è±¡ä¸åŒæ—¶ï¼Œè·å–åˆ°çš„æ˜¯ä¸åŒçš„é”ï¼Œå› æ­¤å¹¶ä¸èƒ½ä¿è¯è‡ªå¢æ“ä½œçš„åŸå­æ€§ï¼Œæœ€åä¹Ÿå¾—ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚ synchronizedå…³é”®å­—ä¹Ÿå¯ä»¥ä½œç”¨äºæ–¹æ³•ä¸Šï¼Œè°ƒç”¨æ­¤æ–¹æ³•æ—¶ä¹Ÿä¼šè·å–é”ï¼š private static int value = 0; private static synchronized void add(){ value++; } public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) add(); System.out.println(\"çº¿ç¨‹1å®Œæˆ\"); }); Thread t2 = new Thread(() -\u003e { for (int i = 0; i \u003c 10000; i++) add(); System.out.println(\"çº¿ç¨‹2å®Œæˆ\"); }); t1.start(); t2.start(); Thread.sleep(1000); //ä¸»çº¿ç¨‹åœæ­¢1ç§’ï¼Œä¿è¯ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆ System.out.println(value); } æˆ‘ä»¬å‘ç°å®é™…ä¸Šæ•ˆæœæ˜¯ç›¸åŒçš„ï¼Œåªä¸è¿‡è¿™ä¸ªé”ä¸ç”¨ä½ å»ç»™ï¼Œå¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨çš„ç±»é”ï¼Œè€Œå¦‚æœæ˜¯æ™®é€šæˆå‘˜æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨çš„å¯¹è±¡é”ã€‚é€šè¿‡çµæ´»çš„ä½¿ç”¨synchronizedå°±èƒ½å¾ˆå¥½åœ°è§£å†³æˆ‘ä»¬ä¹‹å‰æåˆ°çš„é—®é¢˜äº†ï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:5:2","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"æ­»é” å…¶å®æ­»é”çš„æ¦‚å¿µåœ¨æ“ä½œç³»ç»Ÿä¸­ä¹Ÿæœ‰æåŠï¼Œå®ƒæ˜¯æŒ‡ä¸¤ä¸ªçº¿ç¨‹ç›¸äº’æŒæœ‰å¯¹æ–¹éœ€è¦çš„é”ï¼Œä½†æ˜¯åˆè¿Ÿè¿Ÿä¸é‡Šæ”¾ï¼Œå¯¼è‡´ç¨‹åºå¡ä½ï¼š æˆ‘ä»¬å‘ç°ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½éœ€è¦å¯¹æ–¹çš„é”ï¼Œä½†æ˜¯åˆè¢«å¯¹æ–¹ç‰¢ç‰¢æŠŠæ¡ï¼Œç”±äºçº¿ç¨‹è¢«æ— é™æœŸåœ°é˜»å¡ï¼Œå› æ­¤ç¨‹åºä¸å¯èƒ½æ­£å¸¸ç»ˆæ­¢ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä»¥ä¸‹è¿™æ®µä»£ç ä¼šå¾—åˆ°ä»€ä¹ˆç»“æœï¼š public static void main(String[] args) throws InterruptedException { Object o1 = new Object(); Object o2 = new Object(); Thread t1 = new Thread(() -\u003e { synchronized (o1){ try { Thread.sleep(1000); synchronized (o2){ System.out.println(\"çº¿ç¨‹1\"); } } catch (InterruptedException e) { e.printStackTrace(); } } }); Thread t2 = new Thread(() -\u003e { synchronized (o2){ try { Thread.sleep(1000); synchronized (o1){ System.out.println(\"çº¿ç¨‹2\"); } } catch (InterruptedException e) { e.printStackTrace(); } } }); t1.start(); t2.start(); } é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å»æ£€æµ‹æ­»é”å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åˆ©ç”¨jstackå‘½ä»¤æ¥æ£€æµ‹æ­»é”ï¼Œé¦–å…ˆåˆ©ç”¨jpsæ‰¾åˆ°æˆ‘ä»¬çš„javaè¿›ç¨‹ï¼š nagocoler@NagodeMacBook-Pro ~ % jps 51592 Launcher 51690 Jps 14955 51693 Main nagocoler@NagodeMacBook-Pro ~ % jstack 51693 ... Java stack information for the threads listed above: =================================================== \"Thread-1\": at com.test.Main.lambda$main$1(Main.java:46) - waiting to lock \u003c0x000000076ad27fc0\u003e (a java.lang.Object) - locked \u003c0x000000076ad27fd0\u003e (a java.lang.Object) at com.test.Main$$Lambda$2/1867750575.run(Unknown Source) at java.lang.Thread.run(Thread.java:748) \"Thread-0\": at com.test.Main.lambda$main$0(Main.java:34) - waiting to lock \u003c0x000000076ad27fd0\u003e (a java.lang.Object) - locked \u003c0x000000076ad27fc0\u003e (a java.lang.Object) at com.test.Main$$Lambda$1/396873410.run(Unknown Source) at java.lang.Thread.run(Thread.java:748) Found 1 deadlock. jstackè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªæ­»é”ï¼Œå¹¶æ‰“å°å‡ºäº†ç›¸å…³çº¿ç¨‹çš„æ ˆè¿½è¸ªä¿¡æ¯ã€‚ ä¸æ¨èä½¿ç”¨ suspend() å»æŒ‚èµ·çº¿ç¨‹çš„åŸå› ï¼Œæ˜¯å› ä¸ºsuspend()åœ¨ä½¿çº¿ç¨‹æš‚åœçš„åŒæ—¶ï¼Œå¹¶ä¸ä¼šå»é‡Šæ”¾ä»»ä½•é”èµ„æºã€‚å…¶ä»–çº¿ç¨‹éƒ½æ— æ³•è®¿é—®è¢«å®ƒå ç”¨çš„é”ã€‚ç›´åˆ°å¯¹åº”çš„çº¿ç¨‹æ‰§è¡Œresume()æ–¹æ³•åï¼Œè¢«æŒ‚èµ·çš„çº¿ç¨‹æ‰èƒ½ç»§ç»­ï¼Œä»è€Œå…¶å®ƒè¢«é˜»å¡åœ¨è¿™ä¸ªé”çš„çº¿ç¨‹æ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå¦‚æœresume()æ“ä½œå‡ºç°åœ¨suspend()ä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆçº¿ç¨‹å°†ä¸€ç›´å¤„äºæŒ‚èµ·çŠ¶æ€ï¼ŒåŒæ—¶ä¸€ç›´å ç”¨é”ï¼Œè¿™å°±äº§ç”Ÿäº†æ­»é”ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:5:3","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"waitå’Œnotifyæ–¹æ³• å…¶å®æˆ‘ä»¬ä¹‹å‰å¯èƒ½å°±å‘ç°äº†ï¼ŒObjectç±»è¿˜æœ‰ä¸‰ä¸ªæ–¹æ³•æˆ‘ä»¬ä»æ¥æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œåˆ†åˆ«æ˜¯wait()ã€notify()ä»¥åŠnotifyAll()ï¼Œä»–ä»¬å…¶å®æ˜¯éœ€è¦é…åˆsynchronizedæ¥ä½¿ç”¨çš„ï¼Œåªæœ‰åœ¨åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼š public static void main(String[] args) throws InterruptedException { Object o1 = new Object(); Thread t1 = new Thread(() -\u003e { synchronized (o1){ try { System.out.println(\"å¼€å§‹ç­‰å¾…\"); o1.wait(); //è¿›å…¥ç­‰å¾…çŠ¶æ€å¹¶é‡Šæ”¾é” System.out.println(\"ç­‰å¾…ç»“æŸï¼\"); } catch (InterruptedException e) { e.printStackTrace(); } } }); Thread t2 = new Thread(() -\u003e { synchronized (o1){ System.out.println(\"å¼€å§‹å”¤é†’ï¼\"); o1.notify(); //å”¤é†’å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ for (int i = 0; i \u003c 50; i++) { System.out.println(i); } //å”¤é†’åä¾ç„¶éœ€è¦ç­‰å¾…è¿™é‡Œçš„é”é‡Šæ”¾ä¹‹å‰ç­‰å¾…çš„çº¿ç¨‹æ‰èƒ½ç»§ç»­ } }); t1.start(); Thread.sleep(1000); t2.start(); } æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¯¹è±¡çš„wait()æ–¹æ³•ä¼šæš‚æ—¶ä½¿å¾—æ­¤çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒåŒæ—¶ä¼šé‡Šæ”¾å½“å‰ä»£ç å—æŒæœ‰çš„é”ï¼Œè¿™æ—¶å…¶ä»–çº¿ç¨‹å¯ä»¥è·å–åˆ°æ­¤å¯¹è±¡çš„é”ï¼Œå½“å…¶ä»–çº¿ç¨‹è°ƒç”¨å¯¹è±¡çš„notify()æ–¹æ³•åï¼Œä¼šå”¤é†’åˆšæ‰å˜æˆç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼ˆè¿™æ—¶å¹¶æ²¡æœ‰ç«‹å³é‡Šæ”¾é”ï¼‰ã€‚æ³¨æ„ï¼Œå¿…é¡»æ˜¯åœ¨æŒæœ‰é”ï¼ˆåŒæ­¥ä»£ç å—å†…éƒ¨ï¼‰çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ notifyAllå…¶å®å’Œnotifyä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”¨äºå”¤é†’ï¼Œä½†æ˜¯å‰è€…æ˜¯å”¤é†’æ‰€æœ‰è°ƒç”¨wait()åå¤„äºç­‰å¾…çš„çº¿ç¨‹ï¼Œè€Œåè€…æ˜¯çœ‹è¿æ°”éšæœºé€‰æ‹©ä¸€ä¸ªã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:5:4","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"ThreadLocalçš„ä½¿ç”¨ æ—¢ç„¶æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œé‚£ä¹ˆèƒ½å¦åªåœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­åˆ›å»ºå˜é‡ä»…ä¾›çº¿ç¨‹è‡ªå·±ä½¿ç”¨å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥æ˜¯ThreadLocalç±»ï¼Œæ¥åˆ›å»ºå·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œå®ƒå°†æˆ‘ä»¬çš„å˜é‡å€¼å­˜å‚¨åœ¨å†…éƒ¨ï¼ˆåªèƒ½å­˜å‚¨ä¸€ä¸ªå˜é‡ï¼‰ï¼Œä¸åŒçš„å˜é‡è®¿é—®åˆ°ThreadLocalå¯¹è±¡æ—¶ï¼Œéƒ½åªèƒ½è·å–åˆ°è‡ªå·±çº¿ç¨‹æ‰€å±çš„å˜é‡ã€‚ public static void main(String[] args) throws InterruptedException { ThreadLocal\u003cString\u003e local = new ThreadLocal\u003c\u003e(); //æ³¨æ„è¿™æ˜¯ä¸€ä¸ªæ³›å‹ç±»ï¼Œå­˜å‚¨ç±»å‹ä¸ºæˆ‘ä»¬è¦å­˜æ”¾çš„å˜é‡ç±»å‹ Thread t1 = new Thread(() -\u003e { local.set(\"lbwnb\"); //å°†å˜é‡çš„å€¼ç»™äºˆThreadLocal System.out.println(\"å˜é‡å€¼å·²è®¾å®šï¼\"); System.out.println(local.get()); //å°è¯•è·å–ThreadLocalä¸­å­˜æ”¾çš„å˜é‡ }); Thread t2 = new Thread(() -\u003e { System.out.println(local.get()); //å°è¯•è·å–ThreadLocalä¸­å­˜æ”¾çš„å˜é‡ }); t1.start(); Thread.sleep(3000); //é—´éš”ä¸‰ç§’ t2.start(); } ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¼€å¯ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«å»è®¿é—®ThreadLocalå¯¹è±¡ï¼Œæˆ‘ä»¬å‘ç°ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹å­˜æ”¾çš„å†…å®¹ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªçº¿ç¨‹æ— æ³•è·å–ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ç¬¬ä¸€ä¸ªçº¿ç¨‹å­˜å…¥åï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ä¹Ÿå­˜æ”¾ï¼Œæ˜¯å¦ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªçº¿ç¨‹å­˜æ”¾çš„å†…å®¹ï¼š public static void main(String[] args) throws InterruptedException { ThreadLocal\u003cString\u003e local = new ThreadLocal\u003c\u003e(); //æ³¨æ„è¿™æ˜¯ä¸€ä¸ªæ³›å‹ç±»ï¼Œå­˜å‚¨ç±»å‹ä¸ºæˆ‘ä»¬è¦å­˜æ”¾çš„å˜é‡ç±»å‹ Thread t1 = new Thread(() -\u003e { local.set(\"lbwnb\"); //å°†å˜é‡çš„å€¼ç»™äºˆThreadLocal System.out.println(\"çº¿ç¨‹1å˜é‡å€¼å·²è®¾å®šï¼\"); try { Thread.sleep(2000); //é—´éš”2ç§’ } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\"çº¿ç¨‹1è¯»å–å˜é‡å€¼ï¼š\"); System.out.println(local.get()); //å°è¯•è·å–ThreadLocalä¸­å­˜æ”¾çš„å˜é‡ }); Thread t2 = new Thread(() -\u003e { local.set(\"yyds\"); //å°†å˜é‡çš„å€¼ç»™äºˆThreadLocal System.out.println(\"çº¿ç¨‹2å˜é‡å€¼å·²è®¾å®šï¼\"); }); t1.start(); Thread.sleep(1000); //é—´éš”1ç§’ t2.start(); } æˆ‘ä»¬å‘ç°ï¼Œå³ä½¿çº¿ç¨‹2é‡æ–°è®¾å®šäº†å€¼ï¼Œä¹Ÿæ²¡æœ‰å½±å“åˆ°çº¿ç¨‹1å­˜æ”¾çš„å€¼ï¼Œæ‰€ä»¥è¯´ï¼Œä¸åŒçº¿ç¨‹å‘ThreadLocalå­˜æ”¾æ•°æ®ï¼Œåªä¼šå­˜æ”¾åœ¨çº¿ç¨‹è‡ªå·±çš„å·¥ä½œç©ºé—´ä¸­ï¼Œè€Œä¸ä¼šç›´æ¥å­˜æ”¾åˆ°ä¸»å†…å­˜ä¸­ï¼Œå› æ­¤å„ä¸ªçº¿ç¨‹ç›´æ¥å­˜æ”¾çš„å†…å®¹äº’ä¸å¹²æ‰°ã€‚ æˆ‘ä»¬å‘ç°åœ¨çº¿ç¨‹ä¸­åˆ›å»ºçš„å­çº¿ç¨‹ï¼Œæ— æ³•è·å¾—çˆ¶çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼š public static void main(String[] args) { ThreadLocal\u003cString\u003e local = new ThreadLocal\u003c\u003e(); Thread t = new Thread(() -\u003e { local.set(\"lbwnb\"); new Thread(() -\u003e { System.out.println(local.get()); }).start(); }); t.start(); } æˆ‘ä»¬å¯ä»¥ä½¿ç”¨InheritableThreadLocalæ¥è§£å†³ï¼š public static void main(String[] args) { ThreadLocal\u003cString\u003e local = new InheritableThreadLocal\u003c\u003e(); Thread t = new Thread(() -\u003e { local.set(\"lbwnb\"); new Thread(() -\u003e { System.out.println(local.get()); }).start(); }); t.start(); } åœ¨InheritableThreadLocalå­˜æ”¾çš„å†…å®¹ï¼Œä¼šè‡ªåŠ¨å‘å­çº¿ç¨‹ä¼ é€’ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:5:5","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"å®šæ—¶å™¨ æˆ‘ä»¬æœ‰æ—¶å€™ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘å¸Œæœ›å®šæ—¶æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”å¦‚3ç§’åæ‰§è¡Œï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨Thread.sleep()æ¥å®ç°ï¼š public static void main(String[] args) { new TimerTask(() -\u003e System.out.println(\"æˆ‘æ˜¯å®šæ—¶ä»»åŠ¡ï¼\"), 3000).start(); //åˆ›å»ºå¹¶å¯åŠ¨æ­¤å®šæ—¶ä»»åŠ¡ } static class TimerTask{ Runnable task; long time; public TimerTask(Runnable runnable, long time){ this.task = runnable; this.time = time; } public void start(){ new Thread(() -\u003e { try { Thread.sleep(time); task.run(); //ä¼‘çœ åå†è¿è¡Œ } catch (InterruptedException e) { e.printStackTrace(); } }).start(); } } æˆ‘ä»¬é€šè¿‡è‡ªè¡Œå°è£…ä¸€ä¸ªTimerTaskç±»ï¼Œå¹¶åœ¨å¯åŠ¨æ—¶ï¼Œå…ˆä¼‘çœ 3ç§’é’Ÿï¼Œå†æ‰§è¡Œæˆ‘ä»¬ä¼ å…¥çš„å†…å®¹ã€‚é‚£ä¹ˆç°åœ¨æˆ‘ä»¬å¸Œæœ›ï¼Œèƒ½å¦å¾ªç¯æ‰§è¡Œä¸€ä¸ªä»»åŠ¡å‘¢ï¼Ÿæ¯”å¦‚æˆ‘å¸Œæœ›æ¯éš”1ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡ä»£ç ï¼Œè¿™æ ·è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ public static void main(String[] args) { new TimerLoopTask(() -\u003e System.out.println(\"æˆ‘æ˜¯å®šæ—¶ä»»åŠ¡ï¼\"), 3000).start(); //åˆ›å»ºå¹¶å¯åŠ¨æ­¤å®šæ—¶ä»»åŠ¡ } static class TimerLoopTask{ Runnable task; long loopTime; public TimerLoopTask(Runnable runnable, long loopTime){ this.task = runnable; this.loopTime = loopTime; } public void start(){ new Thread(() -\u003e { try { while (true){ //æ— é™å¾ªç¯æ‰§è¡Œ Thread.sleep(loopTime); task.run(); //ä¼‘çœ åå†è¿è¡Œ } } catch (InterruptedException e) { e.printStackTrace(); } }).start(); } } ç°åœ¨æˆ‘ä»¬å°†å•æ¬¡æ‰§è¡Œæ”¾å…¥åˆ°ä¸€ä¸ªæ— é™å¾ªç¯ä¸­ï¼Œè¿™æ ·å°±èƒ½ä¸€ç›´æ‰§è¡Œäº†ï¼Œå¹¶ä¸”æŒ‰ç…§æˆ‘ä»¬çš„é—´éš”æ—¶é—´è¿›è¡Œã€‚ ä½†æ˜¯ç»ˆç©¶æ˜¯æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œå¯èƒ½å¾ˆå¤šæ–¹é¢è¿˜æ²¡è€ƒè™‘åˆ°ï¼ŒJavaä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—è‡ªå·±çš„æ¡†æ¶ç”¨äºå¤„ç†å®šæ—¶ä»»åŠ¡ï¼š public static void main(String[] args) { Timer timer = new Timer(); //åˆ›å»ºå®šæ—¶å™¨å¯¹è±¡ timer.schedule(new TimerTask() { //æ³¨æ„è¿™ä¸ªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸æ˜¯æ¥å£ï¼Œæ— æ³•ä½¿ç”¨lambdaè¡¨è¾¾å¼ç®€åŒ–ï¼Œåªèƒ½ä½¿ç”¨åŒ¿åå†…éƒ¨ç±» @Override public void run() { System.out.println(Thread.currentThread().getName()); //æ‰“å°å½“å‰çº¿ç¨‹åç§° } }, 1000); //æ‰§è¡Œä¸€ä¸ªå»¶æ—¶ä»»åŠ¡ } æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªTimerç±»æ¥è®©å®ƒè¿›è¡Œå®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­¤å¯¹è±¡æ¥åˆ›å»ºä»»æ„ç±»å‹çš„å®šæ—¶ä»»åŠ¡ï¼ŒåŒ…å»¶æ—¶ä»»åŠ¡ã€å¾ªç¯å®šæ—¶ä»»åŠ¡ç­‰ã€‚æˆ‘ä»¬å‘ç°ï¼Œè™½ç„¶ä»»åŠ¡æ‰§è¡Œå®Œæˆäº†ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç¨‹åºå¹¶æ²¡æœ‰åœæ­¢ï¼Œè¿™æ˜¯å› ä¸ºTimerå†…å­˜ç»´æŠ¤äº†ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—å’Œä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼š public class Timer { /** * The timer task queue. This data structure is shared with the timer * thread. The timer produces tasks, via its various schedule calls, * and the timer thread consumes, executing timer tasks as appropriate, * and removing them from the queue when they're obsolete. */ private final TaskQueue queue = new TaskQueue(); /** * The timer thread. */ private final TimerThread thread = new TimerThread(queue); ... } TimerThreadç»§æ‰¿è‡ªThreadï¼Œæ˜¯ä¸€ä¸ªæ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œåœ¨æ„é€ æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š public Timer(String name) { thread.setName(name); thread.start(); } è€Œå®ƒçš„runæ–¹æ³•ä¼šå¾ªç¯åœ°è¯»å–é˜Ÿåˆ—ä¸­æ˜¯å¦è¿˜æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰ä»»åŠ¡ä¾æ¬¡æ‰§è¡Œï¼Œæ²¡æœ‰çš„è¯å°±æš‚æ—¶å¤„äºä¼‘çœ çŠ¶æ€ï¼š public void run() { try { mainLoop(); } finally { // Someone killed this Thread, behave as if Timer cancelled synchronized(queue) { newTasksMayBeScheduled = false; queue.clear(); // Eliminate obsolete references } } } /** * The main timer loop. (See class comment.) */ private void mainLoop() { try { TimerTask task; boolean taskFired; synchronized(queue) { // Wait for queue to become non-empty while (queue.isEmpty() \u0026\u0026 newTasksMayBeScheduled) //å½“é˜Ÿåˆ—ä¸ºç©ºåŒæ—¶æ²¡æœ‰è¢«å…³é—­æ—¶ï¼Œä¼šè°ƒç”¨wait()æ–¹æ³•æš‚æ—¶å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå½“æœ‰æ–°çš„ä»»åŠ¡æ—¶ï¼Œä¼šè¢«å”¤é†’ã€‚ queue.wait(); if (queue.isEmpty()) break; //å½“è¢«å”¤é†’åéƒ½æ²¡æœ‰ä»»åŠ¡æ—¶ï¼Œå°±ä¼šç»“æŸå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯ç»“æŸå·¥ä½œçº¿ç¨‹ ... } newTasksMayBeScheduledå®é™…ä¸Šå°±æ˜¯æ ‡è®°å½“å‰å®šæ—¶å™¨æ˜¯å¦å…³é—­ï¼Œå½“å®ƒä¸ºfalseæ—¶ï¼Œè¡¨ç¤ºå·²ç»ä¸ä¼šå†æœ‰æ–°çš„ä»»åŠ¡åˆ°æ¥ï¼Œä¹Ÿå°±æ˜¯å…³é—­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨cancel()æ–¹æ³•æ¥å…³é—­å®ƒçš„å·¥ä½œçº¿ç¨‹ï¼š public void cancel() { synchronized(queue) { thread.newTasksMayBeScheduled = false; queue.clear(); queue.notify(); //å”¤é†’waitä½¿å¾—å·¥ä½œçº¿ç¨‹ç»“æŸ } } å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨å®Œæˆåï¼Œè°ƒç”¨Timerçš„cancel()æ–¹æ³•ä»¥æ­£å¸¸é€€å‡ºæˆ‘ä»¬çš„ç¨‹åºï¼š public static void main(String[] args) { Timer timer = new Timer(); timer.schedule(new TimerTask() { @Override public void run() { System.out.println(Thread.currentThread().getName()); timer.cancel(); //ç»“æŸ } }, 1000); } ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:6:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"å®ˆæŠ¤çº¿ç¨‹ ä¸è¦æŠŠå®ˆæŠ¤è¿›ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹ç›¸æå¹¶è®ºï¼å®ˆæŠ¤è¿›ç¨‹åœ¨åå°è¿è¡Œè¿è¡Œï¼Œä¸éœ€è¦å’Œç”¨æˆ·äº¤äº’ï¼Œæœ¬è´¨å’Œæ™®é€šè¿›ç¨‹ç±»ä¼¼ã€‚è€Œå®ˆæŠ¤çº¿ç¨‹å°±ä¸ä¸€æ ·äº†ï¼Œå½“å…¶ä»–æ‰€æœ‰çš„éå®ˆæŠ¤çº¿ç¨‹ç»“æŸä¹‹åï¼Œå®ˆæŠ¤çº¿ç¨‹æ˜¯è‡ªåŠ¨ç»“æŸï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaä¸­æ‰€æœ‰çš„çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸï¼Œå› æ­¤å®ˆæŠ¤çº¿ç¨‹ä¸é€‚åˆè¿›è¡ŒIOæ“ä½œï¼Œåªé€‚åˆæ‰“æ‰“æ‚ï¼š public static void main(String[] args) throws InterruptedException{ Thread t = new Thread(() -\u003e { while (true){ try { System.out.println(\"ç¨‹åºæ­£å¸¸è¿è¡Œä¸­...\"); Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } } }); t.setDaemon(true); //è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼ˆå¿…é¡»åœ¨å¼€å§‹ä¹‹å‰ï¼Œä¸­é€”æ˜¯ä¸å…è®¸è½¬æ¢çš„ï¼‰ t.start(); for (int i = 0; i \u003c 5; i++) { Thread.sleep(1000); } } åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çš„ï¼š public static void main(String[] args) throws InterruptedException{ Thread t = new Thread(() -\u003e { Thread it = new Thread(() -\u003e { while (true){ try { System.out.println(\"ç¨‹åºæ­£å¸¸è¿è¡Œä¸­...\"); Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } } }); it.start(); }); t.setDaemon(true); //è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼ˆå¿…é¡»åœ¨å¼€å§‹ä¹‹å‰ï¼Œä¸­é€”æ˜¯ä¸å…è®¸è½¬æ¢çš„ï¼‰ t.start(); for (int i = 0; i \u003c 5; i++) { Thread.sleep(1000); } } ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:7:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"å†è°ˆé›†åˆç±»å¹¶è¡Œæ–¹æ³• å…¶å®æˆ‘ä»¬ä¹‹å‰åœ¨è®²è§£é›†åˆç±»çš„æ ¹æ¥å£æ—¶ï¼Œå°±å‘ç°æœ‰è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š default Stream\u003cE\u003e parallelStream() { return StreamSupport.stream(spliterator(), true); } å¹¶è¡Œæµï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹æ‰§è¡Œçš„æµï¼Œå®ƒé€šè¿‡é»˜è®¤çš„ForkJoinPoolå®ç°ï¼ˆè¿™é‡Œä¸è®²è§£åŸç†ï¼‰ï¼Œå®ƒå¯ä»¥æé«˜ä½ çš„å¤šçº¿ç¨‹ä»»åŠ¡çš„é€Ÿåº¦ã€‚ public static void main(String[] args) { List\u003cInteger\u003e list = new ArrayList\u003c\u003e(Arrays.asList(1, 4, 5, 2, 9, 3, 6, 0)); list .parallelStream() //è·å¾—å¹¶è¡Œæµ .forEach(i -\u003e System.out.println(Thread.currentThread().getName()+\" -\u003e \"+i)); } æˆ‘ä»¬å‘ç°ï¼ŒforEachæ“ä½œçš„é¡ºåºï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬å®é™…Listä¸­çš„é¡ºåºï¼ŒåŒæ—¶æ¯æ¬¡æ‰“å°ä¹Ÿæ˜¯ä¸åŒçš„çº¿ç¨‹åœ¨æ‰§è¡Œï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨forEachOrdered()æ–¹æ³•æ¥ä½¿ç”¨å•çº¿ç¨‹ç»´æŒåŸæœ¬çš„é¡ºåºï¼š public static void main(String[] args) { List\u003cInteger\u003e list = new ArrayList\u003c\u003e(Arrays.asList(1, 4, 5, 2, 9, 3, 6, 0)); list .parallelStream() //è·å¾—å¹¶è¡Œæµ .forEachOrdered(System.out::println); } æˆ‘ä»¬ä¹‹å‰è¿˜å‘ç°ï¼Œåœ¨Arraysæ•°ç»„å·¥å…·ç±»ä¸­ï¼Œä¹ŸåŒ…å«å¤§é‡çš„å¹¶è¡Œæ–¹æ³•ï¼š public static void main(String[] args) { int[] arr = new int[]{1, 4, 5, 2, 9, 3, 6, 0}; Arrays.parallelSort(arr); //ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œå¹¶è¡Œæ’åºï¼Œæ•ˆç‡æ›´é«˜ System.out.println(Arrays.toString(arr)); } æ›´å¤šåœ°ä½¿ç”¨å¹¶è¡Œæ–¹æ³•ï¼Œå¯ä»¥æ›´åŠ å……åˆ†åœ°å‘æŒ¥ç°ä»£è®¡ç®—æœºå¤šæ ¸å¿ƒçš„ä¼˜åŠ¿ï¼Œä½†æ˜¯åŒæ—¶éœ€è¦æ³¨æ„å¤šçº¿ç¨‹äº§ç”Ÿçš„å¼‚æ­¥é—®é¢˜ï¼ public static void main(String[] args) { int[] arr = new int[]{1, 4, 5, 2, 9, 3, 6, 0}; Arrays.parallelSetAll(arr, i -\u003e { System.out.println(Thread.currentThread().getName()); return arr[i]; }); System.out.println(Arrays.toString(arr)); } é€šè¿‡å¯¹Javaå¤šçº¿ç¨‹çš„äº†è§£ï¼Œæˆ‘ä»¬å°±å…·å¤‡äº†åˆ©ç”¨å¤šçº¿ç¨‹è§£å†³é—®é¢˜çš„æ€ç»´ï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:8:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaå¤šçº¿ç¨‹ç¼–ç¨‹å®æˆ˜ è¿™æ˜¯æ•´ä¸ªæ•™ç¨‹æœ€åä¸€ä¸ªç¼–ç¨‹å®æˆ˜å†…å®¹äº†ï¼Œä¸‹ä¸€ç« èŠ‚ä¸ºåå°„ä¸€èˆ¬å¼€å‘è€…ä½¿ç”¨æ¯”è¾ƒå°‘ï¼Œå±äºé€‰å­¦å†…å®¹ï¼Œä¸ç¼–æ’ç¼–ç¨‹å®æˆ˜è¯¾ç¨‹ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:9:0","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€… æ‰€è°“çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œæ˜¯é€šè¿‡ä¸€ä¸ªå®¹å™¨æ¥è§£å†³ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¼ºè€¦åˆé—®é¢˜ã€‚é€šä¿—çš„è®²ï¼Œå°±æ˜¯ç”Ÿäº§è€…åœ¨ä¸æ–­çš„ç”Ÿäº§ï¼Œæ¶ˆè´¹è€…ä¹Ÿåœ¨ä¸æ–­çš„æ¶ˆè´¹ï¼Œå¯æ˜¯æ¶ˆè´¹è€…æ¶ˆè´¹çš„äº§å“æ˜¯ç”Ÿäº§è€…ç”Ÿäº§çš„ï¼Œè¿™å°±å¿…ç„¶å­˜åœ¨ä¸€ä¸ªä¸­é—´å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå®¹å™¨æƒ³è±¡æˆæ˜¯ä¸€ä¸ªè´§æ¶ï¼Œå½“è´§æ¶ç©ºçš„æ—¶å€™ï¼Œç”Ÿäº§è€…è¦ç”Ÿäº§äº§å“ï¼Œæ­¤æ—¶æ¶ˆè´¹è€…åœ¨ç­‰å¾…ç”Ÿäº§è€…å¾€è´§æ¶ä¸Šç”Ÿäº§äº§å“ï¼Œè€Œå½“è´§æ¶æœ‰è´§ç‰©çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…å¯ä»¥ä»è´§æ¶ä¸Šæ‹¿èµ°å•†å“ï¼Œç”Ÿäº§è€…æ­¤æ—¶ç­‰å¾…è´§æ¶å‡ºç°ç©ºä½ï¼Œè¿›è€Œè¡¥è´§ï¼Œè¿™æ ·ä¸æ–­çš„å¾ªç¯ã€‚ é€šè¿‡å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªé¤å…çš„2ä¸ªå¨å¸ˆå’Œ3ä¸ªé¡¾å®¢ï¼Œå‡è®¾å¨å¸ˆç‚’å‡ºä¸€ä¸ªèœçš„æ—¶é—´ä¸º3ç§’ï¼Œé¡¾å®¢åƒæ‰èœå“çš„æ—¶é—´ä¸º4ç§’ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/:9:1","tags":["Javaå¤šçº¿ç¨‹"],"title":"Javaå¤šçº¿ç¨‹","uri":"/posts/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["JavaSEç¬”è®°"],"content":"javaé¢å‘å¯¹è±¡","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaå¯¹è±¡å’Œå¤šæ€ ï¼ˆé¢å‘å¯¹è±¡ï¼‰ é…å¥—è§†é¢‘ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:0:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"é¢å‘å¯¹è±¡åŸºç¡€ é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡(Object Oriented Programming) å¯¹è±¡åŸºäºç±»åˆ›å»ºï¼Œç±»ç›¸å½“äºä¸€ä¸ªæ¨¡æ¿ï¼Œå¯¹è±¡å°±æ˜¯æ ¹æ®æ¨¡æ¿åˆ›å»ºå‡ºæ¥çš„å®ä½“ï¼ˆå°±åƒåšæœˆé¥¼ï¼Œæˆ‘ä»¬è¦åšä¸€ä¸ªæœˆé¥¼é¦–å…ˆéœ€è¦ä¸€ä¸ªæ¨¡å…·ï¼Œæ¨¡å…·å°±æ˜¯æˆ‘ä»¬çš„ç±»ï¼Œè€Œåšå‡ºæ¥çš„æœˆé¥¼ï¼Œå°±æ˜¯ç±»çš„å®ç°ï¼Œä¹Ÿå«åšå¯¹è±¡ï¼‰ï¼Œç±»æ˜¯æŠ½è±¡çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸èƒ½ä»£è¡¨æŸä¸€ä¸ªå…·ä½“çš„äº‹ç‰©ï¼Œç±»æ˜¯å¯¹è±¡çš„ä¸€ä¸ªæ¨¡æ¿ã€‚ç±»å…·æœ‰è‡ªå·±çš„å±æ€§ï¼ŒåŒ…æ‹¬æˆå‘˜å˜é‡ã€æˆå‘˜æ–¹æ³•ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ç±»çš„æˆå‘˜æ–¹æ³•æ¥è®©ç±»è¿›è¡Œä¸€äº›æ“ä½œã€‚ Scanner sc = new Scanner(System.in); String str = sc.nextLine(); System.out.println(\"ä½ è¾“å…¥äº†ï¼š\"+str); sc.close(); æ‰€æœ‰çš„å¯¹è±¡ï¼Œéƒ½éœ€è¦é€šè¿‡newå…³é”®å­—åˆ›å»ºï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Javaä¸æ˜¯çº¯é¢å¯¹å¯¹è±¡è¯­è¨€ï¼ ä¸æ˜¯åŸºæœ¬ç±»å‹çš„å˜é‡ï¼Œéƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¼•ç”¨ç±»å‹å˜é‡ä»£è¡¨ä¸€ä¸ªå¯¹è±¡ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹å˜é‡ï¼Œä¿å­˜çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•ç”¨æ¥å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ï¼ˆæœ€å¥½ä¸è¦ç†è§£ä¸ºå¼•ç”¨æŒ‡å‘å¯¹è±¡çš„åœ°å€ï¼Œåˆå­¦è€…ä¸è¦è°ˆå†…å­˜ï¼Œå­¦åˆ°JVMæ—¶å†æ¥è®¨è®ºï¼‰ å¯¹è±¡å ç”¨çš„å†…å­˜ç”±JVMç»Ÿä¸€ç®¡ç†ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ä¸å†ä½¿ç”¨æ—¶ï¼ˆæ¯”å¦‚å¤±å»å¼•ç”¨æˆ–æ˜¯ç¦»å¼€äº†ä½œç”¨åŸŸï¼‰ä¼šè¢«JVMè‡ªåŠ¨æ¸…ç†ï¼Œå†…å­˜ç®¡ç†æ›´æ–¹ä¾¿ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:1:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"ç±»çš„åŸºæœ¬ç»“æ„ ä¸ºäº†å¿«é€ŸæŒæ¡ï¼Œæˆ‘ä»¬è‡ªå·±åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ç±»ï¼Œåˆ›å»ºçš„ç±»æ–‡ä»¶åç§°åº”è¯¥å’Œç±»åä¸€è‡´ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æˆå‘˜å˜é‡ åœ¨ç±»ä¸­ï¼Œå¯ä»¥åŒ…å«è®¸å¤šçš„æˆå‘˜å˜é‡ï¼Œä¹Ÿå«æˆå‘˜å±æ€§ï¼Œæˆå‘˜å­—æ®µ(field)é€šè¿‡.æ¥è®¿é—®æˆ‘ä»¬ç±»ä¸­çš„æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»åˆ›å»ºçš„å¯¹è±¡æ¥è®¿é—®å’Œä¿®æ”¹è¿™äº›å˜é‡ã€‚æˆå‘˜å˜é‡æ˜¯å±äºå¯¹è±¡çš„ï¼ public class Test { int age; String name; } public static void main(String[] args) { Test test = new Test(); test.name = \"å¥¥åˆ©ç»™\"; System.out.println(test.name); } æˆå‘˜å˜é‡é»˜è®¤å¸¦æœ‰åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰åˆå§‹å€¼ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:1","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æˆå‘˜æ–¹æ³• æˆ‘ä»¬ä¹‹å‰çš„å­¦ä¹ ä¸­æ¥è§¦è¿‡æ–¹æ³•(Method)å—ï¼Ÿä¸»æ–¹æ³•ï¼ public static void main(String[] args) { //Body } æ–¹æ³•æ˜¯è¯­å¥çš„é›†åˆï¼Œæ˜¯ä¸ºäº†å®ŒæˆæŸä»¶äº‹æƒ…è€Œå­˜åœ¨çš„ã€‚å®ŒæˆæŸä»¶äº‹æƒ…ï¼Œå¯ä»¥æœ‰ç»“æœï¼Œä¹Ÿå¯ä»¥åšäº†å°±åšäº†ï¼Œä¸è¿”å›ç»“æœã€‚æ¯”å¦‚è®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°è®¡ç®—åçš„ç»“æœï¼Œæ‰€ä»¥è¯´æ–¹æ³•éœ€è¦æœ‰è¿”å›å€¼ï¼›åˆæ¯”å¦‚ï¼Œæˆ‘ä»¬åªæƒ³å§æ•°å­—æ‰“å°åœ¨æ§åˆ¶å°ï¼Œåªéœ€è¦æ‰“å°å°±è¡Œï¼Œä¸ç”¨ç»™æˆ‘ç»“æœï¼Œæ‰€ä»¥è¯´æ–¹æ³•ä¸éœ€è¦æœ‰è¿”å›å€¼ã€‚ æ–¹æ³•çš„å®šä¹‰å’Œä½¿ç”¨ åœ¨ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå·±çš„æ–¹æ³•ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š [è¿”å›å€¼ç±»å‹] æ–¹æ³•åç§°([å‚æ•°]){ //æ–¹æ³•ä½“ return ç»“æœ; } è¿”å›å€¼ç±»å‹ï¼šå¯ä»¥æ˜¯å¼•ç”¨ç±»å‹å’ŒåŸºæœ¬ç±»å‹ï¼Œè¿˜å¯ä»¥æ˜¯voidï¼Œè¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼ æ–¹æ³•åç§°ï¼šå’Œæ ‡è¯†ç¬¦çš„è§„åˆ™ä¸€è‡´ï¼Œå’Œå˜é‡ä¸€æ ·ï¼Œè§„èŒƒå°å†™å­—æ¯å¼€å¤´ï¼ å‚æ•°ï¼šä¾‹å¦‚æ–¹æ³•éœ€è¦è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦æŠŠä¸¤ä¸ªæ•°åˆ°åº•æ˜¯ä»€ä¹ˆå‘Šè¯‰æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥æ–¹æ³• æ–¹æ³•ä½“ï¼šæ–¹æ³•å…·ä½“è¦å¹²çš„äº‹æƒ… ç»“æœï¼šæ–¹æ³•æ‰§è¡Œçš„ç»“æœé€šè¿‡returnè¿”å›ï¼ˆå¦‚æœè¿”å›ç±»å‹ä¸ºvoidï¼Œå¯ä»¥çœç•¥returnï¼‰ évoidæ–¹æ³•ä¸­ï¼Œreturnå…³é”®å­—ä¸ä¸€å®šéœ€è¦æ”¾åœ¨æœ€åï¼Œä½†æ˜¯ä¸€å®šè¦ä¿è¯æ–¹æ³•åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½å…·æœ‰è¿”å›å€¼ï¼ int test(int a){ if(a \u003e 0){ //ç¼ºå°‘retrunè¯­å¥ï¼ }else{ return 0; } } returnä¹Ÿèƒ½ç”¨æ¥æå‰ç»“æŸæ•´ä¸ªæ–¹æ³•ï¼Œæ— è®ºæ­¤æ—¶ç¨‹åºæ‰§è¡Œåˆ°ä½•å¤„ï¼Œæ— è®ºreturnä½äºå“ªé‡Œï¼Œéƒ½ä¼šç«‹å³ç»“æŸä¸ªæ–¹æ³•ï¼ void main(String[] args) { for (int i = 0; i \u003c 10; i++) { if(i == 1) return; //åœ¨å¾ªç¯å†…è¿”å›äº†ï¼å’ŒbreakåŒºåˆ«ï¼Ÿ } System.out.println(\"æ·¦\"); //è¿˜ä¼šåˆ°è¿™é‡Œå—ï¼Ÿ } ä¼ å…¥æ–¹æ³•çš„å‚æ•°ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œä¼šåœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå¯¹å‚æ•°çš„å€¼è¿›è¡Œå¤åˆ¶ï¼Œæ–¹æ³•ä¸­çš„å‚æ•°å˜é‡ï¼Œä¸æ˜¯æˆ‘ä»¬ä¼ å…¥çš„å˜é‡æœ¬èº«ï¼ public static void main(String[] args) { int a = 10, b = 20; new Test().swap(a, b); System.out.println(\"a=\"+a+\", b=\"+b); } public class Test{ void swap(int a, int b){ //ä¼ é€’çš„ä»…ä»…æ˜¯å€¼è€Œå·²ï¼ int temp = a; a = b; b = temp; } } ä¼ å…¥æ–¹æ³•çš„å‚æ•°ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆä¼ å…¥çš„ä¾ç„¶æ˜¯è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼ï¼ˆç±»ä¼¼äºCè¯­è¨€çš„æŒ‡é’ˆï¼‰ public class B{ String name; } public class A{ void test(B b){ //ä¼ é€’çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å€¼ System.out.println(b.name); } } public static void main(String[] args) { int a = 10, b = 20; B b = new B(); b.name = \"lbw\"; new A().test(b); System.out.println(\"a=\"+a+\", b=\"+b); } æ–¹æ³•ä¹‹é—´å¯ä»¥ç›¸äº’è°ƒç”¨ void a(){ //xxxx } void b(){ a(); } å½“æ–¹æ³•åœ¨è‡ªå·±å†…éƒ¨è°ƒç”¨è‡ªå·±æ—¶ï¼Œç§°ä¸ºé€’å½’è°ƒç”¨ï¼ˆé€’å½’å¾ˆå±é™©ï¼Œæ…é‡ï¼ï¼‰ int a(){ return a(); } æˆå‘˜æ–¹æ³•å’Œæˆå‘˜å˜é‡ä¸€æ ·ï¼Œæ˜¯å±äºå¯¹è±¡çš„ï¼Œåªèƒ½é€šè¿‡å¯¹è±¡å»è°ƒç”¨ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:2","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å¯¹è±¡è®¾è®¡ç»ƒä¹  å­¦ç”Ÿåº”è¯¥å…·æœ‰ä»¥ä¸‹å±æ€§ï¼šåå­—ã€å¹´é¾„ å­¦ç”Ÿåº”è¯¥å…·æœ‰ä»¥ä¸‹è¡Œä¸ºï¼šå­¦ä¹ ã€è¿åŠ¨ã€è¯´è¯ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:3","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æ–¹æ³•çš„é‡è½½ ä¸€ä¸ªç±»ä¸­å¯ä»¥åŒ…å«å¤šä¸ªåŒåçš„æ–¹æ³•ï¼Œä½†æ˜¯éœ€è¦çš„å½¢å¼å‚æ•°ä¸ä¸€æ ·ã€‚ï¼ˆè¡¥å……ï¼šå½¢å¼å‚æ•°å°±æ˜¯å®šä¹‰æ–¹æ³•éœ€è¦çš„å‚æ•°ï¼Œå®é™…å‚æ•°å°±ä¼ å…¥çš„å‚æ•°ï¼‰æ–¹æ³•çš„è¿”å›ç±»å‹ï¼Œå¯ä»¥ç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¸åŒï¼Œä½†æ˜¯ä»…è¿”å›ç±»å‹ä¸åŒï¼Œæ˜¯ä¸å…è®¸çš„ï¼ public class Test { int a(){ //åŸæœ¬çš„æ–¹æ³• return 1; } int a(int i){ //okï¼Œå½¢å‚ä¸åŒ return i; } void a(byte i){ //okï¼Œè¿”å›ç±»å‹å’Œå½¢å‚éƒ½ä¸åŒ } void a(){ //é”™è¯¯ï¼Œä»…è¿”å›å€¼ç±»å‹åç§°ä¸åŒä¸èƒ½é‡è½½ } } ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‚æ•°ï¼Œä½†æ˜¯æ”¯æŒè°ƒç”¨åŒæ ·çš„æ–¹æ³•ï¼Œæ‰§è¡Œä¸€æ ·çš„é€»è¾‘ï¼š public class Test { int sum(int a, int b){ //åªæœ‰intæ”¯æŒï¼Œä¸çµæ´»ï¼ return a+b; } double sum(double a, double b){ //é‡å†™ä¸€ä¸ªdoubleç±»å‹çš„ï¼Œå°±æ”¯æŒå°æ•°è®¡ç®—äº† return a+b; } } ç°åœ¨æˆ‘ä»¬æœ‰å¾ˆå¤šç§é‡å†™çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¼ å…¥å®å‚åï¼Œåˆ°åº•è¿›äº†å“ªä¸ªæ–¹æ³•å‘¢ï¼Ÿ public class Test { void a(int i){ System.out.println(\"è°ƒç”¨äº†int\"); } void a(short i){ System.out.println(\"è°ƒç”¨äº†short\"); } void a(long i){ System.out.println(\"è°ƒç”¨äº†long\"); } void a(char i){ System.out.println(\"è°ƒç”¨äº†char\"); } void a(double i){ System.out.println(\"è°ƒç”¨äº†double\"); } void a(float i){ System.out.println(\"è°ƒç”¨äº†float\"); } public static void main(String[] args) { Test test = new Test(); test.a(1); //ç›´æ¥è¾“å…¥æ•´æ•° test.a(1.0); //ç›´æ¥è¾“å…¥å°æ•° short s = 2; test.a(s); //ä¼šå¯¹å·å…¥åº§å—ï¼Ÿ test.a(1.0F); } } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:4","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æ„é€ æ–¹æ³• æ„é€ æ–¹æ³•ï¼ˆæ„é€ å™¨ï¼‰æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼Œè¿”å›çš„æ˜¯å½“å‰å¯¹è±¡çš„å¼•ç”¨ï¼æ¯ä¸€ä¸ªç±»éƒ½é»˜è®¤è‡ªå¸¦ä¸€ä¸ªæ— å‚æ„é€ æ–¹æ³•ã€‚ //åç¼–è¯‘ç»“æœ package com.test; public class Test { public Test() { //å³ä½¿ä½ ä»€ä¹ˆéƒ½ä¸ç¼–å†™ï¼Œä¹Ÿè‡ªå¸¦ä¸€ä¸ªæ— å‚æ„é€ æ–¹æ³•ï¼Œåªæ˜¯é»˜è®¤æ˜¯éšè—çš„ } } åç¼–è¯‘å…¶å®å°±æ˜¯æŠŠæˆ‘ä»¬ç¼–è¯‘å¥½çš„classæ–‡ä»¶å˜å›Javaæºä»£ç ã€‚ Test test = new Test(); //å®é™…ä¸Šå­˜åœ¨Test()è¿™ä¸ªçš„æ–¹æ³•ï¼Œnewå…³é”®å­—å°±æ˜¯ç”¨æ¥åˆ›å»ºå¹¶å¾—åˆ°å¼•ç”¨çš„ // new + ä½ æƒ³è¦ä½¿ç”¨çš„æ„é€ æ–¹æ³• è¿™ç§æ–¹æ³•æ²¡æœ‰å†™æ˜è¿”å›å€¼ï¼Œä½†æ˜¯æ¯ä¸ªç±»éƒ½å¿…é¡»å…·æœ‰è¿™ä¸ªæ–¹æ³•ï¼åªæœ‰è°ƒç”¨ç±»çš„æ„é€ æ–¹æ³•ï¼Œæ‰èƒ½åˆ›å»ºç±»çš„å¯¹è±¡ï¼ ç±»è¦åœ¨ä¸€å¼€å§‹å‡†å¤‡çš„æ‰€æœ‰ä¸œè¥¿ï¼Œéƒ½ä¼šåœ¨æ„é€ æ–¹æ³•é‡Œé¢æ‰§è¡Œï¼Œå®Œæˆæ„é€ æ–¹æ³•çš„å†…å®¹åï¼Œæ‰èƒ½åˆ›å»ºå‡ºå¯¹è±¡ï¼ ä¸€èˆ¬æœ€å¸¸ç”¨çš„å°±æ˜¯ç»™æˆå‘˜å±æ€§èµ‹åˆå§‹å€¼ï¼š public class Student { String name; Student(){ name = \"ä¼å…µä¸€å·\"; } } æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æŒ‡å®šæœ‰å‚æ„é€ ï¼Œå½“é‡åˆ°åç§°å†²çªæ—¶ï¼Œéœ€è¦ç”¨åˆ°thiså…³é”®å­— public class Student { String name; Student(String name){ //å½¢å‚å’Œç±»æˆå‘˜å˜é‡å†²çªäº†ï¼ŒJavaä¼šä¼˜å…ˆä½¿ç”¨å½¢å¼å‚æ•°å®šä¹‰çš„å˜é‡ï¼ this.name = name; //é€šè¿‡thisæŒ‡ä»£å½“å‰çš„å¯¹è±¡å±æ€§ï¼Œthiså°±ä»£è¡¨å½“å‰å¯¹è±¡ } } //idea å³é”®å¿«é€Ÿç”Ÿæˆï¼ æ³¨æ„ï¼Œthisåªèƒ½ç”¨äºæŒ‡ä»£å½“å‰å¯¹è±¡çš„å†…å®¹ï¼Œå› æ­¤ï¼Œåªæœ‰å±äºå¯¹è±¡æ‹¥æœ‰çš„éƒ¨åˆ†æ‰å¯ä»¥ä½¿ç”¨thisï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªèƒ½åœ¨ç±»çš„æˆå‘˜æ–¹æ³•ä¸­ä½¿ç”¨thisï¼Œä¸èƒ½åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨thiså…³é”®å­—ã€‚ åœ¨æˆ‘ä»¬å®šä¹‰äº†æ–°çš„æœ‰å‚æ„é€ ä¹‹åï¼Œé»˜è®¤çš„æ— å‚æ„é€ ä¼šè¢«è¦†ç›–ï¼ //åç¼–è¯‘åä¾ç„¶åªæœ‰æˆ‘ä»¬å®šä¹‰çš„æœ‰å‚æ„é€ ï¼ å¦‚æœåŒæ—¶éœ€è¦æœ‰å‚å’Œæ— å‚æ„é€ ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°æ–¹æ³•çš„é‡è½½ï¼æ‰‹åŠ¨å†å»å®šä¹‰ä¸€ä¸ªæ— å‚æ„é€ ã€‚ public class Student { String name; Student(){ } Student(String name){ this.name = name; } } æˆå‘˜å˜é‡çš„åˆå§‹åŒ–å§‹ç»ˆåœ¨æ„é€ æ–¹æ³•æ‰§è¡Œä¹‹å‰ public class Student { String a = \"sadasa\"; Student(){ System.out.println(a); } public static void main(String[] args) { Student s = new Student(); } } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:5","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"é™æ€å˜é‡å’Œé™æ€æ–¹æ³• é™æ€å˜é‡å’Œé™æ€æ–¹æ³•æ˜¯ç±»å…·æœ‰çš„å±æ€§ï¼ˆåé¢è¿˜ä¼šæåˆ°é™æ€ç±»ã€é™æ€ä»£ç å—ï¼‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«çš„å†…å®¹ã€‚æˆ‘ä»¬é€šè¿‡ä½¿ç”¨staticå…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå˜é‡æˆ–ä¸€ä¸ªæ–¹æ³•ä¸ºé™æ€çš„ï¼Œä¸€æ—¦è¢«å£°æ˜ä¸ºé™æ€ï¼Œé‚£ä¹ˆé€šè¿‡è¿™ä¸ªç±»åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ï¼Œæ“ä½œçš„éƒ½æ˜¯åŒä¸€ä¸ªç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡å†å¤šï¼Œä¹Ÿåªæœ‰è¿™ä¸€ä¸ªé™æ€çš„å˜é‡æˆ–æ–¹æ³•ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†é™æ€å˜é‡çš„å€¼ï¼Œé‚£ä¹ˆå…¶ä»–çš„å¯¹è±¡è¯»å–çš„å°±æ˜¯è¢«æ”¹å˜çš„å€¼ã€‚ public class Student { static int a; } public static void main(String[] args) { Student s1 = new Student(); s1.a = 10; Student s2 = new Student(); System.out.println(s2.a); } ä¸æ¨èä½¿ç”¨å¯¹è±¡æ¥è°ƒç”¨ï¼Œè¢«æ ‡è®°ä¸ºé™æ€çš„å†…å®¹ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»å.xxxçš„å½¢å¼è®¿é—® public static void main(String[] args) { Student.a = 10; System.out.println(Student.a); } ç®€è¿°ç±»åŠ è½½æœºåˆ¶ ç±»å¹¶ä¸æ˜¯åœ¨ä¸€å¼€å§‹å°±å…¨éƒ¨åŠ è½½å¥½ï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶æ‰ä¼šå»åŠ è½½ï¼ˆæå‡é€Ÿåº¦ï¼‰ä»¥ä¸‹æƒ…å†µä¼šåŠ è½½ç±»ï¼š è®¿é—®ç±»çš„é™æ€å˜é‡ï¼Œæˆ–è€…ä¸ºé™æ€å˜é‡èµ‹å€¼ new åˆ›å»ºç±»çš„å®ä¾‹ï¼ˆéšå¼åŠ è½½ï¼‰ è°ƒç”¨ç±»çš„é™æ€æ–¹æ³• å­ç±»åˆå§‹åŒ–æ—¶ å…¶ä»–çš„æƒ…å†µä¼šåœ¨è®²åˆ°åå°„æ—¶ä»‹ç» æ‰€æœ‰è¢«æ ‡è®°ä¸ºé™æ€çš„å†…å®¹ï¼Œä¼šåœ¨ç±»åˆšåŠ è½½çš„æ—¶å€™å°±åˆ†é…ï¼Œè€Œä¸æ˜¯åœ¨å¯¹è±¡åˆ›å»ºçš„æ—¶å€™åˆ†é…ï¼Œæ‰€ä»¥è¯´é™æ€å†…å®¹ä¸€å®šä¼šåœ¨ç¬¬ä¸€ä¸ªå¯¹è±¡åˆå§‹åŒ–ä¹‹å‰å®ŒæˆåŠ è½½ã€‚ public class Student { static int a = test(); //ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•ï¼Œåªèƒ½è°ƒç”¨é™æ€æ–¹æ³• Student(){ System.out.println(\"æ„é€ ç±»å¯¹è±¡\"); } static int test(){ //é™æ€æ–¹æ³•åˆšåŠ è½½æ—¶å°±æœ‰äº† System.out.println(\"åˆå§‹åŒ–å˜é‡a\"); return 1; } } æ€è€ƒï¼šä¸‹é¢è¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºèƒ½æ­£å¸¸è¿è¡Œå—ï¼Ÿå¦‚æœèƒ½ï¼Œä¼šè¾“å‡ºä»€ä¹ˆå†…å®¹ï¼Ÿ public class Student { static int a = test(); static int test(){ return a; } public static void main(String[] args) { System.out.println(Student.a); } } å®šä¹‰å’Œèµ‹å€¼æ˜¯ä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨å®šä¹‰æ—¶ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼ˆä¸Šé¢è®²çš„ï¼Œç±»çš„æˆå‘˜å˜é‡ä¼šæœ‰é»˜è®¤å€¼ï¼‰å®šä¹‰å‡ºæ¥ä¹‹åï¼Œå¦‚æœå‘ç°æœ‰èµ‹å€¼è¯­å¥ï¼Œå†è¿›è¡Œèµ‹å€¼ï¼Œè€Œè¿™æ—¶ï¼Œè°ƒç”¨äº†é™æ€æ–¹æ³•ï¼Œæ‰€ä»¥è¯´ä¼šå…ˆå»åŠ è½½é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•è°ƒç”¨æ—¶æ‹¿åˆ°aï¼Œè€Œaè¿™æ—¶ä»…ä»…æ˜¯åˆšå®šä¹‰ï¼Œæ‰€ä»¥è¯´è¿˜æ˜¯åˆå§‹å€¼ï¼Œæœ€åå¾—åˆ°0 ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:6","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"ä»£ç å—å’Œé™æ€ä»£ç å— ä»£ç å—åœ¨å¯¹è±¡åˆ›å»ºæ—¶æ‰§è¡Œï¼Œä¹Ÿæ˜¯å±äºç±»çš„å†…å®¹ï¼Œä½†æ˜¯å®ƒåœ¨æ„é€ æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼ˆå’Œæˆå‘˜å˜é‡åˆå§‹å€¼ä¸€æ ·ï¼‰ï¼Œä¸”æ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼ï¼ˆç›¸å½“äºæ„é€ ä¹‹å‰çš„å‡†å¤‡å·¥ä½œï¼‰ public class Student { { System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); } Student(){ System.out.println(\"æˆ‘æ˜¯æ„é€ æ–¹æ³•\"); } } é™æ€ä»£ç å—å’Œä¸Šé¢çš„é™æ€æ–¹æ³•å’Œé™æ€å˜é‡ä¸€æ ·ï¼Œåœ¨ç±»åˆšåŠ è½½æ—¶å°±ä¼šè°ƒç”¨ï¼› public class Student { static int a; static { a = 10; } public static void main(String[] args) { System.out.println(Student.a); } } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:7","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"Stringå’ŒStringBuilderç±» å­—ç¬¦ä¸²ç±»æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ç±»ï¼Œä»–æ˜¯Javaä¸­å”¯ä¸€é‡è½½è¿ç®—ç¬¦çš„ç±»ï¼(Javaä¸æ”¯æŒè¿ç®—ç¬¦é‡è½½ï¼ŒStringæ˜¯ç‰¹ä¾‹) Stringçš„å¯¹è±¡ç›´æ¥æ”¯æŒä½¿ç”¨+æˆ–+=è¿ç®—ç¬¦æ¥è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶å½¢æˆæ–°çš„Stringå¯¹è±¡ï¼ï¼ˆStringçš„å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼ï¼‰ String a = \"dasdsa\", b = \"dasdasdsa\"; String l = a+b; System.out.println(l); å¤§é‡è¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ä¼¼ä¹ä¸å¤ªå¥½ï¼Œç¼–è¯‘å™¨æ˜¯å¾ˆèªæ˜çš„ï¼ŒStringçš„æ‹¼æ¥æœ‰å¯èƒ½ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ä¸ºStringBuilderæ¥å‡å°‘å¯¹è±¡åˆ›å»ºï¼ˆå¯¹è±¡é¢‘ç¹åˆ›å»ºæ—¶å¾ˆè´¹æ—¶é—´åŒæ—¶å å†…å­˜çš„ï¼ï¼‰ String result=\"String\"+\"and\"; //ä¼šè¢«ä¼˜åŒ–æˆä¸€å¥ï¼ String str1=\"String\"; String str2=\"and\"; String result=str1+str2; //å˜é‡éšæ—¶å¯å˜ï¼Œåœ¨ç¼–è¯‘æ—¶æ— æ³•ç¡®å®šresultçš„å€¼ï¼Œé‚£ä¹ˆåªèƒ½åœ¨è¿è¡Œæ—¶å†å»ç¡®å®š String str1=\"String\"; String str2=\"and\"; String result=(new StringBuilder(String.valueOf(str1))).append(str2).toString(); //ä½¿ç”¨StringBuilderï¼Œä¼šé‡‡ç”¨ç±»ä¼¼äºç¬¬ä¸€ç§å®ç°ï¼Œæ˜¾ç„¶ä¼šæ›´å¿«ï¼ StringBuilderä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å®ƒèƒ½å¤Ÿå­˜å‚¨å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ï¼ StringBuilder builder = new StringBuilder(); builder .append(\"a\") .append(\"bc\") .append(\"d\"); //é“¾å¼è°ƒç”¨ String str = builder.toString(); System.out.println(str); ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:2:8","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"åŒ…å’Œè®¿é—®æ§åˆ¶ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:3:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"åŒ…å£°æ˜å’Œå¯¼å…¥ åŒ…å…¶å®å°±æ˜¯ç”¨æ¥åŒºåˆ†ç±»ä½ç½®çš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å°†æˆ‘ä»¬çš„ç±»è¿›è¡Œåˆ†ç±»ï¼Œç±»ä¼¼äºC++ä¸­çš„namespaceï¼ package com.test; public class Test{ } åŒ…å…¶å®æ˜¯æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚com.testå°±æ˜¯ä¸€ä¸ªcomæ–‡ä»¶å¤¹ä¸­åŒ…å«ä¸€ä¸ªtestæ–‡ä»¶å¤¹ï¼Œå†åŒ…å«æˆ‘ä»¬Testç±»ã€‚ ä¸€èˆ¬åŒ…æŒ‰ç…§ä¸ªäººæˆ–æ˜¯å…¬å¸åŸŸåçš„è§„åˆ™å€’è¿‡æ¥å†™ é¡¶çº§åŸŸå.ä¸€çº§åŸŸå.äºŒçº§åŸŸå com.java.xxxx å¦‚æœéœ€è¦ä½¿ç”¨å…¶ä»–åŒ…é‡Œé¢çš„ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦importï¼ˆç±»ä¼¼äºC/C++ä¸­çš„includeï¼‰ import com.test.Student; ä¹Ÿå¯ä»¥å¯¼å…¥åŒ…ä¸‹çš„å…¨éƒ¨ï¼ˆä¸€èˆ¬å¯¼å…¥ä¼šç”±ç¼–è¯‘å™¨è‡ªå¸¦å¸®æˆ‘ä»¬è¡¥å…¨ï¼Œä½†æ˜¯ä¸€å®šè¦è®°å¾—æˆ‘ä»¬éœ€è¦å¯¼åŒ…ï¼ï¼‰ import com.test.* Javaé»˜è®¤ä¸ºæˆ‘ä»¬å¯¼å…¥äº†ä»¥ä¸‹çš„åŒ…ï¼Œä¸éœ€è¦å»å£°æ˜ import java.lang.* ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:3:1","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"é™æ€å¯¼å…¥ é™æ€å¯¼å…¥å¯ä»¥ç›´æ¥å¯¼å…¥æŸä¸ªç±»çš„é™æ€æ–¹æ³•æˆ–è€…æ˜¯é™æ€å˜é‡ï¼Œå¯¼å…¥åï¼Œç›¸å½“äºè¿™ä¸ªæ–¹æ³•æˆ–æ˜¯ç±»åœ¨å®šä¹‰åœ¨å½“å‰ç±»ä¸­ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ã€‚ import static com.test.ui.Student.test; public class Main { public static void main(String[] args) { test(); } } é™æ€å¯¼å…¥ä¸ä¼šè¿›è¡Œç±»çš„åˆå§‹åŒ–ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:3:2","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"è®¿é—®æ§åˆ¶ Javaæ”¯æŒå¯¹ç±»å±æ€§è®¿é—®çš„ä¿æŠ¤ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¸Œæœ›å¤–éƒ¨ç±»è®¿é—®ç±»ä¸­çš„å±æ€§æˆ–æ˜¯æ–¹æ³•ï¼Œåªå…è®¸å†…éƒ¨è°ƒç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æƒé™æ§åˆ¶ç¬¦ã€‚ ![image-20210819160939950](C:/Users/Alone/Users/nagocoler/Library/Application Support/typora-user-images/image-20210819160939950.png) æƒé™æ§åˆ¶ç¬¦å¯ä»¥å£°æ˜åœ¨æ–¹æ³•ã€æˆå‘˜å˜é‡ã€ç±»å‰é¢ï¼Œä¸€æ—¦å£°æ˜privateï¼Œåªèƒ½ç±»å†…éƒ¨è®¿é—®ï¼ public class Student { private int a = 10; //å…·æœ‰ç§æœ‰è®¿é—®æƒé™ï¼Œåªèƒ½ç±»å†…éƒ¨è®¿é—® } public static void main(String[] args) { Student s = new Student(); System.out.println(s.a); //è¿˜å¯ä»¥è®¿é—®å—ï¼Ÿ } å’Œæ–‡ä»¶åç§°ç›¸åŒçš„ç±»ï¼Œåªèƒ½æ˜¯publicï¼Œå¹¶ä¸”ä¸€ä¸ªjavaæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªpublic classï¼ // Student.java public class Student { } class Test{ //ä¸èƒ½æ·»åŠ æƒé™ä¿®é¥°ç¬¦ï¼åªèƒ½æ˜¯default } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:3:3","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æ•°ç»„ç±»å‹ å‡è®¾å‡ºç°ä¸€ç§æƒ…å†µï¼Œæˆ‘æƒ³è®°å½•100ä¸ªæ•°å­—ï¼Œå®šä¹‰100ä¸ªå˜é‡è¿˜å¯è¡Œå—ï¼Ÿ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ°æ•°ç»„ï¼Œæ•°ç»„æ˜¯ç›¸åŒç±»å‹æ•°æ®çš„æœ‰åºé›†åˆã€‚æ•°ç»„å¯ä»¥ä»£è¡¨ä»»ä½•ç›¸åŒç±»å‹çš„ä¸€ç»„å†…å®¹ï¼ˆåŒ…æ‹¬å¼•ç”¨ç±»å‹å’ŒåŸºæœ¬ç±»å‹ï¼‰å…¶ä¸­å­˜æ”¾çš„æ¯ä¸€ä¸ªæ•°æ®ç§°ä¸ºæ•°ç»„çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ•°ç»„çš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯0ï¼ int[] arr = new int[10]; //éœ€è¦newå…³é”®å­—æ¥åˆ›å»ºï¼ String[] arr2 = new String[10]; æ•°ç»„æœ¬èº«ä¹Ÿæ˜¯ç±»ï¼ˆç¼–ç¨‹ä¸å¯è§ï¼ŒC++å†™çš„ï¼‰ï¼Œä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ int[] arr = new int[10]; System.out.println(arr.length); //æ•°ç»„æœ‰æˆå‘˜å˜é‡ï¼ System.out.println(arr.toString()); //æ•°ç»„æœ‰æˆå‘˜æ–¹æ³•ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:4:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"ä¸€ç»´æ•°ç»„ ä¸€ç»´æ•°ç»„ä¸­ï¼Œå…ƒç´ æ˜¯ä¾æ¬¡æ’åˆ—çš„ï¼ˆçº¿æ€§ï¼‰ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®ï¼å£°æ˜æ ¼å¼å¦‚ä¸‹ï¼š ç±»å‹[] å˜é‡åç§° = new ç±»å‹[æ•°ç»„å¤§å°]; ç±»å‹ å˜é‡åç§°n = new ç±»å‹[æ•°ç»„å¤§å°]; //æ”¯æŒCè¯­è¨€æ ·å¼ï¼Œä½†ä¸æ¨èï¼ ç±»å‹[] å˜é‡åç§° = new ç±»å‹[]{...}; //é™æ€åˆå§‹åŒ–ï¼ˆç›´æ¥æŒ‡å®šå€¼å’Œå¤§å°ï¼‰ ç±»å‹[] å˜é‡åç§° = {...}; //åŒä¸Šï¼Œä½†æ˜¯åªèƒ½åœ¨å®šä¹‰æ—¶èµ‹å€¼ åˆ›å»ºå‡ºæ¥çš„æ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½æœ‰é»˜è®¤å€¼ï¼ˆè§„åˆ™å’Œç±»çš„æˆå‘˜å˜é‡ä¸€æ ·ï¼ŒCè¯­è¨€åˆ›å»ºçš„æ•°ç»„éœ€è¦æ‰‹åŠ¨è®¾ç½®é»˜è®¤å€¼ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡å»è®¿é—®ï¼š int[] arr = new int[10]; arr[0] = 626; System.out.println(arr[0]); System.out.println(arr[1]); æˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°ç»„å˜é‡åç§°.lengthæ¥è·å–å½“å‰æ•°ç»„é•¿åº¦ï¼š int[] arr = new int[]{1, 2, 3}; System.out.println(arr.length); //æ‰“å°lengthæˆå‘˜å˜é‡çš„å€¼ æ•°ç»„åœ¨åˆ›å»ºæ—¶ï¼Œå°±å›ºå®šé•¿åº¦ï¼Œä¸å¯æ›´æ”¹ï¼è®¿é—®è¶…å‡ºæ•°ç»„é•¿åº¦çš„å†…å®¹ï¼Œä¼šå‡ºç°é”™è¯¯ï¼ String[] arr = new String[10]; System.out.println(arr[10]); //å‡ºç°å¼‚å¸¸ï¼ //Exception in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: 11 // at com.test.Application.main(Application.java:7) æ€è€ƒï¼šèƒ½ä¸èƒ½ç›´æ¥ä¿®æ”¹lengthçš„å€¼æ¥å®ç°åŠ¨æ€æ‰©å®¹å‘¢ï¼Ÿ int[] arr = new int[]{1, 2, 3}; arr.length = 10; æ•°ç»„åšå®å‚ï¼Œå› ä¸ºæ•°ç»„ä¹Ÿæ˜¯ç±»ï¼Œæ‰€ä»¥å½¢å‚å¾—åˆ°çš„æ˜¯æ•°ç»„çš„å¼•ç”¨è€Œä¸æ˜¯å¤åˆ¶çš„æ•°ç»„ï¼Œæ“ä½œçš„ä¾ç„¶æ˜¯æ•°ç»„å¯¹è±¡æœ¬èº« public static void main(String[] args) { int[] arr = new int[]{1, 2, 3}; test(arr); System.out.println(arr[0]); } private static void test(int[] arr){ arr[0] = 2934; } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:4:1","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æ•°ç»„çš„éå† å¦‚æœæˆ‘ä»¬æƒ³è¦å¿«é€Ÿæ‰“å°æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œåˆæ€ä¹ˆåŠå‘¢ï¼Ÿ ä¼ ç»Ÿforå¾ªç¯ æˆ‘ä»¬å¾ˆå®¹æ˜“å°±è”æƒ³åˆ°forå¾ªç¯ int[] arr = new int[]{1, 2, 3}; for (int i = 0; i \u003c arr.length; i++) { System.out.println(arr[i]); } foreach ä¼ ç»Ÿforå¾ªç¯è™½ç„¶å¯æ§æ€§é«˜ï¼Œä½†æ˜¯ä¸å¤Ÿçœäº‹ï¼Œè¦å†™ä¸€å¤§å †ä¸œè¥¿ï¼Œæœ‰æ²¡æœ‰ä¸€ç§çœäº‹çš„å†™æ³•å‘¢ï¼Ÿ int[] arr = new int[]{1, 2, 3}; for (int i : arr) { System.out.println(i); } foreachå±äºå¢å¼ºå‹çš„forå¾ªç¯ï¼Œå®ƒä½¿å¾—ä»£ç æ›´ç®€æ´ï¼ŒåŒæ—¶æˆ‘ä»¬èƒ½ç›´æ¥æ‹¿åˆ°æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°å­—ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:4:2","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"äºŒç»´æ•°ç»„ äºŒç»´æ•°ç»„å…¶å®å°±æ˜¯å­˜æ”¾æ•°ç»„çš„æ•°ç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½å­˜æ”¾ä¸€ä¸ªæ•°ç»„çš„å¼•ç”¨ï¼Œä¹Ÿå°±ç›¸å½“äºå˜æˆäº†ä¸€ä¸ªå¹³é¢ã€‚ //ä¸‰è¡Œä¸¤åˆ— int[][] arr = { {1, 2}, {3, 4}, {5, 6}}; System.out.println(arr[2][1]); äºŒç»´æ•°ç»„çš„éå†åŒä¸€ç»´æ•°ç»„ä¸€æ ·ï¼Œåªä¸è¿‡éœ€è¦åµŒå¥—å¾ªç¯ï¼ int[][] arr = new int[][]{ {1, 2}, {3, 4}, {5, 6}}; for (int i = 0; i \u003c 3; i++) { for (int j = 0; j \u003c 2; j++) { System.out.println(arr[i][j]); } } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:4:3","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å¤šç»´æ•°ç»„ ä¸æ­¢äºŒç»´æ•°ç»„ï¼Œè¿˜å­˜åœ¨ä¸‰ç»´æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯å­˜æ”¾æ•°ç»„çš„æ•°ç»„çš„æ•°ç»„ï¼ŒåŸç†åŒäºŒç»´æ•°ç»„ä¸€æ ·ï¼Œé€çº§è®¿é—®å³å¯ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:4:4","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å¯å˜é•¿å‚æ•° å¯å˜é•¿å‚æ•°å…¶å®å°±æ˜¯æ•°ç»„çš„ä¸€ç§åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šæ–¹æ³•çš„å½¢å‚ä¸ºä¸€ä¸ªå¯å˜é•¿å‚æ•°ï¼Œè¦æ±‚å®å‚å¯ä»¥æ ¹æ®æƒ…å†µåŠ¨æ€å¡«å…¥0ä¸ªæˆ–å¤šä¸ªï¼Œè€Œä¸æ˜¯å›ºå®šçš„æ•°é‡ public static void main(String[] args) { test(\"AAA\", \"BBB\", \"CCC\"); //å¯å˜é•¿ï¼Œæœ€åéƒ½ä¼šè¢«è‡ªåŠ¨å°è£…æˆä¸€ä¸ªæ•°ç»„ } private static void test(String... test){ System.out.println(test[0]); //å…¶å®å‚æ•°å°±æ˜¯ä¸€ä¸ªæ•°ç»„ } ç”±äºæ˜¯æ•°ç»„ï¼Œæ‰€ä»¥è¯´åªèƒ½ä½¿ç”¨ä¸€ç§ç±»å‹çš„å¯å˜é•¿å‚æ•°ï¼Œå¹¶ä¸”å¯å˜é•¿å‚æ•°åªèƒ½æ”¾åœ¨æœ€åä¸€ä½ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:4:5","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å®æˆ˜ï¼šä¸‰å¤§åŸºæœ¬æ’åºç®—æ³• ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„é‡Œé¢çš„æ•°æ®æ˜¯ä¹±åºæ’åˆ—çš„ï¼Œå¦‚ä½•ä½¿å®ƒå˜å¾—æœ‰åºï¼Ÿ int[] arr = {8, 5, 0, 1, 4, 9, 2, 3, 6, 7}; æ’åºæ˜¯ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦æŠ€èƒ½ï¼ŒæŒæ¡æ’åºç®—æ³•ï¼Œä½ çš„æŠ€æœ¯æ‰èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ï¼Œå¾ˆå¤šçš„é¡¹ç›®éƒ½éœ€è¦ç”¨åˆ°æ’åºï¼ä¸‰å¤§æ’åºç®—æ³•ï¼š å†’æ³¡æ’åº å†’æ³¡æ’åºå°±æ˜¯å†’æ³¡ï¼Œå…¶å®å°±æ˜¯ä¸æ–­ä½¿å¾—æˆ‘ä»¬æ— åºæ•°ç»„ä¸­çš„æœ€å¤§æ•°å‘å‰ç§»åŠ¨ï¼Œç»å†nè½®å¾ªç¯é€æ¸å°†æ¯ä¸€ä¸ªæ•°æ¨å‘æœ€å‰ã€‚ æ’å…¥æ’åº æ’å…¥æ’åºå…¶å®å°±è·Ÿæˆ‘ä»¬æ‰“ç‰Œæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åœ¨æ‘¸ç‰Œçš„æ—¶å€™ï¼Œç‰Œå †æ˜¯ä¹±åºçš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€å¼ ä¸€å¼ æ‘¸åˆ°æ‰‹ä¸­è¿›è¡Œæ’åºï¼Œä½¿å¾—å®ƒå˜æˆäº†æœ‰åºçš„ï¼ é€‰æ‹©æ’åº é€‰æ‹©æ’åºå…¶å®å°±æ˜¯æ¯æ¬¡éƒ½é€‰æ‹©å½“å‰æ•°ç»„ä¸­æœ€å¤§çš„æ•°æ’åˆ°æœ€å‰é¢ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:4:6","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:5:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å°è£… å°è£…çš„ç›®çš„æ˜¯ä¸ºäº†ä¿è¯å˜é‡çš„å®‰å…¨æ€§ï¼Œä½¿ç”¨è€…ä¸å¿…åœ¨æ„å…·ä½“å®ç°ç»†èŠ‚ï¼Œè€Œåªæ˜¯é€šè¿‡å¤–éƒ¨æ¥å£å³å¯è®¿é—®ç±»çš„æˆå‘˜ï¼Œå¦‚æœä¸è¿›è¡Œå°è£…ï¼Œç±»ä¸­çš„å®ä¾‹å˜é‡å¯ä»¥ç›´æ¥æŸ¥çœ‹å’Œä¿®æ”¹ï¼Œå¯èƒ½ç»™æ•´ä¸ªä»£ç å¸¦æ¥ä¸å¥½çš„å½±å“ï¼Œå› æ­¤åœ¨ç¼–å†™ç±»æ—¶ä¸€èˆ¬å°†æˆå‘˜å˜é‡ç§æœ‰åŒ–ï¼Œå¤–éƒ¨ç±»éœ€è¦åŒgetterå’Œsetteræ–¹æ³•æ¥æŸ¥çœ‹å’Œè®¾ç½®å˜é‡ã€‚ è®¾æƒ³ï¼šå­¦ç”Ÿå°æ˜å·²ç»åˆ›å»ºæˆåŠŸï¼Œæ­£å¸¸æƒ…å†µä¸‹èƒ½éšä¾¿æ”¹ä»–çš„åå­—å’Œå¹´é¾„å—ï¼Ÿ public class Student { private String name; private int age; public Student(String name, int age) { this.name = name; this.age = age; } public int getAge() { return age; } public String getName() { return name; } } ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤–éƒ¨ç°åœ¨åªèƒ½é€šè¿‡è°ƒç”¨æˆ‘å®šä¹‰çš„æ–¹æ³•æ¥è·å–æˆå‘˜å±æ€§ï¼Œè€Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œæ¯”å¦‚å°æ˜å¯ä»¥ä¿®æ”¹åå­—ï¼Œä½†æ˜¯åå­—ä¸­ä¸èƒ½åŒ…å«\"å°\"è¿™ä¸ªå­—ã€‚ public void setName(String name) { if(name.contains(\"å°\")) return; this.name = name; } å•ç‹¬ç»™å¤–éƒ¨å¼€æ”¾è®¾ç½®åç§°çš„æ–¹æ³•ï¼Œå› ä¸ºæˆ‘è¿˜éœ€è¦åšä¸€äº›é¢å¤–çš„å¤„ç†ï¼Œæ‰€ä»¥è¯´ä¸èƒ½ç»™å¤–éƒ¨ç›´æ¥æ“ä½œæˆå‘˜å˜é‡çš„æƒé™ï¼ å°è£…æ€æƒ³å…¶å®å°±æ˜¯æŠŠå®ç°ç»†èŠ‚ç»™éšè—äº†ï¼Œå¤–éƒ¨åªéœ€çŸ¥é“è¿™ä¸ªæ–¹æ³•æ˜¯ä»€ä¹ˆä½œç”¨ï¼Œè€Œæ— éœ€å…³å¿ƒå®ç°ã€‚ å°è£…å°±æ˜¯é€šè¿‡è®¿é—®æƒé™æ§åˆ¶æ¥å®ç°çš„ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:5:1","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"ç»§æ‰¿ ç»§æ‰¿å±äºéå¸¸é‡è¦çš„å†…å®¹ï¼Œåœ¨å®šä¹‰ä¸åŒç±»çš„æ—¶å€™å­˜åœ¨ä¸€äº›ç›¸åŒå±æ€§ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨å¯ä»¥å°†è¿™äº›å…±åŒå±æ€§æŠ½è±¡æˆä¸€ä¸ªçˆ¶ç±»ï¼Œåœ¨å®šä¹‰å…¶ä»–å­ç±»æ—¶å¯ä»¥ç»§æ‰¿è‡ªè¯¥çˆ¶ç±»ï¼Œå‡å°‘ä»£ç çš„é‡å¤å®šä¹‰ï¼Œå­ç±»å¯ä»¥ä½¿ç”¨çˆ¶ç±»ä¸­éç§æœ‰çš„æˆå‘˜ã€‚ ç°åœ¨å­¦ç”Ÿåˆ†ä¸ºä¸¤ç§ï¼Œè‰ºæœ¯ç”Ÿå’Œä½“è‚²ç”Ÿï¼Œä»–ä»¬éƒ½æ˜¯å­¦ç”Ÿçš„åˆ†æ”¯ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æœ‰è‡ªå·±çš„æ–¹æ³•ï¼š public class SportsStudent extends Student{ //é€šè¿‡extendså…³é”®å­—æ¥ç»§æ‰¿çˆ¶ç±» public SportsStudent(String name, int age) { super(name, age); //å¿…é¡»å…ˆé€šè¿‡superå…³é”®å­—ï¼ˆæŒ‡ä»£çˆ¶ç±»ï¼‰ï¼Œå®ç°çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼ } public void exercise(){ System.out.println(\"æˆ‘è¶…å‹‡çš„ï¼\"); } } public class ArtStudent extends Student{ public ArtStudent(String name, int age) { super(name, age); } public void art(){ System.out.println(\"éšæ‰‹ç”»ä¸ªæ¯•åŠ ç´¢ï¼\"); } } å­ç±»å…·æœ‰çˆ¶ç±»çš„å…¨éƒ¨å±æ€§ï¼Œprotectedå¯è§ä½†å¤–éƒ¨æ— æ³•ä½¿ç”¨ï¼ˆåŒ…æ‹¬privateå±æ€§ï¼Œä¸å¯è§ï¼Œæ— æ³•ä½¿ç”¨ï¼‰ï¼ŒåŒæ—¶å­ç±»è¿˜èƒ½æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚ç»§æ‰¿åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä¸æ”¯æŒå¤šç»§æ‰¿ï¼ æ¯ä¸€ä¸ªå­ç±»å¿…é¡»å®šä¹‰ä¸€ä¸ªå®ç°çˆ¶ç±»æ„é€ æ–¹æ³•çš„æ„é€ æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯éœ€è¦åœ¨æ„é€ æ–¹æ³•å¼€å§‹ä½¿ç”¨super()ï¼Œå¦‚æœçˆ¶ç±»ä½¿ç”¨çš„æ˜¯é»˜è®¤æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»ä¸ç”¨æ‰‹åŠ¨æŒ‡æ˜ã€‚ æ‰€æœ‰ç±»éƒ½é»˜è®¤ç»§æ‰¿è‡ªObjectç±»ï¼Œé™¤éæ‰‹åŠ¨æŒ‡å®šç±»å‹ï¼Œä½†æ˜¯ä¾ç„¶æ”¹å˜ä¸äº†æœ€é¡¶å±‚çš„çˆ¶ç±»æ˜¯Objectç±»ã€‚æ‰€æœ‰ç±»éƒ½åŒ…å«Objectç±»ä¸­çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š public static void main(String[] args) { Object obj = new Object; System.out.println(obj.hashCode()); //æ±‚å¯¹è±¡çš„hashcodeï¼Œé»˜è®¤æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ System.out.println(obj.equals(obj)); //æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸åŒï¼Œé»˜è®¤æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç­‰åŒäº == System.out.println(obj.toString()); //å°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œé»˜è®¤ç”Ÿæˆå¯¹è±¡çš„ç±»åç§°+hashcode } å…³äºObjectç±»çš„å…¶ä»–æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šåœ¨Javaå¤šçº¿ç¨‹ä¸­å†æ¥æåŠã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:5:2","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å¤šæ€ å¤šæ€æ˜¯åŒä¸€ä¸ªè¡Œä¸ºå…·æœ‰å¤šä¸ªä¸åŒè¡¨ç°å½¢å¼æˆ–å½¢æ€çš„èƒ½åŠ›ã€‚ä¹Ÿå°±æ˜¯åŒæ ·çš„æ–¹æ³•ï¼Œç”±äºå®ç°ç±»ä¸åŒï¼Œæ‰§è¡Œçš„ç»“æœä¹Ÿä¸åŒï¼ æ–¹æ³•çš„é‡å†™ æˆ‘ä»¬ä¹‹å‰å­¦ä¹ äº†æ–¹æ³•çš„é‡è½½ï¼Œæ–¹æ³•çš„é‡å†™å’Œé‡è½½æ˜¯ä¸ä¸€æ ·çš„ï¼Œé‡è½½æ˜¯åŸæœ‰çš„æ–¹æ³•é€»è¾‘ä¸å˜çš„æƒ…å†µä¸‹ï¼Œæ”¯æŒæ›´å¤šå‚æ•°çš„å®ç°ï¼Œè€Œé‡å†™æ˜¯ç›´æ¥è¦†ç›–åŸæœ‰æ–¹æ³•ï¼ //çˆ¶ç±»ä¸­çš„study public void study(){ System.out.println(\"å­¦ä¹ \"); } //å­ç±»ä¸­çš„study @Override //å£°æ˜è¿™ä¸ªæ–¹æ³•æ˜¯é‡å†™çš„ï¼Œä½†æ˜¯å¯ä»¥ä¸è¦ï¼Œæˆ‘ä»¬ç°é˜¶æ®µä¸æ¥è§¦ public void study(){ System.out.println(\"ç»™ä½ çœ‹ç‚¹å¥½åº·çš„\"); } å†æ¬¡å®šä¹‰åŒæ ·çš„æ–¹æ³•åï¼Œçˆ¶ç±»çš„æ–¹æ³•å°±è¢«è¦†ç›–ï¼å­ç±»è¿˜å¯ä»¥ç»™çˆ¶ç±»æ–¹æ³•æå‡è®¿é—®æƒé™ï¼ public static void main(String[] args) { SportsStudent student = new SportsStudent(\"lbw\", 20); student.study(); //è¾“å‡ºå­ç±»å®šä¹‰çš„å†…å®¹ } æ€è€ƒï¼šé™æ€æ–¹æ³•èƒ½è¢«é‡å†™å—ï¼Ÿ å½“æˆ‘ä»¬åœ¨é‡å†™æ–¹æ³•æ—¶ï¼Œä¸ä»…æƒ³ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘ï¼ŒåŒæ—¶è¿˜å¸Œæœ›æ‰§è¡Œçˆ¶ç±»çš„é€»è¾‘ï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼‰æ€ä¹ˆåŠå‘¢ï¼Ÿ public void study(){ super.study(); System.out.println(\"ç»™ä½ çœ‹ç‚¹å¥½åº·çš„\"); } åŒç†ï¼Œå¦‚æœæƒ³è®¿é—®çˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨superå…³é”®å­—æ¥è®¿é—®ï¼Œæ³¨æ„ï¼Œå­ç±»å¯ä»¥å…·æœ‰å’Œçˆ¶ç±»ç›¸åŒçš„æˆå‘˜å˜é‡ï¼è€Œåœ¨æ–¹æ³•ä¸­è®¿é—®çš„é»˜è®¤æ˜¯ å½¢å‚åˆ—è¡¨ä¸­ \u003e å½“å‰ç±»çš„æˆå‘˜å˜é‡ \u003e çˆ¶ç±»æˆå‘˜å˜é‡ public void setTest(int test){ test = 1; this.test = 1; super.test = 1; } å†è°ˆç±»å‹è½¬æ¢ æˆ‘ä»¬æ›¾ç»å­¦ä¹ è¿‡åŸºæœ¬æ•°æ®ç±»å‹çš„ç±»å‹è½¬æ¢ï¼Œæ”¯æŒä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹ï¼Œè€Œæˆ‘ä»¬çš„ç±»ä¹Ÿæ˜¯æ”¯æŒç±»å‹è½¬æ¢çš„ï¼ˆä»…é™äºå­˜åœ¨äº²ç¼˜å…³ç³»çš„ç±»ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼‰æ¯”å¦‚å­ç±»å¯ä»¥ç›´æ¥å‘ä¸Šè½¬å‹ï¼š Student student = new SportsStudent(\"lbw\", 20); //çˆ¶ç±»å˜é‡å¼•ç”¨å­ç±»å®ä¾‹ student.study(); //å¾—åˆ°ä¾ç„¶æ˜¯å…·ä½“å®ç°çš„ç»“æœï¼Œè€Œä¸æ˜¯å½“å‰ç±»å‹çš„ç»“æœ æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå·²ç»æ˜ç¡®æ˜¯ç”±å“ªä¸ªç±»å®ç°çš„çˆ¶ç±»å¼•ç”¨ï¼Œå¼ºåˆ¶è½¬æ¢ä¸ºå¯¹åº”çš„ç±»å‹ï¼š Student student = new SportsStudent(\"lbw\", 20); //æ˜¯ç”±SportsStudentè¿›è¡Œå®ç°çš„ //... do something... SportsStudent ps = (SportsStudent)student; //è®©å®ƒå˜æˆä¸€ä¸ªå…·ä½“çš„å­ç±» ps.sport(); //è°ƒç”¨å…·ä½“å®ç°ç±»çš„æ–¹æ³• è¿™æ ·çš„ç±»å‹è½¬æ¢ç§°ä¸ºå‘ä¸‹è½¬å‹ã€‚ instanceofå…³é”®å­— é‚£ä¹ˆæˆ‘ä»¬å¦‚æœåªæ˜¯å¾—åˆ°ä¸€ä¸ªçˆ¶ç±»å¼•ç”¨ï¼Œä½†æ˜¯ä¸çŸ¥é“å®ƒåˆ°åº•æ˜¯å“ªä¸€ä¸ªå­ç±»çš„å®ç°æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨instanceofå…³é”®å­—æ¥å®ç°ï¼Œå®ƒèƒ½å¤Ÿè¿›è¡Œç±»å‹åˆ¤æ–­ï¼ private static void test(Student student){ if (student instanceof SportsStudent){ SportsStudent sportsStudent = (SportsStudent) student; sportsStudent.sport(); }else if (student instanceof ArtStudent){ ArtStudent artStudent = (ArtStudent) student; artStudent.art(); } } é€šè¿‡è¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ˜ç¡®ç±»çš„å…·ä½“å®ç°åˆ°åº•æ˜¯å“ªä¸ªç±»ï¼ æ€è€ƒï¼šstudent instanceof Studentçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ å†è°ˆfinalå…³é”®å­— æˆ‘ä»¬ç›®å‰åªçŸ¥é“finalå…³é”®å­—èƒ½å¤Ÿä½¿å¾—ä¸€ä¸ªå˜é‡çš„å€¼ä¸å¯æ›´æ”¹ï¼Œé‚£ä¹ˆå¦‚æœåœ¨ç±»å‰é¢å£°æ˜finalï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ public final class Student { //ç±»è¢«å£°æ˜ä¸ºç»ˆæ€ï¼Œé‚£ä¹ˆå®ƒè¿˜èƒ½è¢«ç»§æ‰¿å— } ç±»ä¸€æ—¦è¢«å£°æ˜ä¸ºç»ˆæ€ï¼Œå°†æ— æ³•å†è¢«ç»§æ‰¿ï¼Œä¸å…è®¸å­ç±»çš„å­˜åœ¨ï¼è€Œæ–¹æ³•è¢«å£°æ˜ä¸ºfinalå‘¢ï¼Ÿ public final void study(){ //è¿˜èƒ½é‡å†™å— System.out.println(\"å­¦ä¹ \"); } å¦‚æœç±»çš„æˆå‘˜å±æ€§è¢«å£°æ˜ä¸ºfinalï¼Œé‚£ä¹ˆå¿…é¡»åœ¨æ„é€ æ–¹æ³•ä¸­æˆ–æ˜¯åœ¨å®šä¹‰æ—¶èµ‹åˆå§‹å€¼ï¼ private final String name; //å¼•ç”¨ç±»å‹ä¸å…è®¸å†æŒ‡å‘å…¶ä»–å¯¹è±¡ private final int age; //åŸºæœ¬ç±»å‹å€¼ä¸å…è®¸å‘ç”Ÿæ”¹å˜ public Student(String name, int age) { this.name = name; this.age = age; } å­¦ä¹ å®Œå°è£…ç»§æ‰¿å’Œå¤šæ€ä¹‹åï¼Œæˆ‘ä»¬æ¨èåœ¨ä¸ä¼šå†å‘ç”Ÿæ”¹å˜çš„æˆå‘˜å±æ€§ä¸Šæ·»åŠ finalå…³é”®å­—ï¼ŒJVMä¼šå¯¹æ·»åŠ äº†finalå…³é”®å­—çš„å±æ€§è¿›è¡Œä¼˜åŒ–ï¼ æŠ½è±¡ç±» ç±»æœ¬èº«å°±æ˜¯ä¸€ç§æŠ½è±¡ï¼Œè€ŒæŠ½è±¡ç±»ï¼ŒæŠŠç±»è¿˜è¦æŠ½è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠ½è±¡ç±»å¯ä»¥åªä¿ç•™ç‰¹å¾ï¼Œè€Œä¸ä¿ç•™å…·ä½“å‘ˆç°å½¢æ€ï¼Œæ¯”å¦‚æ–¹æ³•å¯ä»¥å®šä¹‰å¥½ï¼Œä½†æ˜¯æˆ‘å¯ä»¥ä¸å»å®ç°å®ƒï¼Œè€Œæ˜¯äº¤ç”±å­ç±»æ¥è¿›è¡Œå®ç°ï¼ public abstract class Student { //æŠ½è±¡ç±» public abstract void test(); //æŠ½è±¡æ–¹æ³• } é€šè¿‡ä½¿ç”¨abstractå…³é”®å­—æ¥è¡¨æ˜ä¸€ä¸ªç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»å¯ä»¥ä½¿ç”¨abstractå…³é”®å­—æ¥è¡¨æ˜ä¸€ä¸ªæ–¹æ³•ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®šä¹‰æ™®é€šæ–¹æ³•ï¼ŒæŠ½è±¡æ–¹æ³•ä¸éœ€è¦ç¼–å†™å…·ä½“å®ç°ï¼ˆæ— æ–¹æ³•ä½“ï¼‰ä½†æ˜¯å¿…é¡»ç”±å­ç±»å®ç°ï¼ˆé™¤éå­ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼‰ï¼ æŠ½è±¡ç±»ç”±äºä¸æ˜¯å…·ä½“çš„ç±»å®šä¹‰ï¼Œå› æ­¤æ— æ³•ç›´æ¥é€šè¿‡newå…³é”®å­—æ¥åˆ›å»ºå¯¹è±¡ï¼ Student s = new Student(){ //åªèƒ½ç›´æ¥åˆ›å»ºå¸¦å®ç°çš„åŒ¿åå†…éƒ¨ç±»ï¼ public void test(){ } } å› æ­¤ï¼ŒæŠ½è±¡ç±»ä¸€èˆ¬åªç”¨ä½œç»§æ‰¿ä½¿ç”¨ï¼æŠ½è±¡ç±»ä½¿å¾—ç»§æ‰¿å…³ç³»ä¹‹é—´æ›´åŠ æ˜ç¡®ï¼š public void study(){ //ç°åœ¨åªèƒ½ç”±å­ç±»ç¼–å†™ï¼Œçˆ¶ç±»æ²¡æœ‰å®šä¹‰ï¼Œæ›´åŠ æ˜ç¡®äº†å¤šæ€çš„å®šä¹‰ï¼åŒä¸€ä¸ªæ–¹æ³•å¤šç§å®ç°ï¼ System.out.println(\"ç»™ä½ çœ‹ç‚¹å¥½åº·çš„\"); } æ¥å£ æ¥å£ç”šè‡³æ¯”æŠ½è±¡ç±»è¿˜æŠ½è±¡ï¼Œä»–åªä»£è¡¨æŸä¸ªç¡®åˆ‡çš„åŠŸèƒ½ï¼ä¹Ÿå°±æ˜¯åªåŒ…å«æ–¹æ³•çš„å®šä¹‰ï¼Œç”šè‡³éƒ½ä¸æ˜¯ä¸€ä¸ªç±»ï¼æ¥å£åŒ…å«äº†ä¸€äº›åˆ—æ–¹æ³•çš„å…·ä½“å®šä¹‰ï¼Œç±»å¯ä»¥å®ç°è¿™ä¸ªæ¥å£ï¼Œè¡¨ç¤ºç±»æ”¯æŒæ¥å£ä»£è¡¨çš„åŠŸèƒ½ï¼ˆç±»ä¼¼äºä¸€ä¸ªæ’ä»¶ï¼Œåªèƒ½ä½œä¸ºä¸€ä¸ªé™„å±åŠŸèƒ½åŠ åœ¨ä¸»ä½“ä¸Šï¼ŒåŒæ—¶å…·ä½“å®ç°è¿˜éœ€è¦ç”±ä¸»ä½“æ¥å®ç°ï¼‰ public interface Eat { void eat(); } é€šè¿‡ä½¿ç”¨interfaceå…³é”®å­—æ¥è¡¨æ˜æ˜¯ä¸€ä¸ªæ¥å£ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œclasså…³é”®å­—è¢«æ›¿æ¢ä¸ºäº†interfaceï¼‰æ¥å£åªèƒ½åŒ…å«publicæƒé™çš„æŠ½è±¡æ–¹æ³•ï¼ï¼ˆJava8ä»¥åå¯ä»¥æœ‰é»˜è®¤å®ç°ï¼‰æˆ‘ä»¬å¯ä»¥é€šè¿‡å£°æ˜defaultå…³é”®å­—æ¥ç»™æŠ½è±¡æ–¹æ³•ä¸€ä¸ªé»˜è®¤å®ç°ï¼š public interface Eat { default void eat(){ //do something... } } æ¥å£ä¸­å®šä¹‰çš„å˜é‡ï¼Œé»˜è®¤ä¸ºpublic static final public interface Eat { int a = 1; void eat(); } ä¸€ä¸ªç±»å¯ä»¥å®ç°å¾ˆå¤šä¸ªæ¥å£ï¼Œä½†æ˜¯ä¸èƒ½ç†è§£ä¸ºå¤šç»§æ‰¿ï¼ï¼ˆå®é™…ä¸Šå®ç°æ¥å£æ˜¯é™„åŠ åŠŸèƒ½ï¼Œå’Œç»§æ‰¿çš„æ¦‚å¿µæœ‰ä¸€å®šå‡ºå…¥ï¼Œé¡¶å¤šè¯´æ˜¯å¤šç»§æ‰¿çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼‰ä¸€ä¸ªç±»å¯ä»¥é™„åŠ å¾ˆå¤šä¸ªåŠŸèƒ½ï¼ public class SportsStudent extends Student implements Eat, ...{ @Override public void eat() { } } ç±»é€šè¿‡implementså…³é”®å­—æ¥å£°æ˜å®ç°çš„æ¥å£ï¼æ¯ä¸ªæ¥å£ä¹‹é—´ç”¨é€—å·éš”å¼€ï¼ å®ç°æ¥å£çš„ç±»ä¹Ÿèƒ½é€šè¿‡instanceofå…³é”®å­—åˆ¤æ–­ï¼Œä¹Ÿæ”¯æŒå‘ä¸Šå’Œå‘ä¸‹è½¬å‹ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:5:3","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å†…éƒ¨ç±» ç±»ä¸­å¯ä»¥å­˜åœ¨ä¸€ä¸ªç±»ï¼å„ç§å„æ ·çš„é•¿ç›¸æ€ªå¼‚çš„ä»£ç å°±æ˜¯ä»è¿™é‡Œå¼€å§‹å‡ºç°çš„ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:6:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æˆå‘˜å†…éƒ¨ç±» æˆ‘ä»¬çš„ç±»ä¸­å¯ä»¥åœ¨åµŒå¥—ä¸€ä¸ªç±»ï¼š public class Test { class Inner{ //ç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªå†…éƒ¨ç±» } } æˆå‘˜å†…éƒ¨ç±»å’Œæˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ä¸€æ ·ï¼Œéƒ½æ˜¯å±äºå¯¹è±¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¿…é¡»å­˜åœ¨å¤–éƒ¨å¯¹è±¡ï¼Œæ‰èƒ½åˆ›å»ºå†…éƒ¨ç±»çš„å¯¹è±¡ï¼ public static void main(String[] args) { Test test = new Test(); Test.Inner inner = test.new Inner(); //å†™æ³•æœ‰é‚£ä¹ˆä¸€ä¸æ€ªå¼‚ï¼Œä½†æ˜¯æ²¡æ¯›ç—…ï¼ } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:6:1","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"é™æ€å†…éƒ¨ç±» é™æ€å†…éƒ¨ç±»å…¶å®å°±å’Œç±»ä¸­çš„é™æ€å˜é‡å’Œé™æ€æ–¹æ³•ä¸€æ ·ï¼Œæ˜¯å±äºç±»æ‹¥æœ‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ç±»å.å»è®¿é—®: public class Test { static class Inner{ } } public static void main(String[] args) { Test.Inner inner = new Test.Inner(); //ä¸ç”¨å†åˆ›å»ºå¤–éƒ¨ç±»å¯¹è±¡äº†ï¼ } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:6:2","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å±€éƒ¨å†…éƒ¨ç±» å¯¹ï¼Œä½ æ²¡çŒœé”™ï¼Œå°±æ˜¯å’Œå±€éƒ¨å˜é‡ä¸€æ ·å“’~ public class Test { public void test(){ class Inner{ } Inner inner = new Inner(); } } åæ­£æˆ‘æ˜¯æ²¡ç”¨è¿‡ï¼å†…éƒ¨ç±» -\u003e ç´¯ä¸ç´¯ -\u003e åæ­£æˆ‘ç´¯äº†ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:6:3","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"åŒ¿åå†…éƒ¨ç±» åŒ¿åå†…éƒ¨ç±»æ‰æ˜¯æˆ‘ä»¬çš„é‡ç‚¹ï¼Œä¹Ÿæ˜¯å®ç°lambdaè¡¨è¾¾å¼çš„åŸç†ï¼åŒ¿åå†…éƒ¨ç±»å…¶å®å°±æ˜¯åœ¨newçš„æ—¶å€™ï¼Œç›´æ¥å¯¹æ¥å£æˆ–æ˜¯æŠ½è±¡ç±»çš„å®ç°ï¼š public static void main(String[] args) { Eat eat = new Eat() { @Override public void eat() { //DO something... } }; } æˆ‘ä»¬ä¸ç”¨å•ç‹¬å»åˆ›å»ºä¸€ä¸ªç±»æ¥å®ç°ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥åœ¨newçš„æ—¶å€™å†™å¯¹åº”çš„å®ç°ï¼ä½†æ˜¯ï¼Œè¿™æ ·å†™ï¼Œæ— æ³•å®ç°å¤ç”¨ï¼Œåªèƒ½åœ¨è¿™é‡Œä½¿ç”¨ï¼ lambdaè¡¨è¾¾å¼ è¯»ä½œÎ»è¡¨è¾¾å¼ï¼Œå®ƒå…¶å®å°±æ˜¯æˆ‘ä»¬æ¥å£åŒ¿åå®ç°çš„ç®€åŒ–ï¼Œæ¯”å¦‚è¯´ï¼š public static void main(String[] args) { Eat eat = new Eat() { @Override public void eat() { //DO something... } }; } public static void main(String[] args) { Eat eat = () -\u003e {}; //ç­‰ä»·äºä¸Šè¿°å†…å®¹ } lambdaè¡¨è¾¾å¼ï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰åªèƒ½è®¿é—®å¤–éƒ¨çš„finalç±»å‹æˆ–æ˜¯éšå¼finalç±»å‹çš„å±€éƒ¨å˜é‡ï¼ ä¸ºäº†æ–¹ä¾¿ï¼ŒJDKé»˜è®¤å°±ä¸ºæˆ‘ä»¬æä¾›äº†ä¸“é—¨å†™å‡½æ•°å¼çš„æ¥å£ï¼Œè¿™é‡Œåªä»‹ç»Consumer ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:6:4","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"æšä¸¾ç±» å‡è®¾ç°åœ¨æˆ‘ä»¬æƒ³ç»™å°æ˜æ·»åŠ ä¸€ä¸ªçŠ¶æ€ï¼ˆè·‘æ­¥ã€å­¦ä¹ ã€ç¡è§‰ï¼‰ï¼Œå¤–éƒ¨å¯ä»¥å®æ—¶è·å–å°æ˜çš„çŠ¶æ€ï¼š public class Student { private final String name; private final int age; private String status; //... public void setStatus(String status) { this.status = status; } public String getStatus() { return status; } } ä½†æ˜¯è¿™æ ·ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä»…æ˜¯å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä¼¼ä¹å¤–éƒ¨å¯ä»¥ä¸æŒ‰ç…§æˆ‘ä»¬è§„åˆ™ï¼Œä¼ å…¥ä¸€äº›å…¶ä»–çš„å­—ç¬¦ä¸²ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸å¤Ÿä¸¥è°¨çš„ï¼ æœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å»å®ç°è¿™æ ·çš„çŠ¶æ€æ ‡è®°å‘¢ï¼Ÿæˆ‘ä»¬å¸Œæœ›å¼€å‘è€…æ‹¿åˆ°ä½¿ç”¨çš„å°±æ˜¯æˆ‘ä»¬å®šä¹‰å¥½çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æšä¸¾ç±»ï¼ public enum Status { RUNNING, STUDY, SLEEP //ç›´æ¥å†™æ¯ä¸ªçŠ¶æ€çš„åå­—å³å¯ï¼Œåˆ†å·å¯ä»¥ä¸æ‰“ï¼Œä½†æ˜¯æ¨èæ‰“ä¸Š } ä½¿ç”¨æšä¸¾ç±»ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥è®¿é—®å³å¯ public class Student { private final String name; private final int age; private Status status; //... public void setStatus(Status status) { //ä¸å†æ˜¯Stringï¼Œè€Œæ˜¯æˆ‘ä»¬æŒ‡å®šçš„æšä¸¾ç±»å‹ this.status = status; } public Status getStatus() { return status; } } public static void main(String[] args) { Student student = new Student(\"å°æ˜\", 18); student.setStatus(Status.RUNNING); System.out.println(student.getStatus()); } æšä¸¾ç±»å‹ä½¿ç”¨èµ·æ¥å°±éå¸¸æ–¹ä¾¿äº†ï¼Œå…¶å®æšä¸¾ç±»å‹çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œä½†æ˜¯å®ƒç»§æ‰¿è‡ªEnumç±»ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ¯ä¸€ä¸ªçŠ¶æ€å…¶å®å°±æ˜¯ä¸€ä¸ªpublic static finalçš„Statusç±»å‹æˆå‘˜å˜é‡ï¼ // Compiled from \"Status.java\" public final class com.test.Status extends java.lang.Enum\u003ccom.test.Status\u003e { public static final com.test.Status RUNNING; public static final com.test.Status STUDY; public static final com.test.Status SLEEP; public static com.test.Status[] values(); public static com.test.Status valueOf(java.lang.String); static {}; } æ—¢ç„¶æšä¸¾ç±»å‹æ˜¯æ™®é€šçš„ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™æšä¸¾ç±»å‹æ·»åŠ ç‹¬æœ‰çš„æˆå‘˜æ–¹æ³• public enum Status { RUNNING(\"ç¡è§‰\"), STUDY(\"å­¦ä¹ \"), SLEEP(\"ç¡è§‰\"); //æ— å‚æ„é€ æ–¹æ³•è¢«è¦†ç›–ï¼Œåˆ›å»ºæšä¸¾éœ€è¦æ·»åŠ å‚æ•°ï¼ˆæœ¬è´¨å°±æ˜¯è°ƒç”¨çš„æ„é€ æ–¹æ³•ï¼ï¼‰ private final String name; //æšä¸¾çš„æˆå‘˜å˜é‡ Status(String name){ //è¦†ç›–åŸæœ‰æ„é€ æ–¹æ³•ï¼ˆé»˜è®¤privateï¼Œåªèƒ½å†…éƒ¨ä½¿ç”¨ï¼ï¼‰ this.name = name; } public String getName() { //è·å–å°è£…çš„æˆå‘˜å˜é‡ return name; } } public static void main(String[] args) { Student student = new Student(\"å°æ˜\", 18); student.setStatus(Status.RUNNING); System.out.println(student.getStatus().getName()); } æšä¸¾ç±»è¿˜è‡ªå¸¦ä¸€äº›ç»§æ‰¿ä¸‹æ¥çš„å®ç”¨æ–¹æ³• Status.valueOf(\"\") //å°†åç§°ç›¸åŒçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæšä¸¾ Status.values() //å¿«é€Ÿè·å–æ‰€æœ‰çš„æšä¸¾ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:7:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"åŸºæœ¬ç±»å‹åŒ…è£…ç±» Javaå¹¶ä¸æ˜¯çº¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œè™½ç„¶Javaè¯­è¨€æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†æ˜¯Javaä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å´ä¸æ˜¯é¢å‘å¯¹è±¡çš„ã€‚åœ¨å­¦ä¹ æ³›å‹å’Œé›†åˆä¹‹å‰ï¼ŒåŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»æ˜¯ä¸€å®šè¦è®²è§£çš„å†…å®¹ï¼ æˆ‘ä»¬çš„åŸºæœ¬ç±»å‹ï¼Œå¦‚æœæƒ³é€šè¿‡å¯¹è±¡çš„å½¢å¼å»ä½¿ç”¨ä»–ä»¬ï¼ŒJavaæä¾›çš„åŸºæœ¬ç±»å‹åŒ…è£…ç±»ï¼Œä½¿å¾—Javaèƒ½å¤Ÿæ›´å¥½çš„ä½“ç°é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼ŒåŒæ—¶ä¹Ÿä½¿å¾—åŸºæœ¬ç±»å‹èƒ½å¤Ÿæ”¯æŒå¯¹è±¡æ“ä½œï¼ byte -\u003e Byte boolean -\u003e Boolean short -\u003e Short char -\u003e Character int -\u003e Integer long -\u003e Long float -\u003e Float double -\u003e Double åŒ…è£…ç±»å®é™…ä¸Šå°±è¡Œå°†æˆ‘ä»¬çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå°è£…æˆä¸€ä¸ªç±»ï¼ˆè¿ç”¨äº†å°è£…çš„æ€æƒ³ï¼‰ private final int value; //Integerå†…éƒ¨å…¶å®æœ¬è´¨è¿˜æ˜¯å­˜äº†ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ç›´æ¥æ“ä½œ public Integer(int value) { this.value = value; } ç°åœ¨æˆ‘ä»¬æ“ä½œçš„å°±æ˜¯Integerå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªintåŸºæœ¬ç±»å‹äº†ï¼ public static void main(String[] args) { Integer i = 1; //åŒ…è£…ç±»å‹å¯ä»¥ç›´æ¥æ¥æ”¶å¯¹åº”ç±»å‹çš„æ•°æ®ï¼Œå¹¶å˜ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ System.out.println(i + i); //åŒ…è£…ç±»å‹å¯ä»¥ç›´æ¥è¢«å½“åšä¸€ä¸ªåŸºæœ¬ç±»å‹è¿›è¡Œæ“ä½œï¼ } è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®± é‚£ä¹ˆä¸ºä»€ä¹ˆåŒ…è£…ç±»å‹èƒ½ç›´æ¥ä½¿ç”¨ä¸€ä¸ªå…·ä½“å€¼æ¥èµ‹å€¼å‘¢ï¼Ÿå…¶å®ä¾é çš„æ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±æœºåˆ¶ Integer i = 1; //å…¶å®è¿™é‡Œåªæ˜¯ç®€å†™äº†è€Œå·² Integer i = Integer.valueOf(1); //ç¼–è¯‘åçœŸæ­£çš„æ ·å­ è°ƒç”¨valueOfæ¥ç”Ÿæˆä¸€ä¸ªIntegerå¯¹è±¡ï¼ public static Integer valueOf(int i) { if (i \u003e= IntegerCache.low \u0026\u0026 i \u003c= IntegerCache.high) //æ³¨æ„ï¼ŒJavaä¸ºäº†ä¼˜åŒ–ï¼Œæœ‰ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œå¦‚æœæ˜¯åœ¨-128~127ä¹‹é—´çš„æ•°ï¼Œä¼šç›´æ¥ä½¿ç”¨å·²ç»ç¼“å­˜å¥½çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å†å»åˆ›å»ºæ–°çš„ï¼ï¼ˆé¢è¯•å¸¸è€ƒï¼‰ return IntegerCache.cache[i + (-IntegerCache.low)]; return new Integer(i); //è¿”å›ä¸€ä¸ªæ–°åˆ›å»ºå¥½çš„å¯¹è±¡ } è€Œå¦‚æœä½¿ç”¨åŒ…è£…ç±»æ¥è¿›è¡Œè¿ç®—ï¼Œæˆ–æ˜¯èµ‹å€¼ç»™ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡ï¼Œä¼šè¿›è¡Œè‡ªåŠ¨æ‹†ç®±ï¼š public static void main(String[] args) { Integer i = Integer.valueOf(1); int a = i; //ç®€å†™ int a = i.intValue(); //ç¼–è¯‘åå®é™…çš„ä»£ç  long c = i.longValue(); //å…¶ä»–ç±»å‹ä¹Ÿæœ‰ï¼ } æ—¢ç„¶ç°åœ¨æ˜¯åŒ…è£…ç±»å‹äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜èƒ½ä½¿ç”¨==æ¥åˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰å—ï¼Ÿ public static void main(String[] args) { Integer i1 = 28914; Integer i2 = 28914; System.out.println(i1 == i2); //å®é™…ä¸Šåˆ¤æ–­æ˜¯ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡ï¼ˆå†…å­˜åœ°å€æ˜¯å¦ç›¸åŒï¼‰ System.out.println(i1.equals(i2)); //è¿™ä¸ªæ‰æ˜¯çœŸæ­£çš„å€¼åˆ¤æ–­ï¼ } æ³¨æ„IntegerCacheå¸¦æ¥çš„å½±å“ï¼ æ€è€ƒï¼šä¸‹é¢è¿™ç§æƒ…å†µç»“æœä¼šæ˜¯ä»€ä¹ˆï¼Ÿ public static void main(String[] args) { Integer i1 = 28914; Integer i2 = 28914; System.out.println(i1+1 == i2+1); } åœ¨é›†åˆç±»çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šç»§ç»­ç”¨åˆ°æˆ‘ä»¬çš„åŒ…è£…ç±»å‹ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:8:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"é¢å‘å¯¹è±¡ç¼–ç¨‹å®æˆ˜ è™½ç„¶æˆ‘ä»¬å­¦ä¹ äº†ç¼–ç¨‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ä¸€è‚¡è„‘çš„æ‰€æœ‰é—®é¢˜éƒ½ç…§ç€ç¼–ç¨‹çš„æ€ç»´å»è§£å†³ï¼Œç¼–ç¨‹åªæ˜¯è§£å†³é—®é¢˜çš„ä¸€ç§æ‰‹æ®µï¼Œçµæ´»çš„è¿ç”¨æˆ‘ä»¬æ‰€å­¦çš„çŸ¥è¯†ï¼Œæ‰æ˜¯è§£å†³é—®é¢˜çš„æœ€å¥½åŠæ³•ï¼æ¯”å¦‚ï¼Œæ±‚1åˆ°100æ‰€æœ‰æ•°çš„å’Œï¼š public static void main(String[] args) { int sum = 0; for (int i = 1; i \u003c= 100; i++) { //forå¾ªç¯æš´åŠ›æ±‚è§£ï¼Œç®€å•ï¼Œä½†æ˜¯æ•ˆç‡ä¼¼ä¹ä½äº†ä¸€äº› sum += i; } System.out.println(sum); } public static void main(String[] args) { System.out.println((1 + 100) * 50); //é«˜æ–¯æ±‚å’Œå…¬å¼ï¼Œåˆ©ç”¨æ•°å­¦ï¼Œç¬é—´è®¡ç®—ç»“æœï¼ } è¯´åˆ°æœ€åï¼Œå…¶å®æ•°å­¦å’Œé€»è¾‘æ€ç»´æ‰æ˜¯è§£å†³é—®é¢˜çš„æœ€ç»ˆåŠæ³•ï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:9:0","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å¯¹è±¡è®¾è®¡ï¼ˆé¢å‘å¯¹è±¡ã€å¤šæ€è¿ç”¨ï¼‰ è®¾è®¡ä¸€ä¸ªPersonæŠ½è±¡ç±»ï¼ŒåŒ…å«åƒé¥­è¿åŠ¨å­¦ä¹ ä¸‰ç§è¡Œä¸ºï¼Œåˆ†ä¸ºå·¥äººã€å­¦ç”Ÿã€è€å¸ˆä¸‰ç§èŒä¸šã€‚ è®¾è®¡è®¾è®¡ä¸€ä¸ªæ¥å£è€ƒè¯•ï¼Œåªæœ‰è€å¸ˆå’Œå­¦ç”Ÿä¼šè€ƒè¯•ã€‚ è®¾è®¡ä¸€ä¸ªæ–¹æ³•ï¼Œæ¨¡æ‹Ÿè®©äººç±»è¿›å…¥è€ƒåœºï¼Œè¦æ±‚åªæœ‰ä¼šè€ƒè¯•çš„äººæ‰èƒ½è¿›å…¥ï¼Œå¹¶ä¸”è€ƒè¯•ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:9:1","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"äºŒåˆ†æœç´¢ï¼ˆæœç´¢ç®—æ³•ï¼‰ ç°åœ¨æœ‰ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼ˆä»å°åˆ°å¤§ï¼Œæ•°ç»„é•¿åº¦ 0 \u003c n \u003c 1000000ï¼‰å¦‚ä½•å¿«é€Ÿå¯»æ‰¾æˆ‘ä»¬æƒ³è¦çš„æ•°åœ¨å“ªä¸ªä½ç½®ï¼Œå¦‚æœå­˜åœ¨è¯·è¿”å›ä¸‹æ ‡ï¼Œä¸å­˜åœ¨è¿”å›-1å³å¯ã€‚ int[] arr = new int[]{1, 4, 5, 6, 7, 10, 12, 14, 20, 22, 26}; //æµ‹è¯•ç”¨ä¾‹ private static int test(int[] arr, int target){ //è¯·åœ¨è¿™é‡Œå®ç°æœç´¢ç®—æ³• } ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:9:2","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"å¿«é€Ÿæ’åºï¼ˆæ’åºç®—æ³•ã€é€’å½’åˆ†æ²»ï¼‰ ï¼ˆå¼€å§‹ä¹‹å‰å…ˆä»‹ç»ä¸€ä¸‹é€’å½’ï¼ï¼‰å¿«é€Ÿæ’åºå…¶å®æ˜¯ä¸€ç§æ’åºæ‰§è¡Œæ•ˆç‡å¾ˆé«˜çš„æ’åºç®—æ³•ï¼Œå®ƒåˆ©ç”¨åˆ†æ²»æ³•æ¥å¯¹å¾…æ’åºåºåˆ—è¿›è¡Œåˆ†æ²»æ’åºï¼Œå®ƒçš„æ€æƒ³ä¸»è¦æ˜¯é€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’è®°å½•åˆ†éš”æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­çš„ä¸€éƒ¨åˆ†æ¯”å…³é”®å­—å°ï¼Œåé¢ä¸€éƒ¨åˆ†æ¯”å…³é”®å­—å¤§ï¼Œç„¶åå†å¯¹è¿™å‰åçš„ä¸¤éƒ¨åˆ†åˆ†åˆ«é‡‡ç”¨è¿™ç§æ–¹å¼è¿›è¡Œæ’åºï¼Œé€šè¿‡é€’å½’çš„è¿ç®—æœ€ç»ˆè¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚ å¿«é€Ÿæ’åºå°±åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œå¿«é€Ÿï¼åœ¨æç«¯æƒ…å†µä¸‹ï¼Œä¼šé€€åŒ–æˆå†’æ³¡æ’åºï¼ ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:9:3","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"0/1èƒŒåŒ…é—®é¢˜ï¼ˆå›æº¯æ³•ã€å‰ªæ/åŠ¨æ€è§„åˆ’ä¼˜åŒ–ï¼‰ ç»™å®š n ä»¶ç‰©å“ï¼Œæ¯ä¸€ä¸ªç‰©å“çš„é‡é‡ä¸º w[n]ï¼Œæ¯ä¸ªç‰©å“çš„ä»·å€¼ä¸º v[n]ã€‚ç°æŒ‘é€‰ç‰©å“æ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå‡å®šèƒŒåŒ…èƒ½æ‰¿å—çš„æœ€å¤§é‡é‡ä¸º capacityï¼Œæ±‚è£…å…¥ç‰©å“çš„æœ€å¤§ä»·å€¼æ˜¯å¤šå°‘? int[] w = {2, 3, 4, 5}; int[] v = {3, 4, 5, 6}; int capacity = 8; ","date":"2022-01-23","objectID":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/:9:4","tags":["Javaå¯¹è±¡å’Œå¤šæ€"],"title":"Javaå¯¹è±¡å’Œå¤šæ€","uri":"/posts/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaå¼‚å¸¸æœºåˆ¶ é…å¥—è§†é¢‘ åœ¨ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ç¨‹åºä¼šæŒ‰ç…§æˆ‘ä»¬çš„æ€è·¯å»è¿è¡Œï¼ŒæŒ‰ç†è¯´æ˜¯ä¸ä¼šå‡ºç°é—®é¢˜çš„ï¼Œä½†æ˜¯ï¼Œä»£ç å®é™…ç¼–å†™åå¹¶ä¸ä¸€å®šæ˜¯å®Œç¾çš„ï¼Œå¯èƒ½ä¼šæœ‰æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘åˆ°çš„æƒ…å†µï¼Œå¦‚æœè¿™äº›æƒ…å†µèƒ½å¤Ÿæ­£å¸¸å¾—åˆ°ä¸€ä¸ªé”™è¯¯çš„ç»“æœè¿˜å¥½ï¼Œä½†æ˜¯å¦‚æœç›´æ¥å¯¼è‡´ç¨‹åºè¿è¡Œå‡ºç°é—®é¢˜äº†å‘¢ï¼Ÿ public static void main(String[] args) { test(1, 0); //å½“bä¸º0çš„æ—¶å€™ï¼Œè¿˜èƒ½æ­£å¸¸è¿è¡Œå—ï¼Ÿ } private static int test(int a, int b){ return a/b; //æ²¡æœ‰ä»»ä½•çš„åˆ¤æ–­è€Œæ˜¯ç›´æ¥åšè®¡ç®— } Exception in thread \"main\" java.lang.ArithmeticException: / by zero at com.test.Application.test(Application.java:9) at com.test.Application.main(Application.java:5) å½“ç¨‹åºè¿è¡Œå‡ºç°æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘åˆ°çš„æƒ…å†µæ—¶ï¼Œå°±æœ‰å¯èƒ½å‡ºç°å¼‚å¸¸æˆ–æ˜¯é”™è¯¯ï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:0:0","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"å¼‚å¸¸ æˆ‘ä»¬åœ¨ä¹‹å‰å…¶å®å·²ç»æ¥è§¦è¿‡ä¸€äº›å¼‚å¸¸äº†ï¼Œæ¯”å¦‚æ•°ç»„è¶Šç•Œå¼‚å¸¸ï¼Œç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œç®—æœ¯å¼‚å¸¸ç­‰ï¼Œä»–ä»¬å…¶å®éƒ½æ˜¯å¼‚å¸¸ç±»å‹ï¼Œæˆ‘ä»¬çš„æ¯ä¸€ä¸ªå¼‚å¸¸ä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œä»–ä»¬éƒ½ç»§æ‰¿è‡ªExceptionç±»ï¼å¼‚å¸¸ç±»å‹æœ¬è´¨ä¾ç„¶ç±»çš„å¯¹è±¡ï¼Œä½†æ˜¯å¼‚å¸¸ç±»å‹æ”¯æŒåœ¨ç¨‹åºè¿è¡Œå‡ºç°é—®é¢˜æ—¶æŠ›å‡ºï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢å‡ºç°çš„çº¢è‰²æŠ¥é”™ï¼‰ä¹Ÿå¯ä»¥æå‰å£°æ˜ï¼Œå‘ŠçŸ¥ä½¿ç”¨è€…éœ€è¦å¤„ç†å¯èƒ½ä¼šå‡ºç°çš„å¼‚å¸¸ï¼ ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:1:0","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"è¿è¡Œæ—¶å¼‚å¸¸ å¼‚å¸¸çš„ç¬¬ä¸€ç§ç±»å‹æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¦‚ä¸Šè¿°çš„åˆ—å­ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•æ„ŸçŸ¥ä»£ç æ˜¯å¦ä¼šå‡ºç°é—®é¢˜ï¼Œåªæœ‰åœ¨è¿è¡Œçš„æ—¶å€™æ‰çŸ¥é“ä¼šä¸ä¼šå‡ºé”™ï¼ˆæ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸ä¼šå‡ºé”™çš„ï¼‰ï¼Œè¿™æ ·çš„å¼‚å¸¸ç§°ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚æ‰€æœ‰çš„è¿è¡Œæ—¶å¼‚å¸¸éƒ½ç»§æ‰¿è‡ªRuntimeExceptionã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:1:1","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"ç¼–è¯‘æ—¶å¼‚å¸¸ å¼‚å¸¸çš„å¦ä¸€ç§ç±»å‹æ˜¯ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶å¼‚å¸¸æ˜¯æ˜ç¡®ä¼šå‡ºç°çš„å¼‚å¸¸ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±éœ€è¦è¿›è¡Œå¤„ç†çš„å¼‚å¸¸ï¼ˆæ•è·å¼‚å¸¸ï¼‰å¦‚æœä¸è¿›è¡Œå¤„ç†ï¼Œå°†æ— æ³•é€šè¿‡ç¼–è¯‘ï¼é»˜è®¤ç»§æ‰¿è‡ªExceptionç±»çš„å¼‚å¸¸éƒ½æ˜¯ç¼–è¯‘æ—¶å¼‚å¸¸ã€‚ File file = new File(\"my.txt\"); file.createNewFile(); //è¦è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé¦–å…ˆéœ€è¦å¤„ç†å¼‚å¸¸ ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:1:2","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"é”™è¯¯ é”™è¯¯æ¯”å¼‚å¸¸æ›´ä¸¥é‡ï¼Œå¼‚å¸¸å°±æ˜¯ä¸åŒå¯»å¸¸ï¼Œä½†ä¸ä¸€å®šä¼šå¯¼è‡´è‡´å‘½çš„é—®é¢˜ï¼Œè€Œé”™è¯¯æ˜¯è‡´å‘½é—®é¢˜ï¼Œä¸€èˆ¬å‡ºç°é”™è¯¯å¯èƒ½JVMå°±æ— æ³•ç»§ç»­æ­£å¸¸è¿è¡Œäº†ï¼Œæ¯”å¦‚OutOfMemoryErrorå°±æ˜¯å†…å­˜æº¢å‡ºé”™è¯¯ï¼ˆå†…å­˜å ç”¨å·²ç»è¶…å‡ºé™åˆ¶ï¼Œæ— æ³•ç»§ç»­ç”³è¯·å†…å­˜äº†ï¼‰ int[] arr = new int[Integer.MAX_VALUE]; //èƒ½åˆ›å»ºå¦‚æ­¤ä¹‹å¤§çš„æ•°ç»„å—ï¼Ÿ è¿è¡Œåå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š Exception in thread \"main\" java.lang.OutOfMemoryError: Requested array size exceeds VM limit at com.test.Main.main(Main.java:14) é”™è¯¯éƒ½ç»§æ‰¿è‡ªErrorç±»ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºä¸­åªèƒ½å¤„ç†å¼‚å¸¸ï¼Œé”™è¯¯æ˜¯å¾ˆéš¾è¿›è¡Œå¤„ç†çš„ï¼ŒErrorå’ŒExecptionéƒ½ç»§æ‰¿è‡ªThrowableç±»ã€‚å½“ç¨‹åºä¸­å‡ºç°é”™è¯¯æˆ–å¼‚å¸¸æ—¶åˆæ²¡æœ‰è¿›è¡Œå¤„ç†æ—¶ï¼Œç¨‹åºï¼ˆå½“å‰çº¿ç¨‹ï¼‰å°†ç»ˆæ­¢è¿è¡Œï¼š int[] arr = new int[Integer.MAX_VALUE]; System.out.println(\"lbwnb\"); //è¿˜èƒ½æ­£å¸¸æ‰“å°å—ï¼Ÿ ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:2:0","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"å¼‚å¸¸çš„å¤„ç† å½“ç¨‹åºæ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬æƒ³è¦çš„æ ·å­è¿è¡Œè€Œå‡ºç°å¼‚å¸¸æ—¶ï¼ˆé»˜è®¤ä¼šäº¤ç»™JVMæ¥å¤„ç†ï¼ŒJVMå‘ç°ä»»ä½•å¼‚å¸¸éƒ½ä¼šç«‹å³ç»ˆæ­¢ç¨‹åºè¿è¡Œï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°æ ˆè¿½è¸ªä¿¡æ¯ï¼‰ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè‡ªå·±å¤„ç†å‡ºç°çš„é—®é¢˜ï¼Œè®©ç¨‹åºç»§ç»­è¿è¡Œä¸‹å»ï¼Œå°±éœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œæ•è·ï¼Œæ¯”å¦‚ï¼š int[] arr = new int[5]; arr[5] = 1; //æˆ‘ä»¬éœ€è¦å¤„ç†è¿™ç§æƒ…å†µï¼Œä¿è¯åé¢çš„ä»£ç æ­£å¸¸è¿è¡Œï¼ System.out.println(\"lbwnb\"); æˆ‘ä»¬å¯ä»¥ä½¿ç”¨tryå’Œcatchè¯­å¥å—æ¥å¤„ç†ï¼š int[] arr = new int[5]; try{ //åœ¨tryå—ä¸­è¿è¡Œä»£ç  arr[5] = 1; //å½“ä»£ç å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸ä¼šè¢«æ•è·ï¼Œå¹¶åœ¨catchå—ä¸­å¾—åˆ°å¼‚å¸¸ç±»å‹çš„å¯¹è±¡ }catch (ArrayIndexOutOfBoundsException e){ //æ•è·çš„å¼‚å¸¸ç±»å‹ System.out.println(\"ç¨‹åºè¿è¡Œå‡ºç°å¼‚å¸¸ï¼\"); //å‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ } //åé¢çš„ä»£ç ä¼šæ­£å¸¸è¿è¡Œ System.out.println(\"lbwnb\"); å½“å¼‚å¸¸è¢«æ•è·åï¼Œå°±ç”±æˆ‘ä»¬è‡ªå·±è¿›è¡Œå¤„ç†ï¼ˆä¸å†äº¤ç»™JVMå¤„ç†ï¼‰ï¼Œå› æ­¤å°±ä¸ä¼šå¯¼è‡´ç¨‹åºç»ˆæ­¢è¿è¡Œã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨e.printStackTrace()æ¥æ‰“å°æ ˆè¿½è¸ªä¿¡æ¯ï¼Œå®šä½æˆ‘ä»¬çš„å¼‚å¸¸å‡ºç°ä½ç½®ï¼š java.lang.ArrayIndexOutOfBoundsException: 5 at com.test.Main.main(Main.java:7) //Mainç±»çš„ç¬¬7è¡Œå‡ºç°é—®é¢˜ ç¨‹åºè¿è¡Œå‡ºç°å¼‚å¸¸ï¼ lbwnb è¿è¡Œæ—¶å¼‚å¸¸åœ¨ç¼–è¯‘æ—¶å¯ä»¥ä¸ç”¨æ•è·ï¼Œä½†æ˜¯ç¼–è¯‘æ—¶å¼‚å¸¸å¿…é¡»è¿›è¡Œå¤„ç†ï¼š File file = new File(\"my.txt\"); try { file.createNewFile(); } catch (IOException e) { //æ•è·å£°æ˜çš„å¼‚å¸¸ç±»å‹ e.printStackTrace(); } å¯ä»¥æ•è·åˆ°ç±»å‹ä¸æ­¢æ˜¯Exceptionçš„å­ç±»ï¼Œåªè¦æ˜¯ç»§æ‰¿è‡ªThrowalbeçš„ç±»ï¼Œéƒ½èƒ½è¢«æ•è·ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒErrorä¹Ÿèƒ½è¢«æ•è·ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·åšï¼Œå› ä¸ºé”™è¯¯ä¸€èˆ¬æ˜¯è™šæ‹Ÿæœºç›¸å…³çš„é—®é¢˜ï¼Œå‡ºç°Erroråº”è¯¥ä»é—®é¢˜çš„æ ¹æºå»è§£å†³ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:3:0","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"å¼‚å¸¸çš„æŠ›å‡º å½“åˆ«äººè°ƒç”¨æˆ‘ä»¬çš„æ–¹æ³•æ—¶ï¼Œå¦‚æœä¼ å…¥äº†é”™è¯¯çš„å‚æ•°å¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦æ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æ¥ç»ˆæ­¢ç¨‹åºç»§ç»­è¿è¡Œä¸‹å»ï¼ŒåŒæ—¶å‘ŠçŸ¥ä¸Šä¸€çº§æ–¹æ³•æ‰§è¡Œå‡ºç°äº†é—®é¢˜ï¼š public static void main(String[] args) { try { test(1, 0); } catch (Exception e) { //æ•è·æ–¹æ³•ä¸­ä¼šå‡ºç°çš„å¼‚å¸¸ e.printStackTrace(); } } private static int test(int a, int b) throws Exception { //å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ if(b == 0) throw new Exception(\"0ä¸èƒ½åšé™¤æ•°ï¼\"); //åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶æŠ›å‡ºå¼‚å¸¸ return a/b; //æŠ›å‡ºå¼‚å¸¸ä¼šç»ˆæ­¢ä»£ç è¿è¡Œ } é€šè¿‡throwå…³é”®å­—æŠ›å‡ºå¼‚å¸¸ï¼ˆæŠ›å‡ºå¼‚å¸¸åï¼Œåé¢çš„ä»£ç ä¸å†æ‰§è¡Œï¼‰å½“ç¨‹åºè¿è¡Œåˆ°è¿™ä¸€è¡Œæ—¶ï¼Œå°±ä¼šç»ˆæ­¢æ‰§è¡Œï¼Œå¹¶å‡ºç°ä¸€ä¸ªå¼‚å¸¸ã€‚ å¦‚æœæ–¹æ³•ä¸­æŠ›å‡ºäº†éè¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½†æ˜¯ä¸å¸Œæœ›åœ¨æ­¤æ–¹æ³•å†…å¤„ç†ï¼Œè€Œæ˜¯äº¤ç»™è°ƒç”¨è€…æ¥å¤„ç†å¼‚å¸¸ï¼Œå°±éœ€è¦åœ¨æ–¹æ³•å®šä¹‰åé¢æ˜¾å¼å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ï¼å¦‚æœæŠ›å‡ºçš„æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆ™ä¸éœ€è¦åœ¨æ–¹æ³•åé¢å£°æ˜å¼‚å¸¸ç±»å‹ï¼Œè°ƒç”¨æ—¶ä¹Ÿæ— éœ€æ•è·ï¼Œä½†æ˜¯å‡ºç°å¼‚å¸¸æ—¶åŒæ ·ä¼šå¯¼è‡´ç¨‹åºç»ˆæ­¢ï¼ˆå‡ºç°è¿è¡Œæ—¶å¼‚å¸¸åŒæ—¶æœªè¢«æ•è·ä¼šé»˜è®¤äº¤ç»™JVMå¤„ç†ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥ä¸­æ­¢ç¨‹åºå¹¶åœ¨æ§åˆ¶å°æ‰“å°æ ˆè¿½è¸ªä¿¡æ¯ï¼‰ å¦‚æœæƒ³è¦è°ƒç”¨å£°æ˜ç¼–è¯‘æ—¶å¼‚å¸¸çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¾ç„¶ä¸æƒ³å»å¤„ç†ï¼Œå¯ä»¥åŒæ ·çš„åœ¨æ–¹æ³•ä¸Šå£°æ˜throwsæ¥ç»§ç»­äº¤ç»™ä¸Šä¸€çº§å¤„ç†ã€‚ public static void main(String[] args) throws Exception { //å‡ºç°å¼‚å¸¸å°±å†å¾€ä¸ŠæŠ›ï¼Œè€Œä¸æ˜¯åœ¨æ­¤æ–¹æ³•å†…å¤„ç† test(1, 0); } private static int test(int a, int b) throws Exception { //å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ if(b == 0) throw new Exception(\"0ä¸èƒ½åšé™¤æ•°ï¼\"); //åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶æŠ›å‡ºå¼‚å¸¸ return a/b; } å½“mainæ–¹æ³•éƒ½å£°æ˜æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå‡ºç°å¼‚å¸¸å°±ç”±JVMè¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„å¤„ç†æ–¹å¼ï¼ˆç›´æ¥ä¸­æ­¢ç¨‹åºå¹¶åœ¨æ§åˆ¶å°æ‰“å°æ ˆè¿½è¸ªä¿¡æ¯ï¼‰ å¼‚å¸¸åªèƒ½è¢«æ•è·ä¸€æ¬¡ï¼Œå½“å¼‚å¸¸æ•è·å‡ºç°åµŒå¥—æ—¶ï¼Œåªä¼šåœ¨æœ€å†…å±‚è¢«æ•è·ï¼š public static void main(String[] args) throws Exception { try{ test(1, 0); }catch (Exception e){ System.out.println(\"å¤–å±‚\"); } } private static int test(int a, int b){ try{ if(b == 0) throw new Exception(\"0ä¸èƒ½åšé™¤æ•°ï¼\"); }catch (Exception e){ System.out.println(\"å†…å±‚\"); return 0; } return a/b; } ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:4:0","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"è‡ªå®šä¹‰å¼‚å¸¸ JDKä¸ºæˆ‘ä»¬å·²ç»æå‰å®šä¹‰äº†ä¸€äº›å¼‚å¸¸äº†ï¼Œä½†æ˜¯å¯èƒ½å¯¹æˆ‘ä»¬æ¥è¯´ä¸å¤Ÿï¼Œé‚£ä¹ˆå°±éœ€è¦è‡ªå®šä¹‰å¼‚å¸¸ï¼š public class MyException extends Exception { //ç›´æ¥ç»§æ‰¿å³å¯ } public static void main(String[] args) throws MyException { throw new MyException(); //ç›´æ¥ä½¿ç”¨ } ä¹Ÿå¯ä»¥ä½¿ç”¨çˆ¶ç±»çš„å¸¦æè¿°çš„æ„é€ æ–¹æ³•ï¼š public class MyException extends Exception { public MyException(String message){ super(message); } } public static void main(String[] args) throws MyException { throw new MyException(\"å‡ºç°äº†è‡ªå®šä¹‰çš„é”™è¯¯\"); } æ•è·å¼‚å¸¸æŒ‡å®šçš„ç±»å‹ï¼Œä¼šæ•è·å…¶æ‰€æœ‰å­å¼‚å¸¸ç±»å‹ï¼š try { throw new MyException(\"å‡ºç°äº†è‡ªå®šä¹‰çš„é”™è¯¯\"); } catch (Exception e) { //æ•è·çˆ¶å¼‚å¸¸ç±»å‹ System.out.println(\"æ•è·åˆ°å¼‚å¸¸\"); } ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:5:0","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"å¤šé‡å¼‚å¸¸æ•è·å’Œfinallyå…³é”®å­— å½“ä»£ç å¯èƒ½å‡ºç°å¤šç§ç±»å‹çš„å¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåˆ†ä¸åŒæƒ…å†µå¤„ç†ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤šé‡å¼‚å¸¸æ•è·ï¼š try { //.... } catch (NullPointerException e) { } catch (IndexOutOfBoundsException e){ } catch (RuntimeException e){ } æ³¨æ„ï¼Œç±»ä¼¼äºif-else ifçš„ç»“æ„ï¼Œçˆ¶å¼‚å¸¸ç±»å‹åªèƒ½æ”¾åœ¨æœ€åï¼ try { //.... } catch (RuntimeException e){ //çˆ¶ç±»å‹åœ¨å‰ï¼Œä¼šå°†å­ç±»çš„ä¹Ÿæ•è· } catch (NullPointerException e) { //æ°¸è¿œéƒ½ä¸ä¼šè¢«æ•è· } catch (IndexOutOfBoundsException e){ //æ°¸è¿œéƒ½ä¸ä¼šè¢«æ•è· } å¦‚æœå¸Œæœ›æŠŠè¿™äº›å¼‚å¸¸æ”¾åœ¨ä¸€èµ·è¿›è¡Œå¤„ç†ï¼š try { //.... } catch (NullPointerException | IndexOutOfBoundsException e) { //ç”¨|éš”å¼€æ¯ç§ç±»å‹å³å¯ } å½“æˆ‘ä»¬å¸Œæœ›ï¼Œç¨‹åºè¿è¡Œæ—¶ï¼Œæ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½ä¼šåœ¨æœ€åæ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¯ä»¥äº¤ç»™finallyè¯­å¥å—æ¥å¤„ç†ï¼š try { //.... }catch (Exception e){ }finally { System.out.println(\"lbwnb\"); //æ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½ä¼šåœ¨æœ€åæ‰§è¡Œ } tryè¯­å¥å—è‡³å°‘è¦é…åˆcatchæˆ–finallyä¸­çš„ä¸€ä¸ªï¼š try { int a = 10; a /= 0; }finally { //ä¸æ•è·å¼‚å¸¸ï¼Œç¨‹åºä¼šç»ˆæ­¢ï¼Œä½†åœ¨æœ€åä¾ç„¶ä¼šæ‰§è¡Œä¸‹é¢çš„å†…å®¹ System.out.println(\"lbwnb\"); } æ€è€ƒï¼štryã€catchå’Œfinallyæ‰§è¡Œé¡ºåºï¼š private static int test(int a){ try{ return a; }catch (Exception e){ return 0; }finally { a = a + 1; } } ","date":"2022-01-23","objectID":"/posts/java%E5%BC%82%E5%B8%B8/:6:0","tags":["Javaå¼‚å¸¸å¤„ç†"],"title":"Javaå¼‚å¸¸å¤„ç†æœºåˆ¶","uri":"/posts/java%E5%BC%82%E5%B8%B8/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaæ³›å‹ä¸é›†åˆç±»","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"Javaæ³›å‹ä¸é›†åˆç±» é…å¥—è§†é¢‘ åœ¨å‰é¢æˆ‘ä»¬å­¦ä¹ äº†æœ€é‡è¦çš„ç±»å’Œå¯¹è±¡ï¼Œäº†è§£äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€æƒ³ï¼Œæ³¨æ„ï¼Œéå¸¸é‡è¦ï¼Œé¢å‘å¯¹è±¡æ˜¯å¿…é¡»è¦æ·±å…¥ç†è§£å’ŒæŒæ¡çš„å†…å®¹ï¼Œä¸èƒ½è‰è‰ç»“æŸã€‚åœ¨æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬ä¼šç»§ç»­æ·±å…¥äº†è§£ï¼Œä»æˆ‘ä»¬çš„æ³›å‹å¼€å§‹ï¼Œå†åˆ°æˆ‘ä»¬çš„æ•°æ®ç»“æ„ï¼Œæœ€åå†å¼€å§‹æˆ‘ä»¬çš„é›†åˆç±»å­¦ä¹ ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:0:0","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"èµ°è¿›æ³›å‹ ä¸ºäº†ç»Ÿè®¡å­¦ç”Ÿæˆç»©ï¼Œè¦æ±‚è®¾è®¡ä¸€ä¸ªScoreå¯¹è±¡ï¼ŒåŒ…æ‹¬è¯¾ç¨‹åç§°ã€è¯¾ç¨‹å·ã€è¯¾ç¨‹æˆç»©ï¼Œä½†æ˜¯æˆç»©åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä»¥ä¼˜ç§€ã€è‰¯å¥½ã€åˆæ ¼ æ¥ä½œä¸ºç»“æœï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯ 60.0ã€75.5ã€92.5 è¿™æ ·çš„æ•°å­—åˆ†æ•°ï¼Œé‚£ä¹ˆç°åœ¨è¯¥å¦‚ä½•å»è®¾è®¡è¿™æ ·çš„ä¸€ä¸ªScoreç±»å‘¢ï¼Ÿç°åœ¨çš„é—®é¢˜å°±æ˜¯ï¼Œæˆç»©å¯èƒ½æ˜¯Stringç±»å‹ï¼Œä¹Ÿå¯èƒ½æ˜¯Integerç±»å‹ï¼Œå¦‚ä½•æ‰èƒ½å¾ˆå¥½çš„å»å­˜å¯èƒ½å‡ºç°çš„ä¸¤ç§ç±»å‹å‘¢ï¼Ÿ public class Score { String name; String id; Object score; //å› ä¸ºObjectæ˜¯æ‰€æœ‰ç±»å‹çš„çˆ¶ç±»ï¼Œå› æ­¤æ—¢å¯ä»¥å­˜æ”¾Integerä¹Ÿèƒ½å­˜æ”¾String public Score(String name, String id, Object score) { this.name = name; this.id = id; this.score = score; } } ä»¥ä¸Šçš„æ–¹æ³•è™½ç„¶å¾ˆå¥½åœ°è§£å†³äº†å¤šç§ç±»å‹å­˜å‚¨é—®é¢˜ï¼Œä½†æ˜¯Objectç±»å‹åœ¨ç¼–è¯‘é˜¶æ®µå¹¶ä¸å…·æœ‰è‰¯å¥½çš„ç±»å‹åˆ¤æ–­èƒ½åŠ›ï¼Œå¾ˆå®¹æ˜“å‡ºç°ä»¥ä¸‹çš„æƒ…å†µï¼š public static void main(String[] args) { Score score = new Score(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", \"ä¼˜ç§€\"); //æ˜¯Stringç±»å‹çš„ //.... Integer number = (Integer) score.score; //è·å–æˆç»©éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè™½ç„¶å¹¶ä¸æ˜¯ä¸€å¼€å§‹çš„ç±»å‹ï¼Œä½†æ˜¯ç¼–è¯‘ä¸ä¼šæŠ¥é”™ } //è¿è¡Œæ—¶å‡ºç°å¼‚å¸¸ï¼ Exception in thread \"main\" java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer at com.test.Main.main(Main.java:14) ä½¿ç”¨Objectç±»å‹ä½œä¸ºå¼•ç”¨ï¼Œå–å€¼åªèƒ½è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ˜¾ç„¶æ— æ³•åœ¨ç¼–è¯‘æœŸç¡®å®šç±»å‹æ˜¯å¦å®‰å…¨ï¼Œé¡¹ç›®ä¸­ä»£ç é‡éå¸¸ä¹‹å¤§ï¼Œè¿›è¡Œç±»å‹æ¯”è¾ƒåˆä¼šå¯¼è‡´é¢å¤–çš„å¼€é”€å’Œå¢åŠ ä»£ç é‡ï¼Œå¦‚æœä¸ç»æ¯”è¾ƒå°±å¾ˆå®¹æ˜“å‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œä»£ç çš„å¥å£®æ€§æœ‰æ‰€æ¬ ç¼ºï¼ï¼ˆæ­¤æ–¹æ³•è™½ç„¶å¯è¡Œï¼Œä½†å¹¶ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ï¼‰ ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒJDK1.5æ–°å¢äº†æ³›å‹ï¼Œå®ƒèƒ½å¤Ÿåœ¨ç¼–è¯‘é˜¶æ®µå°±æ£€æŸ¥ç±»å‹å®‰å…¨ï¼Œå¤§å¤§æå‡å¼€å‘æ•ˆç‡ã€‚ public class Score\u003cT\u003e { //å°†Scoreè½¬å˜ä¸ºæ³›å‹ç±»\u003cT\u003e String name; String id; T score; //Tä¸ºæ³›å‹ï¼Œæ ¹æ®ç”¨æˆ·æä¾›çš„ç±»å‹è‡ªåŠ¨å˜æˆå¯¹åº”ç±»å‹ public Score(String name, String id, T score) { //æä¾›çš„scoreç±»å‹å³ä¸ºTä»£è¡¨çš„ç±»å‹ this.name = name; this.id = id; this.score = score; } } public static void main(String[] args) { //ç›´æ¥ç¡®å®šScoreçš„ç±»å‹æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„æˆç»© Score\u003cString\u003e score = new Score\u003cString\u003e(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", \"ä¼˜ç§€\"); Integer i = score.score; //ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºæˆå‘˜å˜é‡scoreç±»å‹è¢«å®šä¸ºStringï¼ } æ³›å‹å°†æ•°æ®ç±»å‹çš„ç¡®å®šæ§åˆ¶åœ¨äº†ç¼–è¯‘é˜¶æ®µï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™å°±èƒ½æ˜ç¡®æ³›å‹çš„ç±»å‹ï¼å¦‚æœç±»å‹ä¸ç¬¦åˆï¼Œå°†æ— æ³•é€šè¿‡ç¼–è¯‘ï¼ æ³›å‹æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼ˆå¹¶ä¸æ˜¯JVMæ‰€æ”¯æŒçš„è¯­æ³•ï¼Œç¼–è¯‘åä¼šè½¬æˆç¼–è¯‘å™¨æ”¯æŒçš„è¯­æ³•ï¼Œæ¯”å¦‚ä¹‹å‰çš„foreachå°±æ˜¯ï¼‰ï¼Œåœ¨ç¼–è¯‘åä¼šè¢«æ“¦é™¤ï¼Œå˜å›ä¸Šé¢çš„Objectç±»å‹è°ƒç”¨ï¼Œä½†æ˜¯ç±»å‹è½¬æ¢ç”±ç¼–è¯‘å™¨å¸®æˆ‘ä»¬å®Œæˆï¼Œè€Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±è¿›è¡Œè½¬æ¢ï¼ˆå®‰å…¨ï¼‰ //åç¼–è¯‘åçš„ä»£ç  public static void main(String[] args) { Score score = new Score(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", \"ä¼˜ç§€\"); String i = (String)score.score; //å…¶å®ä¾ç„¶ä¼šå˜ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯è¿™æ˜¯ç”±ç¼–è¯‘å™¨å¸®æˆ‘ä»¬å®Œæˆçš„ } åƒè¿™æ ·åœ¨ç¼–è¯‘åæ³›å‹çš„å†…å®¹æ¶ˆå¤±è½¬å˜ä¸ºObjectçš„æƒ…å†µç§°ä¸ºç±»å‹æ“¦é™¤ï¼ˆé‡è¦ï¼Œéœ€è¦å®Œå…¨ç†è§£ï¼‰ï¼Œæ‰€ä»¥æ³›å‹åªæ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬åœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šç±»å‹çš„ä¸€ç§è¯­æ³•è€Œå·²ï¼Œå¹¶ä¸æ˜¯JVMæ‰€æ”¯æŒçš„ã€‚ ç»¼ä¸Šï¼Œæ³›å‹å…¶å®å°±æ˜¯ä¸€ç§ç±»å‹å‚æ•°ï¼Œç”¨äºæŒ‡å®šç±»å‹ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:1:0","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æ³›å‹çš„ä½¿ç”¨ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:0","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æ³›å‹ç±» ä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»æåˆ°æ³›å‹ç±»çš„å®šä¹‰ï¼Œå®é™…ä¸Šå°±æ˜¯æ™®é€šçš„ç±»å¤šäº†ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½¿ç”¨æ—¶éœ€è¦æŒ‡å®šå…·ä½“çš„æ³›å‹ç±»å‹ã€‚æ³›å‹çš„åç§°ä¸€èˆ¬å–å•ä¸ªå¤§å†™å­—æ¯ï¼Œæ¯”å¦‚Tä»£è¡¨Typeï¼Œä¹Ÿå°±æ˜¯ç±»å‹çš„è‹±æ–‡å•è¯é¦–å­—æ¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ·»åŠ æ•°å­—å’Œå…¶ä»–çš„å­—ç¬¦ã€‚ public class Score\u003cT\u003e { //å°†Scoreè½¬å˜ä¸ºæ³›å‹ç±»\u003cT\u003e String name; String id; T score; //Tä¸ºæ³›å‹ï¼Œæ ¹æ®ç”¨æˆ·æä¾›çš„ç±»å‹è‡ªåŠ¨å˜æˆå¯¹åº”ç±»å‹ public Score(String name, String id, T score) { //æä¾›çš„scoreç±»å‹å³ä¸ºTä»£è¡¨çš„ç±»å‹ this.name = name; this.id = id; this.score = score; } } åœ¨ä¸€ä¸ªæ™®é€šç±»å‹ä¸­å®šä¹‰æ³›å‹ï¼Œæ³›å‹Tç§°ä¸ºå‚æ•°åŒ–ç±»å‹ï¼Œåœ¨å®šä¹‰æ³›å‹ç±»çš„å¼•ç”¨æ—¶ï¼Œéœ€è¦æ˜ç¡®æŒ‡å‡ºç±»å‹ï¼š Score\u003cString\u003e score = new Score\u003cString\u003e(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", \"ä¼˜ç§€\"); æ­¤æ—¶ç±»ä¸­çš„æ³›å‹Tå·²ç»è¢«æ›¿æ¢ä¸ºStringäº†ï¼Œåœ¨æˆ‘ä»¬è·å–æ­¤å¯¹è±¡çš„æ³›å‹å±æ€§æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥å‘Šè¯‰æˆ‘ä»¬ç±»å‹ï¼š Integer i = score.score; //ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºæˆå‘˜å˜é‡scoreæ˜ç¡®ä¸ºStringç±»å‹ æ³¨æ„ï¼Œæ³›å‹åªèƒ½ç”¨äºå¯¹è±¡å±æ€§ï¼Œä¹Ÿå°±æ˜¯éé™æ€çš„æˆå‘˜å˜é‡æ‰èƒ½ä½¿ç”¨ï¼š static T score; //é”™è¯¯ï¼Œä¸èƒ½åœ¨é™æ€æˆå‘˜ä¸Šå®šä¹‰ ç”±æ­¤å¯è§ï¼Œæ³›å‹æ˜¯åªæœ‰åœ¨åˆ›å»ºå¯¹è±¡åç¼–è¯‘å™¨æ‰èƒ½æ˜ç¡®æ³›å‹ç±»å‹ï¼Œè€Œé™æ€ç±»å‹æ˜¯ç±»æ‰€å…·æœ‰çš„å±æ€§ï¼Œä¸è¶³ä»¥ä½¿å¾—ç¼–è¯‘å™¨å®Œæˆç±»å‹æ¨æ–­ã€‚ æ³›å‹æ— æ³•ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œå¦‚æœéœ€è¦åŸºæœ¬ç±»å‹ï¼Œåªèƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»è¿›è¡Œæ›¿æ¢ï¼ Score\u003cdouble\u003e score = new Score\u003cdouble\u003e(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", 90.5); //ç¼–è¯‘ä¸é€šè¿‡ é‚£ä¹ˆä¸ºä»€ä¹ˆæ³›å‹æ— æ³•ä½¿ç”¨åŸºæœ¬ç±»å‹å‘¢ï¼Ÿå›æƒ³ä¸Šä¸€èŠ‚æåˆ°çš„ç±»å‹æ“¦é™¤ï¼Œå…¶å®å°±å¾ˆå¥½ç†è§£äº†ã€‚ç”±äºJVMæ²¡æœ‰æ³›å‹æ¦‚å¿µï¼Œå› æ­¤æ³›å‹æœ€åè¿˜æ˜¯ä¼šè¢«ç¼–è¯‘å™¨ç¼–è¯‘ä¸ºObjectï¼Œå¹¶é‡‡ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢çš„å½¢å¼è¿›è¡Œç±»å‹åŒ¹é…ï¼Œè€Œæˆ‘ä»¬çš„åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¹‹é—´æ— æ³•è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»æ¥å¤„ç†ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:1","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"ç±»çš„æ³›å‹æ–¹æ³• æ³›å‹æ–¹æ³•çš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå®ƒå½“åšä¸€ä¸ªæœªçŸ¥çš„ç±»å‹æ¥ä½¿ç”¨å³å¯ï¼š public T getScore() { //è‹¥æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸ºæ³›å‹ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œæ¨æ–­ return score; } public void setScore(T score) { //è‹¥æ–¹æ³•çš„å½¢å¼å‚æ•°ä¸ºæ³›å‹ï¼Œé‚£ä¹ˆå®å‚åªèƒ½æ˜¯å®šä¹‰æ—¶çš„ç±»å‹ this.score = score; } Score\u003cString\u003e score = new Score\u003cString\u003e(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", \"ä¼˜ç§€\"); score.setScore(10); //ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸ºåªæ¥å—Stringç±»å‹ åŒæ ·åœ°ï¼Œé™æ€æ–¹æ³•æ— æ³•ç›´æ¥ä½¿ç”¨ç±»å®šä¹‰çš„æ³›å‹ï¼ˆæ³¨æ„æ˜¯æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œé™æ€æ–¹æ³•å¯ä»¥ä½¿ç”¨æ³›å‹ï¼‰ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:2","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"è‡ªå®šä¹‰æ³›å‹æ–¹æ³• é‚£ä¹ˆå¦‚æœæˆ‘æƒ³åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¹‹å‰ä¸ºä»€ä¹ˆæ— æ³•ä½¿ç”¨æ³›å‹ï¼Œå› ä¸ºä¹‹å‰æˆ‘ä»¬çš„æ³›å‹å®šä¹‰æ˜¯åœ¨ç±»ä¸Šçš„ï¼Œåªæœ‰æ˜ç¡®å…·ä½“çš„ç±»å‹æ‰èƒ½å¼€å§‹ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºå¯¹è±¡æ—¶å®Œæˆç±»å‹ç¡®å®šï¼Œä½†æ˜¯é™æ€æ–¹æ³•ä¸éœ€è¦ä¾é™„äºå¯¹è±¡ï¼Œé‚£ä¹ˆåªèƒ½åœ¨ä½¿ç”¨æ—¶å†æ¥ç¡®å®šäº†ï¼Œæ‰€ä»¥é™æ€æ–¹æ³•å¯ä»¥ä½¿ç”¨æ³›å‹ï¼Œä½†æ˜¯éœ€è¦å•ç‹¬å®šä¹‰ï¼š public static \u003cE\u003e void test(E e){ //åœ¨æ–¹æ³•å®šä¹‰å‰å£°æ˜æ³›å‹ System.out.println(e); } åŒç†ï¼Œæˆå‘˜æ–¹æ³•ä¹Ÿèƒ½è‡ªè¡Œå®šä¹‰æ³›å‹ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶å†è¿›è¡Œç±»å‹ç¡®å®šï¼š public \u003cE\u003e void test(E e){ System.out.println(e); } å…¶å®ï¼Œæ— è®ºæ˜¯æ³›å‹ç±»è¿˜æ˜¯æ³›å‹æ–¹æ³•ï¼Œå†ä½¿ç”¨æ—¶ä¸€å®šè¦èƒ½å¤Ÿè¿›è¡Œç±»å‹æ¨æ–­ï¼Œæ˜ç¡®ç±»å‹æ‰è¡Œã€‚ æ³¨æ„ä¸€å®šè¦åŒºåˆ†ç±»å®šä¹‰çš„æ³›å‹å’Œæ–¹æ³•å‰å®šä¹‰çš„æ³›å‹ï¼ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:3","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æ³›å‹å¼•ç”¨ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»çš„å¼•ç”¨æ—¶ï¼Œéœ€è¦åœ¨åé¢æŒ‡å‡ºæ­¤ç±»å‹ï¼š Score\u003cInteger\u003e score; //å£°æ˜æ³›å‹ä¸ºIntegerç±»å‹ å¦‚æœä¸å¸Œæœ›æŒ‡å®šç±»å‹ï¼Œæˆ–æ˜¯å¸Œæœ›æ­¤å¼•ç”¨ç±»å‹å¯ä»¥å¼•ç”¨ä»»æ„æ³›å‹çš„Scoreç±»å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨?é€šé…ç¬¦ï¼Œæ¥è¡¨ç¤ºè‡ªåŠ¨åŒ¹é…ä»»æ„çš„å¯ç”¨ç±»å‹ï¼š Score\u003c?\u003e score; //scoreå¯ä»¥å¼•ç”¨ä»»æ„çš„Scoreç±»å‹å¯¹è±¡äº†ï¼ é‚£ä¹ˆä½¿ç”¨é€šé…ç¬¦ä¹‹åï¼Œå¾—åˆ°çš„æ³›å‹æˆå‘˜å˜é‡ä¼šæ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿ Object o = score.getScore(); //åªèƒ½å˜ä¸ºObject å› ä¸ºä½¿ç”¨äº†é€šé…ç¬¦ï¼Œç¼–è¯‘å™¨å°±æ— æ³•è¿›è¡Œç±»å‹æ¨æ–­ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨åŸå§‹ç±»å‹ã€‚ åœ¨å­¦ä¹ äº†æ³›å‹çš„ç•Œé™åï¼Œæˆ‘ä»¬è¿˜ä¼šç»§ç»­äº†è§£é€šé…ç¬¦çš„ä½¿ç”¨ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:4","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æ³›å‹çš„ç•Œé™ ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œç°åœ¨æ²¡æœ‰Stringç±»å‹çš„æˆç»©äº†ï¼Œä½†æ˜¯æˆç»©ä¾ç„¶å¯èƒ½æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯èƒ½æ˜¯å°æ•°ï¼Œè¿™æ—¶æˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·å°†æ³›å‹æŒ‡å®šä¸ºé™¤æ•°å­—ç±»å‹å¤–çš„å…¶ä»–ç±»å‹ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ°æ³›å‹çš„ä¸Šç•Œå®šä¹‰ï¼š public class Score\u003cT extends Number\u003e { //è®¾å®šæ³›å‹ä¸Šç•Œï¼Œå¿…é¡»æ˜¯Numberçš„å­ç±» private final String name; private final String id; private T score; public Score(String name, String id, T score) { this.name = name; this.id = id; this.score = score; } public T getScore() { return score; } } é€šè¿‡extendså…³é”®å­—è¿›è¡Œä¸Šç•Œé™å®šï¼Œåªæœ‰æŒ‡å®šç±»å‹æˆ–æŒ‡å®šç±»å‹çš„å­ç±»æ‰èƒ½ä½œä¸ºç±»å‹å‚æ•°ã€‚ åŒæ ·çš„ï¼Œæ³›å‹é€šé…ç¬¦ä¹Ÿæ”¯æŒæ³›å‹çš„ç•Œé™ï¼š Score\u003c? extends Number\u003e score; //é™å®šä¸ºåŒ¹é…NumberåŠå…¶å­ç±»çš„ç±»å‹ åŒç†ï¼Œæ—¢ç„¶æ³›å‹æœ‰ä¸Šé™ï¼Œé‚£ä¹ˆä¹Ÿæœ‰ä¸‹é™ï¼š Score\u003c? super Integer\u003e score; //é™å®šä¸ºåŒ¹é…IntegeråŠå…¶çˆ¶ç±» é€šè¿‡superå…³é”®å­—è¿›è¡Œä¸‹ç•Œé™å®šï¼Œåªæœ‰æŒ‡å®šç±»å‹æˆ–æŒ‡å®šç±»å‹çš„çˆ¶ç±»æ‰èƒ½ä½œä¸ºç±»å‹å‚æ•°ã€‚ å›¾è§£å¦‚ä¸‹ï¼š é‚£ä¹ˆé™å®šäº†ä¸Šç•Œåï¼Œæˆ‘ä»¬å†æ¥ä½¿ç”¨è¿™ä¸ªå¯¹è±¡çš„æ³›å‹æˆå‘˜ï¼Œä¼šå˜æˆä»€ä¹ˆç±»å‹å‘¢ï¼Ÿ Score\u003c? extends Number\u003e score = new Score\u003c\u003e(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", 10); Number o = score.getScore(); //å¾—åˆ°çš„ç»“æœä¸ºä¸Šç•Œç±»å‹ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦æˆ‘ä»¬æŒ‡å®šäº†ä¸Šç•Œåï¼Œç¼–è¯‘å™¨å°±å°†èŒƒå›´ä»åŸå§‹ç±»å‹Objectæå‡åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä¸Šç•ŒNumberï¼Œä½†æ˜¯ä¾ç„¶æ— æ³•æ˜ç¡®å…·ä½“ç±»å‹ã€‚æ€è€ƒï¼šé‚£å¦‚æœå®šä¹‰ä¸‹é™å‘¢ï¼Ÿ é‚£ä¹ˆæ—¢ç„¶æˆ‘ä»¬å¯ä»¥ç»™æ³›å‹ç±»é™å®šä¸Šç•Œï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ç¼–è¯‘åç»“æœå‘¢ï¼š //ä½¿ç”¨javap -l è¿›è¡Œåç¼–è¯‘ public class com.test.Score\u003cT extends java.lang.Number\u003e { public com.test.Score(java.lang.String, java.lang.String, T); LineNumberTable: line 8: 0 line 9: 4 line 10: 9 line 11: 14 line 12: 19 LocalVariableTable: Start Length Slot Name Signature 0 20 0 this Lcom/test/Score; 0 20 1 name Ljava/lang/String; 0 20 2 id Ljava/lang/String; 0 20 3 score Ljava/lang/Number; //å¯ä»¥çœ‹åˆ°scoreçš„ç±»å‹ç›´æ¥è¢«ç¼–è¯‘ä¸ºNumberç±» public T getScore(); LineNumberTable: line 15: 0 LocalVariableTable: Start Length Slot Name Signature 0 5 0 this Lcom/test/Score; } å› æ­¤ï¼Œä¸€æ—¦ç¡®ç«‹ä¸Šé™åï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†ç±»å‹æå‡åˆ°ä¸Šé™ç±»å‹ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:5","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"é’»çŸ³è¿ç®—ç¬¦ æˆ‘ä»¬å‘ç°ï¼Œæ¯æ¬¡åˆ›å»ºæ³›å‹å¯¹è±¡éƒ½éœ€è¦åœ¨å‰åéƒ½æ ‡æ˜ç±»å‹ï¼Œä½†æ˜¯å®é™…ä¸Šåé¢çš„ç±»å‹å£°æ˜æ˜¯å¯ä»¥å»æ‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¼ å…¥å‚æ•°æ—¶æˆ–å®šä¹‰æ³›å‹ç±»çš„å¼•ç”¨æ—¶ï¼Œå°±å·²ç»æ˜ç¡®äº†ç±»å‹ï¼Œå› æ­¤JDK1.7æä¾›äº†é’»çŸ³è¿ç®—ç¬¦æ¥ç®€åŒ–ä»£ç ï¼š Score\u003cInteger\u003e score = new Score\u003cInteger\u003e(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", 10); //1.7ä¹‹å‰ Score\u003cInteger\u003e score = new Score\u003c\u003e(\"æ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€\", \"EP074512\", 10); //1.7ä¹‹å ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:6","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æ³›å‹ä¸å¤šæ€ æ³›å‹ä¸ä»…ä»…å¯ä»¥å¯ä»¥å®šä¹‰åœ¨ç±»ä¸Šï¼ŒåŒæ—¶ä¹Ÿèƒ½å®šä¹‰åœ¨æ¥å£ä¸Šï¼š public interface ScoreInterface\u003cT\u003e { T getScore(); void setScore(T t); } å½“å®ç°æ­¤æ¥å£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨å®ç°ç±»æ˜ç¡®æ³›å‹ç±»å‹æˆ–æ˜¯ç»§ç»­ä½¿ç”¨æ­¤æ³›å‹ï¼Œè®©å…·ä½“åˆ›å»ºçš„å¯¹è±¡æ¥ç¡®å®šç±»å‹ã€‚ public class Score\u003cT\u003e implements ScoreInterface\u003cT\u003e{ //å°†Scoreè½¬å˜ä¸ºæ³›å‹ç±»\u003cT\u003e private final String name; private final String id; private T score; public Score(String name, String id, T score) { this.name = name; this.id = id; this.score = score; } public T getScore() { return score; } @Override public void setScore(T score) { this.score = score; } } public class StringScore implements ScoreInterface\u003cString\u003e{ //åœ¨å®ç°æ—¶æ˜ç¡®ç±»å‹ @Override public String getScore() { return null; } @Override public void setScore(String s) { } } æŠ½è±¡ç±»åŒç†ï¼Œè¿™é‡Œå°±ä¸å¤šåšæ¼”ç¤ºäº†ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:7","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"å¤šæ€ç±»å‹æ“¦é™¤ æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶ç»§æ‰¿åæ˜ç¡®äº†æ³›å‹ç±»å‹ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆ@Overrideä¸ä¼šå‡ºç°é”™è¯¯å‘¢ï¼Œé‡å†™çš„æ¡ä»¶æ˜¯éœ€è¦å’Œçˆ¶ç±»çš„è¿”å›å€¼ç±»å‹ã€å½¢å¼å‚æ•°ä¸€è‡´ï¼Œè€Œæ³›å‹é»˜è®¤çš„åŸå§‹ç±»å‹æ˜¯Objectç±»å‹ï¼Œå­ç±»æ˜ç¡®åå˜ä¸ºNumberç±»å‹ï¼Œè¿™æ˜¾ç„¶ä¸æ»¡è¶³é‡å†™çš„æ¡ä»¶ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¾ç„¶èƒ½ç¼–è¯‘é€šè¿‡å‘¢ï¼Ÿ class A\u003cT\u003e{ private T t; public T get(){ return t; } public void set(T t){ this.t=t; } } class B extends A\u003cNumber\u003e{ private Number n; @Override public Number get(){ //è¿™å¹¶ä¸æ»¡è¶³é‡å†™çš„è¦æ±‚ï¼Œå› ä¸ºåªèƒ½é‡å†™çˆ¶ç±»åŒæ ·è¿”å›å€¼å’Œå‚æ•°çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ ·å´èƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼ return t; } @Override public void set(Number t){ this.t=t; } } é€šè¿‡åç¼–è¯‘è¿›è¡Œè§‚å¯Ÿï¼Œå®é™…ä¸Šæ˜¯ç¼–è¯‘å™¨å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆäº†ä¸¤ä¸ªæ¡¥æ¥æ–¹æ³•ç”¨äºæ”¯æŒé‡å†™ï¼š @Override public Object get(){ return this.get();//è°ƒç”¨è¿”å›Numberçš„é‚£ä¸ªæ–¹æ³• } @Override public void set(Object t ){ this.set((Number)t ); //è°ƒç”¨å‚æ•°æ˜¯Numberçš„é‚£ä¸ªæ–¹æ³• } ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:2:8","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æ•°æ®ç»“æ„åŸºç¡€ è­¦å‘Šï¼æœ¬ç« æœ€éš¾çš„éƒ¨åˆ†ï¼ å­¦ä¹ é›†åˆç±»ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æœ‰æœ€å…³é”®çš„å†…å®¹éœ€è¦å­¦ä¹ ï¼ŒåŒç¬¬ä¸€ç« ä¸€æ ·ï¼Œè‡ªåº•å‘ä¸Šæ‰æ˜¯æœ€ä½³çš„å­¦ä¹ æ–¹å‘ï¼Œæ¯”èµ·ç›´æ¥å¸¦å¤§å®¶è®¤è¯†é›†åˆç±»ï¼Œä¸å¦‚å…ˆäº†è§£ä¸€ä¸‹æ•°æ®ç»“æ„ï¼Œåªæœ‰äº†è§£äº†æ•°æ®ç»“æ„åŸºç¡€ï¼Œæ‰èƒ½æ›´å¥½åœ°å­¦ä¹ é›†åˆç±»ï¼ŒåŒæ—¶ï¼Œæ•°æ®ç»“æ„ä¹Ÿæ˜¯ä½ ä»¥åæ·±å…¥å­¦ä¹ JDKæºç çš„å¿…å¤‡æ¡ä»¶ï¼ï¼ˆå­¦ä¹ ä¸è¦å¿«é¤å¼ï¼ï¼‰å½“ç„¶ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯è®²è§£Javaï¼Œæ•°æ®ç»“æ„ä½œä¸ºé“ºå«ä½œç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åªä¼šè®²è§£å…³é”®çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥ä¸‹å»è‡ªè¡Œäº†è§£ã€‚ åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ•°æ®ç»“æ„æ˜¯ä¸€ç§æ•°æ®ç»„ç»‡ã€ç®¡ç†å’Œå­˜å‚¨çš„æ ¼å¼,å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°å¯¹æ•°æ®é«˜æ•ˆçš„è®¿é—®å’Œä¿®æ”¹ã€‚æ›´å‡†ç¡®åœ°è¯´,æ•°æ®ç»“æ„æ˜¯æ•°æ®å€¼çš„é›†åˆï¼Œå¯ä»¥ä½“ç°æ•°æ®å€¼ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠå¯ä»¥å¯¹æ•°æ®è¿›è¡Œåº”ç”¨çš„å‡½æ•°æˆ–æ“ä½œã€‚ é€šä¿—åœ°è¯´ï¼Œæˆ‘ä»¬éœ€è¦å»å­¦ä¹ åœ¨è®¡ç®—æœºä¸­å¦‚ä½•å»æ›´å¥½åœ°ç®¡ç†æˆ‘ä»¬çš„æ•°æ®ï¼Œæ‰èƒ½è®©æˆ‘ä»¬å¯¹æˆ‘ä»¬çš„æ•°æ®æ§åˆ¶æ›´åŠ çµæ´»ï¼ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:3:0","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"çº¿æ€§è¡¨ çº¿æ€§è¡¨æ˜¯æœ€åŸºæœ¬çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯è¡¨ç¤ºä¸€ç»„ç›¸åŒç±»å‹æ•°æ®çš„æœ‰é™åºåˆ—ï¼Œä½ å¯ä»¥æŠŠå®ƒä¸æ•°ç»„è¿›è¡Œå‚è€ƒï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯æ•°ç»„ï¼Œçº¿æ€§è¡¨æ˜¯ä¸€ç§è¡¨ç»“æ„ï¼Œå®ƒèƒ½å¤Ÿæ”¯æŒæ•°æ®çš„æ’å…¥ã€åˆ é™¤ã€æ›´æ–°ã€æŸ¥è¯¢ç­‰ï¼ŒåŒæ—¶æ•°ç»„å¯ä»¥éšæ„å­˜æ”¾åœ¨æ•°ç»„ä¸­ä»»æ„ä½ç½®ï¼Œè€Œçº¿æ€§è¡¨åªèƒ½ä¾æ¬¡æœ‰åºæ’åˆ—ï¼Œä¸èƒ½å‡ºç°ç©ºéš™ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥çš„è®¾è®¡ã€‚ é¡ºåºè¡¨ å°†æ•°æ®ä¾æ¬¡å­˜å‚¨åœ¨è¿ç»­çš„æ•´å—ç‰©ç†ç©ºé—´ä¸­ï¼Œè¿™ç§å­˜å‚¨ç»“æ„ç§°ä¸ºé¡ºåºå­˜å‚¨ç»“æ„ï¼Œè€Œä»¥è¿™ç§æ–¹å¼å®ç°çš„çº¿æ€§è¡¨ï¼Œæˆ‘ä»¬ç§°ä¸ºé¡ºåºè¡¨ã€‚ åŒæ ·çš„ï¼Œè¡¨ä¸­çš„æ¯ä¸€ä¸ªä¸ªä½“éƒ½è¢«ç§°ä¸ºå…ƒç´ ï¼Œå…ƒç´ å·¦è¾¹çš„å…ƒç´ ï¼ˆä¸Šä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œç§°ä¸ºå‰é©±ï¼ŒåŒç†ï¼Œå³è¾¹çš„å…ƒç´ ï¼ˆåä¸€ä¸ªå…ƒç´ ï¼‰ç§°ä¸ºåé©±ã€‚ æˆ‘ä»¬è®¾è®¡çº¿æ€§è¡¨çš„ç›®æ ‡å°±æ˜¯ä¸ºäº†å»æ›´å¥½åœ°ç®¡ç†æˆ‘ä»¬çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºæ•°ç»„ï¼Œæ¥è¿›è¡Œå°è£…ï¼Œå®ç°å¢åˆ æ”¹æŸ¥ï¼æ—¢ç„¶è¦å­˜å‚¨ä¸€ç»„æ•°æ®ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“è”æƒ³åˆ°æˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„æ•°ç»„ï¼Œæ•°ç»„å°±èƒ½å¤Ÿå®¹çº³ä¸€ç»„åŒç±»å‹çš„æ•°æ®ã€‚ ç›®æ ‡ï¼šä»¥æ•°ç»„ä¸ºåº•å±‚ï¼Œç¼–å†™ä»¥ä¸‹æŠ½è±¡ç±»çš„å…·ä½“å®ç° /** * çº¿æ€§è¡¨æŠ½è±¡ç±» * @param \u003cE\u003e å­˜å‚¨çš„å…ƒç´ (Element)ç±»å‹ */ public abstract class AbstractList\u003cE\u003e { /** * è·å–è¡¨çš„é•¿åº¦ * @return é¡ºåºè¡¨çš„é•¿åº¦ */ public abstract int size(); /** * æ·»åŠ ä¸€ä¸ªå…ƒç´  * @param e å…ƒç´  * @param index è¦æ·»åŠ çš„ä½ç½®(ç´¢å¼•) */ public abstract void add(E e, int index); /** * ç§»é™¤æŒ‡å®šä½ç½®çš„å…ƒç´  * @param index ä½ç½® * @return ç§»é™¤çš„å…ƒç´  */ public abstract E remove(int index); /** * è·å–æŒ‡å®šä½ç½®çš„å…ƒç´  * @param index ä½ç½® * @return å…ƒç´  */ public abstract E get(int index); } é“¾è¡¨ æ•°æ®åˆ†æ•£çš„å­˜å‚¨åœ¨ç‰©ç†ç©ºé—´ä¸­ï¼Œé€šè¿‡ä¸€æ ¹çº¿ä¿å­˜ç€å®ƒä»¬ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œè¿™ç§å­˜å‚¨ç»“æ„ç§°ä¸ºé“¾å¼å­˜å‚¨ç»“æ„ å®é™…ä¸Šï¼Œå°±æ˜¯æ¯ä¸€ä¸ªç»“ç‚¹å­˜æ”¾ä¸€ä¸ªå…ƒç´ å’Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹çš„å¼•ç”¨ï¼ˆCè¯­è¨€é‡Œé¢æ˜¯æŒ‡é’ˆï¼ŒJavaä¸­å°±æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œä»£è¡¨ä¸‹ä¸€ä¸ªç»“ç‚¹å¯¹è±¡ï¼‰ åˆ©ç”¨è¿™ç§æ€æƒ³ï¼Œæˆ‘ä»¬å†æ¥å°è¯•å®ç°ä¸Šé¢çš„æŠ½è±¡ç±»ï¼Œä»å®é™…çš„ä»£ç ä¸­æ„Ÿå—ï¼ æ¯”è¾ƒï¼šé¡ºåºè¡¨å’Œé“¾è¡¨çš„ä¼˜å¼‚ï¼Ÿ é¡ºåºè¡¨ä¼˜ç¼ºç‚¹ï¼š è®¿é—®é€Ÿåº¦å¿«ï¼Œéšæœºè®¿é—®æ€§èƒ½é«˜ æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡ä½ä¸‹ï¼Œæç«¯æƒ…å†µä¸‹éœ€è¦å˜æ›´æ•´ä¸ªè¡¨ ä¸æ˜“æ‰©å……ï¼Œéœ€è¦å¤åˆ¶å¹¶é‡æ–°åˆ›å»ºæ•°ç»„ é“¾è¡¨ä¼˜ç¼ºç‚¹ï¼š æ’å…¥å’Œåˆ é™¤æ•ˆç‡é«˜ï¼Œåªéœ€è¦æ”¹å˜è¿æ¥ç‚¹çš„æŒ‡å‘å³å¯ åŠ¨æ€æ‰©å……å®¹é‡ï¼Œæ— éœ€æ‹…å¿ƒå®¹é‡é—®é¢˜ è®¿é—®å…ƒç´ éœ€è¦ä¾æ¬¡å¯»æ‰¾ï¼Œéšæœºè®¿é—®å…ƒç´ æ•ˆç‡ä½ä¸‹ é“¾è¡¨åªèƒ½æŒ‡å‘åé¢ï¼Œèƒ½ä¸èƒ½æŒ‡å‘å‰é¢å‘¢ï¼ŸåŒå‘é“¾è¡¨ï¼ æ ˆå’Œé˜Ÿåˆ—å®é™…ä¸Šå°±æ˜¯å¯¹çº¿æ€§è¡¨åŠ ä»¥çº¦æŸçš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¦‚æœå‰é¢çš„çº¿æ€§è¡¨çš„æŒæ¡å·²ç»okï¼Œé‚£ä¹ˆæ ˆå’Œé˜Ÿåˆ—å°±éå¸¸è½»æ¾äº†ï¼ æ ˆ æ ˆéµå¾ªå…ˆå…¥åå‡ºåŸåˆ™ï¼Œåªèƒ½åœ¨çº¿æ€§è¡¨çš„ä¸€ç«¯æ·»åŠ å’Œåˆ é™¤å…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ ˆçœ‹åšä¸€ä¸ªæ¯å­ï¼Œæ¯å­åªæœ‰ä¸€ä¸ªå£è¿›å‡ºï¼Œæœ€ä½å¤„çš„å…ƒç´ åªèƒ½ç­‰åˆ°ä¸Šé¢çš„å…ƒç´ ç¦»å¼€æ¯å­åï¼Œæ‰èƒ½ç¦»å¼€ã€‚ å‘æ ˆä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œç§°ä¸ºå…¥æ ˆï¼ˆå‹æ ˆï¼‰ï¼Œç§»é™¤æ ˆé¡¶å…ƒç´ ç§°ä¸ºå‡ºæ ˆï¼Œæˆ‘ä»¬éœ€è¦å°è¯•å®ç°ä»¥ä¸‹æŠ½è±¡ç±»å‹ï¼š /** * æŠ½è±¡ç±»å‹æ ˆï¼Œå¾…å®ç° * @param \u003cE\u003e å…ƒç´ ç±»å‹ */ public abstract class AbstractStack\u003cE\u003e { /** * å‡ºæ ˆæ“ä½œ * @return æ ˆé¡¶å…ƒç´  */ public abstract E pop(); /** * å…¥æ ˆæ“ä½œ * @param e å…ƒç´  */ public abstract void push(E e); } å…¶å®ï¼Œæˆ‘ä»¬çš„JVMåœ¨å¤„ç†æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ ˆæ“ä½œï¼š æ‰€ä»¥è¯´ï¼Œå¦‚æœç©ä¸å¥½é€’å½’ï¼Œå°±ä¼šåƒè¿™æ ·ï¼š public class Main { public static void main(String[] args) { go(); } private static void go(){ go(); } } Exception in thread \"main\" java.lang.StackOverflowError at com.test.Main.go(Main.java:13) at com.test.Main.go(Main.java:13) at com.test.Main.go(Main.java:13) at com.test.Main.go(Main.java:13) at com.test.Main.go(Main.java:13) at com.test.Main.go(Main.java:13) at com.test.Main.go(Main.java:13) at com.test.Main.go(Main.java:13) ... æ ˆçš„æ·±åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œå¦‚æœè¾¾åˆ°é™åˆ¶ï¼Œå°†ä¼šå‡ºç°StackOverflowErroré”™è¯¯ï¼ˆæ³¨æ„æ˜¯é”™è¯¯ï¼è¯´æ˜æ˜¯JVMå‡ºç°äº†é—®é¢˜ï¼‰ é˜Ÿåˆ— é˜Ÿåˆ—åŒæ ·ä¹Ÿæ˜¯å—é™åˆ¶çš„çº¿æ€§è¡¨ï¼Œä¸è¿‡é˜Ÿåˆ—å°±åƒæˆ‘ä»¬æ’é˜Ÿä¸€æ ·ï¼Œåªèƒ½ä»é˜Ÿå°¾å¼€å§‹æ’ï¼Œä»é˜Ÿé¦–å‡ºã€‚ æ‰€ä»¥æˆ‘ä»¬è¦å®ç°ä»¥ä¸‹å†…å®¹ï¼š /** * * @param \u003cE\u003e */ public abstract class AbstractQueue\u003cE\u003e { /** * è¿›é˜Ÿæ“ä½œ * @param e å…ƒç´  */ public abstract void offer(E e); /** * å‡ºé˜Ÿæ“ä½œ * @return å…ƒç´  */ public abstract E poll(); } ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:3:1","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"äºŒå‰æ ‘ æœ¬ç‰ˆå—ä¸»è¦å­¦ä¹ çš„æ˜¯äºŒå‰æ ‘ï¼Œæ ‘ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å®ƒä½¿ç”¨èµ·æ¥æ›´åŠ çš„å¤æ‚ã€‚ æ ‘ æˆ‘ä»¬å‰é¢å·²ç»å­¦ä¹ è¿‡é“¾è¡¨äº†ï¼Œæˆ‘ä»¬çŸ¥é“é“¾è¡¨æ˜¯å•ä¸ªç»“ç‚¹ä¹‹é—´ç›¸è¿ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œè€Œæ ‘åˆ™æ˜¯ä¸€ä¸ªç»“ç‚¹è¿æ¥å¤šä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ ä¸€ä¸ªç»“ç‚¹å¯ä»¥æœ‰Nä¸ªå­ç»“ç‚¹ï¼Œå°±åƒä¸Šå›¾ä¸€æ ·ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯ä¸€æ£µæ ‘ã€‚è€Œä½äºæœ€é¡¶ç«¯çš„ç»“ç‚¹ï¼ˆæ²¡æœ‰çˆ¶ç»“ç‚¹ï¼‰æˆ‘ä»¬ç§°ä¸ºæ ¹ç»“ç‚¹ï¼Œè€Œç»“ç‚¹æ‹¥æœ‰çš„å­èŠ‚ç‚¹æ•°é‡ç§°ä¸ºåº¦ï¼Œæ¯å‘ä¸‹ä¸€çº§ç§°ä¸ºä¸€ä¸ªå±‚æ¬¡ï¼Œæ ‘ä¸­å‡ºç°çš„æœ€å¤§å±‚æ¬¡ç§°ä¸ºæ ‘çš„æ·±åº¦(é«˜åº¦)ã€‚ äºŒå‰æ ‘ äºŒå‰æ ‘æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹æœ€å¤šæœ‰ä¸¤é¢—å­æ ‘ï¼Œæ‰€ä»¥äºŒå‰æ ‘ä¸­ä¸å­˜åœ¨åº¦å¤§äº2çš„ç»“ç‚¹ï¼Œä½äºä¸¤è¾¹çš„å­ç»“ç‚¹ç§°ä¸ºå·¦å³å­æ ‘ï¼ˆæ³¨æ„ï¼Œå·¦å³å­æ ‘æ˜¯æ˜ç¡®åŒºåˆ†çš„ï¼Œæ˜¯å·¦å°±æ˜¯å·¦ï¼Œæ˜¯å³å°±æ˜¯å³ï¼‰ æ•°å­¦æ€§è´¨ï¼š åœ¨äºŒå‰æ ‘çš„ç¬¬iå±‚ä¸Šæœ€å¤šæœ‰2^(i-1) ä¸ªèŠ‚ç‚¹ã€‚ äºŒå‰æ ‘ä¸­å¦‚æœæ·±åº¦ä¸ºkï¼Œé‚£ä¹ˆæœ€å¤šæœ‰2^k-1ä¸ªèŠ‚ç‚¹ã€‚ è®¾è®¡ä¸€ä¸ªäºŒå‰æ ‘ç»“ç‚¹ç±»ï¼š public class TreeNode\u003cE\u003e { public E e; //å½“å‰ç»“ç‚¹æ•°æ® public TreeNode\u003cE\u003e left; //å·¦å­æ ‘ public TreeNode\u003cE\u003e right; //å³å­æ ‘ } äºŒå‰æ ‘çš„éå† é¡ºåºè¡¨çš„éå†å…¶å®å°±æ˜¯ä¾æ¬¡æœ‰åºå»è®¿é—®è¡¨ä¸­æ¯ä¸€ä¸ªå…ƒç´ ï¼Œè€ŒåƒäºŒå‰æ ‘è¿™æ ·çš„å¤æ‚ç»“æ„ï¼Œæˆ‘ä»¬æœ‰å››ç§éå†æ–¹å¼ï¼Œä»–ä»¬æ˜¯ï¼šå‰åºéå†ã€ä¸­åºéå†ã€ååºéå†ä»¥åŠå±‚åºéå†ï¼Œæœ¬ç‰ˆå—æˆ‘ä»¬ä¸»è¦è®¨è®ºå‰ä¸‰ç§éå†æ–¹å¼ï¼š å‰åºéå†ï¼šä»äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹å‡ºå‘ï¼Œåˆ°è¾¾ç»“ç‚¹æ—¶å°±ç›´æ¥è¾“å‡ºç»“ç‚¹æ•°æ®ï¼ŒæŒ‰ç…§å…ˆå‘å·¦åœ¨å‘å³çš„æ–¹å‘è®¿é—®ã€‚ABCDEF ä¸­åºéå†ï¼šä»äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹å‡ºå‘ï¼Œä¼˜å…ˆè¾“å‡ºå·¦å­æ ‘çš„èŠ‚ç‚¹çš„æ•°æ®ï¼Œå†è¾“å‡ºå½“å‰èŠ‚ç‚¹æœ¬èº«ï¼Œæœ€åæ‰æ˜¯å³å­æ ‘ã€‚CBDAEF ååºéå†ï¼šä»äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹å‡ºå‘ï¼Œä¼˜å…ˆéå†å…¶å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œæœ€ååœ¨è¾“å‡ºå½“å‰èŠ‚ç‚¹æœ¬èº«ã€‚CDBFEA æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘ æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘å…¶å®å°±æ˜¯ç‰¹æ®Šæƒ…å†µä¸‹çš„äºŒå‰æ ‘ï¼Œæ»¡äºŒå‰æ ‘å·¦å³çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®Œå…¨æŠŠæ¯ä¸€ä¸ªå±‚çº§éƒ½ç»™åŠ æ»¡äº†ç»“ç‚¹ã€‚å®Œå…¨äºŒå‰æ ‘ä¸æ»¡äºŒå‰æ ‘ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œå®ƒçš„æœ€ä¸‹å±‚å¶å­èŠ‚ç‚¹å¯ä»¥ä¸æ»¡ï¼Œä½†æ˜¯æœ€ä¸‹å±‚çš„å¶å­èŠ‚ç‚¹å¿…é¡»é å·¦æ’å¸ƒã€‚ å…¶å®æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘å°±æ˜¯æœ‰ä¸€å®šè§„å¾‹çš„äºŒå‰æ ‘ï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:3:2","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"å¿«é€ŸæŸ¥æ‰¾ æˆ‘ä»¬ä¹‹å‰æåˆ°çš„è¿™äº›æ•°æ®ç»“æ„ï¼Œå¾ˆå¥½åœ°å¸®æˆ‘ä»¬ç®¡ç†äº†æ•°æ®ï¼Œä½†æ˜¯ï¼Œå¦‚æœéœ€è¦æŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºæ•°æ®ç»“æ„ä¸­ï¼Œå¦‚ä½•æ‰èƒ½æ›´åŠ é«˜æ•ˆçš„å»å®Œæˆå‘¢ï¼Ÿ å“ˆå¸Œè¡¨ é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å‘ç°ï¼Œé¡ºåºè¡¨è™½ç„¶æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œä½†æ˜¯æ’å…¥åˆ é™¤æœ‰ä¸¥é‡è¡¨æ›´æ–°çš„é—®é¢˜ï¼Œè€Œé“¾è¡¨è™½ç„¶å¼¥è¡¥äº†æ›´æ–°é—®é¢˜ï¼Œä½†æ˜¯æŸ¥è¯¢æ•ˆç‡å®åœ¨æ˜¯å¤ªä½äº†ï¼Œèƒ½å¦æœ‰ä¸€ç§æŠ˜ä¸­æ–¹æ¡ˆï¼Ÿå“ˆå¸Œè¡¨ï¼ ä¸çŸ¥å¤§å®¶åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­æ˜¯å¦å‘ç°ï¼Œæˆ‘ä»¬çš„Objectç±»ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªå«åšhashcode()çš„æ–¹æ³•ï¼Ÿè€Œè¿™ä¸ªæ–¹æ³•å‘¢ï¼Œå°±æ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå“ˆå¸Œè¡¨çš„å®ç°ã€‚hashcode()é»˜è®¤å¾—åˆ°çš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªå¯¹è±¡çš„hashCodeéƒ½ä¸ä¸€æ ·ã€‚ å“ˆå¸Œè¡¨ï¼Œå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå­˜æ”¾é“¾è¡¨çš„æ•°ç»„ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å»å­˜å‚¨æ•°æ®çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹é•¿å•¥æ ·ï¼š æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¤´ç»“ç‚¹ï¼Œç”¨äºä¿å­˜æ•°æ®ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆç¡®å®šæ•°æ®åº”è¯¥æ”¾åœ¨å“ªä¸€ä¸ªä½ç½®å‘¢ï¼Ÿé€šè¿‡hashç®—æ³•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¬é—´å¾—åˆ°å…ƒç´ åº”è¯¥æ”¾ç½®çš„ä½ç½®ã€‚ //å‡è®¾hashè¡¨é•¿åº¦ä¸º16ï¼Œhashç®—æ³•ä¸ºï¼š private int hash(int hashcode){ return hashcode % 16; } è®¾æƒ³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœè®¡ç®—å‡ºæ¥çš„hashå€¼å’Œä¹‹å‰å·²ç»å­˜åœ¨çš„å…ƒç´ ç›¸åŒäº†å‘¢ï¼Ÿè¿™ç§æƒ…å†µæˆ‘ä»¬ç§°ä¸ºhashç¢°æ’ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦å°†æ¯ä¸€ä¸ªè¡¨å…ƒç´ è®¾ç½®ä¸ºä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹çš„åŸå› ï¼Œä¸€æ—¦å‘ç°é‡å¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾€åç»§ç»­æ·»åŠ èŠ‚ç‚¹ã€‚ å½“ç„¶ï¼Œä»¥ä¸Šçš„hashè¡¨ç»“æ„åªæ˜¯ä¸€ç§è®¾è®¡æ–¹æ¡ˆï¼Œåœ¨é¢å¯¹å¤§é¢æ•°æ®æ—¶ï¼Œæ˜¯ä¸å¤Ÿç”¨çš„ï¼Œåœ¨JDK1.8ä¸­ï¼Œé›†åˆç±»ä½¿ç”¨çš„æ˜¯æ•°ç»„+äºŒå‰æ ‘çš„å½¢å¼è§£å†³çš„ï¼ˆè¿™é‡Œçš„äºŒå‰æ ‘æ˜¯ç»è¿‡åŠ å¼ºçš„äºŒå‰æ ‘ï¼Œä¸æ˜¯å‰é¢è®²å¾—ç®€å•äºŒå‰æ ‘ï¼Œæˆ‘ä»¬ä¸‹ä¸€èŠ‚å°±ä¼šå¼€å§‹è®²ï¼‰ äºŒå‰æ’åºæ ‘ æˆ‘ä»¬å‰é¢å­¦ä¹ çš„äºŒå‰æ ‘æ•ˆç‡æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ç§æ•ˆç‡æ›´é«˜çš„äºŒå‰æ ‘ï¼Œå› æ­¤ï¼ŒåŸºäºäºŒå‰æ ‘çš„æ”¹è¿›ï¼Œæå‡ºäº†äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå¯ä»¥çœ‹åˆ°ç»“æ„åƒä¸‹é¢è¿™æ ·ï¼š ä¸éš¾å‘ç°ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œä¸€å®šå°äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å³å­æ ‘ï¼Œä¸€å®šå¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œè¿™æ ·çš„äºŒå‰æ ‘ç§°ä¸ºäºŒå‰æ’åºæ ‘ã€‚åˆ©ç”¨äºŒåˆ†æœç´¢çš„æ€æƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¿«é€ŸæŸ¥æ‰¾æŸä¸ªèŠ‚ç‚¹ï¼ å¹³è¡¡äºŒå‰æ ‘ åœ¨äº†è§£äº†äºŒå‰æŸ¥æ‰¾æ ‘ä¹‹åï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¦‚æœæ ¹èŠ‚ç‚¹ä¸º10ï¼Œç°åœ¨åŠ å…¥åˆ°ç»“ç‚¹çš„å€¼ä»9å¼€å§‹ï¼Œä¾æ¬¡å‡å°åˆ°1ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨å°±ä¼šå¾ˆå¥‡æ€ªï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š æ˜¾ç„¶ï¼Œå½“æ‰€æœ‰çš„ç»“ç‚¹éƒ½æ’åˆ—åˆ°ä¸€è¾¹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¼šç›´æ¥é€€åŒ–ä¸ºæœ€åŸå§‹çš„äºŒå‰æ ‘ï¼å› æ­¤æˆ‘ä»¬éœ€è¦ç»´æŒäºŒå‰æ ‘çš„å¹³è¡¡ï¼Œæ‰èƒ½ç»´æŒåŸæœ‰çš„æŸ¥æ‰¾æ•ˆç‡ã€‚ ç°åœ¨æˆ‘ä»¬å¯¹äºŒå‰æ’åºæ ‘åŠ ä»¥çº¦æŸï¼Œè¦æ±‚æ¯ä¸ªç»“ç‚¹çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œè¿™æ ·çš„äºŒå‰æ ‘ç§°ä¸ºå¹³è¡¡äºŒå‰æ ‘ï¼ŒåŒæ—¶è¦æ±‚æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘éƒ½æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œè¿™æ ·ï¼Œå°±ä¸ä¼šå› ä¸ºä¸€è¾¹çš„ç–¯ç‹‚å¢åŠ å¯¼è‡´å¤±è¡¡ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š å·¦å·¦å¤±è¡¡ å³å³å¤±è¡¡ å·¦å³å¤±è¡¡ å³å·¦å¤±è¡¡ é€šè¿‡ä»¥ä¸Šå››ç§æƒ…å†µçš„å¤„ç†ï¼Œæœ€ç»ˆå¾—åˆ°ç»´æŠ¤å¹³è¡¡äºŒå‰æ ‘çš„ç®—æ³•ã€‚ çº¢é»‘æ ‘ çº¢é»‘æ ‘ä¹Ÿæ˜¯äºŒå‰æ’åºæ ‘çš„ä¸€ç§æ”¹è¿›ï¼ŒåŒå¹³è¡¡äºŒå‰æ ‘ä¸€æ ·ï¼Œçº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ç§ç»´æŠ¤å¹³è¡¡çš„äºŒå‰æ’åºæ ‘ï¼Œä½†æ˜¯æ²¡æœ‰å¹³è¡¡äºŒå‰æ ‘é‚£æ ·ä¸¥æ ¼ï¼ˆå¹³è¡¡äºŒå‰æ ‘æ¯æ¬¡æ’å…¥æ–°ç»“ç‚¹æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å¤§é‡çš„æ—‹è½¬ï¼Œè€Œçº¢é»‘æ ‘ä¿è¯ä¸è¶…è¿‡ä¸‰æ¬¡ï¼‰ï¼Œçº¢é»‘æ ‘é™ä½äº†å¯¹äºæ—‹è½¬çš„è¦æ±‚ï¼Œå› æ­¤æ•ˆç‡æœ‰ä¸€å®šçš„æå‡åŒæ—¶å®ç°èµ·æ¥ä¹Ÿæ›´åŠ ç®€å•ã€‚ä½†æ˜¯çº¢é»‘æ ‘çš„æ•ˆç‡å´é«˜äºå¹³è¡¡äºŒå‰æ ‘ï¼Œçº¢é»‘æ ‘ä¹Ÿæ˜¯JDK1.8ä¸­ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼ çº¢é»‘æ ‘çš„ç‰¹æ€§: ï¼ˆ1ï¼‰æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯é»‘è‰²ï¼Œæˆ–è€…æ˜¯çº¢è‰²ã€‚ ï¼ˆ2ï¼‰æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚ ï¼ˆ3ï¼‰æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„ä¸¤è¾¹ä¹Ÿéœ€è¦è¡¨ç¤ºï¼ˆè™½ç„¶æ²¡æœ‰ï¼Œä½†æ˜¯nullä¹Ÿéœ€è¦è¡¨ç¤ºå‡ºæ¥ï¼‰æ˜¯é»‘è‰²ã€‚ ï¼ˆ4ï¼‰å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ã€‚ ï¼ˆ5ï¼‰ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ˜¯å¦‚ä½•æ’å…¥åˆ°çº¢é»‘æ ‘ä¸­çš„ï¼š åŸºæœ¬çš„ æ’å…¥è§„åˆ™å’Œå¹³è¡¡äºŒå‰æ ‘ä¸€æ ·ï¼Œä½†æ˜¯åœ¨æ’å…¥åï¼š å°†æ–°æ’å…¥çš„èŠ‚ç‚¹æ ‡è®°ä¸ºçº¢è‰² å¦‚æœ X æ˜¯æ ¹ç»“ç‚¹(root)ï¼Œåˆ™æ ‡è®°ä¸ºé»‘è‰² å¦‚æœ X çš„ parent ä¸æ˜¯é»‘è‰²ï¼ŒåŒæ—¶ X ä¹Ÿä¸æ˜¯ root: 3.1 å¦‚æœ X çš„ uncle (å”å”) æ˜¯çº¢è‰² 3.1.1 å°† parent å’Œ uncle æ ‡è®°ä¸ºé»‘è‰² 3.1.2 å°† grand parent (ç¥–çˆ¶) æ ‡è®°ä¸ºçº¢è‰² 3.1.3 è®© X èŠ‚ç‚¹çš„é¢œè‰²ä¸ X ç¥–çˆ¶çš„é¢œè‰²ç›¸åŒï¼Œç„¶åé‡å¤æ­¥éª¤ 2ã€3 3.2 å¦‚æœ X çš„ uncle (å”å”) æ˜¯é»‘è‰²ï¼Œæˆ‘ä»¬è¦åˆ†å››ç§æƒ…å†µå¤„ç† 3.2.1 å·¦å·¦ (P æ˜¯ G çš„å·¦å­©å­ï¼Œå¹¶ä¸” X æ˜¯ P çš„å·¦å­©å­) 3.2.2 å·¦å³ (P æ˜¯ G çš„å·¦å­©å­ï¼Œå¹¶ä¸” X æ˜¯ P çš„å³å­©å­) 3.2.3 å³å³ (P æ˜¯ G çš„å³å­©å­ï¼Œå¹¶ä¸” X æ˜¯ P çš„å³å­©å­) 3.2.4 å³å·¦ (P æ˜¯ G çš„å³å­©å­ï¼Œå¹¶ä¸” X æ˜¯ P çš„å·¦å­©å­) å…¶å®è¿™ç§æƒ…å†µä¸‹å¤„ç†å°±å’Œæˆ‘ä»¬çš„å¹³è¡¡äºŒå‰æ ‘ä¸€æ ·äº† ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:3:3","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"è®¤è¯†é›†åˆç±» é›†åˆè¡¨ç¤ºä¸€ç»„å¯¹è±¡ï¼Œç§°ä¸ºå…¶å…ƒç´ ã€‚ä¸€äº›é›†åˆå…è®¸é‡å¤çš„å…ƒç´ ï¼Œè€Œå¦ä¸€äº›åˆ™ä¸å…è®¸ã€‚ä¸€äº›é›†åˆæ˜¯æœ‰åºçš„ï¼Œè€Œå…¶ä»–åˆ™æ˜¯æ— åºçš„ã€‚ é›†åˆç±»å…¶å®å°±æ˜¯ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡ã€ç®¡ç†å’Œæ“ä½œæˆ‘ä»¬çš„æ•°æ®è€Œå­˜åœ¨çš„ï¼ŒåŒ…æ‹¬åˆ—è¡¨ã€é›†åˆã€é˜Ÿåˆ—ã€æ˜ å°„ç­‰æ•°æ®ç»“æ„ã€‚ä»è¿™ä¸€å—å¼€å§‹ï¼Œæˆ‘ä»¬ä¼šä»æºç è§’åº¦ç»™å¤§å®¶è®²è§£ï¼ˆæ•°æ®ç»“æ„å¾ˆé‡è¦ï¼ï¼‰ï¼Œä¸ä»…ä»…æ˜¯æ•™ä¼šå¤§å®¶å¦‚ä½•å»ä½¿ç”¨ã€‚ é›†åˆç±»æœ€é¡¶å±‚ä¸æ˜¯æŠ½è±¡ç±»è€Œæ˜¯æ¥å£ï¼Œå› ä¸ºæ¥å£ä»£è¡¨çš„æ˜¯æŸä¸ªåŠŸèƒ½ï¼Œè€ŒæŠ½è±¡ç±»æ˜¯å·²ç»å¿«è¦æˆå½¢çš„ç±»å‹ï¼Œä¸åŒçš„é›†åˆç±»çš„åº•å±‚å®ç°æ˜¯ä¸ç›¸åŒçš„ï¼ŒåŒæ—¶ä¸€ä¸ªé›†åˆç±»å¯èƒ½ä¼šåŒæ—¶å…·æœ‰ä¸¤ç§åŠä»¥ä¸ŠåŠŸèƒ½ï¼ˆæ—¢èƒ½åšé˜Ÿåˆ—ä¹Ÿèƒ½åšåˆ—è¡¨ï¼‰ï¼Œæ‰€ä»¥é‡‡ç”¨æ¥å£ä¼šæ›´åŠ åˆé€‚ï¼Œæ¥å£åªéœ€å®šä¹‰æ”¯æŒçš„åŠŸèƒ½å³å¯ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:4:0","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æ•°ç»„ä¸é›†åˆ ç›¸åŒä¹‹å¤„ï¼š å®ƒä»¬éƒ½æ˜¯å®¹å™¨ï¼Œéƒ½èƒ½å¤Ÿå®¹çº³ä¸€ç»„å…ƒç´ ã€‚ ä¸åŒä¹‹å¤„ï¼š æ•°ç»„çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œé›†åˆçš„å¤§å°æ˜¯å¯å˜çš„ã€‚ æ•°ç»„å¯ä»¥å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†é›†åˆåªèƒ½å­˜æ”¾å¯¹è±¡ã€‚ æ•°ç»„å­˜æ”¾çš„ç±»å‹åªèƒ½æ˜¯ä¸€ç§ï¼Œä½†é›†åˆå¯ä»¥æœ‰ä¸åŒç§ç±»çš„å…ƒç´ ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:4:1","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"é›†åˆæ ¹æ¥å£Collection æœ¬æ¥å£ä¸­å®šä¹‰äº†å…¨éƒ¨çš„é›†åˆåŸºæœ¬æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­çœ‹çœ‹ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹Listå’ŒSetä»¥åŠQueueæ¥å£ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:4:2","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"é›†åˆç±»çš„ä½¿ç”¨ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:0","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"Liståˆ—è¡¨ é¦–å…ˆä»‹ç»ArrayListï¼Œå®ƒçš„åº•å±‚æ˜¯ç”¨æ•°ç»„å®ç°çš„ï¼Œå†…éƒ¨ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªå¯æ”¹å˜å¤§å°çš„æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„çº¿æ€§è¡¨ï¼è·Ÿæˆ‘ä»¬ä¹‹å‰è‡ªå·±å†™çš„ArrayListç›¸æ¯”ï¼Œå®ƒæ›´åŠ çš„è§„èŒƒï¼ŒåŒæ—¶ç»§æ‰¿è‡ªListæ¥å£ã€‚ å…ˆçœ‹çœ‹ArrayListçš„æºç ï¼ åŸºæœ¬æ“ä½œ List\u003cString\u003e list = new ArrayList\u003c\u003e(); //é»˜è®¤é•¿åº¦çš„åˆ—è¡¨ List\u003cString\u003e listInit = new ArrayList\u003c\u003e(100); //åˆå§‹é•¿åº¦ä¸º100çš„åˆ—è¡¨ å‘åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´ ï¼š List\u003cString\u003e list = new ArrayList\u003c\u003e(); list.add(\"lbwnb\"); list.add(\"yyds\"); list.contains(\"yyds\"); //æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´  System.out.println(list); ç§»é™¤å…ƒç´ ï¼š public static void main(String[] args) { List\u003cString\u003e list = new ArrayList\u003c\u003e(); list.add(\"lbwnb\"); list.add(\"yyds\"); list.remove(0); //æŒ‰ä¸‹æ ‡ç§»é™¤å…ƒç´  list.remove(\"yyds\"); //ç§»é™¤æŒ‡å®šå…ƒç´  System.out.println(list); } ä¹Ÿæ”¯æŒæ‰¹é‡æ“ä½œï¼š public static void main(String[] args) { ArrayList\u003cString\u003e list = new ArrayList\u003c\u003e(); list.addAll(new ArrayList\u003c\u003e()); //åœ¨å°¾éƒ¨æ‰¹é‡æ·»åŠ å…ƒç´  list.removeAll(new ArrayList\u003c\u003e()); //æ‰¹é‡ç§»é™¤å…ƒç´ ï¼ˆåªæœ‰ç»™å®šé›†åˆä¸­å­˜åœ¨çš„å…ƒç´ æ‰ä¼šè¢«ç§»é™¤ï¼‰ list.retainAll(new ArrayList\u003c\u003e()); //åªä¿ç•™æŸäº›å…ƒç´  System.out.println(list); } æˆ‘ä»¬å†æ¥çœ‹LinkedListï¼Œå…¶å®æœ¬è´¨å°±æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼æˆ‘ä»¬æ¥çœ‹çœ‹æºç ã€‚ å…¶å®ä¸æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„LinkedListä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒå†…éƒ¨ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼š private static class Node\u003cE\u003e { E item; Node\u003cE\u003e next; Node\u003cE\u003e prev; Node(Node\u003cE\u003e prev, E element, Node\u003cE\u003e next) { this.item = element; this.next = next; this.prev = prev; } } å½“ç„¶ï¼Œæˆ‘ä»¬å‘ç°å®ƒè¿˜å®ç°äº†Queueæ¥å£ï¼Œæ‰€ä»¥LinkedListä¹Ÿèƒ½è¢«å½“åšä¸€ä¸ªé˜Ÿåˆ—æˆ–æ˜¯æ ˆæ¥ä½¿ç”¨ã€‚ public static void main(String[] args) { LinkedList\u003cString\u003e list = new LinkedList\u003c\u003e(); list.offer(\"A\"); //å…¥é˜Ÿ System.out.println(list.poll()); //å‡ºé˜Ÿ list.push(\"A\"); list.push(\"B\"); //è¿›æ ˆ list.push(\"C\"); System.out.println(list.pop()); System.out.println(list.pop()); //å‡ºæ ˆ System.out.println(list.pop()); } åˆ©ç”¨ä»£ç å—æ¥å¿«é€Ÿæ·»åŠ å†…å®¹ å‰é¢æˆ‘ä»¬å­¦ä¹ äº†åŒ¿åå†…éƒ¨ç±»ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ä»£ç å—ï¼Œæ¥å¿«é€Ÿç”Ÿæˆä¸€ä¸ªè‡ªå¸¦å…ƒç´ çš„List List\u003cString\u003e list = new LinkedList\u003cString\u003e(){{ //åˆå§‹åŒ–æ—¶æ·»åŠ  this.add(\"A\"); this.add(\"B\"); }}; å¦‚æœæ˜¯éœ€è¦å¿«é€Ÿç”Ÿæˆä¸€ä¸ªåªè¯»çš„Listï¼Œåé¢æˆ‘ä»¬ä¼šè®²è§£Arrayså·¥å…·ç±»ã€‚ é›†åˆçš„æ’åº List\u003cInteger\u003e list = new LinkedList\u003cInteger\u003e(){ //Java9æ‰æ”¯æŒåŒ¿åå†…éƒ¨ç±»ä½¿ç”¨é’»çŸ³è¿ç®—ç¬¦ { this.add(10); this.add(2); this.add(5); this.add(8); } }; list.sort((a, b) -\u003e { //æ’åºå·²ç»ç”±JDKå®ç°ï¼Œç°åœ¨åªéœ€è¦å¡«å…¥è‡ªå®šä¹‰è§„åˆ™ï¼Œå®ŒæˆComparatoræ¥å£å®ç° return a - b; //è¿”å›å€¼å°äº0ï¼Œè¡¨ç¤ºaåº”è¯¥åœ¨bå‰é¢ï¼Œè¿”å›å€¼å¤§äº0ï¼Œè¡¨ç¤ºbåº”è¯¥åœ¨aåé¢ï¼Œç­‰äº0åˆ™ä¸è¿›è¡Œäº¤æ¢ }); System.out.println(list); ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:1","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"è¿­ä»£å™¨ é›†åˆçš„éå† æ‰€æœ‰çš„é›†åˆç±»ï¼Œéƒ½æ”¯æŒforeachå¾ªç¯ï¼ public static void main(String[] args) { List\u003cInteger\u003e list = new LinkedList\u003cInteger\u003e(){ //Java9æ‰æ”¯æŒåŒ¿åå†…éƒ¨ç±»ä½¿ç”¨é’»çŸ³è¿ç®—ç¬¦ { this.add(10); this.add(2); this.add(5); this.add(8); } }; for (Integer integer : list) { System.out.println(integer); } } å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨JDK1.8æ–°å¢çš„forEachæ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªConsumeræ¥å£å®ç°ï¼š list.forEach(i -\u003e { System.out.println(i); }); ä»JDK1.8å¼€å§‹ï¼Œlambdaè¡¨è¾¾å¼å¼€å§‹é€æ¸æˆä¸ºä¸»æµï¼Œæˆ‘ä»¬éœ€è¦å»é€‚åº”å‡½æ•°å¼ç¼–ç¨‹çš„è¿™ç§è¯­æ³•ï¼ŒåŒ…æ‹¬æ‰¹é‡æ›¿æ¢ï¼Œä¹Ÿæ˜¯ç”¨åˆ°äº†å‡½æ•°å¼æ¥å£æ¥å®Œæˆçš„ã€‚ list.replaceAll((i) -\u003e { if(i == 2) return 3; //å°†æ‰€æœ‰çš„2æ›¿æ¢ä¸º3 else return i; //ä¸æ˜¯2å°±ä¸å˜ }); System.out.println(list); Iterableå’ŒIteratoræ¥å£ æˆ‘ä»¬ä¹‹å‰å­¦ä¹ æ•°æ®ç»“æ„æ—¶ï¼Œå·²ç»å¾—çŸ¥ï¼Œä¸åŒçš„çº¿æ€§è¡¨å®ç°ï¼Œåœ¨è·å–å…ƒç´ æ—¶çš„æ•ˆç‡ä¹Ÿä¸åŒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ç§æ›´å¥½åœ°æ–¹å¼æ¥ç»Ÿä¸€ä¸åŒæ•°æ®ç»“æ„çš„éå†ã€‚ ç”±äºArrayListå¯¹äºéšæœºè®¿é—®çš„é€Ÿåº¦æ›´å¿«ï¼Œè€ŒLinkedListå¯¹äºé¡ºåºè®¿é—®çš„é€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤åœ¨ä¸Šè¿°çš„ä¼ ç»Ÿforå¾ªç¯éå†æ“ä½œä¸­ï¼ŒArrayListçš„æ•ˆç‡æ›´èƒœä¸€ç­¹ï¼Œå› æ­¤æˆ‘ä»¬è¦ä½¿å¾—LinkedListéå†æ•ˆç‡æå‡ï¼Œå°±éœ€è¦é‡‡ç”¨é¡ºåºè®¿é—®çš„æ–¹å¼è¿›è¡Œéå†ï¼Œå¦‚æœæ²¡æœ‰è¿­ä»£å™¨å¸®åŠ©æˆ‘ä»¬ç»Ÿä¸€æ ‡å‡†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨åº”å¯¹å¤šç§é›†åˆç±»å‹çš„æ—¶å€™ï¼Œå°±éœ€è¦å¯¹åº”ç¼–å†™ä¸åŒçš„éå†ç®—æ³•ï¼Œå¾ˆæ˜¾ç„¶è¿™æ ·ä¼šé™ä½æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œè€Œè¿­ä»£å™¨çš„å‡ºç°å°±å¸®åŠ©æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿­ä»£å™¨é‡Œé¢æ–¹æ³•ï¼š public interface Iterator\u003cE\u003e { //... } æ¯ä¸ªé›†åˆç±»éƒ½æœ‰è‡ªå·±çš„è¿­ä»£å™¨ï¼Œé€šè¿‡iterator()æ–¹æ³•æ¥è·å–ï¼š Iterator\u003cInteger\u003e iterator = list.iterator(); //ç”Ÿæˆä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ while (iterator.hasNext()){ //åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´  Integer i = iterator.next(); //è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ï¼ˆè·å–ä¸€ä¸ªå°‘ä¸€ä¸ªï¼‰ System.out.println(i); } è¿­ä»£å™¨ç”Ÿæˆåï¼Œé»˜è®¤æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡è°ƒç”¨next()æ–¹æ³•ï¼Œéƒ½ä¼šå°†æŒ‡é’ˆåç§»ï¼Œå½“æŒ‡é’ˆç§»åŠ¨åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åï¼Œè°ƒç”¨hasNext()å°†ä¼šè¿”å›falseï¼Œè¿­ä»£å™¨æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œç”¨å®Œå³æ­¢ï¼Œå¦‚æœéœ€è¦å†æ¬¡ä½¿ç”¨ï¼Œéœ€è¦è°ƒç”¨iterator()æ–¹æ³•ã€‚ ListIterator\u003cInteger\u003e iterator = list.listIterator(); //Listè¿˜æœ‰ä¸€ä¸ªæ›´å¥½åœ°è¿­ä»£å™¨å®ç°ListIterator ListIteratoræ˜¯Listä¸­ç‹¬æœ‰çš„è¿­ä»£å™¨ï¼Œåœ¨åŸæœ‰è¿­ä»£å™¨åŸºç¡€ä¸Šæ–°å¢äº†ä¸€äº›é¢å¤–çš„æ“ä½œã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:2","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"Seté›†åˆ æˆ‘ä»¬ä¹‹å‰å·²ç»çœ‹è¿‡Setæ¥å£çš„å®šä¹‰äº†ï¼Œæˆ‘ä»¬å‘ç°æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•éƒ½æ˜¯Collectionä¸­ç›´æ¥ç»§æ‰¿çš„ï¼Œå› æ­¤ï¼ŒSetæ”¯æŒçš„åŠŸèƒ½å…¶å®ä¹Ÿå°±å’ŒCollectionä¸­å®šä¹‰çš„å·®ä¸å¤šï¼Œåªä¸è¿‡ä½¿ç”¨æ–¹æ³•ä¸Šç¨æœ‰ä¸åŒã€‚ Seté›†åˆç‰¹ç‚¹ï¼š ä¸å…è®¸å‡ºç°é‡å¤å…ƒç´  ä¸æ”¯æŒéšæœºè®¿é—®ï¼ˆä¸å…è®¸é€šè¿‡ä¸‹æ ‡è®¿é—®ï¼‰ é¦–å…ˆè®¤è¯†ä¸€ä¸‹HashSetï¼Œå®ƒçš„åº•å±‚å°±æ˜¯é‡‡ç”¨å“ˆå¸Œè¡¨å®ç°çš„ï¼ˆæˆ‘ä»¬åœ¨è¿™é‡Œå…ˆä¸å»æ¢è®¨å®ç°åŸç†ï¼Œå› ä¸ºåº•å±‚å®è´¨ä¸Šç»´æŠ¤çš„æ˜¯ä¸€ä¸ªHashMapï¼Œæˆ‘ä»¬å­¦ä¹ äº†Mapä¹‹åå†æ¥è®¨è®ºï¼‰ public static void main(String[] args) { HashSet\u003cInteger\u003e set = new HashSet\u003c\u003e(); set.add(120); //æ”¯æŒæ’å…¥å…ƒç´ ï¼Œä½†æ˜¯ä¸æ”¯æŒæŒ‡å®šä½ç½®æ’å…¥ set.add(13); set.add(11); for (Integer integer : set) { System.out.println(integer); } } è¿è¡Œä¸Šé¢ä»£ç å‘ç°ï¼Œæœ€åSeté›†åˆä¸­å­˜åœ¨çš„å…ƒç´ é¡ºåºï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬çš„æ’å…¥é¡ºåºï¼Œè¿™æ˜¯å› ä¸ºHashSetåº•å±‚æ˜¯é‡‡ç”¨å“ˆå¸Œè¡¨æ¥å®ç°çš„ï¼Œå®é™…çš„å­˜æ”¾é¡ºåºæ˜¯ç”±Hashç®—æ³•å†³å®šçš„ã€‚ é‚£ä¹ˆæˆ‘ä»¬å¸Œæœ›æ•°æ®æŒ‰ç…§æˆ‘ä»¬æ’å…¥çš„é¡ºåºè¿›è¡Œä¿å­˜è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨LinkedHashSetï¼š public static void main(String[] args) { LinkedHashSet\u003cInteger\u003e set = new LinkedHashSet\u003c\u003e(); //ä¼šè‡ªåŠ¨ä¿å­˜æˆ‘ä»¬çš„æ’å…¥é¡ºåº set.add(120); set.add(13); set.add(11); for (Integer integer : set) { System.out.println(integer); } } LinkedHashSetåº•å±‚ç»´æŠ¤çš„ä¸å†æ˜¯ä¸€ä¸ªHashMapï¼Œè€Œæ˜¯LinkedHashMapï¼Œå®ƒèƒ½å¤Ÿåœ¨æ’å…¥æ•°æ®æ—¶åˆ©ç”¨é“¾è¡¨è‡ªåŠ¨ç»´æŠ¤é¡ºåºï¼Œå› æ­¤è¿™æ ·å°±èƒ½å¤Ÿä¿è¯æˆ‘ä»¬æ’å…¥é¡ºåºå’Œæœ€åçš„è¿­ä»£é¡ºåºä¸€è‡´äº†ã€‚ è¿˜æœ‰ä¸€ç§Setå«åšTreeSetï¼Œå®ƒä¼šåœ¨å…ƒç´ æ’å…¥æ—¶è¿›è¡Œæ’åºï¼š public static void main(String[] args) { TreeSet\u003cInteger\u003e set = new TreeSet\u003c\u003e(); set.add(1); set.add(3); set.add(2); System.out.println(set); } å¯ä»¥çœ‹åˆ°æœ€åå¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯æˆ‘ä»¬æ’å…¥é¡ºåºï¼Œè€Œæ˜¯æŒ‰ç…§æ•°å­—çš„å¤§å°è¿›è¡Œæ’åˆ—ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼š public static void main(String[] args) { TreeSet\u003cInteger\u003e set = new TreeSet\u003c\u003e((a, b) -\u003e b - a); //åœ¨åˆ›å»ºå¯¹è±¡æ—¶æŒ‡å®šè§„åˆ™å³å¯ set.add(1); set.add(3); set.add(2); System.out.println(set); } ç°åœ¨çš„ç»“æœå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ’åºè§„åˆ™äº†ã€‚ è™½ç„¶Seté›†åˆåªæ˜¯ç²—ç•¥çš„è¿›è¡Œäº†è®²è§£ï¼Œä½†æ˜¯å­¦ä¹ Mapä¹‹åï¼Œæˆ‘ä»¬è¿˜ä¼šå›æ¥çœ‹æˆ‘ä»¬Setçš„åº•å±‚å®ç°ï¼Œæ‰€ä»¥è¯´æœ€é‡è¦çš„è¿˜æ˜¯Mapã€‚æœ¬èŠ‚åªéœ€è¦è®°ä½Setçš„æ€§è´¨ã€ä½¿ç”¨å³å¯ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:3","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"Mapæ˜ å°„ ä»€ä¹ˆæ˜¯æ˜ å°„ æˆ‘ä»¬åœ¨é«˜ä¸­é˜¶æ®µå…¶å®å·²ç»å­¦ä¹ è¿‡æ˜ å°„äº†ï¼Œæ˜ å°„æŒ‡ä¸¤ä¸ªå…ƒç´ çš„ä¹‹é—´ç›¸äº’â€œå¯¹åº”â€çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„å…ƒç´ ä¹‹é—´æ˜¯ä¸¤ä¸¤å¯¹åº”çš„ï¼Œæ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ã€‚ Mapæ¥å£ Mapå°±æ˜¯ä¸ºäº†å®ç°è¿™ç§æ•°æ®ç»“æ„è€Œå­˜åœ¨çš„ï¼Œæˆ‘ä»¬é€šè¿‡ä¿å­˜é”®å€¼å¯¹çš„å½¢å¼æ¥å­˜å‚¨æ˜ å°„å…³ç³»ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Mapæ¥å£ä¸­å®šä¹‰äº†å“ªäº›æ“ä½œã€‚ HashMapå’ŒLinkedHashMap HashMapçš„å®ç°è¿‡ç¨‹ï¼Œç›¸æ¯”Listï¼Œå°±éå¸¸åœ°å¤æ‚äº†ï¼Œå®ƒå¹¶ä¸æ˜¯ç®€ç®€å•å•çš„è¡¨ç»“æ„ï¼Œè€Œæ˜¯åˆ©ç”¨å“ˆå¸Œè¡¨å­˜æ”¾æ˜ å°„å…³ç³»ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹HashMapæ˜¯å¦‚ä½•å®ç°çš„ï¼Œé¦–å…ˆå›é¡¾æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„å“ˆå¸Œè¡¨ï¼Œå®ƒé•¿è¿™æ ·ï¼š å“ˆå¸Œè¡¨çš„æœ¬è´¨å…¶å®å°±æ˜¯ä¸€ä¸ªç”¨äºå­˜æ”¾åç»­èŠ‚ç‚¹çš„å¤´ç»“ç‚¹çš„æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¤´ç»“ç‚¹ï¼ˆä¹Ÿå¯ä»¥è¯´å°±æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼‰ï¼Œå½“è¦æ–°æ’å…¥ä¸€ä¸ªæ•°æ®æ—¶ï¼Œä¼šå…ˆè®¡ç®—è¯¥æ•°æ®çš„å“ˆå¸Œå€¼ï¼Œæ‰¾åˆ°æ•°ç»„ä¸‹æ ‡ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œæ·»åŠ åˆ°å¯¹åº”çš„é“¾è¡¨åé¢ã€‚ è€ŒHashMapå°±æ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æºç ä¸­åŒæ ·å®šä¹‰äº†è¿™æ ·çš„ä¸€ä¸ªç»“æ„ï¼š /** * The table, initialized on first use, and resized as * necessary. When allocated, length is always a power of two. * (We also tolerate length zero in some operations to allow * bootstrapping mechanics that are currently not needed.) */ transient Node\u003cK,V\u003e[] table; è¿™ä¸ªè¡¨ä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶åˆå§‹åŒ–ï¼ŒåŒæ—¶åœ¨å¿…è¦æ—¶è¿›è¡Œæ‰©å®¹ï¼Œå¹¶ä¸”å®ƒçš„å¤§å°æ°¸è¿œæ˜¯2çš„å€æ•°ï¼ /** * The default initial capacity - MUST be a power of two. */ static final int DEFAULT_INITIAL_CAPACITY = 1 \u003c\u003c 4; // aka 16 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»˜è®¤çš„å¤§å°ä¸º2çš„4æ¬¡æ–¹ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ˜¯2çš„å€æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹ä¸€æ¬¡å¢é•¿ä¹‹åï¼Œå¤§å°ä¼šå˜æˆ2çš„5æ¬¡æ–¹ã€‚ æˆ‘ä»¬ç°åœ¨éœ€è¦æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬è¡¨ä¸­çš„æ•°æ®ä¸æ–­å¢åŠ ä¹‹åï¼Œé“¾è¡¨ä¼šå˜å¾—è¶Šæ¥è¶Šé•¿ï¼Œè¿™æ ·ä¼šä¸¥é‡å¯¼è‡´æŸ¥è¯¢é€Ÿåº¦å˜æ…¢ï¼Œé¦–å…ˆæƒ³åˆ°åŠæ³•å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ•°ç»„çš„é•¿åº¦è¿›è¡Œæ‰©å®¹ï¼Œæ¥å­˜æ”¾æ›´å¤šçš„é“¾è¡¨ï¼Œé‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¿›è¡Œæ‰©å®¹å‘¢ï¼Ÿ /** * The load factor for the hash table. * * @serial */ final float loadFactor; æˆ‘ä»¬è¿˜å‘ç°HashMapæºç ä¸­æœ‰è¿™æ ·ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå°±æ˜¯è´Ÿè½½å› å­ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¹²å˜›çš„å‘¢ï¼Ÿ è´Ÿè½½å› å­å…¶å®å°±æ˜¯ç”¨æ¥è¡¡é‡å½“å‰æƒ…å†µæ˜¯å¦éœ€è¦è¿›è¡Œæ‰©å®¹çš„æ ‡å‡†ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»˜è®¤çš„è´Ÿè½½å› å­æ˜¯0.75 /** * The load factor used when none specified in constructor. */ static final float DEFAULT_LOAD_FACTOR = 0.75f; é‚£ä¹ˆè´Ÿè½½å› å­æ˜¯æ€ä¹ˆæ§åˆ¶æ‰©å®¹çš„å‘¢ï¼Ÿ0.75çš„æ„æ€æ˜¯ï¼Œåœ¨æ’å…¥æ–°çš„ç»“ç‚¹åï¼Œå¦‚æœå½“å‰æ•°ç»„çš„å ç”¨ç‡è¾¾åˆ°75%åˆ™è¿›è¡Œæ‰©å®¹ã€‚åœ¨æ‰©å®¹æ—¶ï¼Œä¼šå°†æ‰€æœ‰çš„æ•°æ®ï¼Œé‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ä¸‹æ ‡ï¼Œç»„æˆæ–°çš„å“ˆå¸Œè¡¨ã€‚ ä½†æ˜¯è¿™æ ·ä¾ç„¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé“¾è¡¨è¿‡é•¿çš„æƒ…å†µè¿˜æ˜¯æœ‰å¯èƒ½å‘ç”Ÿï¼Œæ‰€ä»¥ï¼Œä¸ºäº†ä»æ ¹æºä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨JDK1.8æ—¶ï¼Œå¼•å…¥äº†çº¢é»‘æ ‘è¿™ä¸ªæ•°æ®ç»“æ„ã€‚ å½“é“¾è¡¨çš„é•¿åº¦è¾¾åˆ°8æ—¶ï¼Œä¼šè‡ªåŠ¨å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè¿™æ ·èƒ½ä½¿å¾—åŸæœ‰çš„æŸ¥è¯¢æ•ˆç‡å¤§å¹…åº¦é™ä½ï¼å½“ä½¿ç”¨çº¢é»‘æ ‘ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨äºŒåˆ†æœç´¢çš„æ€æƒ³ï¼Œå¿«é€Ÿåœ°å»å¯»æ‰¾æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œè€Œä¸æ˜¯åƒé“¾è¡¨ä¸€æ ·æŒ¨ä¸ªå»çœ‹ã€‚ /** * Entry for Tree bins. Extends LinkedHashMap.Entry (which in turn * extends Node) so can be used as extension of either regular or * linked node. */ static final class TreeNode\u003cK,V\u003e extends LinkedHashMap.Entry\u003cK,V\u003e { é™¤äº†Nodeä»¥å¤–ï¼ŒHashMapè¿˜æœ‰TreeNodeï¼Œå¾ˆæ˜æ˜¾è¿™å°±æ˜¯ä¸ºäº†å®ç°çº¢é»‘æ ‘è€Œè®¾è®¡çš„å†…éƒ¨ç±»ã€‚ä¸è¿‡æˆ‘ä»¬å‘ç°ï¼ŒTreeNodeå¹¶ä¸æ˜¯ç›´æ¥ç»§æ‰¿Nodeï¼Œè€Œæ˜¯ä½¿ç”¨äº†LinkedHashMapä¸­çš„Entryå®ç°ï¼Œå®ƒä¿å­˜äº†å‰åèŠ‚ç‚¹çš„é¡ºåºï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ’å…¥é¡ºåºï¼‰ã€‚ /** * HashMap.Node subclass for normal LinkedHashMap entries. */ static class Entry\u003cK,V\u003e extends HashMap.Node\u003cK,V\u003e { Entry\u003cK,V\u003e before, after; Entry(int hash, K key, V value, Node\u003cK,V\u003e next) { super(hash, key, value, next); } } LinkedHashMapæ˜¯ç›´æ¥ç»§æ‰¿è‡ªHashMapï¼Œå…·æœ‰HashMapçš„å…¨éƒ¨æ€§è´¨ï¼ŒåŒæ—¶å¾—ç›Šäºæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¿å­˜äº†æ’å…¥é¡ºåºï¼Œè¿™æ ·æˆ‘ä»¬åœ¨éå†LinkedHashMapæ—¶ï¼Œé¡ºåºå°±åŒæˆ‘ä»¬çš„æ’å…¥é¡ºåºä¸€è‡´ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è®¿é—®é¡ºåºï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºåˆšè®¿é—®è¿‡çš„å…ƒç´ ï¼Œä¼šè¢«æ’åˆ°æœ€åä¸€ä½ã€‚ public static void main(String[] args) { LinkedHashMap\u003cInteger, String\u003e map = new LinkedHashMap\u003c\u003e(16, 0.75f, true); //ä»¥è®¿é—®é¡ºåº map.put(1, \"A\"); map.put(2, \"B\"); map.put(3, \"C\"); map.get(2); System.out.println(map); } è§‚å¯Ÿç»“æœï¼Œæˆ‘ä»¬å‘ç°ï¼Œåˆšè®¿é—®çš„ç»“æœè¢«æ’åˆ°äº†æœ€åä¸€ä½ã€‚ TreeMap TreeMapå…¶å®å°±æ˜¯è‡ªåŠ¨ç»´æŠ¤é¡ºåºçš„ä¸€ç§Mapï¼Œå°±å’Œæˆ‘ä»¬å‰é¢æåˆ°çš„TreeSetä¸€æ ·ï¼š /** * The comparator used to maintain order in this tree map, or * null if it uses the natural ordering of its keys. * * @serial */ private final Comparator\u003c? super K\u003e comparator; private transient Entry\u003cK,V\u003e root; /** * Node in the Tree. Doubles as a means to pass key-value pairs back to * user (see Map.Entry). */ static final class Entry\u003cK,V\u003e implements Map.Entry\u003cK,V\u003e { æˆ‘ä»¬å‘ç°å®ƒçš„å†…éƒ¨ç›´æ¥ç»´æŠ¤äº†ä¸€ä¸ªçº¢é»‘æ ‘ï¼Œå°±åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œå°±æ˜¯ä¸€ä¸ªTreeï¼Œå› ä¸ºå®ƒé»˜è®¤å°±æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥è¯´ç›´æ¥é‡‡ç”¨çº¢é»‘æ ‘ä¼šæ›´å¥½ã€‚æˆ‘ä»¬åœ¨åˆ›å»ºæ—¶ï¼Œç›´æ¥ç»™äºˆä¸€ä¸ªæ¯”è¾ƒè§„åˆ™å³å¯ã€‚ Mapçš„ä½¿ç”¨ æˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹Mapçš„ä¸€äº›åŸºæœ¬æ“ä½œï¼š public static void main(String[] args) { Map\u003cInteger, String\u003e map = new HashMap\u003c\u003e(); map.put(1, \"A\"); map.put(2, \"B\"); map.put(3, \"C\"); System.out.println(map.get(1)); //è·å–Keyä¸º1çš„å€¼ System.out.println(map.getOrDefault(0, \"K\")); //ä¸å­˜åœ¨å°±è¿”å›K map.remove(1); //ç§»é™¤è¿™ä¸ªKeyçš„é”®å€¼å¯¹ } ç”±äºMapå¹¶æœªå®ç°è¿­ä»£å™¨æ¥å£ï¼Œå› æ­¤ä¸æ”¯æŒforeachï¼Œä½†æ˜¯JDK1.8ä¸ºæˆ‘ä»¬æä¾›äº†forEachæ–¹æ³•ä½¿ç”¨ï¼š public static void main(String[] args) { Map\u003cInteger, String\u003e map = new HashMap\u003c\u003e(); map.put(1, \"A\"); map.put(2, \"B\"); map.put(3, \"C\"); map.forEach((k, v) -\u003e System.out.println(k+\"-\u003e\"+v)); for (Map.Entry\u003cInteger, String\u003e entry : map.entrySet()) { //ä¹Ÿå¯ä»¥è·å–æ‰€æœ‰çš„Entryæ¥foreach int key = entry.getKey(); String value = entry.getValue(); System.out.println(key+\" -\u003e \"+value); } } æˆ‘ä»¬ä¹Ÿå¯ä»¥å•ç‹¬è·å–æ‰€æœ‰çš„å€¼æˆ–è€…æ˜¯é”®ï¼š public static void main(String[] args) { Map\u003cInteger, String\u003e map = new HashMap\u003c\u003e(); map.put(1, \"A\"); map.put(2, \"B\"); map.put(3, \"C\"); System.out.println(map.keySet()); //ç›´æ¥è·å–æ‰€æœ‰çš„key System.out.println(map.values()); //ç›´æ¥è·å–æ‰€æœ‰çš„å€¼ } å†è°ˆSetåŸç† é€šè¿‡è§‚å¯ŸHash","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:4","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"é›†åˆçš„åµŒå¥— æ—¢ç„¶é›†åˆç±»å‹ä¸­çš„å…ƒç´ ç±»å‹æ˜¯æ³›å‹ï¼Œé‚£ä¹ˆèƒ½å¦åµŒå¥—å­˜å‚¨å‘¢ï¼Ÿ public static void main(String[] args) { Map\u003cString, List\u003cInteger\u003e\u003e map = new HashMap\u003c\u003e(); //æ¯ä¸€ä¸ªæ˜ å°„éƒ½æ˜¯ å­—ç¬¦ä¸²\u003c-\u003eåˆ—è¡¨ map.put(\"å¡å¸ƒå¥‡è¯ºä»ŠçŠ¹åœ¨\", new LinkedList\u003c\u003e()); map.put(\"ä¸è§å½“å¹´å€’èŒ¶äºº\", new LinkedList\u003c\u003e()); System.out.println(map.keySet()); System.out.println(map.values()); } é€šè¿‡Keyè·å–åˆ°å¯¹åº”çš„å€¼åï¼Œå°±æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼š map.get(\"å¡å¸ƒå¥‡è¯ºä»ŠçŠ¹åœ¨\").add(10); System.out.println(map.get(\"å¡å¸ƒå¥‡è¯ºä»ŠçŠ¹åœ¨\").get(0)); è®©å¥—å¨ƒç»§ç»­ä¸‹å»ï¼š public static void main(String[] args) { Map\u003cInteger, Map\u003cInteger, Map\u003cInteger, String\u003e\u003e\u003e map = new HashMap\u003c\u003e(); } ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨Listæ¥å¥—å¨ƒåˆ«çš„ï¼š public static void main(String[] args) { List\u003cMap\u003cString, Set\u003cString\u003e\u003e\u003e list = new LinkedList\u003c\u003e(); } ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:5","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"æµStreamå’ŒOptionalçš„ä½¿ç”¨ Java 8 APIæ·»åŠ äº†ä¸€ä¸ªæ–°çš„æŠ½è±¡ç§°ä¸ºæµStreamï¼Œå¯ä»¥è®©ä½ ä»¥ä¸€ç§å£°æ˜çš„æ–¹å¼å¤„ç†æ•°æ®ã€‚Stream ä½¿ç”¨ä¸€ç§ç±»ä¼¼ç”¨ SQL è¯­å¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„ç›´è§‚æ–¹å¼æ¥æä¾›ä¸€ç§å¯¹ Java é›†åˆè¿ç®—å’Œè¡¨è¾¾çš„é«˜é˜¶æŠ½è±¡ã€‚Stream APIå¯ä»¥æå¤§æé«˜Javaç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚è¿™ç§é£æ ¼å°†è¦å¤„ç†çš„å…ƒç´ é›†åˆçœ‹ä½œä¸€ç§æµï¼Œ æµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œ å¹¶ä¸”å¯ä»¥åœ¨ç®¡é“çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œå¤„ç†ï¼Œ æ¯”å¦‚ç­›é€‰ï¼Œ æ’åºï¼Œèšåˆç­‰ã€‚å…ƒç´ æµåœ¨ç®¡é“ä¸­ç»è¿‡ä¸­é—´æ“ä½œï¼ˆintermediate operationï¼‰çš„å¤„ç†ï¼Œæœ€åç”±æœ€ç»ˆæ“ä½œ(terminal operation)å¾—åˆ°å‰é¢å¤„ç†çš„ç»“æœã€‚ å®ƒçœ‹èµ·æ¥å°±åƒä¸€ä¸ªå·¥å‚çš„æµæ°´çº¿ä¸€æ ·ï¼æˆ‘ä»¬å°±å¯ä»¥æŠŠä¸€ä¸ªStreamå½“åšæµæ°´çº¿å¤„ç†ï¼š public static void main(String[] args) { List\u003cString\u003e list = new ArrayList\u003c\u003e(); list.add(\"A\"); list.add(\"B\"); list.add(\"C\"); //ç§»é™¤ä¸ºBçš„å…ƒç´  Iterator\u003cString\u003e iterator = list.iterator(); while (iterator.hasNext()){ if(iterator.next().equals(\"B\")) iterator.remove(); } //Streamæ“ä½œ list = list //é“¾å¼è°ƒç”¨ .stream() //è·å–æµ .filter(e -\u003e !e.equals(\"B\")) //åªå…è®¸æ‰€æœ‰ä¸æ˜¯Bçš„å…ƒç´ é€šè¿‡æµæ°´çº¿ .collect(Collectors.toList()); //å°†æµæ°´çº¿ä¸­çš„å…ƒç´ é‡æ–°æ”¶é›†èµ·æ¥ï¼Œå˜å›List System.out.println(list); } å¯èƒ½ä»ä¸Šè¿°ä¾‹å­ä¸­è¿˜ä¸èƒ½æ„Ÿå—åˆ°æµå¤„ç†å¸¦æ¥çš„ä¾¿æ·ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢è¿™ä¸ªä¾‹å­æ¥æ„Ÿå—ä¸€ä¸‹ï¼š public static void main(String[] args) { List\u003cInteger\u003e list = new ArrayList\u003c\u003e(); list.add(1); list.add(2); list.add(3); list.add(3); list = list .stream() .distinct() //å»é‡ï¼ˆä½¿ç”¨equalsåˆ¤æ–­ï¼‰ .sorted((a, b) -\u003e b - a) //è¿›è¡Œå€’åºæ’åˆ— .map(e -\u003e e+1) //æ¯ä¸ªå…ƒç´ éƒ½è¦æ‰§è¡Œ+1æ“ä½œ .limit(2) //åªæ”¾è¡Œå‰ä¸¤ä¸ªå…ƒç´  .collect(Collectors.toList()); System.out.println(list); } å½“é‡åˆ°å¤§é‡çš„å¤æ‚æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Streamæ¥å¿«é€Ÿç¼–å†™ä»£ç ï¼Œè¿™æ ·ä¸ä»…ä»£ç é‡å¤§å¹…åº¦å‡å°‘ï¼Œè€Œä¸”é€»è¾‘ä¹Ÿæ›´åŠ æ¸…æ™°æ˜äº†ï¼ˆå¦‚æœä½ å­¦ä¹ è¿‡SQLçš„è¯ï¼Œä½ ä¼šå‘ç°å®ƒæ›´åƒä¸€ä¸ªSqlè¯­å¥ï¼‰ æ³¨æ„ï¼šä¸èƒ½è®¤ä¸ºæ¯ä¸€æ­¥æ˜¯ç›´æ¥ä¾æ¬¡æ‰§è¡Œçš„ï¼ List\u003cInteger\u003e list = new ArrayList\u003c\u003e(); list.add(1); list.add(2); list.add(3); list.add(3); list = list .stream() .distinct() //æ–­ç‚¹ .sorted((a, b) -\u003e b - a) .map(e -\u003e { System.out.println(\"\u003e\u003e\u003e \"+e); //æ–­ç‚¹ return e+1; }) .limit(2) //æ–­ç‚¹ .collect(Collectors.toList()); //å®é™…ä¸Šï¼Œstreamä¼šå…ˆè®°å½•æ¯ä¸€æ­¥æ“ä½œï¼Œè€Œä¸æ˜¯ç›´æ¥å¼€å§‹æ‰§è¡Œå†…å®¹ï¼Œå½“æ•´ä¸ªé“¾å¼è°ƒç”¨å®Œæˆåï¼Œæ‰ä¼šä¾æ¬¡è¿›è¡Œï¼ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨ä¸€å †éšæœºæ•°æ¥è¿›è¡Œæ›´å¤šæµæ“ä½œçš„æ¼”ç¤ºï¼š public static void main(String[] args) { Random random = new Random(); //Randomæ˜¯ä¸€ä¸ªéšæœºæ•°å·¥å…·ç±» random .ints(-100, 100) //ç”Ÿæˆ-100~100ä¹‹é—´çš„ï¼Œéšæœºintå‹æ•°å­—ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªIntStreamï¼‰ .limit(10) //åªè·å–å‰10ä¸ªæ•°å­—ï¼ˆè¿™æ˜¯ä¸€ä¸ªæ— é™åˆ¶çš„æµï¼Œå¦‚æœä¸åŠ ä»¥é™åˆ¶ï¼Œå°†ä¼šæ— é™è¿›è¡Œä¸‹å»ï¼ï¼‰ .filter(i -\u003e i \u003c 0) //åªä¿ç•™å°äº0çš„æ•°å­— .sorted() //é»˜è®¤ä»å°åˆ°å¤§æ’åº .forEach(System.out::println); //ä¾æ¬¡æ‰“å° } æˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ä¸ªç»Ÿè®¡å®ä¾‹æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè¿›è¡Œç»Ÿè®¡ï¼š public static void main(String[] args) { Random random = new Random(); //Randomæ˜¯ä¸€ä¸ªéšæœºæ•°å·¥å…·ç±» IntSummaryStatistics statistics = random .ints(0, 100) .limit(100) .summaryStatistics(); //è·å–è¯­æ³•ç»Ÿè®¡å®ä¾‹ System.out.println(statistics.getMax()); //å¿«é€Ÿè·å–æœ€å¤§å€¼ System.out.println(statistics.getCount()); //è·å–æ•°é‡ System.out.println(statistics.getAverage()); //è·å–å¹³å‡å€¼ } æ™®é€šçš„Liståªéœ€è¦ä¸€ä¸ªæ–¹æ³•å°±å¯ä»¥ç›´æ¥è½¬æ¢åˆ°æ–¹ä¾¿å¥½ç”¨çš„IntStreamäº†ï¼š public static void main(String[] args) { List\u003cInteger\u003e list = new ArrayList\u003c\u003e(); list.add(1); list.add(1); list.add(2); list.add(3); list.add(4); list.stream() .mapToInt(i -\u003e i) //å°†æ¯ä¸€ä¸ªå…ƒç´ æ˜ å°„ä¸ºIntegerç±»å‹ï¼ˆè¿™é‡Œå› ä¸ºæœ¬æ¥å°±æ˜¯Integerï¼‰ .summaryStatistics(); } æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡flatæ¥å¯¹æ•´ä¸ªæµè¿›è¡Œè¿›ä¸€æ­¥ç»†åˆ†ï¼š public static void main(String[] args) { List\u003cString\u003e list = new ArrayList\u003c\u003e(); list.add(\"A,B\"); list.add(\"C,D\"); list.add(\"E,F\"); //æˆ‘ä»¬æƒ³è®©æ¯ä¸€ä¸ªå…ƒç´ é€šè¿‡,è¿›è¡Œåˆ†å‰²ï¼Œå˜æˆç‹¬ç«‹çš„6ä¸ªå…ƒç´  list = list .stream() //ç”Ÿæˆæµ .flatMap(e -\u003e Arrays.stream(e.split(\",\"))) //åˆ†å‰²å­—ç¬¦ä¸²å¹¶ç”Ÿæˆæ–°çš„æµ .collect(Collectors.toList()); //æ±‡æˆæ–°çš„List System.out.println(list); //å¾—åˆ°ç»“æœ } æˆ‘ä»¬ä¹Ÿå¯ä»¥åªé€šè¿‡Streamæ¥å®Œæˆæ‰€æœ‰æ•°å­—çš„å’Œï¼Œä½¿ç”¨reduceæ–¹æ³•ï¼š public static void main(String[] args) { List\u003cInteger\u003e list = new ArrayList\u003c\u003e(); list.add(1); list.add(2); list.add(3); int sum = list .stream() .reduce((a, b) -\u003e a + b) //è®¡ç®—è§„åˆ™ä¸ºï¼šaæ˜¯ä¸Šä¸€æ¬¡è®¡ç®—çš„å€¼ï¼Œbæ˜¯å½“å‰è¦è®¡ç®—çš„å‚æ•°ï¼Œè¿™é‡Œæ˜¯æ±‚å’Œ .get(); //æˆ‘ä»¬å‘ç°å¾—åˆ°çš„æ˜¯ä¸€ä¸ªOptionalç±»å®ä¾‹ï¼Œä¸æ˜¯æˆ‘ä»¬è¿”å›çš„ç±»å‹ï¼Œé€šè¿‡getæ–¹æ³•è¿”å›å¾—åˆ°çš„å€¼ System.out.println(sum); } é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒStreamä¸å–œæ¬¢ç›´æ¥ç»™æˆ‘ä»¬è¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œæ˜¯é€šè¿‡Optinalçš„æ–¹å¼ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯Optionalå‘¢ï¼Ÿ Optionalç±»æ˜¯Java8ä¸ºäº†è§£å†³nullå€¼åˆ¤æ–­é—®é¢˜ï¼Œä½¿ç”¨Optionalç±»å¯ä»¥é¿å…æ˜¾å¼çš„nullå€¼åˆ¤æ–­ï¼ˆnullçš„é˜²å¾¡æ€§æ£€æŸ¥ï¼‰ï¼Œé¿å…nullå¯¼è‡´çš„NPEï¼ˆNullPointerExceptionï¼‰ã€‚æ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å¯¹æ§åˆ¶çš„ä¸€ä¸ªåˆ¤æ–­ï¼Œä¸ºäº†é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ public static void main(String[] args) { String str = null; if(str != null){ //å½“strä¸ä¸ºç©ºæ—¶æ·»åŠ å…ƒç´ åˆ°Listä¸­ list.add(str); } } æœ‰äº†Optionalä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·å†™ï¼š public static void main(String[] args) { String str = null; Optional\u003cString\u003e optional = Optional.ofNullable(str); //è½¬æ¢ä¸ºOptional optional.ifPresent(System.out::println); //å½“å­˜åœ¨æ—¶å†æ‰§è¡Œæ–¹æ³• } å°±ç±»ä¼¼äºKotlinä¸­çš„ï¼š var str : String? = null str?.upperCase() æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥getæˆ–æ˜¯å½“å€¼ä¸ºnullæ—¶ï¼Œè·å–å¤‡é€‰å€¼ï¼š public static void main(String[] args) { String str = null; Optional optional = Optional.ofNullable(str); //è½¬æ¢ä¸ºOptionalï¼ˆå¯ç©ºï¼‰ System.out.println(optional.orElse(\"lbwnb\")); // S","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:6","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"Arrayså’ŒCollectionsçš„ä½¿ç”¨ Arraysæ˜¯ä¸€ä¸ªç”¨äºæ“ä½œæ•°ç»„çš„å·¥å…·ç±»ï¼Œå®ƒç»™æˆ‘ä»¬æä¾›äº†å¤§é‡çš„å·¥å…·æ–¹æ³•ï¼š /** * This class contains various methods for manipulating arrays (such as * sorting and searching). This class also contains a static factory * that allows arrays to be viewed as lists. \u003c- æ³¨æ„ï¼Œè¿™å¥è¯å¾ˆå…³é”® * * @author Josh Bloch * @author Neal Gafter * @author John Rose * @since 1.2 */ public class Arrays { ç”±äºæ“ä½œæ•°ç»„å¹¶ä¸åƒé›†åˆé‚£æ ·æ–¹ä¾¿ï¼Œå› æ­¤JDKæä¾›äº†Arraysç±»æ¥å¢å¼ºå¯¹æ•°ç»„æ“ä½œï¼Œæ¯”å¦‚ï¼š public static void main(String[] args) { int[] array = {1, 5, 2, 4, 7, 3, 6}; Arrays.sort(array); //ç›´æ¥è¿›è¡Œæ’åºï¼ˆåº•å±‚åŸç†ï¼šè¿›è¡Œåˆ¤æ–­ï¼Œå…ƒç´ å°‘ä½¿ç”¨æ’å…¥æ’åºï¼Œå¤§é‡å…ƒç´ ä½¿ç”¨åŒè½´å¿«é€Ÿ/å½’å¹¶æ’åºï¼‰ System.out.println(array); //ç”±äºint[]æ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹ï¼Œè€Œæ•°ç»„é»˜è®¤æ˜¯æ²¡æœ‰é‡å†™toString()æ–¹æ³•ï¼Œå› æ­¤æ— æ³•æ‰“å°åˆ°æƒ³è¦çš„ç»“æœ System.out.println(Arrays.toString(array)); //æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Arrays.toString()æ¥åƒé›†åˆä¸€æ ·ç›´æ¥æ‰“å°æ¯ä¸€ä¸ªå…ƒç´ å‡ºæ¥ } public static void main(String[] args) { int[] array = {1, 5, 2, 4, 7, 3, 6}; Arrays.sort(array); System.out.println(\"æ’åºåçš„ç»“æœï¼š\"+Arrays.toString(array)); System.out.println(\"ç›®æ ‡å…ƒç´ 3ä½ç½®ä¸ºï¼š\"+Arrays.binarySearch(array, 3)); //äºŒåˆ†æœç´ ï¼Œå¿…é¡»æ˜¯å·²ç»æ’åºå¥½çš„æ•°ç»„ï¼ } public static void main(String[] args) { int[] array = {1, 5, 2, 4, 7, 3, 6}; Arrays .stream(array) //å°†æ•°ç»„è½¬æ¢ä¸ºæµè¿›è¡Œæ“ä½œ .sorted() .forEach(System.out::println); } public static void main(String[] args) { int[] array = {1, 5, 2, 4, 7, 3, 6}; int[] array2 = Arrays.copyOf(array, array.length); //å¤åˆ¶ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ•°ç»„ System.out.println(Arrays.toString(array2)); System.out.println(Arrays.equals(array, array2)); //æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦å€¼ç›¸åŒ Arrays.fill(array, 0); //å°†æ•°ç»„çš„æ‰€æœ‰å€¼å…¨éƒ¨å¡«å……ä¸ºæŒ‡å®šå€¼ System.out.println(Arrays.toString(array)); Arrays.setAll(array2, i -\u003e array2[i] + 2); //ä¾æ¬¡è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆæ³¨æ„iæ˜¯ä¸‹æ ‡ä½ç½®ï¼‰ System.out.println(Arrays.toString(array2)); //è¿™é‡Œè®¡ç®—è®©æ¯ä¸ªå…ƒç´ å€¼+2 } æ€è€ƒï¼šå½“äºŒç»´æ•°ç»„ä½¿ç”¨Arrays.equals()è¿›è¡Œæ¯”è¾ƒä»¥åŠArrays.toString()è¿›è¡Œæ‰“å°æ—¶ï¼Œè¿˜ä¼šå¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœå—ï¼Ÿ public static void main(String[] args) { Integer[][] array = {{1, 5}, {2, 4}, {7, 3}, {6}}; Integer[][] array2 = {{1, 5}, {2, 4}, {7, 3}, {6}}; System.out.println(Arrays.toString(array)); //è¿™æ ·è¿˜ä¼šå¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœå—ï¼Ÿ System.out.println(Arrays.equals(array2, array)); //è¿™æ ·è¿˜ä¼šå¾—åˆ°trueå—ï¼Ÿ System.out.println(Arrays.deepToString(array)); //ä½¿ç”¨deepToStringå°±èƒ½åˆ°æ‰“å°å¤šç»´æ•°ç»„ System.out.println(Arrays.deepEquals(array2, array)); //ä½¿ç”¨deepEqualså°±èƒ½æ¯”è¾ƒå¤šç»´æ•°ç»„ } é‚£ä¹ˆï¼Œä¸€å¼€å§‹æåˆ°çš„å½“åšListè¿›è¡Œæ“ä½œå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Arrays.asList()æ¥å°†æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ª å›ºå®šé•¿åº¦çš„List public static void main(String[] args) { Integer[] array = {1, 5, 2, 4, 7, 3, 6}; List\u003cInteger\u003e list = Arrays.asList(array); //ä¸æ”¯æŒåŸºæœ¬ç±»å‹æ•°ç»„ï¼Œå¿…é¡»æ˜¯å¯¹è±¡ç±»å‹æ•°ç»„ Arrays.asList(\"A\", \"B\", \"C\"); //ä¹Ÿå¯ä»¥é€ä¸ªæ·»åŠ ï¼Œå› ä¸ºæ˜¯å¯å˜å‚æ•° list.add(1); //æ­¤Listå®ç°æ˜¯é•¿åº¦å›ºå®šçš„ï¼Œæ˜¯Arrayså†…éƒ¨å•ç‹¬å®ç°çš„ä¸€ä¸ªç±»å‹ï¼Œå› æ­¤ä¸æ”¯æŒæ·»åŠ æ“ä½œ list.remove(0); //åŒç†ï¼Œä¹Ÿä¸æ”¯æŒç§»é™¤ list.set(0, 8); //ç›´æ¥è®¾ç½®æŒ‡å®šä¸‹æ ‡çš„å€¼å°±å¯ä»¥ list.sort(Comparator.reverseOrder()); //ä¹Ÿå¯ä»¥æ‰§è¡Œæ’åºæ“ä½œ System.out.println(list); //ä¹Ÿå¯ä»¥åƒListé‚£æ ·ç›´æ¥æ‰“å° } æ–‡å­—æ¸¸æˆï¼šallows arrays to be viewed as listsï¼Œå®é™…ä¸Šåªæ˜¯å½“åšListä½¿ç”¨ï¼Œæœ¬è´¨è¿˜æ˜¯æ•°ç»„ï¼Œå› æ­¤æ•°ç»„çš„å±æ€§ä¾ç„¶å­˜åœ¨ï¼å› æ­¤å¦‚æœè¦å°†æ•°ç»„å¿«é€Ÿè½¬æ¢ä¸ºå®é™…çš„Listï¼Œå¯ä»¥åƒè¿™æ ·ï¼š public static void main(String[] args) { Integer[] array = {1, 5, 2, 4, 7, 3, 6}; List\u003cInteger\u003e list = new ArrayList\u003c\u003e(Arrays.asList(array)); } é€šè¿‡è‡ªè¡Œåˆ›å»ºä¸€ä¸ªçœŸæ­£çš„ArrayListå¹¶åœ¨æ„é€ æ—¶å°†Arraysçš„Listå€¼ä¼ é€’ã€‚ æ—¢ç„¶æ•°ç»„æ“ä½œéƒ½è¿™ä¹ˆæ–¹ä¾¿äº†ï¼Œé›†åˆæ“ä½œèƒ½ä¸èƒ½ä¹Ÿå®‰æ’ç‚¹é«˜çº§çš„ç©æ³•å‘¢ï¼Ÿé‚£å¿…é¡»çš„ï¼ŒJDKä¸ºæˆ‘ä»¬å‡†å¤‡çš„Collocationsç±»å°±æ˜¯ä¸“ç”¨äºé›†åˆçš„å·¥å…·ç±»ï¼š public static void main(String[] args) { List\u003cInteger\u003e list = new ArrayList\u003c\u003e(); Collections.max(list); Collections.min(list); } å½“ç„¶ï¼ŒCollectionsæä¾›çš„å†…å®¹ç›¸æ¯”Arraysä¼šæ›´å¤šï¼Œå¸Œæœ›å¤§å®¶ä¸‹å»è‡ªè¡Œäº†è§£ï¼Œè¿™é‡Œå°±ä¸å¤šåšä»‹ç»äº†ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:5:7","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"é›†åˆç±»ç¼–ç¨‹å®æˆ˜ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:6:0","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"åè½¬é“¾è¡¨ 1 \u003c- 3 \u003c- 5 \u003c- 7 \u003c- 9 è½¬æ¢ä¸º 1 \u003c- 3 \u003c- 5 \u003c- 7 \u003c- 9 ç°åœ¨æœ‰ä¸€ä¸ªå•é“¾è¡¨ï¼Œå°è¯•å°†å…¶æ‰€æœ‰èŠ‚ç‚¹å€’åºæ’åˆ— public class Main { public static void main(String[] args) { Node head = new Node(1); head.next = new Node(3); head.next.next = new Node(5); head.next.next.next = new Node(7); head.next.next.next.next = new Node(9); head = reverse(head); while (head != null){ System.out.println(head.value+\" \"); head = head.next; } } public static class Node { public int value; public Node next; public Node(int data) { this.value = data; } } public static Node reverse(Node head) { //åœ¨è¿™é‡Œå®ç° } } ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:6:1","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"é‡å»ºäºŒå‰æ ‘ ç°åœ¨çŸ¥é“äºŒå‰æ ‘çš„å‰åº: GDAFEMHZï¼Œä»¥åŠä¸­åº: ADEFGHMZï¼Œè¯·æ ¹æ®å·²çŸ¥ä¿¡æ¯è¿˜åŸè¿™é¢—äºŒå‰æ ‘ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:6:2","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"å®ç°è®¡ç®—å™¨ å®ç°ä¸€ä¸ªè®¡ç®—å™¨ï¼Œè¦æ±‚è¾“å…¥ä¸€ä¸ªè®¡ç®—å…¬å¼ï¼ˆå«åŠ å‡ä¹˜é™¤è¿ç®—ç¬¦ï¼Œæ²¡æœ‰è´Ÿæ•°ä½†æ˜¯æœ‰å°æ•°ï¼‰ï¼Œå¾—åˆ°ç»“æœï¼Œæ¯”å¦‚è¾“å…¥ï¼š1+4*3/1.321ï¼Œå¾—åˆ°ç»“æœä¸ºï¼š2.2 ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:6:3","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["JavaSEç¬”è®°"],"content":"å­—ç¬¦ä¸²åŒ¹é…ï¼ˆKMPç®—æ³•ï¼‰ ç°åœ¨ç»™å®šä¸€ä¸ªä¸»å­—ç¬¦ä¸²å’Œä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œè¯·åˆ¤æ–­ä¸»å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ä¸»å­—ç¬¦ä¸²ï¼šABCABCDHIï¼Œå­å­—ç¬¦ä¸²ï¼šABCDï¼Œå› æ­¤ä¸»å­—ç¬¦ä¸²åŒ…å«æ­¤å­å­—ç¬¦ä¸²ï¼›ä¸»å­—ç¬¦ä¸²ï¼šABCABCUISAï¼Œå­å­—ç¬¦ä¸²ï¼šABCDï¼Œåˆ™ä¸åŒ…å«ã€‚ ","date":"2022-01-23","objectID":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/:6:4","tags":["Javaæ³›å‹ä¸é›†åˆç±»"],"title":"Javaæ³›å‹ä¸é›†åˆç±»","uri":"/posts/java%E6%B3%9B%E5%9E%8B%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB/"},{"categories":["C++å®æˆ˜"],"content":"â€ä¸€èµ·æ¥é¢†ç•¥C++æ¨¡æ¿çš„å¥¥ä¹‰â€œ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æƒ³è¦å®ç°PrintLnï¼Œå…³é”®åœ¨äºæ”¯æŒæ— é™ä¸ªå‚æ•°çš„æ‰“å°å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘å¤§è‡´æ€»ç»“ä¸‹C++èƒ½å¤Ÿå¦‚ä½•å»å®ç°å®ƒï¼ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:0:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ–¹å¼ä¸€ï¼šç”¨åˆå§‹åŒ–åˆ—è¡¨å®ç°PrintLn() ã€C++11ã€‘ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç‰ˆæœ¬ä¸€ï¼šæœ´ç´ åˆå§‹åŒ–åˆ—è¡¨ç‰ˆæœ¬ç‰ˆæœ¬ å‡½æ•°ç‰ˆæœ¬ï¼š #include\u003ciostream\u003eusing namespace std; void PrintLn(std::initializer_list\u003cint\u003e args){ for(auto arg:args){ cout\u003c\u003carg\u003c\u003c\", \"; } cout\u003c\u003cstd::endl; } int main() { PrintLn({3,23,2,12}); return 0; } ç±»çš„æ„é€ å™¨ç‰ˆæœ¬(å¯å»æ‰å°æ‹¬å·)ï¼š #include\u003ciostream\u003eusing namespace std; class PrintLn { public: PrintLn(std::initializer_list\u003cint\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; } cout \u003c\u003c std::endl; } }; int main() { auto t = PrintLn{3, 23, 2, 12}; return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:1","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç‰ˆæœ¬äºŒï¼šåŠ æ¨¡æ¿å‚æ•°ç‰ˆæœ¬ å®é™…ä¸Šå’Œä¸Šé¢çš„åŸºæœ¬æ²¡å¤ªå¤§åŒºåˆ«ï¼Œé™¤äº†ä¸Šé¢ç¡®å®šä¸ºäº†intç±»å‹ï¼ŒäºŒåŠ äº†æ¨¡æ¿åï¼Œå¯ä»¥ä¸ºä»»æ„ç±»å‹ï¼Œä½†æ˜¯å®é™…ä¸Šä¼ å…¥çš„è¿˜æ˜¯åªèƒ½æ˜¯åŒä¸€ä¸ªç±»å‹ã€‚æ‰€ä»¥åˆå§‹åŒ–åˆ—è¡¨å®ç°æ˜¯éå¸¸çš„ä¸å¥½ç”¨çš„ã€‚ #incldue\u003ciostream\u003e using namespace std; template\u003ctypename T\u003e class PrintLn { public: PrintLn(std::initializer_list\u003cT\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; }# PrintLnå‡½æ•°å®ç° æƒ³è¦å®ç°PrintLnï¼Œå…³é”®åœ¨äºæ”¯æŒæ— é™ä¸ªå‚æ•°çš„æ‰“å°å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘å¤§è‡´æ€»ç»“ä¸‹C++èƒ½å¤Ÿå¦‚ä½•å»å®ç°å®ƒï¼ ## æ–¹å¼ä¸€ï¼šç”¨åˆå§‹åŒ–åˆ—è¡¨å®ç°PrintLn() ã€C++11ã€‘ ### ç‰ˆæœ¬ä¸€ï¼šæœ´ç´ åˆå§‹åŒ–åˆ—è¡¨ç‰ˆæœ¬ç‰ˆæœ¬ \u003e å‡½æ•°ç‰ˆæœ¬ï¼š ```cpp #include\u003ciostream\u003eusing namespace std; void PrintLn(std::initializer_list\u003cint\u003e args){ for(auto arg:args){ cout\u003c\u003carg\u003c\u003c\", \"; } cout\u003c\u003cstd::endl; } int main() { PrintLn({3,23,2,12}); return 0; } ç±»çš„æ„é€ å™¨ç‰ˆæœ¬(å¯å»æ‰å°æ‹¬å·)ï¼š #include\u003ciostream\u003eusing namespace std; class PrintLn { public: PrintLn(std::initializer_list\u003cint\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; } cout \u003c\u003c std::endl; } }; int main() { auto t = PrintLn{3, 23, 2, 12}; return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:2","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç‰ˆæœ¬äºŒï¼šåŠ æ¨¡æ¿å‚æ•°ç‰ˆæœ¬ å®é™…ä¸Šå’Œä¸Šé¢çš„åŸºæœ¬æ²¡å¤ªå¤§åŒºåˆ«ï¼Œé™¤äº†ä¸Šé¢ç¡®å®šä¸ºäº†intç±»å‹ï¼Œè€ŒåŠ äº†æ¨¡æ¿åï¼Œå¯ä»¥ä¸ºä»»æ„ç±»å‹ï¼Œä½†æ˜¯å®é™…ä¸Šä¼ å…¥çš„è¿˜æ˜¯åªèƒ½æ˜¯åŒä¸€ä¸ªç±»å‹ã€‚æ‰€ä»¥åˆå§‹åŒ–åˆ—è¡¨çš„æ–¹å¼å®ç°Printlnåªèƒ½è¯´å½¢ä¼¼è€Œç¥ä¸ä¼¼ã€‚ #incldue\u003ciostream\u003e using namespace std; template\u003ctypename T\u003e class PrintLn { public: PrintLn(std::initializer_list\u003cT\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; } cout \u003c\u003c std::endl; } }; int main() { auto t = PrintLn\u003cint\u003e{3, 23, 2, 12}; return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:3","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ–¹å¼äºŒï¼šç”¨å¯å˜å‚æ¨¡æ¿å®ç° ã€C++11/17ã€‘ å¦‚æœæœ‰äº†è§£è¿‡Cçš„å¯å˜å‚å‡½æ•°å’Œå¯å˜å‚çš„å®ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯å˜å‚æ¨¡æ¿ä¸å®ƒæœ‰äº›ç±»å‹ï¼Œåªä¸è¿‡Cé‡Œé¢çš„va_start,va_list,va_arg,va_endè¿™ä¸€ç³»åˆ—å®ç°å¯å˜å‚æ•°çš„å®ç”¨èµ·æ¥éå¸¸éº»çƒ¦ï¼Œè€Œä¸”æ— æ³•ç¡®å®šæ¯ä¸ªå‚æ•°çš„ç±»å‹ï¼Œè€Œå¯å˜å‚çš„æ¨¡æ¿åˆ™å¸¦æœ‰æ¨¡æ¿çš„æ³›å‹æ€§è´¨ï¼Œæ‰€ä»¥æ˜¯èƒ½ç¡®å®šç±»å‹çš„ï¼Œç”šè‡³ç”±äºæ¨¡æ¿å¯ä»¥ä¼ å€¼ï¼Œåé¢è¿˜å¯ç›´æ¥ä¼ å€¼ä½¿ç”¨ã€‚ ä»¥ä¸‹ç®€å•æè¿°å¯å˜å‚æ¨¡æ¿çš„ä½¿ç”¨æ–¹å¼ï¼š typenam... ç®—C++çš„ä¸€ä¸ªæ–°çš„å…³é”®å­—ï¼Œå®ƒå¯ä»¥ç”¨æ¥å®šä¹‰ä¸€ä¸ªå¯å˜å‚çš„æ¨¡æ¿ç±»å‹ï¼Œè€Œè¿™ä¸ªç±»å‹åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰ä½¿ç”¨çš„æ—¶å€™ä¹Ÿè¦åœ¨åé¢å¸¦ä¸Š ... è¡¨ç¤ºæ‹†åŒ…ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ ä¾‹å¦‚ï¼š template\u003ctypename... T\u003e void f(T... t){//TODO è¿™ç§ç±»å‹æˆ–å˜é‡åœ¨ä»»ä½•åœ°æ–¹ä½œä¸ºå‚æ•°å®šä¹‰æˆ–è€…ä¼ é€’çš„æ—¶å€™éƒ½éœ€è¦åŠ ä¸Š...è¡¨ç¤ºæ‹†åŒ… f(t...) } åœ¨C++17å‡ºç°fold expressionä¹‹å‰ï¼Œè¿™ä¸ªæ‹†åŒ…è¿‡ç¨‹åªèƒ½å€ŸåŠ©å¦ä¸€ä¸ªæ¨¡æ¿å‚æ•°æ¥å¾—åˆ°æ¨¡æ¿å‚æ•°åŒ…é‡Œé¢çš„å†…å®¹ã€‚ æ³¨æ„ä»¥ä¸Šä¸¤ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥å¼€å§‹ç¼–å†™æ³›å‹æ¨¡æ¿ï¼Œå®ç°å¯å˜å‚æ•°çš„å®Œå…¨æ‰“å°è¿‡ç¨‹äº†ã€‚ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:2:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"C++11ç‰ˆæœ¬å®ç° é”™è¯¯å®ç°ç‰ˆæœ¬ï¼šå¦‚æœä½ ç›´æ¥åƒä¸‹é¢è¿™æ ·è¿›è¡Œæ‹†åŒ…ï¼Œé‚£ä¹ˆç¼–è¯‘æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºæ‹†åŒ…è¿‡ç¨‹ç›¸å½“äºä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œè€Œä½ è¿™ä¸ªé€’å½’çš„è¿‡ç¨‹æ²¡æœ‰ä¸€ä¸ªè·³å‡ºçš„æ¡ä»¶ï¼Œæ¯”å¦‚argså¦‚æœä¸º0ä¸ªå‚æ•°æ—¶ï¼Œç»§ç»­åœ¨å¾€ä¸‹å°±æ— æ³•å±•å¼€äº†ï¼Œæ‰€ä»¥éœ€è¦å®ç°ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„ç‰ˆæœ¬è®©æ‹†åŒ…è¿‡ç¨‹åœæ­¢ã€‚ template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...); } //æ‹†åŒ…è¿‡ç¨‹ï¼šPrintLn(3,1,3,4)-\u003e // PrintLn(firstArg:3,args(1,3,4)); // PrintLn(firstArg:1,args(3,4)); // PrintLn(firstArg:3,args(4)); // PrintLn(firstArg:4,args(null)) // ç”±äºåˆ°äº†ä¸Šé¢çš„ç¬¬å››è¡Œè¿˜è¦ç»§ç»­å¾€ä¸‹æ‹†åŒ… // è€Œæ­¤æ—¶åªæœ‰0ä¸ªå‚æ•°ï¼Œæ²¡æœ‰å¯¹åº”çš„PrintLnç‰ˆæœ¬å¯ä»¥è°ƒç”¨ï¼Œæ•…æŠ¥é”™ï¼ ä»¥ä¸‹ä¸ºæ­£ç¡®ä¿®æ”¹ç‰ˆæœ¬ï¼š #include\u003ciostream\u003eusing namespace std; void PrintLn(){ } template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...); } int main() { PrintLn(3, 23, 2, 12); return 0; å½“ç„¶ä¹Ÿå¯ä»¥æ§åˆ¶åªå‰©ä¸€ä¸ªå‚æ•°æ—¶å°±åœæ­¢æ‹†åŒ…ã€‚ #include\u003ciostream\u003eusing namespace std; template\u003ctypename T\u003e void PrintLn(T arg){ cout\u003c\u003carg\u003c\u003cendl; } template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...); } int main() { PrintLn(3, 23, 2, 12); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:2:1","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"C++17ç‰ˆæœ¬å®ç° ä¸Šé¢çš„å®ç°æµç¨‹å®é™…ä¸Šåœ¨C++17ä¸­å¯ä»¥ç”¨ if constexpr()+sizeofâ€¦ åœ¨ç¼–è¯‘æœŸé—´æ¥è¿›è¡Œæµç¨‹æ§åˆ¶ã€‚ é¦–å…ˆæ¥è®²ä¸€è®²ä¸ºä»€ä¹ˆæ™®é€šçš„ if + sizeofâ€¦ æ¥å®ç°å¯å˜å‚æ•°çš„é•¿åº¦æ§åˆ¶æµç¨‹ä¼šæŠ¥é”™å‘¢ï¼Ÿ å› ä¸ºæ•´ä¸ªæ¨¡æ¿æ¨æ–­å’Œæ‹†åŒ…è§£åŒ…è¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æœŸå®Œæˆçš„ï¼Œè€Œifçš„æ§åˆ¶æµç¨‹åœ¨ç¼–è¯‘æœŸæ˜¯å®Œå…¨ä¸æ¸…æ¥šçš„ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œä½†æ˜¯æœ‰äº†if constexprä¹‹åï¼Œå°±èƒ½æ§åˆ¶ç¼–è¯‘æœŸçš„æ¨¡æ¿æ‹†åŒ…è¿‡ç¨‹äº†ï¼ å¦‚ä¸Šé¢å®ç°PrintLnï¼Œå¯ä»¥ç›´æ¥ç®€åŒ–æˆä¸‹é¢è¿™æ ·ï¼š #include\u003ciostream\u003eusing namespace std; template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ if constexpr(sizeof...(args)==0){//å½“å‚æ•°ä¸ªæ•°ä¸º0ä¸ªçš„æ—¶å€™å°±ä¸ç»§ç»­æ‹†åŒ…äº† cout\u003c\u003cfirstArg\u003c\u003cendl; }else{ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...);//å¾€ä¸‹ç»§ç»­æ‹†åŒ… } } int main() { PrintLn(3, 23, 2, 12); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:2:2","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ–¹å¼ä¸‰ï¼šå¯å˜å‚æ¨¡æ¿çš„fold expressionå±•å¼€ ã€C++17ã€‘ åœ¨C++17ä¸­ï¼ŒåŠ å…¥äº†ä¸€ä¸ªfold expressionçš„è¯­æ³•ï¼Œè®©å¯å˜å‚æ•°æ¨¡æ¿å¯ä»¥ä¸é€šè¿‡é€’å½’çš„æ–¹å¼æ¥è§£åŒ…ï¼Œç›´æ¥æŠŠæ¯ä¸ªåŒ…è§£å¼€æ”¾å…¥ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç„¶åå‰©ä½™çš„åŒ…éƒ½ä»¥è¯¥è¡¨è¾¾å¼è§£å¼€ï¼ŒåŸºæœ¬çš„è¯­æ³•å¦‚ä¸‹ï¼š ((expression)op...); expression : è¡¨ç¤ºå¸Œæœ›æ¯ä¸ªè§£å¼€çš„å‚æ•°æ‰€æ‰§è¡Œçš„è¡¨è¾¾å¼ã€‚ op : ä½ æŒ‡å®šçš„æ“ä½œç¬¦ã€‚ ... : ä¸€ç›´ä¸æ–­çš„è§£åŒ…ï¼Œç”±äºæ­¤å¤„æ”¾çš„ä½ç½®æ˜¯å³è¾¹ï¼Œæ‰€ä»¥å¾€å³è¾¹è§£åŒ…ï¼Œå¦‚æœæ”¾å·¦è¾¹åˆ™å¾€å·¦è¾¹è§£åŒ…ã€‚ ç¤ºä¾‹ä»£ç ï¼š #include \u003cbits/stdc++.h\u003eusing namespace std; template\u003ctypename... Args\u003e double sum(Args... args){ return (args+...);//ç­‰ä»·äº3+23+1+3.32 } template\u003cauto... val\u003e//å¯å˜çš„ä¼ å€¼çš„æ¨¡æ¿å‚æ•° constexpr int sum(){ return (val+...); } int main() { cout\u003c\u003csum\u003c3,23,1,32\u003e()\u003c\u003cendl;//ä¼ å€¼æ¨¡æ¿å‚æ•°ä¸æ”¯æŒæµ®ç‚¹ç±»å‹ï¼Œæ‰€ä»¥å…¨ç”¨çš„intç±»å‹ cout\u003c\u003csum(3,23,1,3.32); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç®€å•çš„åˆ©ç”¨fold exprå®ç° åŸºäºä»¥ä¸Šå¯¹fold exprçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æ¥æ­£å¼å®ç°PrintLnï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¸ªfold exprçš„æ€§èƒ½è‚¯å®šæ˜¯æ¯”ä¹‹å‰é€’å½’è§£åŒ…çš„æ€§èƒ½è¦å¥½çš„ï¼Œå› ä¸ºåªæ˜¯è¿­ä»£çš„æ‹“å®½è€Œå·²ã€‚ æˆ‘ä»¬å¯ä»¥å°†æ‹†å¼€çš„åŒ…ç”¨ ',' å±•å¼€ #include\u003ciostream\u003eusing namespace std; template\u003ctypename... Args\u003e void PrintLn(Args... args){ ((cout\u003c\u003cargs\u003c\u003c\", \"),...)\u003c\u003cendl; } int main() { PrintLn(1,2.3,\"LB\",\"hhh\"); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:1","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"åŠ ä¸Šæµç¨‹æ§åˆ¶å®ç° é€šè¿‡æ›´å¤æ‚çš„æµç¨‹æ§åˆ¶æŠŠæœ€åä¸€ä¸ªæ‰“å°å‡ºæ¥çš„é€—å·å»æ‰ã€‚ é€šè¿‡å»¶ç”³ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œä½¿å¾—è¿è¡Œæ—¶èƒ½å¤Ÿæ­£ç¡®çš„æ‰“å°æœ€åä¸€æ¬¡ã€‚ åæ­£æˆ‘è¿™é‡Œç¼–è¯‘æœŸåªè´Ÿè´£æ–‡æœ¬æ›¿æ¢ï¼Œæ‰€ä»¥è¢«fold exprå±•å¼€çš„è¡¨è¾¾å¼å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆè¦æ˜¯ç¼–è¯‘æœŸå¸¸é‡çš„è¦æ±‚ã€‚ è¿™ä¸€åˆ‡éƒ½çœ‹ä½œç®€å•å®æ›¿æ¢å³å¯ã€‚ #include\u003ciostream\u003eusing namespace std; template\u003ctypename... Args\u003e void PrintLn(Args... args){ int lastIndex = sizeof...(args)-1;//å¾—åˆ°ä¼ å…¥çš„å‚æ•°é•¿åº¦ int i = 0; ((i++==lastIndex?cout\u003c\u003cargs\u003c\u003cendl:cout\u003c\u003cargs\u003c\u003c\", \"),...); } int main() { PrintLn(1,2.3,\"LB\",\"hhh\"); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:2","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ›´å¤šfold exprè¿ç”¨â€¦ åˆ©ç”¨ä¸æˆ–è¡¨è¾¾å¼å±•å¼€ï¼Œç„¶ååˆ©ç”¨å®ƒä»¬çš„çŸ­è·¯æ€§è´¨ï¼Œå®ç°å¾—åˆ°æ‹†åŒ…å…ƒç´ çš„ç²¾å‡†æ‰“å‡»ï¼ˆè·å¾—åŒ…é‡Œçš„ç¬¬å‡ ä¸ªå…ƒç´ ï¼‰ã€‚ #include\u003ciostream\u003eusing namespace std; template\u003ctypename... Args\u003e auto GetNth(int n, Args... args) { int i = 0; using CommonType = common_type_t\u003cArgs...\u003e; CommonType ret; ((i++ == n \u0026\u0026 (ret = args, true))||...); return ret; } int main() { cout \u003c\u003c GetNth(3, 2, 1, 2.3, 32.2); return 0; } ä¸Šé¢ä¸ºäº†å­˜å‚¨ä¸ç¡®å®šçš„ç±»å‹ç”¨äº†common_type_tï¼Œè¿™ä¸ªå¯ä»¥å¸®åŠ©ä½ å¾—åˆ°ä¸€ä¸ªå…¬å…±å¯ç”¨çš„ç±»å‹ï¼Œè€Œè¿™ä¸ªç±»å‹å¿…é¡»æ˜¯å…¬å…±å¯ç”¨ï¼Œæ¯”å¦‚intäº†floatå‹å¯ä»¥è¿›è¡Œç›¸äº’è½¬åŒ–æ‰€ä»¥æœ‰å…¬å…±ç±»å‹ï¼Œè€Œ char* å’Œintç±»å‹åˆ™æ²¡æœ‰ï¼Œæ‰€ä»¥è¿™ä¸ªGetNthä¸­çš„å…ƒç´ ä¸èƒ½ä¼ é€’ char* ç±»å‹çš„åŒæ—¶ä¼ é€’intç±»å‹ã€‚ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:3","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"â€SocketåŸºæœ¬æ“ä½œçš„C++å°è£…â€œ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å°è£…è¿‡ç¨‹ ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ¥å£ç±»çš„å®ç°(æŠ½è±¡ç±») _public_socket.h è¯¥å¤´æ–‡ä»¶ç”¨äºåŒ…å«æ‰€æœ‰è¯¥ç³»ç»Ÿå¹³å°socketæ‰€éœ€è¦ä¾èµ–çš„åº“ã€‚ windowså¹³å° #ifndef MY_TINY_STL__PUBLIC_SOCKET_H #define MY_TINY_STL__PUBLIC_SOCKET_H #include \u003cwinsock2.h\u003e#pragma comment (lib, \"ws2_32.lib\") //åŠ è½½ ws2_32.dll #endif //MY_TINY_STL__PUBLIC_SOCKET_H Linuxå¹³å° #include \u003cunistd.h\u003e#include \u003carpa/inet.h\u003e#include \u003csys/socket.h\u003e#include \u003cnetinet/in.h\u003eTCP_INTERFACE.h(ä½œç”¨äºwinå¹³å°) ç”±äºè¯¥æ¥å£ç”±æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ç»§æ‰¿ï¼Œè€Œä¸¤è€…åŒæ ·çš„å‡½æ•°æˆå‘˜ä¹Ÿå°±æ˜¯è¿™äº›äº†ï¼Œè®¾è®¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ—¶å°±åªéœ€è¦è€ƒè™‘å„è‡ªçš„å¥—æ¥å­—ä»¥åŠå…¶ä½™æ“ä½œçš„æˆå‘˜å‡½æ•°ï¼Œä¹Ÿä¸éœ€è¦ç®¡ç†DLLçš„å¼€å…³ã€‚ è¿˜æœ‰ä¸€ä¸ªerro_die()æˆå‘˜å‡½æ•°ç”¨äºé˜»æ–­é”™è¯¯å¹¶æ‰“å°å¯¹åº”æƒ…å†µã€‚ // // Created by Alone on 2021/8/17. // #ifndef MY_TINY_STL_TCP_INTERFACE_H #define MY_TINY_STL_TCP_INTERFACE_H #include \u003ccstdio\u003e#include \"_public_socket.h\" class TCP_INTERFACE { public: TCP_INTERFACE() { //åˆå§‹åŒ– DLL WSADATA wsaData; WSAStartup(MAKEWORD(2, 2), \u0026wsaData); } //è¿”å›å€¼å°äºç­‰äº0æ—¶å‘ç”Ÿé”™è¯¯ virtual int Send(SOCKET clnt, const void *buf, const int buflen) = 0; virtual int Recv(SOCKET clnt, void *buf, const int buflen) = 0; //closesocketè¿”å›å€¼ä¸ä¸º0åˆ™å‘ç”Ÿé”™è¯¯ virtual void Close(SOCKET clnt) = 0; virtual void error_die(const char *str) = 0; ~TCP_INTERFACE() { WSACleanup(); } }; #endif //MY_TINY_STL_TCP_INTERFACE_H ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:1","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æœåŠ¡å™¨ç«¯å°è£… è¿™æ¬¡ä¿®æ”¹äº†ä¸‹é€»è¾‘ï¼Œè¿˜æ˜¯ç”¨acceptè¿”å›ä¸€ä¸ªå¥—æ¥å­—è¿›è¡Œå‘é€å’Œæ¥æ”¶æ“ä½œæ¯”è¾ƒå¥½ã€‚ç±»çš„åº•å±‚æ²¡æœ‰å†ä¿ç•™ç”¨äºå’ŒæŸä¸ªå®¢æˆ·ç«¯é€šä¿¡çš„å¥—æ¥å­—äº†ï¼Œè‡ªå·±æ§åˆ¶å„ä¸ªå®¢æˆ·ç«¯å¥—æ¥å­—çš„å…³é—­å’Œä½¿ç”¨ã€‚ TCP_SOCKET_SERVER.h // // Created by Alone on 2021/8/16. // #ifndef MY_TINY_STL_TCP_SOCKET_SERVER_H #define MY_TINY_STL_TCP_SOCKET_SERVER_H #include \"TCP_INTERFACE.h\" class TCP_SOCKET_SERVER : public TCP_INTERFACE { public: TCP_SOCKET_SERVER(); ~TCP_SOCKET_SERVER(); void Bind(int port); void Listen(); SOCKET Accept(); int Send(SOCKET clnt, const void *buf, const int buflen); int Recv(SOCKET clnt, void *buf, const int buflen); void Close(SOCKET clnt); void error_die(const char *str); private: SOCKET servSock; sockaddr_in sockAddr; }; #endif //MY_TINY_STL_TCP_SOCKET_SERVER_H TCP_SOCKET_SERVER.cpp // // Created by Alone on 2021/8/16. // #include \"TCP_SOCKET_SERVER.h\" //åˆå§‹åŒ–æ“ä½œ TCP_SOCKET_SERVER::TCP_SOCKET_SERVER() : servSock(0) { memset(\u0026sockAddr, 0, sizeof(sockAddr)); //æ¯ä¸ªå­—èŠ‚éƒ½ç”¨0å¡«å…… } //ç»‘å®šæ“ä½œ void TCP_SOCKET_SERVER::Bind(int port) { servSock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); sockAddr.sin_family = PF_INET; //ä½¿ç”¨IPv4åœ°å€ sockAddr.sin_addr.s_addr = htonl(INADDR_ANY); //å…·ä½“çš„IPåœ°å€ sockAddr.sin_port = htons(port); //ç«¯å£ if (bind(servSock, (SOCKADDR *) \u0026sockAddr, sizeof(SOCKADDR)) != 0) { error_die(\"bind\"); } } //ç½®äºç›‘å¬çŠ¶æ€ void TCP_SOCKET_SERVER::Listen() { if (servSock == 0) error_die(\"listen\"); if (listen(servSock, SOMAXCONN) != 0) { error_die(\"listen\"); } } //åˆ©ç”¨å¥—æ¥å­—çš„ç›‘å¬ä¸²å£ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå»ºç«‹æ–°çš„å¥—æ¥å­—è¿›è¡Œå­˜å‚¨ä¿¡æ¯ SOCKET TCP_SOCKET_SERVER::Accept() { SOCKADDR t; int nSize = sizeof(SOCKADDR); //åé¢ä¸¤ä¸ªå‚æ•°ä¸ºå¯é€‰ SOCKET clnt = accept(servSock, \u0026t, \u0026nSize); if (clnt \u003c= 0)error_die(\"accept\"); return clnt; } //è¿”å›çš„æ˜¯å‘é€åˆ°ç¼“å†²åŒºçš„å­—èŠ‚é•¿åº¦ int TCP_SOCKET_SERVER::Send(SOCKET clnt, const void *buf, const int buflen) { return send(clnt, (const char *) buf, buflen, 0); } //è¿”å›å·²ç»æ¥æ”¶çš„å­—èŠ‚é•¿åº¦ int TCP_SOCKET_SERVER::Recv(SOCKET clnt, void *buf, const int buflen) { return recv(clnt, (char *) buf, buflen, 0); } //ææ„å‡½æ•°å…³é—­socket TCP_SOCKET_SERVER::~TCP_SOCKET_SERVER() { if (servSock != 0)closesocket(servSock); } void TCP_SOCKET_SERVER::Close(SOCKET clnt) { if (closesocket(clnt) != 0) { error_die(\"closesocket\"); } } void TCP_SOCKET_SERVER::error_die(const char *str) { printf(\"[hint]%s failed:%d\", str, WSAGetLastError()); exit(-1); } ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:2","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®¢æˆ·ç«¯çš„å°è£… TCP_SOCKET_CLIENT.h å¢åŠ äº†åˆ©ç”¨åŸŸåæŸ¥è¯¢ipåœ°å€çš„æˆå‘˜å‡½æ•°gethostbyname(),æŒºå¥½ç©çš„ï¼æ­¤æ¬¡å¢åŠ äº†erro_dieå‡½æ•°ï¼Œä¸”å‘é€å’Œæ¥æ”¶éƒ½æ“ä½œå¥—æ¥å­—ã€‚åœ¨ç±»çš„å†…éƒ¨è¿˜æ˜¯ä¿ç•™äº†å¥—æ¥å­—çš„å¤‡ä»½ï¼Œç”¨äºå¿˜è®°å…³é—­å¥—æ¥å­—æ—¶ï¼Œææ„å‡½æ•°è¿›è¡Œå…³é—­ã€‚ // // Created by Alone on 2021/8/18. // #ifndef MY_TINY_STL_TCP_SOCKET_CLIENT_H #define MY_TINY_STL_TCP_SOCKET_CLIENT_H #include \"TCP_INTERFACE.h\"#include \u003ciostream\u003e class TCP_SOCKET_CLIENT : public TCP_INTERFACE { public: TCP_SOCKET_CLIENT(); ~TCP_SOCKET_CLIENT(); SOCKET Connect(const char *IPAdrr, u_short port); //ç”¨äºåˆ©ç”¨URL(åŸŸå)æŸ¥è¯¢IPåœ°å€ void Gethostbyname(const char *URL); //æ¥å£å¿…é¡»å®ç°çš„å‡½æ•° int Send(SOCKET clnt,const void *buf, const int bufSize); int Recv(SOCKET clnt,void *buf, const int bufSize); void Close(SOCKET clnt); void error_die(const char *str); private: //ç”±äºä¸€èˆ¬å®¢æˆ·ç«¯åªéœ€è¦ä¸€ä¸ªå¥—æ¥å­—å®ç°è¿æ¥,ç„¶åè¿˜éœ€è¦ä¸€ä¸ªsocketadrr_inç”¨äºè¿æ¥å†…å®¹çš„èµ‹å€¼ SOCKET clntSock; sockaddr_in sockAddr; }; #endif //MY_TINY_STL_TCP_SOCKET_CLIENT_H TCP_SOCKET_CLIENT.cpp // // Created by Alone on 2021/8/17. // #include \"TCP_SOCKET_CLIENT.h\" //åˆå§‹åŒ– TCP_SOCKET_CLIENT::TCP_SOCKET_CLIENT() : clntSock(0) {} //å…³é—­å¥—æ¥å­—æ“ä½œ void TCP_SOCKET_CLIENT::Close(SOCKET clnt) { if (closesocket(clnt) != 0) error_die(\"close\"); clntSock = 0; } //è¿æ¥æœåŠ¡å™¨æ“ä½œ SOCKET TCP_SOCKET_CLIENT::Connect(const char *IPAdrr, u_short port) { memset(\u0026sockAddr, 0, sizeof sockAddr); clntSock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); sockAddr.sin_family = PF_INET; sockAddr.sin_addr.s_addr = inet_addr(IPAdrr); sockAddr.sin_port = htons(port); if (connect(clntSock, (SOCKADDR *) \u0026sockAddr, sizeof(sockAddr)) != 0) { error_die(\"connect\"); } return clntSock; } //å‘é€ä¿¡æ¯æ“ä½œ int TCP_SOCKET_CLIENT::Send(SOCKET clnt,const void *buf, const int bufSize) { return send(clnt, (const char *) buf, bufSize, 0); } //æ¥æ”¶ä¿¡æ¯æ“ä½œ int TCP_SOCKET_CLIENT::Recv(SOCKET clnt,void *buf, const int bufSize) { return recv(clnt, (char *) buf, bufSize, 0); } //æ ¹æ®åŸŸåè·å–ipåœ°å€ç­‰ä¿¡æ¯ void TCP_SOCKET_CLIENT::Gethostbyname(const char *URL) { hostent *host = gethostbyname(URL); if (!host) { std::cout \u003c\u003c \"Get IP address error!\\n\"; return; } //æ‰“å°æœ¬å‘½ std::cout \u003c\u003c URL \u003c\u003c std::endl; //åˆ«å for (int i = 0; host-\u003eh_aliases[i]; i++) { printf(\"Aliases %d: %s\\n\", i + 1, host-\u003eh_aliases[i]); } //åœ°å€ç±»å‹ printf(\"Address type: %s\\n\", (host-\u003eh_addrtype == AF_INET) ? \"AF_INET\" : \"AF_INET6\"); //IPåœ°å€,å…¶ä¸­inet_ntoa()å‡½æ•°æ˜¯å°†ç½‘ç»œå­—èŠ‚åºè½¬ä¸ºæœ¬åœ°çš„å­—èŠ‚åºï¼Œæ–¹ä¾¿æ‰“å°çœ‹æ‡‚ for (int i = 0; host-\u003eh_addr_list[i]; i++) { printf(\"IP addr %d: %s\\n\", i + 1, inet_ntoa(*(struct in_addr *) host-\u003eh_addr_list[i])); } } //ææ„æ—¶éœ€è¦ç¡®ä¿æ‰€æœ‰ä¸œè¥¿å·²ç»å…³é—­ TCP_SOCKET_CLIENT::~TCP_SOCKET_CLIENT() { if (clntSock != 0) closesocket(clntSock); } void TCP_SOCKET_CLIENT::error_die(const char *str) { printf(\"[hint]%s failed:%d\", str, WSAGetLastError()); exit(-1); } ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:3","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹è®²è§£ ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:2:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹ä¸€ï¼šå›å£°ç¨‹åºé€šä¿¡ æœåŠ¡å™¨å›å£°ç¨‹åº ç»‘å®šæœ¬åœ°1234ç«¯å£ï¼Œè¿›å…¥ç›‘å¬çŠ¶æ€ç­‰å¾…è¯·æ±‚ï¼Œå¦‚æœé€šä¿¡å¯¹è±¡å…³é—­äº†é€šä¿¡ï¼Œä¹Ÿä¸æ…Œï¼Œé‡æ–°gotoåˆ°ç­‰å¾…è¯·æ±‚å¾—åˆ°æ–°çš„é€šä¿¡å¥—æ¥å­— #include \u003ciostream\u003e#include \"TCP_SOCKET_SERVER.h\" #define BUF_SIZE 1000 using namespace std; int main() { TCP_SOCKET_SERVER a; a.Bind(1234); a.Listen(); restart: SOCKET clnt = a.Accept(); while (1) { char *x = new char[BUF_SIZE]; memset(x, 0, BUF_SIZE); int size = a.Recv(clnt,x, BUF_SIZE); if (size \u003c= 0) break; if (a.Send(clnt,x, size) \u003c= 0) break; } a.Close(clnt); cout \u003c\u003c \"connect is over.Waiting for a new connection!\\n\"; goto restart; } å®¢æˆ·ç«¯é€šä¿¡ç¨‹åº ä¸ºä¿æŒæŒç»­é€šä¿¡ï¼Œä¸€æ—¦å®¢æˆ·ç«¯æ‹’ç»äº†è¯·æ±‚ï¼Œé‚£ä¹ˆå¼¹å‡ºå¾ªç¯é‡æ–°è¿æ¥ï¼Œå¹¶è®¾ç½®è¿æ¥è¶…æ—¶æ“ä½œã€‚ #include \"TCP_SOCKET_CLIENT.h\"#define BUF_SIZE 100 int main(){ TCP_SOCKET_CLIENT t; const char* to = \"127.0.0.1\"; restart: SOCKET clnt = t.Connect(to,1234); while(1){ std::cout\u003c\u003c\"\\nInput your message:\\n\"; char buf[BUF_SIZE] = {0}; std::cin.getline(buf,99); int size = t.Send(clnt,buf,BUF_SIZE); if(size\u003c=0) break; memset(buf,0,sizeof buf); if(t.Recv(clnt,buf,size)\u003c=0) break; printf(\"received from %s is:\\n\",to); std::cout\u003c\u003cbuf; } t.Close(clnt); std::cout\u003c\u003c\"The Server is disconnected,and socket has been cleaned up,socket connection has been re-established\\n\"; goto restart; return 0; } å›å£°æ•ˆæœ å®¢æˆ·ç«¯æ”¶åˆ°çš„ç»“æœ æœåŠ¡å™¨ç«¯ä¸€ç›´è¿è¡Œç€ï¼Œåªè¦ä¸å…³é—­ï¼Œä½†æ¯æ¬¡åªèƒ½å’Œä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ï¼Œé€šä¿¡å®Œåé‡æ–°ç­‰å¾…è¿æ¥ã€‚ ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:2:1","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹äºŒï¼šæ–‡ä»¶æ“ä½œï¼Œä¼ é€å›¾ç‰‡(æŒæ¡é‡å¤ä¼ åŒ…) åˆ†æå¾…ä¼ å›¾ç‰‡ çœ‹çœ‹è¿™ç™¾ä¸‡å¤§å°çš„å­—èŠ‚ï¼Œä¸€æ¬¡è‚¯å®šæ˜¯ä¼ ä¸å®Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‘é€ç«¯ä¸æ–­çš„ç»­ä¼ ï¼Œç›´åˆ°ä¼ é€å®Œæ¯•ã€‚ å‘é€ç«¯ç¨‹åº #include \"TCP_SOCKET_CLIENT.h\"#include \u003cfstream\u003eint main(){ TCP_SOCKET_CLIENT t; const char* to = \"127.0.0.1\"; restart: SOCKET clnt = t.Connect(to,1234); //å›¾ç‰‡å†™å…¥buf(è¿™å‡ ç™¾ä¸‡å­—èŠ‚å¤§å°ï¼Œå¾—äºæ˜¯newåŠ¨æ€åˆ†é… std::ifstream img(\"D:/DesktopBackground/L-69.png\",std::ios::in|std::ios::binary); //è®¾ç½®æ–‡ä»¶æŒ‡é’ˆç”¨äºæ±‚æ–‡ä»¶å†…å®¹é•¿åº¦ img.seekg(0,std::ios::end); int len = img.tellg(); img.seekg(0,std::ios::beg); if(len\u003e0){printf(\"read OK\\n\");} else {printf(\"file is empty!\");return 0;} //å¡«è¡¥buf char * buf = new char[len]; img.read(buf,len); //å‘é€æ•°æ®åˆ°æœåŠ¡å™¨,ä¸€æ¬¡è‚¯å®šå‘é€ä¸å®Œï¼Œæ‰€ä»¥å¤šæ¬¡ int sum = 0; while(sum\u003clen){ int sendlen = t.Send(clnt,buf,len); if(sendlen\u003c=0){ printf(\"Send Erro!\"); return 0; } sum += sendlen; } t.Close(clnt); printf(\"Send OK!\"); return 0; } æ¥æ”¶ç«¯ç¨‹åº #include \u003ciostream\u003e#include \"TCP_SOCKET_SERVER.h\"#include \u003cfstream\u003e#define BUF_SIZE 100 using namespace std; int main() { TCP_SOCKET_SERVER a; a.Bind(1234); a.Listen(); //ç­‰å¾…è¿æ¥ï¼Œè¿æ¥æˆåŠŸä¾¿å¯å»ºç«‹é€šè®¯ SOCKET clnt = a.Accept(); //åˆ›å»ºæ–‡ä»¶ç”¨äºå†™å…¥å›¾ç‰‡æ•°æ® ofstream t(\"test.png\",ios::binary|ios::out); //ç”±äºè¦æ¥æ”¶çš„å›¾ç‰‡æ–‡ä»¶è¾ƒå¤§ï¼Œéœ€è¦åˆ†å¤šæ¬¡åŒ…è¿›è¡Œä¼ è¾“æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ä¸æ–­å¾ªç¯æ¥æ”¶ while(1){ char buf[BUF_SIZE]; int sz = a.Recv(clnt,buf,BUF_SIZE); //ç›´åˆ°å‘é€ç«¯å‘é€æ•°æ®å®Œæ¯•æ–­å¼€è¿æ¥åï¼Œä¾¿å¯åˆ¤æ–­ä¸ºæ¥æ”¶å®Œæ¯• if(sz\u003c=0){ cout\u003c\u003c\"Finish !\"; return 0; } //æ¯æ¬¡è°ƒæ•´æ–‡ä»¶æŒ‡é’ˆä½ç½®åˆ°æœ€åç»­å†™ t.seekp(0,ios::end); t.write(buf,sz); } a.Close(clnt); } æ¥æ”¶ç»“æœ ä¸€æ¨¡ä¸€æ ·æ¯«æ— åå·® ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:2:2","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹ä¸‰ï¼šWebé€šä¿¡(æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨) ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:3:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"WebæœåŠ¡å™¨ç¨‹åº æˆ‘è¿™ä¸ªwebæœåŠ¡å™¨ä¹Ÿç®—æ˜¯åŠå…¶ç®€å•äº†ã€‚ã€‚å¹¶æ²¡æœ‰å¯¹å®¢æˆ·ç«¯çš„httpè¯·æ±‚è¿›è¡Œè§£æç„¶åå‘é€å¯¹åº”çš„æ–‡ä»¶ç»™å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯å•çº¯çš„æˆ‘å®¢æˆ·ç«¯æƒ³æ€ä¹ˆå‘å°±æ€ä¹ˆå‘ã€‚ã€‚å¦å¤–è¿™ä¸ªç¨‹åºè™½ç„¶æ˜¯å¯¹å›¾ç‰‡è¿›è¡Œäº†åˆ¤æ–­ï¼Œä½†å¹¶æœªå†™å‡ºå¯¹åº”çš„å›¾ç‰‡å‘é€ç¨‹åº(äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™æ˜¯ä¸ä¸€æ ·çš„)ï¼Œæ‰€ä»¥å®é™…åªèƒ½å‘é€æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚htmlä»£ç ã€‚æ‰€ä»¥åé¢çœ‹åˆ°çš„è¯¾ç¨‹è¡¨éƒ½æ— æ³•æ˜¾ç¤ºå›¾ç‰‡çš„åŸå› æ˜¯å®¢æˆ·ç«¯ç¨‹åºå‹æ ¹å°±æ²¡åœ¨ä¹è¿‡å®¢æˆ·ç«¯çš„è¯·æ±‚ğŸ¤£ #include \u003ciostream\u003e#include \u003cfstream\u003e#include \"TCP_SOCKET_SERVER.h\" void sendfileToWeb(SOCKET clnt, TCP_SOCKET_SERVER \u0026a, const char *filename); int main() { TCP_SOCKET_SERVER a; a.Bind(8086); a.Listen(); SOCKET clnt = a.Accept(); while (1) { sendfileToWeb(clnt, a, \"D:/Html/schedule/schedule.html\"); a.Close(clnt); clnt = a.Accept(); } } //åé¦ˆè¯·æ±‚ï¼Œå‘é€æ–‡ä»¶ä»£ç æˆ–è€…å›¾ç‰‡ç­‰äºŒè¿›åˆ¶ä¿¡æ¯ã€‚ void sendfileToWeb(SOCKET clnt, TCP_SOCKET_SERVER \u0026a, const char *filename) { //å†™å…¥è¿”å›å¤´ä¿¡æ¯ï¼šåŒ…æ‹¬çŠ¶æ€å’Œå†…å®¹ç±»å‹ char *type = nullptr; if (strstr(filename, \".html\")) type = \"text/html\"; else if (strstr(filename, \".jpg\")) type = \"image/jpg\"; else if (strstr(filename, \".png\")) type = \"image/png\"; char x[100] = {0}; sprintf(x, \"HTTP/1.1 200 ok\\r\\nContent-Type: %s\\r\\n\\r\\n\", type); //å‘é€è¿”å›å¤´ä¿¡æ¯,æ¯æ¬¡å‘é€é—´éš”éœ€è¦ä¸€å®šæ—¶é—´ï¼Œå¦åˆ™æµè§ˆå™¨å¯èƒ½æ¥æ”¶æ²¡è¿™ä¹ˆå¿« int sz1 = a.Send(clnt, x, strlen(x)); if (sz1 \u003c= 0)return; //å‘é€æ–‡ä»¶å†…å®¹åˆ°å®¢æˆ·ç«¯ std::ifstream ss(filename, std::ios::in); char html[1024] = {0}; while (ss.getline(html, 1024)) { int szz = a.Send(clnt, html, strlen(html)); if (szz \u003c= 0) return; Sleep(1); } ss.close(); } ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:3:1","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ¥æ”¶ç»“æœ ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:3:2","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ€»ç»“ æ”¶è·ï¼š äº†è§£åˆ°ç½‘ç»œé€šè®¯è¿‡ç¨‹åˆ°åº•æ˜¯æ€ä¹ˆæ ·çš„ã€‚ äº†è§£åˆ°åº•å±‚socketé€šä¿¡æ˜¯å¦‚ä½•è¿›è¡Œçš„ã€‚ å°è£…äº†socketæ“ä½œï¼Œå¢å¼ºäº†ä»£ç çš„å¤ç”¨æ€§ã€‚ å¯¹åŸºæœ¬çš„httpè¯·æ±‚è¿‡ç¨‹æœ‰æ‰€äº†è§£ï¼š åŸºæœ¬ä¸Šå°±æ˜¯æµè§ˆå™¨(å®¢æˆ·ç«¯)å¯¹ç›¸åº”çš„IPåœ°å€å‘èµ·è¯·æ±‚ï¼Œå…¶å¯¹åº”çš„æœåŠ¡å™¨è¿”å›ç»™ä½ è¿™ä¸ªç½‘é¡µçš„ä¸»é¡µï¼Œç„¶åæ ¹æ®ä½ é¼ æ ‡çš„ç‚¹å‡»ï¼Œåˆä¼šè§¦å‘httpè¯·æ±‚ï¼Œå…¶å¯¹åº”çš„æœåŠ¡å™¨å¯¹ä½ çš„è¯·æ±‚è¿›è¡Œè§£æï¼Œå¾—å‡ºä½ æƒ³è¦çš„æ–‡ä»¶ï¼Œç„¶åå‘é€ç»™ä½ ï¼Œå¾ªç¯å¾€å¤ä¸€ç›´å¦‚æ­¤ã€‚ã€‚ã€‚ ","date":"2022-01-20","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:4:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"â€ç®€å•å­¦ä¹ ä¸‹åŸºæœ¬çš„ç±»å°è£…â€œ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸ºä»€ä¹ˆéœ€è¦å¤§æ•°åŠ å‡ç±»ï¼Ÿ å¯¹äºè®¡ç®—æœºè€Œè¨€ï¼ŒåŸºæœ¬çš„æ•°æ®ç±»å‹ä¸€èˆ¬æœ€å¤šä¸º64ä½æ•°æ®è¡¨ç¤ºèŒƒå›´ï¼Œè¿™ä¸ªèŒƒå›´æ˜¯æœ‰é™çš„ï¼Œæ²¡æ³•æ— é™çš„è¡¨ç¤ºæ‰€æœ‰çš„æ•°æ®ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿè¡¨ç¤ºæ‰€æœ‰çš„å¤§æ•°ï¼Œå¹¶å®ŒæˆåŠ å‡ä¹˜é™¤å‘¢ï¼Ÿ ç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼Œç”±äºæ•°æ®éƒ½æ˜¯ç”±ä¸€ä½ä¸€ä½çš„æ•°å­—æ‰€ç»„æˆï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨æ•°ç»„ä¸­çš„æ¯ä¸€ä½è¡¨ç¤ºä¸€ä½æ•°å­—ï¼Œä¾¿å¯å®Œæˆå¯¹å¤§æ•°çš„æ¨¡æ‹Ÿäº†ã€‚ é‚£ä¹ˆæˆ‘ä»¬è¯´æ˜æ—¶å€™éœ€è¦ç”¨åˆ°å¤§æ•°æ¨¡æ‹Ÿå‘¢ï¼Ÿå¯¹ç«èµ›äººè€Œè¨€ï¼Œæœ‰å¾ˆå¤šé¢˜ç›®å®é™…ä¸Šå°±æ˜¯é«˜ç²¾åº¦å¤§æ•°æ¨¡æ‹Ÿç±»å‹ï¼Œè€Œå¯¹äºæ™®é€šçš„ç¨‹åºå‘˜è€Œè¨€ï¼Œå¤§æ•°æ¨¡æ‹Ÿä¹Ÿä»…æ˜¯åœ¨åšæŸä¸ªé€»è¾‘è¿ç®—è€Œä¿è¯ä¸ä¼šæº¢å‡ºçš„æœ€ä½³ç­–ç•¥ï¼Œé‚£ä¹ˆå¤§å®¶éš¾é“ä¸å¥½å¥‡å¦‚ä½•å®ç°ä¸€ä¸ªå¤§æ•°æ¨¡æ‹Ÿç±»å—ï¼Ÿ ç°åœ¨å°±ä»å°è£…ä¸€ä¸ªç®€å•çš„åŠ å‡ç±»å¼€å§‹äº†è§£è¿™æ ·ä¸€ä¸ªå¤§æ•°æ¨¡æ‹Ÿæ˜¯æ€ä¹ˆå®ç°çš„ğŸ‘€ ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:1:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"å¤§æ•°åŠ å‡ç±»å®ç°è¯¦è§£ ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸€ã€æµç¨‹å›¾æ€»è§ˆ å¦‚å›¾æ€»ä½“æ¥è¯´åˆ†ä¸ºäº”éƒ¨åˆ†ï¼š é™æ€æˆå‘˜å‡½æ•°ï¼šå±äºç±»çš„å…¬å…±æ¥å£(æ ¸å¿ƒ) æ„é€ å’Œææ„å‡½æ•°ï¼šæ„é€ å¯¹è±¡ä»¥åŠææ„å¯¹è±¡ æˆå‘˜æ•°æ®ï¼šç”¨äºè¿ç®—çš„æ•°æ®ä»¥åŠè¡¨ç¤ºå¯¹è±¡çš„æ•°æ® è¿ç®—ç¬¦é‡è½½ï¼šç”¨äºè‡ªå®šä¹‰è¿ç®—æ–¹å¼(æ ¸å¿ƒ) å†…éƒ¨æˆå‘˜å‡½æ•°ï¼šå±äºå¯¹è±¡çš„å…¬å…±æ¥å£ ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:1","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"äºŒã€æˆå‘˜æ•°æ®å’Œæ„é€ å‡½æ•°è¯¦è§£ æˆå‘˜æ•°æ® bool f; //æ˜¯å¦æ˜¯è´Ÿæ•°çš„æ ‡è®° char *nums; //å­˜å‚¨éç¬¦å·çš„å¤§æ•°å„ä¸ªä½ int length; //numsçš„æ•°æ®é•¿åº¦ int capacity; //numsçš„å¯ç”¨å®¹é‡ æ„é€ å’Œææ„ //ç¼ºçœæ„é€ å‡½æ•° BigInteger() : length(0), capacity(1), f(false) { nums = new char[capacity]; } //ç”¨äºè½¬åŒ–æ™®é€šå­—ç¬¦ä¸²çš„æ„é€ å‡½æ•° BigInteger(const char *n) : length(strlen(n)), f(false) { int start = 0; if (n[0] == '-') { f = true; start++; } while (start\u003clength\u0026\u0026n[start] == '0')start++; capacity = length * 10; nums = new char[capacity]; std::copy(n + start, n + length, nums); length = length - start; } //æ‹·è´æ„é€ å‡½æ•° BigInteger(BigInteger \u0026a) { capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); } //ç§»åŠ¨æ„é€ å‡½æ•°ï¼šè¿™é‡Œè°ƒç”¨äº†ç­‰äºå·ï¼Œæ ¹æ®açš„ç±»å‹æ¥å†³å®šç”¨å“ªä¸ªç­‰äºå· BigInteger(BigInteger \u0026\u0026a) :length(0){ *this = a; } //ææ„å‡½æ•° ~BigInteger() { delete[] nums; } ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:2","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸‰ã€(ç®—æ³•æ ¸å¿ƒ)é™æ€æˆå‘˜å‡½æ•°å’Œè¿ç®—ç¬¦é‡è½½è¯¦è§£ static Swap() //è°ƒç”¨stdçš„swapå®ç°å¯¹åŸºæœ¬æ•°æ®çš„äº¤æ¢ static void Swap(BigInteger \u0026a, BigInteger \u0026b) { std::swap(a.length, b.length); std::swap(a.capacity, b.capacity); std::swap(a.f, b.f); std::swap(a.nums, b.nums); } static compare() //ä¸çœ‹ç¬¦å·æ¯”è¾ƒnumsçš„å¤§å°ï¼šè¡¨ç¤ºaæ˜¯å¦æ¯”bå¤§ static bool compare(const BigInteger \u0026a,const BigInteger \u0026b) { //æ¯”è¾ƒçº¯numså¤§å°(ä¸çœ‹ç¬¦å· int n1 = a.length; int n2 = b.length; if (n1 != n2)return n1 \u003e n2; //è¿”å›aå’Œbå“ªä¸ªå¤§ï¼Œtrueåˆ™ä½aå¤§ int i = 0; while (i \u003c n1 \u0026\u0026 a.nums[i] == b.nums[i])i++; //a bä¸€æ ·é•¿çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒä¸¤ä¸ªçš„å€¼ if (i == n1) return false; return a.nums[i] \u003e b.nums[i]; } static isEqual() //è¡¨ç¤ºaå’Œbæ˜¯å¦ç›¸ç­‰ bool isEqual(BigInteger \u0026a, BigInteger \u0026b) { if (a.f != b.f || (a.length != b.length))return false; int i = 0; while (i \u003c a.length \u0026\u0026 a.nums[i] == b.nums[i])i++; return i == a.length \u0026\u0026 a.f == b.f; } (*æ ¸å¿ƒç®—æ³•)static add() ä¸çœ‹ç¬¦å·çš„åŠ æ³•ï¼Œç¬¦å·è¿™æ–¹é¢ç”±é‡è½½åŠ æ³•è¿ç®—ç¬¦æ§åˆ¶ã€‚ static BigInteger add(BigInteger \u0026a, BigInteger \u0026b) { //ä¸çœ‹ç¬¦å·çš„åŠ æ³• a.reverse();//å°¾ç«¯å¯¹é½ b.reverse(); BigInteger t; int up = 0; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta + tb + up; t.push_back(base % 10 + '0'); up = base / 10; } if (up) t.push_back(up + '0'); t.reverse();//è¿”å›åŸä½ a.reverse(); b.reverse(); return t; } (*æ ¸å¿ƒç®—æ³•)static minus() ä¸çœ‹ç¬¦å·çš„å‡æ³•,é»˜è®¤äº†açš„numså¤§å°(ä¸çœ‹ç¬¦å·)æ˜¯æ¯”bå¤§çš„ã€‚ static BigInteger minus(BigInteger \u0026a, BigInteger \u0026b) { a.reverse(); b.reverse(); BigInteger t; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta - tb; if (base \u003c 0) { base += 10; a[i + 1]--; } t.push_back(base + '0'); } t.reverse(); a.reverse(); b.reverse(); return t; } char \u0026operator[] char \u0026operator[](int i) { return nums[i]; } BigInteger \u0026operator= ç”¨äº†ä¸¤ä¸ªç‰ˆæœ¬â€“å³å€¼å¼•ç”¨å’Œå·¦å€¼å¼•ç”¨ç‰ˆæœ¬ å³å€¼å¼•ç”¨å»¶é•¿å¯¿å‘½ï¼Œç”¨äº¤æ¢çš„æ–¹å¼å®ç°(æ¯•ç«Ÿæ˜¯å°†äº¡å€¼ BigInteger \u0026operator=(BigInteger\u0026\u0026 a) { //Swap\u0026Copyæ–¹å¼å®ç°å³å€¼èµ‹å€¼é‡è½½ Swap(*this, a); return *this; } å·¦å€¼å¼•ç”¨æ·±æ‹·è´ BigInteger \u0026operator=(const BigInteger \u0026a) {//æ·±æ‹·è´ if (length != 0)//å¦‚æœä¸æ˜¯åˆå§‹åŒ–è°ƒç”¨çš„ = ï¼Œåˆ™è‚¯å®šéœ€è¦å…ˆæŠŠåŸæ¥çš„å†…å­˜deleteæ‰ delete[]nums; capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); return *this; } bool operator\u003c é‡è½½äº†å°äºå·ï¼Œå¥½å¤„åœ¨äºå¯ä»¥ç›´æ¥åˆ©ç”¨stlè¿›è¡Œå„ç§æ’åºæ“ä½œäº†ã€‚ æ³¨æ„ï¼šä¸€å®šè¦å†™æˆconstç‰ˆæœ¬çš„æˆå‘˜å‡½æ•°ï¼Œä¸ç„¶STLåº“æ— æ³•è°ƒç”¨ï¼Œå› ä¸ºSTLåº“ä¸­çš„æ‰€æœ‰æ¯”è¾ƒéƒ½æ˜¯åŸºäºconstå¯¹è±¡ã€‚ bool operator\u003c(const BigInteger \u0026a) const { if (f \u0026\u0026 !a.f) { //å…¶ä¸­ä¸€ä¸ªä¸ºè´Ÿæ•°ï¼Œåˆ™é‚£ä¸ªæ˜¯æ›´å°çš„ return true; } else if (!f \u0026\u0026 a.f) return false; if (f) { //ä¸¤è€…éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå·¦è¾¹çš„å€¼è¦æ›´å¤§åˆ™ä¸ºtrue return compare(*this, a); }//ä¸¤è€…å‡ä¸ºæ­£æ•°ï¼Œåˆ™å€¼æ›´å°çš„åœ¨å·¦è¾¹ä¸ºtrue return compare(a, *this); } (*æ ¸å¿ƒç®—æ³•)BigInteger operator+ åˆ©ç”¨é™æ€æˆå‘˜å‡½æ•°å®Œæˆæ— ç¬¦å·çš„åŠ å‡ï¼Œç„¶ååœ¨è¿™é‡Œè¿›è¡Œåˆ¤æ–­å„ç§ç¬¦å·æƒ…å†µï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·æƒ…å†µè¿›è¡Œä¸åŒçš„åŠ æ³•å¤„ç†ã€‚ æ³¨æ„åœ¨è°ƒç”¨minusä¹‹å‰éœ€è¦æ¯”è¾ƒä¸¤ä¸ªæ•°çš„numsè°æ›´å¤§ï¼Œæ›´å¤§çš„æ”¾åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šï¼ BigInteger operator+(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µï¼Œç›´æ¥ç›¸åŠ ï¼Œå†æ”¹ç¬¦å· res = add(*this, a); flag = true; } else if (a.f \u0026\u0026 !f) {//å·¦æ­£å³è´Ÿ if (compare(a, *this)) { //çœ‹è´Ÿæ•°å¯¹åº”çš„numsæ˜¯å¦æ¯”æ­£æ•°å¤§ flag = true; res = minus(a, *this); } else { flag = false; res = minus(*this, a); } } else if (!a.f \u0026\u0026 f) { if (compare(*this, a)) { //ä¸ä¸Šä¸€ä¸ªç›¸åŒ flag = true; res = minus(*this, a); } else { flag = false; res = minus(a, *this); } } else { //åŒæ—¶ä¸ºæ­£æ•°å°±æ˜¯æœ€ç®€å•çš„åŠ æ³• flag = false; res = add(*this, a); } res.f = flag; return res; } (*æ ¸å¿ƒç®—æ³•)BigInteger operator- åŒæ ·æ˜¯åˆ†ç±»è®¨è®ºï¼ŒåŒæ ·æ˜¯æ ¹æ®ä¸åŒçš„ç±»å‹è°ƒç”¨minuså’Œaddå‡½æ•°ã€‚ ä¸æ­£æ•°ä¸åŒçš„å¤„ç†åœ¨äºå¯¹ç¬¦å·çš„å¤„ç†ï¼Œå¦‚æœåŒä¸ºè´Ÿæ•°ï¼Œåˆ™éœ€è¦åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç›¸ç­‰ï¼Œé˜²æ­¢ä¸¤æ•°ç›¸ç­‰ç›¸å‡åå‡ä¸º 0ï¼Œè€Œè¢«å¤„ç†ä¸º -0 ã€‚ BigInteger operator-(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µ--å·¦è¾¹-å³è¾¹==(ä¸çœ‹ç¬¦å·)å³è¾¹-(ä¸çœ‹ç¬¦å·)å·¦è¾¹ if (compare(a, *this)) { flag = false; res = minus(a, *this); } else { if (isEqual(*this, a)) flag = false; else flag = true; res = minus(*this, a); } } else if (a.f \u0026\u0026 !f) { //å·¦è¾¹ä¸ºæ­£ï¼Œå³è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==å·¦è¾¹+å³è¾¹ flag = false; res = add(a, *this); } else if (!a.f \u0026\u0026 f) { //å³è¾¹ä¸ºæ­£ï¼Œå·¦è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==ä¸¤è¾¹ä¸ºè´Ÿçš„åŠ æ³• flag = true; res = add(a, *this); } else { //åŒæ—¶ä¸ºæ­£æ•°--å·¦è¾¹-å³è¾¹==å·¦è¾¹-å³è¾¹(åˆ†ç±»è®¨è®ºæ­£è´Ÿ if (compare(a, *this)) { //å³è¾¹\u003eå·¦è¾¹,ç¬¦å·ä¸ºè´Ÿ res = minus(a, *this); flag = true; } else { //å³è¾¹\u003cå·¦è¾¹ï¼Œç¬¦å·ä¸ºæ­£ res = minus(*this, a); flag = false; } } res.f = flag; return res; } ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:3","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"å››ã€å…¶ä»–å†…éƒ¨æˆå‘˜å‡½æ•°è¯¦è§£ å‘å¤–æä¾›çš„getæ¥å£ int getCap() { return capacity; } int getLength() { return length; } bool isNegative() { return f; } bool isEmpty() { return length == 0; } è¿›è¡Œèµ‹å€¼æ“ä½œæ‰€å¿…å¤‡çš„push_backå’Œreverseå‡½æ•° void push_back(char x) { if (length \u003e= capacity) {//æ‰©å®¹æ“ä½œ capacity *= 2; char *t = nums; nums = new char[capacity]; std::copy(t, t + length, nums); delete[]t; } nums[length++] = x; } void reverse() {//åè½¬æ“ä½œ int l = 0, r = length - 1; while (l \u003c r) { std::swap(nums[l], nums[r]); l++; r--; } } æ— å…³ç´§è¦çš„ read() è¾“å…¥æ¥å£ å’Œ print() è¾“å‡ºæµ‹è¯•æ¥å£ void print() { if (f) printf(\"-\"); nums[length] = '\\0'; int i = 0; while (nums[i] == '0')i++; printf(\"%s\", nums + i); } void read() {//åˆ©ç”¨getchar()ç»™å¯¹è±¡èµ‹ä¸Šæ•°æ® char c = getchar(); if (c == '-') { f = true; c = getchar(); } while (c == '0') c = getchar();//å°†å‰å¯¼0æ¶ˆè€—æ‰ while (c != '\\n') { push_back(c);//ä¸æ–­çš„è°ƒç”¨push_backå³å¯ c = getchar(); } } ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:4","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"æ•´ç†ä»£ç  ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:3:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":".hå£°æ˜æ–‡ä»¶ å¦‚æœåœ¨å£°æ˜ç±»çš„åŒæ—¶è¿›è¡Œå®šä¹‰ï¼Œåˆ™å†…éƒ¨çš„æˆå‘˜å‡½æ•°é»˜è®¤å°±æ˜¯å†…è”çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æŠŠçŸ­å°çš„ä»£ç è¿›è¡Œå†…è”ï¼Œä»¥ä¸‹çš„å®ç°å‡æ˜¯ä»¥è¯¥è§„å¾‹è¿›è¡Œã€‚ // // Created by Alone on 2021/10/7. // #ifndef MY_TINY_STL_BIGINTEGER_H #define MY_TINY_STL_BIGINTEGER_H #include \u003calgorithm\u003e#include \u003ciostream\u003e#include \u003ccstring\u003e class BigInteger { bool f; char *nums; int length; int capacity; public: //æ„é€ å‡½æ•° BigInteger() : length(0), capacity(1), f(false) { //ç¼ºçœæ„é€ å‡½æ•° nums = new char[capacity]; } BigInteger(const char *n); BigInteger(const BigInteger \u0026a); BigInteger(BigInteger \u0026\u0026a); ~BigInteger() { //ææ„å‡½æ•° delete[] nums; } public: //é™æ€å‡½æ•° static void Swap(BigInteger \u0026a, BigInteger \u0026b); static bool compare(const BigInteger \u0026a, const BigInteger \u0026b); bool isEqual(BigInteger \u0026a, BigInteger \u0026b); static BigInteger add(BigInteger \u0026a, BigInteger \u0026b); static BigInteger minus(BigInteger \u0026a, BigInteger \u0026b); public: //è¿ç®—ç¬¦é‡è½½ char \u0026operator[](int i) { return nums[i]; } BigInteger \u0026operator=(BigInteger \u0026\u0026a) { //Swap\u0026Copyæ–¹å¼å®ç°å³å€¼èµ‹å€¼é‡è½½ Swap(*this, a); return *this; } BigInteger \u0026operator=(const BigInteger \u0026a); bool operator\u003c(const BigInteger \u0026a) const; BigInteger operator+(BigInteger \u0026a); BigInteger operator-(BigInteger \u0026a); public: //å¯¹è±¡çš„åŸºæœ¬æˆå‘˜å‡½æ•° int getCap() { return capacity; } int getLength() { return length; } bool isNegative() { return f; } bool isEmpty() { return length == 0; } void reverse(); void push_back(char x); void print(); void read(); }; #endif //MY_TINY_STL_BIGINTEGER_H ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:3:1","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":".cppå®šä¹‰å¹¶å®ç° // // Created by Alone on 2021/10/7. // #include \"BigInteger.h\" //@æ„é€ å‡½æ•°å®ç° BigInteger::BigInteger(const char *n) : length(strlen(n)), f(false) { //ç”¨äºåˆå§‹å€¼çš„æ„é€ å‡½æ•° int start = 0; if (n[0] == '-') { f = true; start++; } while (start \u003c length \u0026\u0026 n[start] == '0')start++; capacity = length * 10; nums = new char[capacity]; std::copy(n + start, n + length, nums); length = length - start; } BigInteger::BigInteger(const BigInteger \u0026a) { //æ‹·è´æ„é€ å‡½æ•° capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); } BigInteger::BigInteger(BigInteger \u0026\u0026a) : length(0) { //ç§»åŠ¨æ„é€ å‡½æ•° *this = a; } //@é™æ€å‡½æ•°å®ç° void BigInteger::Swap(BigInteger \u0026a, BigInteger \u0026b) { std::swap(a.length, b.length); std::swap(a.capacity, b.capacity); std::swap(a.f, b.f); std::swap(a.nums, b.nums); } bool BigInteger::compare(const BigInteger \u0026a, const BigInteger \u0026b) { int n1 = a.length; int n2 = b.length; if (n1 != n2)return n1 \u003e n2; //è¿”å›aå’Œbå“ªä¸ªå¤§ï¼Œtrueåˆ™ä½aå¤§ int i = 0; while (i \u003c n1 \u0026\u0026 a.nums[i] == b.nums[i])i++; //a bä¸€æ ·é•¿çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒä¸¤ä¸ªçš„å€¼ if (i == n1) return false; return a.nums[i] \u003e b.nums[i]; } bool BigInteger::isEqual(BigInteger \u0026a, BigInteger \u0026b) { if (a.f != b.f || (a.length != b.length))return false; int i = 0; while (i \u003c a.length \u0026\u0026 a.nums[i] == b.nums[i])i++; return i == a.length \u0026\u0026 a.f == b.f; } BigInteger BigInteger::add(BigInteger \u0026a, BigInteger \u0026b) { a.reverse();//å°¾ç«¯å¯¹é½ b.reverse(); BigInteger t; int up = 0; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta + tb + up; t.push_back(base % 10 + '0'); up = base / 10; } if (up) t.push_back(up + '0'); t.reverse();//è¿”å›åŸä½ a.reverse(); b.reverse(); return t; } BigInteger BigInteger::minus(BigInteger \u0026a, BigInteger \u0026b) { a.reverse(); b.reverse(); BigInteger t; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta - tb; if (base \u003c 0) { base += 10; a[i + 1]--; } t.push_back(base + '0'); } t.reverse(); a.reverse(); b.reverse(); return t; } //@è¿ç®—ç¬¦é‡è½½å®ç° BigInteger \u0026BigInteger::operator=(const BigInteger \u0026a) { if (length != 0)//å¦‚æœä¸æ˜¯åˆå§‹åŒ–è°ƒç”¨çš„ = ï¼Œåˆ™è‚¯å®šéœ€è¦å…ˆæŠŠåŸæ¥çš„å†…å­˜deleteæ‰ delete[]nums; capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); return *this; } BigInteger BigInteger::operator+(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µï¼Œç›´æ¥ç›¸åŠ ï¼Œå†æ”¹ç¬¦å· res = add(*this, a); flag = true; } else if (a.f \u0026\u0026 !f) {//å·¦æ­£å³è´Ÿ if (compare(a, *this)) { //çœ‹è´Ÿæ•°å¯¹åº”çš„numsæ˜¯å¦æ¯”æ­£æ•°å¤§ flag = true; res = minus(a, *this); } else { flag = false; res = minus(*this, a); } } else if (!a.f \u0026\u0026 f) { if (compare(*this, a)) { //ä¸ä¸Šä¸€ä¸ªç›¸åŒ flag = true; res = minus(*this, a); } else { flag = false; res = minus(a, *this); } } else { //åŒæ—¶ä¸ºæ­£æ•°å°±æ˜¯æœ€ç®€å•çš„åŠ æ³• flag = false; res = add(*this, a); } res.f = flag; return res; } BigInteger BigInteger::operator-(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µ--å·¦è¾¹-å³è¾¹==(ä¸çœ‹ç¬¦å·)å³è¾¹-(ä¸çœ‹ç¬¦å·)å·¦è¾¹ if (compare(a, *this)) { flag = false; res = minus(a, *this); } else { if (isEqual(*this, a)) flag = false; else flag = true; res = minus(*this, a); } } else if (a.f \u0026\u0026 !f) { //å·¦è¾¹ä¸ºæ­£ï¼Œå³è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==å·¦è¾¹+å³è¾¹ flag = false; res = add(a, *this); } else if (!a.f \u0026\u0026 f) { //å³è¾¹ä¸ºæ­£ï¼Œå·¦è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==ä¸¤è¾¹ä¸ºè´Ÿçš„åŠ æ³• flag = true; res = add(a, *this); } else { //åŒæ—¶ä¸ºæ­£æ•°--å·¦è¾¹-å³è¾¹==å·¦è¾¹-å³è¾¹(åˆ†ç±»è®¨è®ºæ­£è´Ÿ if (compare(a, *this)) { //å³è¾¹\u003eå·¦è¾¹,ç¬¦å·ä¸ºè´Ÿ res = minus(a, *this); flag = true; } else { //å³è¾¹\u003cå·¦è¾¹ï¼Œç¬¦å·ä¸ºæ­£ res = minus(*this, a); flag = false; } } res.f = flag; return res; } bool BigInteger::operator\u003c(const BigInteger \u0026a) const { if (f \u0026\u0026 !a.f) { //å…¶ä¸­ä¸€ä¸ªä¸ºè´Ÿæ•°ï¼Œåˆ™é‚£ä¸ªæ˜¯æ›´å°çš„ return true; } else if (!f \u0026\u0026 a.f) return false; if (f) { //ä¸¤è€…éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå·¦è¾¹çš„å€¼è¦æ›´å¤§åˆ™ä¸ºtrue return compare(*this, a); }//ä¸¤è€…å‡ä¸ºæ­£æ•°ï¼Œåˆ™å€¼æ›´å°çš„åœ¨å·¦è¾¹ä¸ºtrue return compare(a, *this); } //@åŸºæœ¬æˆå‘˜å‡½æ•° void BigInteger::reverse() { int l = 0, r = length - 1; while (l \u003c r) { std::swap(nums[l], nums[r]); l++","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:3:2","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"åŠŸèƒ½æµ‹è¯• ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸€ã€åŸºæœ¬çš„åŠ å‡æµ‹è¯• è¿è¡Œçš„æµ‹è¯•ä»£ç ï¼š æ‰“å°è¾“å‡º pythonè¾“å‡º æ€»ç»“ ä¸pythonè¾“å‡ºæ— å¼‚ï¼Œæ•…é€šè¿‡æµ‹è¯•ã€‚ä½†ç¢äºæµ‹è¯•æ•°æ®å¤ªè¿‡å°‘ï¼Œä¸æ˜¯å¾ˆæœ‰è¯´æœåŠ›ï¼Œè¿˜æœ‰åé¢çš„è§£é¢˜æµ‹è¯•ã€‚ ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:1","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"äºŒã€å­˜å‚¨ä¸ªäººè¾“å…¥çš„æ•°æ®+æ’åºæµ‹è¯• æµ‹è¯•ä»£ç (æ–¹ä¾¿æµ‹è¯•åªè¾“å…¥äº†10ä¸ªæ•°æ®)ï¼š æ’åºè¾“å‡ºï¼š ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:2","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸‰ã€è§£é¢˜æµ‹è¯• æ­£å¥½æœ€è¿‘åˆ·çš„PATç”²çº§å°±æ¶‰åŠåˆ°å¤§æ•°çš„åŠ å‡hhhï¼ é¢˜ç›®æè¿° OJå¹³å° è§£é¢˜ä»£ç  #include \"bits/stdc++.h\" class BigInteger { bool f; char *nums; int length; int capacity; public://æ„é€ å‡½æ•° BigInteger() : length(0), capacity(1), f(false) { //ç¼ºçœæ„é€ å‡½æ•° nums = new char[capacity]; } BigInteger(const char *n) : length(strlen(n)), f(false) { //ç”¨äºåˆå§‹å€¼çš„æ„é€ å‡½æ•° int start = 0; if (n[0] == '-') { f = true; start++; } while (start \u003c length \u0026\u0026 n[start] == '0')start++; capacity = length * 10; nums = new char[capacity]; std::copy(n + start, n + length, nums); length = length - start; } BigInteger(const BigInteger \u0026a) { //æ‹·è´æ„é€ å‡½æ•° capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); } BigInteger(BigInteger \u0026\u0026a) : length(0) { //ç§»åŠ¨æ„é€ å‡½æ•° *this = a; } ~BigInteger() { //ææ„å‡½æ•° delete[] nums; } public://é™æ€æˆå‘˜å‡½æ•° static void Swap(BigInteger \u0026a, BigInteger \u0026b) { std::swap(a.length, b.length); std::swap(a.capacity, b.capacity); std::swap(a.f, b.f); std::swap(a.nums, b.nums); } static bool compare(const BigInteger \u0026a, const BigInteger \u0026b) { //æ¯”è¾ƒçº¯numså¤§å°(ä¸çœ‹ç¬¦å· int n1 = a.length; int n2 = b.length; if (n1 != n2)return n1 \u003e n2; //è¿”å›aå’Œbå“ªä¸ªå¤§ï¼Œtrueåˆ™ä½aå¤§ int i = 0; while (i \u003c n1 \u0026\u0026 a.nums[i] == b.nums[i])i++; //a bä¸€æ ·é•¿çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒä¸¤ä¸ªçš„å€¼ if (i == n1) return false; return a.nums[i] \u003e b.nums[i]; } bool isEqual(BigInteger \u0026a, BigInteger \u0026b) { if (a.f != b.f || (a.length != b.length))return false; int i = 0; while (i \u003c a.length \u0026\u0026 a.nums[i] == b.nums[i])i++; return i == a.length \u0026\u0026 a.f == b.f; } static BigInteger add(BigInteger \u0026a, BigInteger \u0026b) { //ä¸çœ‹ç¬¦å·çš„åŠ æ³• a.reverse();//å°¾ç«¯å¯¹é½ b.reverse(); BigInteger t; int up = 0; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta + tb + up; t.push_back(base % 10 + '0'); up = base / 10; } if (up) t.push_back(up + '0'); t.reverse();//è¿”å›åŸä½ a.reverse(); b.reverse(); return t; } static BigInteger minus(BigInteger \u0026a, BigInteger \u0026b) { //ä¸çœ‹ç¬¦å·çš„å‡æ³•,é»˜è®¤äº†açš„é•¿åº¦æˆ–è€…å¤§å°æ˜¯æ¯”bè¦å¤§çš„(æ‰€ä»¥å¤–ç•Œä¸è¦ä¹±è°ƒç”¨ a.reverse(); b.reverse(); BigInteger t; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta - tb; if (base \u003c 0) { base += 10; a[i + 1]--; } t.push_back(base + '0'); } t.reverse(); a.reverse(); b.reverse(); return t; } public://æˆå‘˜å‡½æ•°å’Œé‡è½½è¿ç®—ç¬¦ char \u0026operator[](int i) { return nums[i]; } BigInteger \u0026operator=(BigInteger \u0026\u0026a) { //Swap\u0026Copyæ–¹å¼å®ç°å³å€¼èµ‹å€¼é‡è½½ Swap(*this, a); return *this; } BigInteger \u0026operator=(const BigInteger \u0026a) {//æ·±æ‹·è´ if (length != 0)//å¦‚æœä¸æ˜¯åˆå§‹åŒ–è°ƒç”¨çš„ = ï¼Œåˆ™è‚¯å®šéœ€è¦å…ˆæŠŠåŸæ¥çš„å†…å­˜deleteæ‰ delete[]nums; capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); return *this; } int getCap() { return capacity; } int getLength() { return length; } bool isNegative() { return f; } bool isEmpty() { return length == 0; } void reverse() { int l = 0, r = length - 1; while (l \u003c r) { std::swap(nums[l], nums[r]); l++; r--; } } void push_back(char x) { if (length \u003e= capacity) { capacity *= 2; char *t = nums; nums = new char[capacity]; std::copy(t, t + length, nums); delete[]t; } nums[length++] = x; } bool operator\u003c(const BigInteger \u0026a) const { if (f \u0026\u0026 !a.f) { //å…¶ä¸­ä¸€ä¸ªä¸ºè´Ÿæ•°ï¼Œåˆ™é‚£ä¸ªæ˜¯æ›´å°çš„ return true; } else if (!f \u0026\u0026 a.f) return false; if (f) { //ä¸¤è€…éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå·¦è¾¹çš„å€¼è¦æ›´å¤§åˆ™ä¸ºtrue return compare(*this, a); }//ä¸¤è€…å‡ä¸ºæ­£æ•°ï¼Œåˆ™å€¼æ›´å°çš„åœ¨å·¦è¾¹ä¸ºtrue return compare(a, *this); } BigInteger operator+(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µï¼Œç›´æ¥ç›¸åŠ ï¼Œå†æ”¹ç¬¦å· res = add(*this, a); flag = true; } else if (a.f \u0026\u0026 !f) {//å·¦æ­£å³è´Ÿ if (compare(a, *this)) { //çœ‹è´Ÿæ•°å¯¹åº”çš„numsæ˜¯å¦æ¯”æ­£æ•°å¤§ flag = true; res = minus(a, *this); } else { flag = false; res = minus(*this, a); } } else if (!a.f \u0026\u0026 f) { if (compare(*this, a)) { //ä¸ä¸Šä¸€ä¸ªç›¸åŒ flag = true; res = minus(*this, a); } else { flag = false; res = minus(a, *this); } } else { //åŒæ—¶ä¸ºæ­£æ•°å°±æ˜¯æœ€ç®€å•çš„åŠ æ³• flag = false; res = add(*this, a); } res.f = flag; return res; } BigInteger operator-(BigInteger \u0026a","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:3","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"æ€»ç»“ å¾ˆå¤šäººï¼Œå¯èƒ½è§‰å¾—åšé¡¹ç›®ä¸€å®šå¾—æ˜¯é‚£ç§é«˜å¤§ä¸Šï¼Œåˆæˆ–è€…æ˜¯é‚£ç§è´ªåƒè›‡å°æ¸¸æˆã€æ‰«é›·å°æ¸¸æˆç±»å‹ï¼Œå®é™…ä¸Šåªè¦ä½ æœ‰å…´è¶£ï¼Œä»»ä½•ä¸€ä¸ªä¸œè¥¿éƒ½èƒ½æˆä¸ºä½ çš„ç»ƒæ‰‹é¡¹ç›®ï¼Œå¹¶ä¸”æ”¶è·æ”¶è·ä¹Ÿè®¸æ¯”ä½ è·Ÿé£å»å¼„å‡ ä¸ªå°æ¸¸æˆæ›´å¤§ã€‚ åšè¿™ä¸ªå°é¡¹ç›®ï¼Œæˆ‘çš„æ”¶è·æ˜¯ï¼Œå¯¹C++çš„è¯­æ³•æ›´åŠ çš„äº†è§£äº†ï¼Œå…³äºç§»åŠ¨æ„é€ å™¨ã€æ‹·è´æ„é€ å™¨ã€èµ‹å€¼é‡è½½è¿™å—å¼„å¾—æ›´æ¸…æ¥šäº†ï¼Œæœ€å¤§çš„æ”¶è·åœ¨äºå¼ºåŒ–äº†ä¸€ä¸ªç±»çš„è®¾è®¡æ€è·¯ï¼Œè¿™ä¸ªæ˜¯æœ€é‡è¦çš„ã€‚ å¤šå†™ä¸€äº›ç±»çš„å®ç°ï¼Œä¸ä»…æœ‰åˆ©äºå¯¹ç®—æ³•å’Œè¯­è¨€è¯­æ³•çš„ç†è§£ï¼Œæ›´å¤§çš„æ”¶è·åœ¨äºå¯¹å„ä¸ªåŠŸèƒ½çš„è®¾è®¡æ€è·¯ï¼Œä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬æœ€éœ€è¦çš„å°±æ˜¯è¿™æ ·çš„é€»è¾‘æ€ç»´ï¼Œä»æ¥åˆ°éœ€æ±‚å¼€å§‹ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½è¿…é€Ÿçš„æŠ½è±¡å‡ºå„ç§å®ç°æ–¹æ¡ˆï¼Œç„¶åè¿›è¡Œä¸æ–­çš„ä¼˜åŒ–ï¼Œå¾—å‡ºå±äºè‡ªå·±çš„ä»£ç ï¼ ","date":"2022-01-20","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:5:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ç°æºç åœ¨çº¿æŸ¥çœ‹ å¦‚æœå¯¹äºç±»çš„è®¾è®¡å·²ç»éå¸¸æ¸…æ¥šï¼Œåªæ˜¯è¿›æ¥æƒ³çœ‹çœ‹æˆ‘çš„è¿™ä¸ªæ³›å‹æ¨¡æ¿æºä»£ç ï¼Œé‚£ä¹ˆç›´æ¥ç‚¹åˆ°ä¸‹é¢è¿™ä¸ªé“¾æ¥è¿›è¡ŒæŸ¥çœ‹ï¼š æºç é“¾æ¥ ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:0:0","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"ä»€ä¹ˆæ˜¯çŸ©é˜µå¿«é€Ÿå¹‚ï¼Ÿ å…³äºå¿«é€Ÿå¹‚ï¼Œå°±æ˜¯åˆ©ç”¨äºŒè¿›åˆ¶è¿›è¡Œæ±‚è§£æŸä¸ªæ•°çš„å¹‚çš„å¿«é€Ÿæ–¹æ³•ã€‚ åé¢ä¼šå¯¹å¿«é€Ÿå¹‚çš„åŸç†è¿›è¡Œç®€å•è®²è§£ï¼Œå¦‚æœè¿˜æ˜¯ä¸æ‡‚ï¼Œè¯·è‡ªè¡Œç™¾åº¦ã€‚ ç›¸ä¿¡æœ‰å¾ˆå¤šå°ä¼™ä¼´æ˜¯åˆå…¥å¤§å­¦çš„ä¸–ç•Œï¼Œå¯èƒ½è¿˜æ²¡å­¦è¿‡çº¿æ€§ä»£æ•°ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œäºæ˜¯ä¹ä¸çŸ¥é“çŸ©é˜µæ˜¯ä»€ä¹ˆï¼Œæˆ‘æ¨èä¸€ä¸ªç½‘ç«™å»çœ‹çœ‹çŸ©é˜µçš„ä¹˜æ³•æ˜¯æ€ä¹ˆè¿ç®—çš„ï¼Œä¸‹é¢æ˜¯ç½‘ç«™é“¾æ¥ï¼šï¼ˆè¯è¯´how toè¿™ä¸ªç½‘ç«™è¿˜çœŸæ˜¯ç‰›æ‰¹ï¼Œä»€ä¹ˆä¸œè¥¿éƒ½æœ‰æ•™ç¨‹ï¼Œè€Œä¸”è´¨é‡è¿˜è´¼é«˜ï¼ğŸ˜‚ï¼‰ çŸ©é˜µä¹˜æ³•çš„è®¡ç®—æ–¹å¼ é‚£ä¹ˆå¦‚ä½•ç”¨ä»£ç è¡¨ç¤ºçŸ©é˜µä»¥åŠä»–çš„ä¹˜æ³•å‘¢ï¼Ÿ å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸‰å±‚å¾ªç¯è¿›è¡Œæ§åˆ¶å³å¯ã€‚ å¦‚ï¼šæˆ‘è¿™é‡Œæ˜¯C++çš„é‡è½½è¿ç®—ç¬¦ Matrix æ˜¯æˆ‘å®šä¹‰çš„ä¸€ä¸ªç±»ã€‚ Matrix\u0026 operator*(Matrix\u0026 b){ assert(b.date!=NULL \u0026\u0026 date!=NULL \u0026\u0026 m==b.n); ll tmp[n][b.m]; for(int i=0;i\u003cn;i++){ for(int j=0;j\u003cb.m;j++){ ll sum = 0; for(int k=0;k\u003cm;k++){ sum = (sum + date[i][k]*b.date[k][j])%MOD; } tmp[i][j] = sum; } } this-\u003em = b.m; for(int i=0;i\u003cn;i++){ for (int j = 0; j \u003c m; ++j) { date[i][j] = tmp[i][j]; } } return *this; } ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:1:0","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ€ä¹ˆè¿›è¡ŒçŸ©é˜µå¿«é€Ÿå¹‚çš„è¿ç®—ï¼Ÿ å…³äºå¦‚ä½•çŸ©é˜µå¿«é€Ÿå¹‚ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ç®€å•çš„å¿«é€Ÿå¹‚ã€‚ è¯´æ˜¯å¿«é€Ÿå¹‚å°±æ˜¯é€šè¿‡ä½è¿ç®—å®ç°å¿«é€Ÿçš„åŒæ•°ç´¯ä¹˜ã€‚ ç®€è¿°ä¸€ä¸‹å¿«é€Ÿå¹‚çš„åŸç†ï¼š åŸç†å°±æ˜¯ï¼Œå¦‚æœè¦æ±‚xçš„3æ¬¡å¹‚ï¼Œé‚£ä¹ˆå¯ä»¥è½¬åŒ–ä¸ºæ±‚ x*x çš„ 2 æ¬¡å¹‚ï¼Œè€Œæ±‚ä¸€ä¸ªæ•°çš„ 2^n å¹‚æ˜¯å¾ˆç®€å•çš„ï¼Œæ¯”å¦‚è¿›è¡Œä¸€æ¬¡ x *= x ä¾¿å¾—åˆ° x çš„äºŒæ¬¡æ–¹ã€‚è€Œå†è¿›è¡Œä¸€æ¬¡ x *= x å°±å¾—åˆ°äº† 4 æ¬¡æ–¹ï¼Œç»§ç»­ä¾¿å¯å¾—åˆ° 8/16... æ€»ä¹‹æ˜¯ log2N çš„æ—¶é—´ã€‚ ä»£ç å¦‚ä¸‹ï¼š int QuickPow(int x,int n){ int c = n; int res = 1; while(c!=0){ if(c\u00261!=0){ res *= x; } c \u003e\u003e= 1; x *= x; } return res; } é‚£ä¹ˆçŸ©é˜µçš„å¿«é€Ÿå¹‚å¦‚ä½•è¿›è¡Œï¼Ÿ æŠŠä¸Šè¿°çš„ int ç±»å‹æ¢æˆè‡ªå·±å®šä¹‰çš„çŸ©é˜µå°±æ˜¯çŸ©é˜µçš„å¿«é€Ÿå¹‚äº†ã€‚ æˆ‘ç›´æ¥è´´ä¸ŠC++å®ç°çš„é‡è½½è¿ç®—ç¬¦åçš„ç±»çš„å¿«é€Ÿå¹‚å†™æ³•ï¼š è¿™é‡Œçš„quickPowè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨åˆ°è¿™ä¸ªçŸ©é˜µé‡Œçš„æ•°æ®è¿›è¡Œè¿ç®—ã€‚thisè¡¨ç¤ºæŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆã€‚init() æˆå‘˜å‡½æ•°è¡¨ç¤ºåˆå§‹åŒ–ä¸ºå•ä½çŸ©é˜µã€‚ void quickPow(ll c){ if(c==1||c\u003c0)return; if(c==0){ init(); return; } Matrix tmp(*this); init(); while (c){ if(c\u00261){ *this = *this * tmp; } c \u003e\u003e= 1; tmp = tmp*tmp; } } ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:1:1","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"ä¸ºä»€ä¹ˆçªç„¶æƒ³å†™è¿™ä¸ªæ¨¡æ¿ï¼Ÿ ä¸»è¦æ˜¯å› ä¸ºæœ€è¿‘åšäº†å‡ é“å¿«é€Ÿå¹‚çš„é¢˜ç›®ï¼Œè¢«å‘çš„å¾ˆæƒ¨ï¼Œç„¶åå°±çªç„¶æƒ³è®¾è®¡ä¸€ä¸ªæ¨¡æ¿äº†ï¼Œä¸»è¦æ˜¯ my_tiny_stl è¿™ä¸ªä»“åº“ä¹Ÿå¥½ä¹…æ²¡æ›´æ–°äº†ğŸ˜‚ ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:2:0","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"é¢˜ç›® OJç½‘ç«™ ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:2:1","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æˆ‘æ˜¯å¦‚ä½•è¢«å‘çš„ é¦–å…ˆæ‹¿åˆ°è¿™é“é¢˜ï¼Œæˆ‘ä¾¿é©¬ä¸Šå¼€å§‹ç®€å•çš„O(n)é€’æ¨æ³•å®ç°ï¼Œç„¶åæäº¤ï¼Œç„¶åã€‚ã€‚è¶…æ—¶ã€‚ã€‚ å®šçœ¼ä¸€çœ‹ï¼Œæ•°æ®é‡åŸæ¥è¿™ä¹ˆå¤§ï¼ åé¢ä¸€æƒ³ï¼Œè‚¯å®šæ˜¯çŸ©é˜µå¿«é€Ÿå¹‚äº†ï¼Œå…ˆæƒ³å‡ºä»¥ä¸‹çŸ©é˜µçš„é€’æ¨å¼å­ï¼š è¿›è€Œé¢˜ç›®ä¾¿å¯å¾—åˆ°æ±‚è§£ã€‚ ç„¶åæˆ‘å°±åˆ©ç”¨ C++ çš„ç±»ç®€å•çš„å°è£…äº†ä¸€ä¸ªçŸ©é˜µç±»ï¼Œé‡Œé¢é‡è½½äº†ä¹˜æ³•å’Œ quickpow æ–¹æ³•ï¼Œç„¶åæ¯”è¾ƒæ‚ é—²çš„å‡†å¤‡æäº¤ï¼Œè¿˜æ²¡æäº¤å‰å°±é‡åˆ°C++çš„è¯­æ³•é™·é˜±ã€ã€ è¯­æ³•é™·é˜±ï¼ˆå»ºè®®éC++å…šç»•é“ï¼‰ ç”±äºç±»ç”¨çš„éƒ½æ˜¯å †å†…å­˜ï¼Œæ‰€ä»¥æˆ‘å†™äº†ææ„å‡½æ•°ï¼Œæˆ‘é‡åˆ°çš„é—®é¢˜å‡ºåœ¨é‡è½½ä¹˜æ³•æ—¶æˆ‘è¿”å›çš„æ˜¯å·¦å€¼ï¼Œè€Œä¸”æˆ‘ä¹Ÿæ²¡æœ‰å¯¹ â€˜=â€™ è¿›è¡Œé‡è½½ï¼Œæ‰€ä»¥ â€˜=â€™ å°±æ˜¯ç›´æ¥çš„æˆå‘˜å˜é‡æ‹·è´ï¼Œè¿™å¯¼è‡´ä¸€ä¸ªç»“æœå°±æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„ date æŒ‡å‘åŒä¸€ç‰‡å†…å­˜ç©ºé—´ï¼Œè€Œä¹‹å‰çš„é‚£ç‰‡å†…å­˜ç©ºé—´æ³„éœ²äº†ï¼Œä¸”æœ€åè¿™ä¸¤ä¸ªå¯¹è±¡è‚¯å®šéƒ½ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œè¿™åˆå¯¼è‡´äº†ææ„å‡½æ•°è°ƒç”¨äº†ä¸¤æ¬¡ï¼ å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå¦‚æœæ˜¯ C++98 ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å¾ˆå¤§ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸¤ç§æ–¹æ³•è§£å†³ï¼š é€ƒé¿é—®é¢˜ï¼Œä¹˜æ³•çš„å·¦æ“ä½œæ•°å¿…é¡»æ˜¯å½“å‰èµ‹å€¼å¯¹è±¡ï¼Œè¿™æ ·å°±é¿å…äº†æœ€åèµ‹å€¼è¯­å¥å°†åŸæœ¬å¯¹è±¡å†…çš„æŒ‡é’ˆç›´æ¥æ”¹å˜ã€‚ è§£å†³é—®é¢˜ï¼Œè§£å†³è¿™ç±»é—®é¢˜æ— è®ºæ˜¯ C++11 è¿˜æ˜¯ C++98 æœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯é‡è½½ â€˜=â€™ å·ï¼Œé‡è½½ '=' å·çš„å®ç°æ ¹æ®å…·ä½“çš„æƒ…å†µè¿›è¡Œï¼Œè€Œå…·ä½“å®ç°èµ‹å€¼çš„é‡è½½ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸¤ä»¶äº‹ï¼šç¬¬ä¸€ï¼Œéœ€å°½å¯èƒ½çš„å‡å°‘å†…å­˜çš„ç”³è¯·å’Œä½¿ç”¨ï¼ˆå…·ä½“è€Œè¨€å°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ˜¯å¦ä¸ºåŒä¸€ç‰‡ç©ºé—´ï¼Œå³ä¾¿ä¸æ˜¯åŒä¸€ç‰‡ç©ºé—´ï¼Œä¸ºäº†å¢åŠ ç©ºé—´åˆ©ç”¨ç‡è¿˜å¯ä»¥åˆ¤æ–­ä¸¤ä¸ªç©ºé—´æ˜¯å¦å¤§å°ä¸€è‡´ï¼Œç„¶åè¿›è¡Œæ‹·è´å³å¯ï¼‰ã€‚ç¬¬äºŒï¼Œå¦‚æœæ˜¯ä¸´æ—¶å¯¹è±¡åˆ™éœ€è¦æŠŠå®ƒçš„æŒ‡é’ˆç½®ç©ºï¼ˆé˜²æ­¢ç¼–è¯‘å™¨æœªä¼˜åŒ–ä¸´æ—¶å˜é‡çš„ææ„å‡½æ•°ï¼Œä»è€Œè°ƒç”¨äº†ææ„å‡½æ•°å¤šæ¬¡ææ„åŒä¸€å†…å­˜ï¼‰ã€‚ ç”±äº C++11 å¼€å§‹æœ‰äº†å³å€¼å¼•ç”¨å’Œå®ƒé…å¥—çš„ç§»åŠ¨èµ‹å€¼æ„é€ å™¨ï¼Œæ‰€ä»¥å¯ä»¥æŠŠä¸´æ—¶å˜é‡ç›´æ¥è°ƒç”¨ç§»åŠ¨æ„é€ å™¨å˜æˆå…·åå¯¹è±¡ï¼Œç„¶åè¿›è¡Œæ“ä½œï¼Œä¸€èˆ¬å°±æ˜¯æŠŠå®ƒçš„æŒ‡é’ˆæ‰€æœ‰æƒè¿›è¡Œè½¬ç§»ï¼Œç„¶åæŠŠå®ƒçš„æŒ‡é’ˆç½®ç©ºé˜²æ­¢ææ„é”™è¯¯ï¼Œåœ¨æˆ‘çš„ç†è§£ä¸‹ï¼Œå³å€¼å¼•ç”¨çš„å‡ºç°å°±æ˜¯ä¸ºäº†æ•æ‰åˆ°åŒ¿åå¯¹è±¡ç„¶åç»™ç¨‹åºå‘˜è¿›è¡Œé€‚å½“çš„æ€§èƒ½ä¼˜åŒ–æ“ä½œï¼Œæ²¡æœ‰å³å€¼å¼•ç”¨å‰ï¼ŒåŒ¿åå¯¹è±¡çš„å†…å­˜æ ¹æœ¬å°±æ²¡æ³•å»ä½¿ç”¨ï¼Œåªèƒ½ç”¨æ¥ç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œåæ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ ·å°±å¾ˆæ¶ˆè€—å†…å­˜äº†ï¼Œå³å€¼å¼•ç”¨å‡ºç°åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å³å€¼å¼•ç”¨å¯¹åŒ¿åå¯¹è±¡è¿›è¡Œæ•æ‰ï¼Œç„¶åæ“ä½œå®ƒçš„åº•å±‚å†…å­˜ã€‚è¿˜æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å†…å­˜ç›¸å…³çš„æ›´æ–°å°±æ˜¯æœ‰äº†ä¸€ä¸ª nullptr å…³é”®å­—ï¼Œè¿™ä¸ªå…³é”®å­—ä½¿å¾—ç©ºæŒ‡é’ˆä¸å†ä¼šæœ‰æ­§ä¹‰ï¼Œæ‰€ä»¥ delete nullptr æ˜¯å®‰å…¨çš„ã€‚æ‰€ä»¥é˜²æ­¢å¤šæ¬¡ delete åŒä¸€ç‰‡ç©ºé—´äº§ç”Ÿé”™è¯¯å¯ä»¥å°†å®ƒèµ‹å€¼ä¸º nullptr å³å¯ã€‚ é‚£ä¹ˆåŸºäº C++11 è¿™ä¸ªé—®é¢˜è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿè§£å†³æ–¹æ³•å’ŒC++98æ²¡å·®ï¼Œå°±æ˜¯èƒ½å¤Ÿæ›´åŠ å¾—å¿ƒåº”æ‰‹çš„è¿›è¡Œå†…å­˜çš„ç®¡ç†äº†ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯ä¸€ä¸ªå³å€¼ï¼Œé‚£ä¹ˆå®ƒè‚¯å®šæ˜¯ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ â€˜=â€™ å·çš„é‡è½½ä¸­ç›´æ¥äº†å½“çš„ç”¨å®ƒçš„å†…å­˜ï¼Œå¹¶æŠŠå®ƒçš„æŒ‡é’ˆç½®ç©ºã€‚å¦‚æœæ²¡æœ‰å³å€¼ç±»å‹è¿›è¡Œæ•è·ï¼Œç¼–è¯‘å™¨é»˜è®¤ä¹Ÿæ˜¯ä¼šå¯¹ä¸´æ—¶å¯¹è±¡è¿›è¡Œä¼˜åŒ–çš„ï¼Œä¹Ÿèƒ½é˜²æ­¢äº§ç”Ÿå¤šä¸ªå¯¹è±¡çš„èµ‹å€¼æ‹·è´ï¼Œä½†åªèƒ½åœ¨å¯¹è±¡åˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œä¼˜åŒ–ï¼è€Œåœ¨å…¶ä»–æ—¶å€™åˆ™è¿˜æ˜¯ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœè¿˜æ˜¯ç”¨ç¼–è¯‘å™¨é»˜è®¤äº§ç”Ÿçš„ â€˜=â€™ é‡è½½ï¼Œåˆ™ä¼šå‘ç”Ÿè¢«ææ„çš„ç©ºé—´çš„æŒ‡é’ˆè¢«èµ‹å€¼çš„æƒ…å†µï¼Œè€Œæˆ‘ä»¬çš„å³å€¼å¼•ç”¨ç‰ˆæœ¬çš„èµ‹å€¼é‡è½½ä¾¿æ˜¯é’ˆå¯¹æ­¤ç°è±¡çš„ã€‚è¿™æ ·ä¾¿äºå†…å­˜ç®¡ç†ï¼Œå°†å³å€¼å’Œå·¦å€¼è¿›è¡Œåˆ†å¼€å¤„ç†ã€‚å³å€¼æ˜¯ä¸´æ—¶å˜é‡åªéœ€è¦ç”¨ä¸€ä¼šå„¿ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æŠŠå®ƒçš„å†…å­˜æ‹¿è¿‡æ¥ç»§ç»­ç”¨ï¼Œä¹Ÿä¸ä¼šå¯¹ç¨‹åºé€»è¾‘é€ æˆå½±å“ï¼Œè€Œå·¦å€¼åˆ™ä¸ä¸€æ ·ï¼Œå®ƒè¿˜éœ€è¦å­˜æ´»å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¦åˆ›ç©ºé—´è¿›è¡Œæ‹·è´ã€‚ ç‰¹åˆ«æé†’ï¼šå¦‚æœæ˜¯åšç®—æ³•é¢˜ï¼Œåˆ™å®Œå…¨ä¸ç”¨å»è€ƒè™‘å†…å­˜çš„ç®¡ç†ï¼Œææ„å‡½æ•°ä¹Ÿä¸è¦å»å†™ï¼Œæ¯•ç«Ÿåªéœ€è¦å•æ¬¡è°ƒç”¨ä½¿ç”¨ï¼Œå¯¹è±¡æœ€å¤šä¹Ÿå°±å­˜åœ¨ä¸€ä¼šå„¿ã€‚ åšé¢˜é™·é˜± åœ¨å¿…è¦çš„æ—¶å€™åƒä¸‡ä¸è¦èˆä¸å¾—å¼€long longï¼ï¼ï¼ï¼ è¿™é“é¢˜çš„æ•°æ®é‡æ— è®ºæ˜¯å¹‚çš„æ¬¡æ–¹è¿˜æ˜¯æ•´ä¸ªè®°å½•è¿‡ç¨‹çš„æ•°æ®éƒ½è¦å¼€long longï¼ï¼ï¼ æˆ‘è¢«è¿™ä¸ªé™·é˜±å‘äº†æ— æ•°å›äº†ï¼Œè¿™ä¸€æ¬¡ä¹Ÿä¸å¦å¤–ğŸ˜… å¼€å§‹å†™å®Œè¿™ç§ä¹‹åè¿‡äº†å‰5ä¸ªï¼Œç„¶ååé¢5ä¸ªæŠ¥é”™ï¼Œæˆ‘è¿˜ä»¥ä¸ºæˆ‘è®¾è®¡çš„è¿™ä¸ªç±»æœ‰é—®é¢˜ï¼Œè¿˜ç‰¹æ„å»å†™äº†å¥½å‡ ä¸ªæ™®é€šCè¯­è¨€ç‰ˆæœ¬ğŸ˜‚æœ€åå‘ç°åŸæ¥çš„æ²¡å¼€long longã€‚ä»¥ä¸‹ä¸ºæ›´æ”¹long longåçš„ä»£ç é€šè¿‡ç‰ˆæœ¬ï¼Œæˆ‘ç”¨å®å®šä¹‰å†™äº†å‡ ä¸ªç‰ˆæœ¬ã€‚ã€‚ã€‚ è¿™ä¸ªMatrixç±»çš„è®¾è®¡è¿˜æ˜¯å¾ˆå¤šåœ°æ–¹æ²¡æœ‰è€ƒè™‘åˆ°ä½ï¼Œæ¯”å¦‚ä¸Šä¸€ä¸ªé™·é˜±çš„é—®é¢˜åªæ˜¯é€šè¿‡æ–¹æ³•ä¸€å¾—åˆ°è§£å†³ï¼Œå¹¶æœªå»é‡è½½èµ‹å€¼æ“ä½œç¬¦ã€‚ã€‚ã€‚æ‰€ä»¥åé¢ç—›å®šæ€ç—›ï¼Œè®¾è®¡ä¸€ä¸ªè¾ƒä¸ºå¯ç”¨çš„Matrixç±»ï¼ æ•ˆç‡æ—¶å¿«æ—¶æ…¢çš„ï¼Œè¿™ä¸»è¦å–å†³äºç¼–è¯‘å™¨æ˜¯å¦è¿›è¡Œä¼˜åŒ–ã€‚ // // Created by Alone on 2021/11/19. // #include \u003cbits/stdc++.h\u003eusing namespace std; //#define ELSE_MAIN #define MY_MAIN #define MAT #ifdef MAT typedef long long ll; class Matrix{ ll** date; int m; int n; public: static const int MOD; public: Matrix(ll** rec,int n,int m):date(rec),n(n),m(m){}//Cé£æ ¼çš„åˆå§‹åŒ– Matrix():date(NULL),m(0),n(0){} //ç¼ºçœ Matrix(Matrix\u0026 b):n(b.n),m(b.m){//æ‹·è´æ„é€  assert(b.date!=NULL \u0026\u0026 b.n\u003e0 \u0026\u0026 b.m\u003e0); date = new ll*[n]; copy(b.date,b.date+n,date); for(int i=0;i\u003cn;i++){ date[i] = new ll[m]; copy(b.date[i],b.date[i]+m,date[i]); } } ~Matrix(){//ææ„å‡½æ•°å®ç° assert(date!=NULL \u0026\u0026 n\u003e0 \u0026\u0026 m\u003e0); for (int i = n-1; i \u003e=0 ; --i) { delete [] date[i]; } delete[] date; } Matrix\u0026 operator*(Matrix\u0026 b){ assert(b.date!=NULL \u0026\u0026 date!=NULL \u0026\u0026 m==b.n); ll tmp[n][b.m]; for(int i=0;i\u003cn;i++){ for(int j=0;j\u003cb.m;j++){ ll sum = 0; for(int k=0;k\u003cm;k++){ sum = (sum + date[i][k]*b.date[k][j])%MOD; } tmp[i][j] = sum; } } this-\u003em = b.m; for(int i=0;i\u003cn;i++){ for (int j = 0; j \u003c m; ++j) { date[i][j] = tmp[i][j]; } } return *this; } void init(){//é‡æ–°åˆå§‹åŒ–ä¸ºå•ä½çŸ©é˜µ assert(date!=NULL \u0026\u0026 n\u003e0 \u0026\u0026 m\u003e0); for (int i = 0; i \u003c n; ++i) { for (int j = 0; j \u003c m; ++j) { if(i==j)date[i][j] = 1; else date[i][j] = 0; } } } void quickPow(ll c){ if(c==1||c\u003c0)return; if(c==0){ init(); return; } Matrix tmp(*this); init(); while (c){ if(c\u00261){ *this = *this * tmp; } c \u003e\u003e= 1; tmp = tmp*tmp; } } void print(){ for(int i=0;i\u003cn;i++){ for(int j=0;j\u003cm;j++){ cout\u003c\u003cdate[i][j]\u003c\u003c' '; } cout\u003c\u003cendl; } } int get(int x,int y){ assert(date!=NULL \u0026\u0026 x\u003cn \u0026\u0026 y\u003cm); return date[x][y]; } }; const int Matrix::MOD = 1e9+7; #endif #ifdef MY_MAIN int main(){ ll c; cin\u003e\u003ec; ll** matrix = new ll*[2]; matrix[0] = new ll[2]{1,1}; matrix[1] = new ll[2]{1,0}; Matrix mat(matrix,2,2); mat.quickPow(c-1); //mat.print(); ll** res = new ll*[2]; res[0] = new ll[1]; res[1] = new ll[1]; res[0][0] = res[1][0] = 1; Matrix fib(res,2,1); //è¿™é‡Œæœ‰ä¸ªå†…å­˜åˆ†é…é”™è¯¯ï¼Œmat*fibè¿”å›çš„æ˜¯å·¦å€¼ï¼Œè€Œ=æ²¡æœ‰é‡è½½é»˜è®¤ç›´æ¥èµ‹å€¼æˆå‘˜å˜é‡ã€‚ //ç›´æ¥å¯¼è‡´äº†fibå¤±å»äº†ä¹‹å‰çš„å˜é‡æ‰€æœ‰æƒï¼Œå’Œmatå…±åŒæœ‰ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œè¿™æ ·å¯¼è‡´åŒä¸€ç‰‡ç©ºé—´è¢«freeä¸¤æ¬¡ //é€šè¿‡é‡è½½ = å·è§£å†³ï¼Œé˜²æ­¢ç›´æ¥çš„å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾å°±é‡æ–°ç»‘å®šåŒä¸€ç‰‡å†…å­˜ Matrix ret(mat*fib); cout\u003c\u003cret.get(0,0); return 0; } #endif #ifdef TEST_MAIN typedef long long ll ; const int MOD = 1e9+7; ll a[2][2]{{1,1},{1,0}};ll b[2]{1,1}; void selfMut(){ ll tmp[2][2]; for(int i=0;i\u003c2;i","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:2:2","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ•™ä½ è®¾è®¡Matrixç±» ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:3:0","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å¦‚ä½•è®¾è®¡ä¸€ä¸ªç±»ï¼Ÿ ç»“æ„ï¼š å†…éƒ¨æ•°æ®æŠ½è±¡ï¼šå¯¹è±¡çš„è¿ç®—æ•°æ®å­˜å‚¨ ç”¨äºŒçº§æŒ‡é’ˆ date è¿›è¡ŒçŸ©é˜µçš„äºŒç»´ç©ºé—´çš„å†…å­˜ç®¡ç†ï¼Œä»¥åŠnå’Œmè¡¨ç¤ºçŸ©é˜µçš„è¡Œé«˜å’Œåˆ—å®½ã€‚ è¡Œä¸ºæŠ½è±¡ï¼šå¯¹å¯¹è±¡çš„è¡Œä¸ºæè¿° æ„é€ å‡½æ•°ï¼ˆç¼ºçœã€è‡ªå®šä¹‰ã€æ‹·è´ã€ç§»åŠ¨ï¼‰ å’Œ ææ„å‡½æ•°ï¼ˆè°ƒç”¨destoryæˆå‘˜å‡½æ•°ï¼‰ã€‚ setter å’Œ getterã€‚æä¾›å‡½æ•°æ¥å£å»è®¾ç½®å’Œå¾—åˆ°æ•°æ®ã€‚ åŠŸèƒ½å‡½æ•°ï¼šæ¯”å¦‚é‡è½½çš„ä¹˜æ³•è¿ç®—ç¬¦å’Œå¿«é€Ÿå¹‚å‡½æ•°è¿™äº›éƒ½ç®—åŠŸèƒ½å‡½æ•°ã€‚ å¯¹è±¡çš„å±æ€§æŠ½è±¡ï¼š æ•°æ®å’Œè¡Œä¸ºæ˜¯å¦å¯¹å¤–ï¼Œå¯¹å¤–å°è£…æ•°æ®çš„æ„ä¹‰åœ¨äºé˜²æ­¢å¯¹å¯¹è±¡è¡Œä¸ºæè¿°çš„ç ´åï¼Œè€Œå¯¹å¤–å¼€æ”¾çš„æŸä¸ªè¡Œä¸ºé€šå¸¸éœ€è¦å†…éƒ¨å¤šä¸ªå‡½æ•°è¿›è¡Œé‡å¤è°ƒç”¨æ¥å®ç°ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦ç”¨åˆ° public å’Œ private å…³é”®å­—è¿›è¡Œä¿®é¥°ã€‚ æ•°æ®å’Œè¡Œä¸ºæ˜¯å¦å¯ç»§æ‰¿ï¼Œå¯¹äºæŸäº›è¡Œä¸ºï¼ˆå‡½æ•°ï¼‰ï¼Œæˆ‘ä»¬ä¸æƒ³è¢«å¤–éƒ¨è°ƒç”¨ï¼Œä½†æ˜¯å¯¹å­ç±»åˆå¾ˆæœ‰ç”¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é‡‡å– protect å…³é”®å­—è¿›è¡Œä¿®é¥°ã€‚ æ•°æ®å’Œè¡Œä¸ºæ˜¯å¦èƒ½é‡å¤åˆ©ç”¨ï¼Œä¸ºäº†èŠ‚çœä¸å¿…è¦çš„å†…å­˜å¼€é”€ï¼Œå¯ä»¥è®¾è®¡ä¸éœ€è¦äº§ç”Ÿå…·ä½“å¯¹è±¡çš„é€šç”¨å‹å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ static å…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œè¿™æ ·å¯ä»¥é¿å…æˆ‘æƒ³ä½¿ç”¨æŸä¸ªå‡½æ•°å‰è¿˜å¾—å»ç”³è¯·ä¸€ç‰‡æ¯«ä¸ç›¸å…³çš„å†…å­˜ç©ºé—´ï¼Œè€Œå¯¹äºæŸä¸ªå¯¹è±¡çš„æ•°æ®ä¹Ÿå¯ä»¥é‡‡ç”¨ static è¿›è¡Œä¿®é¥°ï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸ªæ•°æ®åœ¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ä¸­å°±ä¸éœ€è¦å†è¿›è¡Œç”³è¯·å’Œèµ‹å€¼äº†ã€‚ é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ¥ç¡®å®šè¡Œä¸ºï¼ˆå‡½æ•°ï¼‰çš„å±æ€§äº†ï¼Œæ•°æ®è‚¯å®šæ˜¯ä¸å¯¹å¤–å¼€æ”¾çš„ï¼ˆprivateï¼‰ï¼Œå¦åˆ™é¢å‘å¯¹è±¡å°†æ¯«æ— æ„ä¹‰ã€‚ æ„é€ å‡½æ•° å’Œ ææ„å‡½æ•°ï¼Œè¿™ä¸¤ä¸ªæ˜¯å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯çš„å…³é”®ï¼Œæ‰€ä»¥å¦‚æœä¸æ˜¯å¸Œæœ›å¯¹è±¡ä¸è¢«åˆ›å»ºæˆ–è€…æ˜¯ä¸è¢«é”€æ¯ï¼Œéƒ½åº”è¯¥ä½¿ç”¨ public ä¿®é¥°ã€‚ setter å’Œ getterã€‚å¾ˆæ˜æ˜¾æ˜¯å¯¹å¤–å¼€æ”¾çš„æ¥å£å‡½æ•°ï¼Œæ‰€ä»¥è‚¯å®šä¹Ÿæ˜¯ public ä¿®é¥°ã€‚ åŠŸèƒ½å‡½æ•°ï¼šçŸ©é˜µå¿«é€Ÿå¹‚çš„å‡½æ•°ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬å¸Œæœ›è®¾ç½®ä¸€ä¸ªå¯¹å¤–é€šç”¨çš„æƒ…å†µï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±åº”è¯¥ä¸éœ€è¦åˆ›å»ºå¯¹è±¡ä¾¿å¯è¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥æœ€å¥½ç”¨ static è¿›è¡Œä¿®é¥°ï¼ˆè¿™ä¸ªä¸€èˆ¬ä¸ºå¤–éƒ¨é€šç”¨æ¥å£ï¼Œå†…éƒ¨è¿˜éœ€å®ç°ä¸€ä¸ªæ–¹ä¾¿ç±»è°ƒç”¨çš„ç‰ˆæœ¬ï¼Œè¿™ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥ä¼ å‚è°ƒç”¨è¯¥å‡½æ•°å³å¯ï¼‰ï¼Œé‡è½½çš„ä¹˜æ³•è‚¯å®šä¹Ÿæ˜¯å¯¹å¤–çš„æ‰€ä»¥éœ€è¦ public ä¿®é¥°ï¼Œdestroy å‡½æ•°ç”¨äºå¤„ç†å†…å­˜çš„å›æ”¶ï¼Œå¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ªå†…éƒ¨é€šç”¨çš„å‡½æ•°ï¼Œä½†æ˜¯å¤–ç•Œå®Œå…¨æ˜¯ä¸éœ€è¦å®ƒçš„ï¼æ‰€ä»¥æŠŠå®ƒè®¾ç½®ä¸º private å±æ€§å³å¯ã€‚ ä»¥ä¸Šä¾¿æ˜¯å¯¹æ•´ä¸ªç±»çš„è®¾è®¡æ€è·¯ï¼Œå½“ç„¶çœŸæ­£åŠ¨æ‰‹è®¾è®¡çš„æ—¶å€™ï¼Œè¿˜éœ€è¦å…·ä½“åˆ°å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ï¼Œå› ä¸ºè¿™ç‰µæ‰¯åˆ° C++ çš„å…·ä½“è¯­æ³•äº†ï¼Œæ¯”å¦‚æˆ‘åº”è¯¥åœ¨é‡è½½ä¹˜æ³•çš„æ—¶å€™è¿”å›ä¸€ä¸ªä»€ä¹ˆæ ·çš„ç±»å‹ï¼Ÿæœ€å¥½æ˜¯è¿”å›ä¸€ä¸ªå³å€¼ï¼è€Œé‡è½½èµ‹å€¼è¿ç®—ç¬¦åˆ™æœ€å¥½æ˜¯è¿”å›ä¸€ä¸ªå·¦å€¼ã€‚ä¸€èˆ¬éœ€è¦è€ƒè™‘è¿”å›å€¼ç±»å‹çš„å–èˆæ—¶ï¼Œæœ€éš¾çš„å°±æ˜¯å¦‚æœè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘è¯¥è¿”å›å·¦å€¼è¿˜æ˜¯å³å€¼ã€‚ å†™äº†è¿™ä¹ˆä¹…C++ï¼Œæˆ‘æ„Ÿè§‰ç”¨C++å†™çš„Javaå±è”½é‡è½½è¿ç®—ç¬¦çš„ç‰¹æ€§ä¸»è¦å°±æ˜¯é‡è½½è¿ç®—ç¬¦æ—¶éœ€è¦è€ƒè™‘çš„è¿‡ç¨‹å¤ªå¤šäº†ï¼ŒC++èœé¸¡ï¼ˆæˆ‘å°±æ˜¯è¿™ä¸ªèœé¸ŸğŸ˜‚ï¼‰å†™å‡ºåŠå…¶ä½æ•ˆä¸”ä¸å®‰å…¨çš„ä»£ç ï¼Œè€Œåªæœ‰è€é¸Ÿæ‰èƒ½å†™å‡ºä¼˜é›…é«˜æ•ˆçš„ä»£ç ã€‚ ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:3:1","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"ç±»çš„å…·ä½“æŠ½è±¡ç»“æ„ï¼ˆä»£ç çš„å…·ä½“è§„åˆ’å›¾ï¼‰ æŒ‰ç…§å±æ€§å¯¹ç±»çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œåˆ†ç±»çš„ï¼Œæ¯•ç«Ÿå±æ€§ä¹ŸåŸºæœ¬å°±ä»£è¡¨äº†è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨åœºæ™¯äº†ã€‚ æœ€åå¯ä»¥åˆ©ç”¨åŸºæœ¬çš„æ–­è¨€æˆ–è€…å¼‚å¸¸ï¼Œè®©ä»£ç å˜å¾—æ›´ä¸ºå¥å£®ï¼Œä½¿å¾—æ›´å®¹æ˜“å®šä½é”™è¯¯å‘ç”Ÿçš„ä½ç½®å’ŒåŸå› ã€‚ ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:3:2","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ç°çŸ©é˜µæ³›å‹æ¨¡æ¿ç±» æºä»£ç å®ç° æˆ‘å…ˆæ˜¯ç”»å‡ºè§„åˆ’å›¾è¿›è¡Œå®ç°ï¼Œç„¶ååœ¨å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¯ä»¥æ–°å¢ä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚é‡è½½ä¸‹æ ‡è¿ç®—ç¬¦ï¼Œæ¯”å¦‚ç”¨printå‡½æ•°æ‰“å°å‡ºæ¥æ–¹ä¾¿éªŒè¯ã€‚ å…·ä½“å®ç°è¿‡ç¨‹ï¼Œä¸ºäº†æ–¹ä¾¿ç®€å•çš„å®šä½å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œä½¿ç”¨äº†å¤§é‡çš„assertè¿›è¡Œæ–­è¨€æ£€æŸ¥ã€‚å¦‚æœæƒ³ä»£ç çš„å¥å£®æ€§æ›´å¼ºï¼Œå¯ä»¥ä½¿ç”¨æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼ã€‚ æºä»£ç å¯¹åº”çš„GitHubä»“åº“åœ°å€ï¼šä»“åº“é“¾æ¥ï¼Œè¿˜æœ‰æ›´å¤šæ¨¡æ¿çš„å®ç°ï¼ŒåŒ…æ‹¬å°‘é‡STL æ›´å¥½çš„æºç é˜…è¯»ä½“éªŒï¼šæºç åœ¨çº¿é˜…è¯» ç›´æ¥é˜…è¯»ä¸‹é¢çš„ä»£ç æœ‰ç‚¹ä¸å¤ªå¥½æŸ¥çœ‹ï¼Œæ¨èå»ä¸Šé¢çš„GitHub1sé‡Œé¢æŸ¥çœ‹æºç ã€‚ // // Created by L_B__ on 2021/11/20. // #ifndef LQTEST_MATRIX_H #define LQTEST_MATRIX_H #include \u003ccassert\u003e#include \u003calgorithm\u003e#include \u003ciostream\u003e #define _MOD template\u003ctypename T\u003e class Matrix { /*Type define*/ typedef T data_t; typedef int ssize_t; /*data source*/ data_t **data; ssize_t n; ssize_t m; public: static const data_t MOD; public: /*default construct*/ Matrix() : m(0), n(0), data(nullptr) {} /*custom construct*/ Matrix(data_t **mat, ssize_t n, ssize_t m) : data(mat), n(n), m(m) {}//å¤–éƒ¨ç”³è¯·å†…å­˜ä¼ å…¥å†…éƒ¨ Matrix(ssize_t n, ssize_t m) : data(nullptr), n(n), m(m) {//å¤–éƒ¨æŒ‡å®šçŸ©é˜µçš„è¡Œå’Œåˆ—å³å¯ï¼Œå†…å­˜åˆå§‹åŒ–åœ¨å†…éƒ¨è¿›è¡Œ assert(n \u003e 0 \u0026\u0026 m \u003e 0); data = new data_t *[n]; for (int i = 0; i \u003c n; i++) { data[i] = new data_t[m]; } init(data, n, m); } /*copy construct*/ Matrix(Matrix \u0026src) : data(nullptr), n(src.n), m(src.m)//ä¹Ÿå¯ç”¨const \u0026å¼•ç”¨ç±»å‹ï¼Œä½†è¿™æ ·å¾ˆå¤šå³å€¼çš„æƒ…å†µéƒ½ä¸ä¼šè°ƒç”¨ç§»åŠ¨æ„é€ äº† { assert(n \u003e 0 \u0026\u0026 m \u003e 0); data = new data_t *[n]; for (int i = 0; i \u003c n; ++i) { data[i] = new data_t[m]; std::copy(src.data[i], src.data[i] + m, data[i]); } } /*move construct*/ Matrix(Matrix\u003cdata_t\u003e \u0026\u0026src) : n(src.n), m(src.m), data(nullptr) { assert(src.data != nullptr \u0026\u0026 n \u003e 0 \u0026\u0026 m \u003e 0); data = src.data; src.data = nullptr; src.n = src.m = 0; } /*destruct*/ ~Matrix() { destroy(); } /*overload*/ //åŠ ä¸ŠMODçš„ç‰¹æ®Šç‰ˆæœ¬ #ifdef _MOD Matrix operator*(const Matrix\u003cdata_t\u003e \u0026src)//å»ºè®®è¿”å›å³å€¼ï¼Œè¿”å›å·¦å€¼çš„åç»­å‘æ¯”è¾ƒå¤šï¼Œå‚æ•°const \u0026æ—¢å¯ä»¥æ¥å—å·¦å€¼ä¹Ÿå¯æ¥å—å³å€¼ { assert(data != nullptr \u0026\u0026 src.data != nullptr \u0026\u0026 m == src.n \u0026\u0026 m \u003e 0 \u0026\u0026 n \u003e 0 \u0026\u0026 src.m \u003e 0);//è¿›è¡ŒçŸ©é˜µä¹˜æ³•çš„å¿…è¦æ¡ä»¶ data_t **tmp = new data_t *[n]; //ä¸ºtmpç”³è¯·åŠ¨æ€å†…å­˜ï¼Œå› ä¸ºæ˜¯ä¼ å‡ºå‚æ•° for (int i = 0; i \u003c n; ++i) { tmp[i] = new data_t[m]; } for (int i = 0; i \u003c n; ++i)//å¼€å§‹æ›´æ–°tmp { for (int j = 0; j \u003c src.m; ++j) { data_t sum = 0; for (int k = 0; k \u003c m; ++k) { sum = (sum + data[i][k] * src.data[k][j]) % MOD; } tmp[i][j] = sum; } } //ç›´æ¥æ„é€ åŒ¿åå¯¹è±¡è¿”å› return Matrix(tmp, n, src.m);; } Matrix \u0026operator*=(const Matrix\u003cdata_t\u003e \u0026src)//*= æƒ³ä¸€æƒ³æˆ‘ä»¬å¹³æ—¶çš„ä½¿ç”¨ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå·¦å€¼ { assert(data != nullptr \u0026\u0026 src.data != nullptr \u0026\u0026 m == src.n \u0026\u0026 m \u003e 0 \u0026\u0026 n \u003e 0 \u0026\u0026 src.m \u003e 0);//è¿›è¡ŒçŸ©é˜µä¹˜æ³•çš„å¿…è¦æ¡ä»¶ data_t tmp[n][src.m];//é™æ€å†…å­˜å°±è¡Œï¼Œæ¯•ç«Ÿåªæ˜¯ä¸´æ—¶å­˜æ•°æ®çš„ for (int i = 0; i \u003c n; ++i)//å¼€å§‹æ›´æ–°tmp { for (int j = 0; j \u003c src.m; ++j) { data_t sum = 0; for (int k = 0; k \u003c m; ++k) { sum = (sum + data[i][k] * src.data[k][j]) % MOD; } tmp[i][j] = sum; } } //ç”±äºæ­¤æ—¶çš„dateå†…å­˜å¯èƒ½ä¸å¤Ÿå®¹ä¸‹tmpæ•°æ®ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦é‡æ–°è¿›è¡Œå†…å­˜ç”³è¯· //æ³¨æ„é‡æ–°ç”³è¯·åˆ—å†…å­˜çš„æ—¶å€™ï¼Œéœ€è¦æŠŠä¹‹å‰çš„å†…å­˜é‡Šæ”¾ if (m != src.m) { for (int i = 0; i \u003c n; ++i) { delete[]data[i]; data[i] = nullptr; data[i] = new data_t[src.m]; } } for (int i = 0; i \u003c n; ++i) { assert(data[i] != nullptr); std::copy(tmp[i], tmp[i] + src.m, data[i]); } return *this; } #endif #ifndef _MOD Matrix operator*(const Matrix\u003cdata_t\u003e\u0026src)//å»ºè®®è¿”å›å³å€¼ï¼Œè¿”å›å·¦å€¼çš„åç»­å‘æ¯”è¾ƒå¤šï¼Œå‚æ•°const \u0026æ—¢å¯ä»¥æ¥å—å·¦å€¼ä¹Ÿå¯æ¥å—å³å€¼ { assert(data!= nullptr\u0026\u0026src.data!= nullptr\u0026\u0026m==src.n\u0026\u0026m\u003e0\u0026\u0026n\u003e0\u0026\u0026src.m\u003e0);//è¿›è¡ŒçŸ©é˜µä¹˜æ³•çš„å¿…è¦æ¡ä»¶ data_t** tmp = new data_t *[n]; //ä¸ºtmpç”³è¯·åŠ¨æ€å†…å­˜ï¼Œå› ä¸ºæ˜¯ä¼ å‡ºå‚æ•° for (int i = 0; i \u003c n; ++i) { tmp[i] = new data_t [m]; } for(int i=0;i\u003cn;++i)//å¼€å§‹æ›´æ–°tmp { for (int j = 0; j \u003c src.m; ++j) { data_t sum = 0; for (int k = 0; k \u003c m; ++k) { sum = sum + data[i][k]*src.data[k][j]; } tmp[i][j] = sum; } } //ç›´æ¥æ„é€ åŒ¿åå¯¹è±¡è¿”å› return Matrix (tmp,n,src.m); } /*ä¸ä¹˜æ³•çš„å”¯ä¸€åŒºåˆ«åœ¨äºä¹˜æ³•æ˜¯æ„é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œ*=è¿”å›çš„æ˜¯this*/ Matrix \u0026operator*=(const Matrix\u003cdata_t\u003e \u0026src)//*= æƒ³ä¸€æƒ³æˆ‘ä»¬å¹³æ—¶çš„ä½¿ç”¨ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå·¦å€¼ { assert(data!= nullptr\u0026\u0026src.data!= nullptr\u0026\u0026m==src.n\u0026\u0026m\u003e0\u0026\u0026n\u003e0\u0026\u0026src.m\u003e0);//è¿›è¡ŒçŸ©é˜µä¹˜æ³•çš„å¿…è¦æ¡ä»¶ data_t tmp[n][src.m];//é™æ€å†…å­˜å°±è¡Œï¼Œæ¯•ç«Ÿåªæ˜¯ä¸´æ—¶å­˜æ•°æ®çš„ for(int i=0;i\u003cn;++i)//å¼€å§‹æ›´æ–°tmp { for (int j = 0; j \u003c src.m; ++j) { data_t sum = 0; for (int k = 0; k \u003c m; ++k) { sum = sum + data[i][k]*src.data[k][j]; } tmp[i][j] = sum; } } //ç”±äºæ­¤æ—¶çš„dateå†…å­˜å¯èƒ½ä¸å¤Ÿå®¹ä¸‹tmpæ•°æ®ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦é‡æ–°è¿›è¡Œå†…å­˜ç”³è¯· //æ³¨æ„é‡æ–°ç”³è¯·åˆ—å†…å­˜çš„æ—¶å€™ï¼Œéœ€è¦æŠŠä¹‹å‰çš„å†…å­˜é‡Šæ”¾ if(m!=src.m){ for (int i = 0; i \u003c n; ++i) { delete []data[i]; data[i] = nullptr; data[i] = new data_t [src.m]; } } for (int i = 0; i \u003c n; ++i) { assert(data[i] != nullptr); std::copy(tmp[i],tmp[i]+src.m,data[i]); } return *this; } #endif //èµ‹å€¼å·çš„é‡è½½","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:3:3","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ€»ç»“ ç”±äºç”¨çš„æ˜¯ C++11 çš„è¯­æ³•è¿›è¡Œå®ç°çš„æ¨¡æ¿ç±»ï¼Œæ‰€ä»¥ä½äºè¿™ä¸ªç‰ˆæœ¬çš„ç¼–è¯‘å™¨éƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚æˆ‘æŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œå®é™…ä¸Šè“æ¡¥æ¯æ¯”èµ›çš„æ—¶å€™å¯ä»¥ç”¨ C++11ï¼Œè€Œacmæ›´æ˜¯ä¸ç”¨è¯´ï¼Œæ—©å°±èƒ½ç”¨C++11äº†ã€‚ ç®€å•å¤ç›˜ï¼š å®ç°ä¸€ä¸ªè¿™æ ·çš„ç±»ï¼Œä¸»è¦èƒ½å­¦åˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š ç±»çš„è®¾è®¡æŠ€å·§ã€‚ å¯¹C++çš„å·¦å³å€¼æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ã€‚ å„ç§æ„é€ å™¨çš„è®¾è®¡å’Œå®ç°å·²ç»è¾¾åˆ°ç‚‰ç«çº¯é’çš„åœ°æ­¥äº†ã€‚ ","date":"2022-01-20","objectID":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/:4:0","tags":["çŸ©é˜µå¿«é€Ÿå¹‚"],"title":"çŸ©é˜µå¿«é€Ÿå¹‚çš„C++å°è£…","uri":"/posts/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9A%84c++%E5%B0%81%E8%A3%85/"}]