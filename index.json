[{"categories":["C++å®æˆ˜"],"content":"â€ç®€å•å­¦ä¹ ä¸‹åŸºæœ¬çš„ç±»å°è£…â€œ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸ºä»€ä¹ˆéœ€è¦å¤§æ•°åŠ å‡ç±»ï¼Ÿ å¯¹äºè®¡ç®—æœºè€Œè¨€ï¼ŒåŸºæœ¬çš„æ•°æ®ç±»å‹ä¸€èˆ¬æœ€å¤šä¸º64ä½æ•°æ®è¡¨ç¤ºèŒƒå›´ï¼Œè¿™ä¸ªèŒƒå›´æ˜¯æœ‰é™çš„ï¼Œæ²¡æ³•æ— é™çš„è¡¨ç¤ºæ‰€æœ‰çš„æ•°æ®ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿè¡¨ç¤ºæ‰€æœ‰çš„å¤§æ•°ï¼Œå¹¶å®ŒæˆåŠ å‡ä¹˜é™¤å‘¢ï¼Ÿ ç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼Œç”±äºæ•°æ®éƒ½æ˜¯ç”±ä¸€ä½ä¸€ä½çš„æ•°å­—æ‰€ç»„æˆï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨æ•°ç»„ä¸­çš„æ¯ä¸€ä½è¡¨ç¤ºä¸€ä½æ•°å­—ï¼Œä¾¿å¯å®Œæˆå¯¹å¤§æ•°çš„æ¨¡æ‹Ÿäº†ã€‚ é‚£ä¹ˆæˆ‘ä»¬è¯´æ˜æ—¶å€™éœ€è¦ç”¨åˆ°å¤§æ•°æ¨¡æ‹Ÿå‘¢ï¼Ÿå¯¹ç«èµ›äººè€Œè¨€ï¼Œæœ‰å¾ˆå¤šé¢˜ç›®å®é™…ä¸Šå°±æ˜¯é«˜ç²¾åº¦å¤§æ•°æ¨¡æ‹Ÿç±»å‹ï¼Œè€Œå¯¹äºæ™®é€šçš„ç¨‹åºå‘˜è€Œè¨€ï¼Œå¤§æ•°æ¨¡æ‹Ÿä¹Ÿä»…æ˜¯åœ¨åšæŸä¸ªé€»è¾‘è¿ç®—è€Œä¿è¯ä¸ä¼šæº¢å‡ºçš„æœ€ä½³ç­–ç•¥ï¼Œé‚£ä¹ˆå¤§å®¶éš¾é“ä¸å¥½å¥‡å¦‚ä½•å®ç°ä¸€ä¸ªå¤§æ•°æ¨¡æ‹Ÿç±»å—ï¼Ÿ ç°åœ¨å°±ä»å°è£…ä¸€ä¸ªç®€å•çš„åŠ å‡ç±»å¼€å§‹äº†è§£è¿™æ ·ä¸€ä¸ªå¤§æ•°æ¨¡æ‹Ÿæ˜¯æ€ä¹ˆå®ç°çš„ğŸ‘€ ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:1:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"å¤§æ•°åŠ å‡ç±»å®ç°è¯¦è§£ ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸€ã€æµç¨‹å›¾æ€»è§ˆ å¦‚å›¾æ€»ä½“æ¥è¯´åˆ†ä¸ºäº”éƒ¨åˆ†ï¼š é™æ€æˆå‘˜å‡½æ•°ï¼šå±äºç±»çš„å…¬å…±æ¥å£(æ ¸å¿ƒ) æ„é€ å’Œææ„å‡½æ•°ï¼šæ„é€ å¯¹è±¡ä»¥åŠææ„å¯¹è±¡ æˆå‘˜æ•°æ®ï¼šç”¨äºè¿ç®—çš„æ•°æ®ä»¥åŠè¡¨ç¤ºå¯¹è±¡çš„æ•°æ® è¿ç®—ç¬¦é‡è½½ï¼šç”¨äºè‡ªå®šä¹‰è¿ç®—æ–¹å¼(æ ¸å¿ƒ) å†…éƒ¨æˆå‘˜å‡½æ•°ï¼šå±äºå¯¹è±¡çš„å…¬å…±æ¥å£ ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:1","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"äºŒã€æˆå‘˜æ•°æ®å’Œæ„é€ å‡½æ•°è¯¦è§£ æˆå‘˜æ•°æ® bool f; //æ˜¯å¦æ˜¯è´Ÿæ•°çš„æ ‡è®° char *nums; //å­˜å‚¨éç¬¦å·çš„å¤§æ•°å„ä¸ªä½ int length; //numsçš„æ•°æ®é•¿åº¦ int capacity; //numsçš„å¯ç”¨å®¹é‡ æ„é€ å’Œææ„ //ç¼ºçœæ„é€ å‡½æ•° BigInteger() : length(0), capacity(1), f(false) { nums = new char[capacity]; } //ç”¨äºè½¬åŒ–æ™®é€šå­—ç¬¦ä¸²çš„æ„é€ å‡½æ•° BigInteger(const char *n) : length(strlen(n)), f(false) { int start = 0; if (n[0] == '-') { f = true; start++; } while (start\u003clength\u0026\u0026n[start] == '0')start++; capacity = length * 10; nums = new char[capacity]; std::copy(n + start, n + length, nums); length = length - start; } //æ‹·è´æ„é€ å‡½æ•° BigInteger(BigInteger \u0026a) { capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); } //ç§»åŠ¨æ„é€ å‡½æ•°ï¼šè¿™é‡Œè°ƒç”¨äº†ç­‰äºå·ï¼Œæ ¹æ®açš„ç±»å‹æ¥å†³å®šç”¨å“ªä¸ªç­‰äºå· BigInteger(BigInteger \u0026\u0026a) :length(0){ *this = a; } //ææ„å‡½æ•° ~BigInteger() { delete[] nums; } ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:2","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸‰ã€(ç®—æ³•æ ¸å¿ƒ)é™æ€æˆå‘˜å‡½æ•°å’Œè¿ç®—ç¬¦é‡è½½è¯¦è§£ static Swap() //è°ƒç”¨stdçš„swapå®ç°å¯¹åŸºæœ¬æ•°æ®çš„äº¤æ¢ static void Swap(BigInteger \u0026a, BigInteger \u0026b) { std::swap(a.length, b.length); std::swap(a.capacity, b.capacity); std::swap(a.f, b.f); std::swap(a.nums, b.nums); } static compare() //ä¸çœ‹ç¬¦å·æ¯”è¾ƒnumsçš„å¤§å°ï¼šè¡¨ç¤ºaæ˜¯å¦æ¯”bå¤§ static bool compare(const BigInteger \u0026a,const BigInteger \u0026b) { //æ¯”è¾ƒçº¯numså¤§å°(ä¸çœ‹ç¬¦å· int n1 = a.length; int n2 = b.length; if (n1 != n2)return n1 \u003e n2; //è¿”å›aå’Œbå“ªä¸ªå¤§ï¼Œtrueåˆ™ä½aå¤§ int i = 0; while (i \u003c n1 \u0026\u0026 a.nums[i] == b.nums[i])i++; //a bä¸€æ ·é•¿çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒä¸¤ä¸ªçš„å€¼ if (i == n1) return false; return a.nums[i] \u003e b.nums[i]; } static isEqual() //è¡¨ç¤ºaå’Œbæ˜¯å¦ç›¸ç­‰ bool isEqual(BigInteger \u0026a, BigInteger \u0026b) { if (a.f != b.f || (a.length != b.length))return false; int i = 0; while (i \u003c a.length \u0026\u0026 a.nums[i] == b.nums[i])i++; return i == a.length \u0026\u0026 a.f == b.f; } (*æ ¸å¿ƒç®—æ³•)static add() ä¸çœ‹ç¬¦å·çš„åŠ æ³•ï¼Œç¬¦å·è¿™æ–¹é¢ç”±é‡è½½åŠ æ³•è¿ç®—ç¬¦æ§åˆ¶ã€‚ static BigInteger add(BigInteger \u0026a, BigInteger \u0026b) { //ä¸çœ‹ç¬¦å·çš„åŠ æ³• a.reverse();//å°¾ç«¯å¯¹é½ b.reverse(); BigInteger t; int up = 0; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta + tb + up; t.push_back(base % 10 + '0'); up = base / 10; } if (up) t.push_back(up + '0'); t.reverse();//è¿”å›åŸä½ a.reverse(); b.reverse(); return t; } (*æ ¸å¿ƒç®—æ³•)static minus() ä¸çœ‹ç¬¦å·çš„å‡æ³•,é»˜è®¤äº†açš„numså¤§å°(ä¸çœ‹ç¬¦å·)æ˜¯æ¯”bå¤§çš„ã€‚ static BigInteger minus(BigInteger \u0026a, BigInteger \u0026b) { a.reverse(); b.reverse(); BigInteger t; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta - tb; if (base \u003c 0) { base += 10; a[i + 1]--; } t.push_back(base + '0'); } t.reverse(); a.reverse(); b.reverse(); return t; } char \u0026operator[] char \u0026operator[](int i) { return nums[i]; } BigInteger \u0026operator= ç”¨äº†ä¸¤ä¸ªç‰ˆæœ¬â€“å³å€¼å¼•ç”¨å’Œå·¦å€¼å¼•ç”¨ç‰ˆæœ¬ å³å€¼å¼•ç”¨å»¶é•¿å¯¿å‘½ï¼Œç”¨äº¤æ¢çš„æ–¹å¼å®ç°(æ¯•ç«Ÿæ˜¯å°†äº¡å€¼ BigInteger \u0026operator=(BigInteger\u0026\u0026 a) { //Swap\u0026Copyæ–¹å¼å®ç°å³å€¼èµ‹å€¼é‡è½½ Swap(*this, a); return *this; } å·¦å€¼å¼•ç”¨æ·±æ‹·è´ BigInteger \u0026operator=(const BigInteger \u0026a) {//æ·±æ‹·è´ if (length != 0)//å¦‚æœä¸æ˜¯åˆå§‹åŒ–è°ƒç”¨çš„ = ï¼Œåˆ™è‚¯å®šéœ€è¦å…ˆæŠŠåŸæ¥çš„å†…å­˜deleteæ‰ delete[]nums; capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); return *this; } bool operator\u003c é‡è½½äº†å°äºå·ï¼Œå¥½å¤„åœ¨äºå¯ä»¥ç›´æ¥åˆ©ç”¨stlè¿›è¡Œå„ç§æ’åºæ“ä½œäº†ã€‚ æ³¨æ„ï¼šä¸€å®šè¦å†™æˆconstç‰ˆæœ¬çš„æˆå‘˜å‡½æ•°ï¼Œä¸ç„¶STLåº“æ— æ³•è°ƒç”¨ï¼Œå› ä¸ºSTLåº“ä¸­çš„æ‰€æœ‰æ¯”è¾ƒéƒ½æ˜¯åŸºäºconstå¯¹è±¡ã€‚ bool operator\u003c(const BigInteger \u0026a) const { if (f \u0026\u0026 !a.f) { //å…¶ä¸­ä¸€ä¸ªä¸ºè´Ÿæ•°ï¼Œåˆ™é‚£ä¸ªæ˜¯æ›´å°çš„ return true; } else if (!f \u0026\u0026 a.f) return false; if (f) { //ä¸¤è€…éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå·¦è¾¹çš„å€¼è¦æ›´å¤§åˆ™ä¸ºtrue return compare(*this, a); }//ä¸¤è€…å‡ä¸ºæ­£æ•°ï¼Œåˆ™å€¼æ›´å°çš„åœ¨å·¦è¾¹ä¸ºtrue return compare(a, *this); } (*æ ¸å¿ƒç®—æ³•)BigInteger operator+ åˆ©ç”¨é™æ€æˆå‘˜å‡½æ•°å®Œæˆæ— ç¬¦å·çš„åŠ å‡ï¼Œç„¶ååœ¨è¿™é‡Œè¿›è¡Œåˆ¤æ–­å„ç§ç¬¦å·æƒ…å†µï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·æƒ…å†µè¿›è¡Œä¸åŒçš„åŠ æ³•å¤„ç†ã€‚ æ³¨æ„åœ¨è°ƒç”¨minusä¹‹å‰éœ€è¦æ¯”è¾ƒä¸¤ä¸ªæ•°çš„numsè°æ›´å¤§ï¼Œæ›´å¤§çš„æ”¾åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šï¼ BigInteger operator+(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µï¼Œç›´æ¥ç›¸åŠ ï¼Œå†æ”¹ç¬¦å· res = add(*this, a); flag = true; } else if (a.f \u0026\u0026 !f) {//å·¦æ­£å³è´Ÿ if (compare(a, *this)) { //çœ‹è´Ÿæ•°å¯¹åº”çš„numsæ˜¯å¦æ¯”æ­£æ•°å¤§ flag = true; res = minus(a, *this); } else { flag = false; res = minus(*this, a); } } else if (!a.f \u0026\u0026 f) { if (compare(*this, a)) { //ä¸ä¸Šä¸€ä¸ªç›¸åŒ flag = true; res = minus(*this, a); } else { flag = false; res = minus(a, *this); } } else { //åŒæ—¶ä¸ºæ­£æ•°å°±æ˜¯æœ€ç®€å•çš„åŠ æ³• flag = false; res = add(*this, a); } res.f = flag; return res; } (*æ ¸å¿ƒç®—æ³•)BigInteger operator- åŒæ ·æ˜¯åˆ†ç±»è®¨è®ºï¼ŒåŒæ ·æ˜¯æ ¹æ®ä¸åŒçš„ç±»å‹è°ƒç”¨minuså’Œaddå‡½æ•°ã€‚ ä¸æ­£æ•°ä¸åŒçš„å¤„ç†åœ¨äºå¯¹ç¬¦å·çš„å¤„ç†ï¼Œå¦‚æœåŒä¸ºè´Ÿæ•°ï¼Œåˆ™éœ€è¦åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç›¸ç­‰ï¼Œé˜²æ­¢ä¸¤æ•°ç›¸ç­‰ç›¸å‡åå‡ä¸º 0ï¼Œè€Œè¢«å¤„ç†ä¸º -0 ã€‚ BigInteger operator-(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µ--å·¦è¾¹-å³è¾¹==(ä¸çœ‹ç¬¦å·)å³è¾¹-(ä¸çœ‹ç¬¦å·)å·¦è¾¹ if (compare(a, *this)) { flag = false; res = minus(a, *this); } else { if (isEqual(*this, a)) flag = false; else flag = true; res = minus(*this, a); } } else if (a.f \u0026\u0026 !f) { //å·¦è¾¹ä¸ºæ­£ï¼Œå³è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==å·¦è¾¹+å³è¾¹ flag = false; res = add(a, *this); } else if (!a.f \u0026\u0026 f) { //å³è¾¹ä¸ºæ­£ï¼Œå·¦è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==ä¸¤è¾¹ä¸ºè´Ÿçš„åŠ æ³• flag = true; res = add(a, *this); } else { //åŒæ—¶ä¸ºæ­£æ•°--å·¦è¾¹-å³è¾¹==å·¦è¾¹-å³è¾¹(åˆ†ç±»è®¨è®ºæ­£è´Ÿ if (compare(a, *this)) { //å³è¾¹\u003eå·¦è¾¹,ç¬¦å·ä¸ºè´Ÿ res = minus(a, *this); flag = true; } else { //å³è¾¹\u003cå·¦è¾¹ï¼Œç¬¦å·ä¸ºæ­£ res = minus(*this, a); flag = false; } } res.f = flag; return res; } ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:3","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"å››ã€å…¶ä»–å†…éƒ¨æˆå‘˜å‡½æ•°è¯¦è§£ å‘å¤–æä¾›çš„getæ¥å£ int getCap() { return capacity; } int getLength() { return length; } bool isNegative() { return f; } bool isEmpty() { return length == 0; } è¿›è¡Œèµ‹å€¼æ“ä½œæ‰€å¿…å¤‡çš„push_backå’Œreverseå‡½æ•° void push_back(char x) { if (length \u003e= capacity) {//æ‰©å®¹æ“ä½œ capacity *= 2; char *t = nums; nums = new char[capacity]; std::copy(t, t + length, nums); delete[]t; } nums[length++] = x; } void reverse() {//åè½¬æ“ä½œ int l = 0, r = length - 1; while (l \u003c r) { std::swap(nums[l], nums[r]); l++; r--; } } æ— å…³ç´§è¦çš„ read() è¾“å…¥æ¥å£ å’Œ print() è¾“å‡ºæµ‹è¯•æ¥å£ void print() { if (f) printf(\"-\"); nums[length] = '\\0'; int i = 0; while (nums[i] == '0')i++; printf(\"%s\", nums + i); } void read() {//åˆ©ç”¨getchar()ç»™å¯¹è±¡èµ‹ä¸Šæ•°æ® char c = getchar(); if (c == '-') { f = true; c = getchar(); } while (c == '0') c = getchar();//å°†å‰å¯¼0æ¶ˆè€—æ‰ while (c != '\\n') { push_back(c);//ä¸æ–­çš„è°ƒç”¨push_backå³å¯ c = getchar(); } } ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:2:4","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"æ•´ç†ä»£ç  ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:3:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":".hå£°æ˜æ–‡ä»¶ å¦‚æœåœ¨å£°æ˜ç±»çš„åŒæ—¶è¿›è¡Œå®šä¹‰ï¼Œåˆ™å†…éƒ¨çš„æˆå‘˜å‡½æ•°é»˜è®¤å°±æ˜¯å†…è”çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æŠŠçŸ­å°çš„ä»£ç è¿›è¡Œå†…è”ï¼Œä»¥ä¸‹çš„å®ç°å‡æ˜¯ä»¥è¯¥è§„å¾‹è¿›è¡Œã€‚ // // Created by Alone on 2021/10/7. // #ifndef MY_TINY_STL_BIGINTEGER_H #define MY_TINY_STL_BIGINTEGER_H #include \u003calgorithm\u003e#include \u003ciostream\u003e#include \u003ccstring\u003e class BigInteger { bool f; char *nums; int length; int capacity; public: //æ„é€ å‡½æ•° BigInteger() : length(0), capacity(1), f(false) { //ç¼ºçœæ„é€ å‡½æ•° nums = new char[capacity]; } BigInteger(const char *n); BigInteger(const BigInteger \u0026a); BigInteger(BigInteger \u0026\u0026a); ~BigInteger() { //ææ„å‡½æ•° delete[] nums; } public: //é™æ€å‡½æ•° static void Swap(BigInteger \u0026a, BigInteger \u0026b); static bool compare(const BigInteger \u0026a, const BigInteger \u0026b); bool isEqual(BigInteger \u0026a, BigInteger \u0026b); static BigInteger add(BigInteger \u0026a, BigInteger \u0026b); static BigInteger minus(BigInteger \u0026a, BigInteger \u0026b); public: //è¿ç®—ç¬¦é‡è½½ char \u0026operator[](int i) { return nums[i]; } BigInteger \u0026operator=(BigInteger \u0026\u0026a) { //Swap\u0026Copyæ–¹å¼å®ç°å³å€¼èµ‹å€¼é‡è½½ Swap(*this, a); return *this; } BigInteger \u0026operator=(const BigInteger \u0026a); bool operator\u003c(const BigInteger \u0026a) const; BigInteger operator+(BigInteger \u0026a); BigInteger operator-(BigInteger \u0026a); public: //å¯¹è±¡çš„åŸºæœ¬æˆå‘˜å‡½æ•° int getCap() { return capacity; } int getLength() { return length; } bool isNegative() { return f; } bool isEmpty() { return length == 0; } void reverse(); void push_back(char x); void print(); void read(); }; #endif //MY_TINY_STL_BIGINTEGER_H ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:3:1","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":".cppå®šä¹‰å¹¶å®ç° // // Created by Alone on 2021/10/7. // #include \"BigInteger.h\" //@æ„é€ å‡½æ•°å®ç° BigInteger::BigInteger(const char *n) : length(strlen(n)), f(false) { //ç”¨äºåˆå§‹å€¼çš„æ„é€ å‡½æ•° int start = 0; if (n[0] == '-') { f = true; start++; } while (start \u003c length \u0026\u0026 n[start] == '0')start++; capacity = length * 10; nums = new char[capacity]; std::copy(n + start, n + length, nums); length = length - start; } BigInteger::BigInteger(const BigInteger \u0026a) { //æ‹·è´æ„é€ å‡½æ•° capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); } BigInteger::BigInteger(BigInteger \u0026\u0026a) : length(0) { //ç§»åŠ¨æ„é€ å‡½æ•° *this = a; } //@é™æ€å‡½æ•°å®ç° void BigInteger::Swap(BigInteger \u0026a, BigInteger \u0026b) { std::swap(a.length, b.length); std::swap(a.capacity, b.capacity); std::swap(a.f, b.f); std::swap(a.nums, b.nums); } bool BigInteger::compare(const BigInteger \u0026a, const BigInteger \u0026b) { int n1 = a.length; int n2 = b.length; if (n1 != n2)return n1 \u003e n2; //è¿”å›aå’Œbå“ªä¸ªå¤§ï¼Œtrueåˆ™ä½aå¤§ int i = 0; while (i \u003c n1 \u0026\u0026 a.nums[i] == b.nums[i])i++; //a bä¸€æ ·é•¿çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒä¸¤ä¸ªçš„å€¼ if (i == n1) return false; return a.nums[i] \u003e b.nums[i]; } bool BigInteger::isEqual(BigInteger \u0026a, BigInteger \u0026b) { if (a.f != b.f || (a.length != b.length))return false; int i = 0; while (i \u003c a.length \u0026\u0026 a.nums[i] == b.nums[i])i++; return i == a.length \u0026\u0026 a.f == b.f; } BigInteger BigInteger::add(BigInteger \u0026a, BigInteger \u0026b) { a.reverse();//å°¾ç«¯å¯¹é½ b.reverse(); BigInteger t; int up = 0; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta + tb + up; t.push_back(base % 10 + '0'); up = base / 10; } if (up) t.push_back(up + '0'); t.reverse();//è¿”å›åŸä½ a.reverse(); b.reverse(); return t; } BigInteger BigInteger::minus(BigInteger \u0026a, BigInteger \u0026b) { a.reverse(); b.reverse(); BigInteger t; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta - tb; if (base \u003c 0) { base += 10; a[i + 1]--; } t.push_back(base + '0'); } t.reverse(); a.reverse(); b.reverse(); return t; } //@è¿ç®—ç¬¦é‡è½½å®ç° BigInteger \u0026BigInteger::operator=(const BigInteger \u0026a) { if (length != 0)//å¦‚æœä¸æ˜¯åˆå§‹åŒ–è°ƒç”¨çš„ = ï¼Œåˆ™è‚¯å®šéœ€è¦å…ˆæŠŠåŸæ¥çš„å†…å­˜deleteæ‰ delete[]nums; capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); return *this; } BigInteger BigInteger::operator+(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µï¼Œç›´æ¥ç›¸åŠ ï¼Œå†æ”¹ç¬¦å· res = add(*this, a); flag = true; } else if (a.f \u0026\u0026 !f) {//å·¦æ­£å³è´Ÿ if (compare(a, *this)) { //çœ‹è´Ÿæ•°å¯¹åº”çš„numsæ˜¯å¦æ¯”æ­£æ•°å¤§ flag = true; res = minus(a, *this); } else { flag = false; res = minus(*this, a); } } else if (!a.f \u0026\u0026 f) { if (compare(*this, a)) { //ä¸ä¸Šä¸€ä¸ªç›¸åŒ flag = true; res = minus(*this, a); } else { flag = false; res = minus(a, *this); } } else { //åŒæ—¶ä¸ºæ­£æ•°å°±æ˜¯æœ€ç®€å•çš„åŠ æ³• flag = false; res = add(*this, a); } res.f = flag; return res; } BigInteger BigInteger::operator-(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µ--å·¦è¾¹-å³è¾¹==(ä¸çœ‹ç¬¦å·)å³è¾¹-(ä¸çœ‹ç¬¦å·)å·¦è¾¹ if (compare(a, *this)) { flag = false; res = minus(a, *this); } else { if (isEqual(*this, a)) flag = false; else flag = true; res = minus(*this, a); } } else if (a.f \u0026\u0026 !f) { //å·¦è¾¹ä¸ºæ­£ï¼Œå³è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==å·¦è¾¹+å³è¾¹ flag = false; res = add(a, *this); } else if (!a.f \u0026\u0026 f) { //å³è¾¹ä¸ºæ­£ï¼Œå·¦è¾¹ä¸ºè´Ÿ--å·¦è¾¹-å³è¾¹==ä¸¤è¾¹ä¸ºè´Ÿçš„åŠ æ³• flag = true; res = add(a, *this); } else { //åŒæ—¶ä¸ºæ­£æ•°--å·¦è¾¹-å³è¾¹==å·¦è¾¹-å³è¾¹(åˆ†ç±»è®¨è®ºæ­£è´Ÿ if (compare(a, *this)) { //å³è¾¹\u003eå·¦è¾¹,ç¬¦å·ä¸ºè´Ÿ res = minus(a, *this); flag = true; } else { //å³è¾¹\u003cå·¦è¾¹ï¼Œç¬¦å·ä¸ºæ­£ res = minus(*this, a); flag = false; } } res.f = flag; return res; } bool BigInteger::operator\u003c(const BigInteger \u0026a) const { if (f \u0026\u0026 !a.f) { //å…¶ä¸­ä¸€ä¸ªä¸ºè´Ÿæ•°ï¼Œåˆ™é‚£ä¸ªæ˜¯æ›´å°çš„ return true; } else if (!f \u0026\u0026 a.f) return false; if (f) { //ä¸¤è€…éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå·¦è¾¹çš„å€¼è¦æ›´å¤§åˆ™ä¸ºtrue return compare(*this, a); }//ä¸¤è€…å‡ä¸ºæ­£æ•°ï¼Œåˆ™å€¼æ›´å°çš„åœ¨å·¦è¾¹ä¸ºtrue return compare(a, *this); } //@åŸºæœ¬æˆå‘˜å‡½æ•° void BigInteger::reverse() { int l = 0, r = length - 1; while (l \u003c r) { std::swap(nums[l], nums[r]); l++","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:3:2","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"åŠŸèƒ½æµ‹è¯• ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸€ã€åŸºæœ¬çš„åŠ å‡æµ‹è¯• è¿è¡Œçš„æµ‹è¯•ä»£ç ï¼š æ‰“å°è¾“å‡º pythonè¾“å‡º æ€»ç»“ ä¸pythonè¾“å‡ºæ— å¼‚ï¼Œæ•…é€šè¿‡æµ‹è¯•ã€‚ä½†ç¢äºæµ‹è¯•æ•°æ®å¤ªè¿‡å°‘ï¼Œä¸æ˜¯å¾ˆæœ‰è¯´æœåŠ›ï¼Œè¿˜æœ‰åé¢çš„è§£é¢˜æµ‹è¯•ã€‚ ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:1","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"äºŒã€å­˜å‚¨ä¸ªäººè¾“å…¥çš„æ•°æ®+æ’åºæµ‹è¯• æµ‹è¯•ä»£ç (æ–¹ä¾¿æµ‹è¯•åªè¾“å…¥äº†10ä¸ªæ•°æ®)ï¼š æ’åºè¾“å‡ºï¼š ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:2","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"ä¸‰ã€è§£é¢˜æµ‹è¯• æ­£å¥½æœ€è¿‘åˆ·çš„PATç”²çº§å°±æ¶‰åŠåˆ°å¤§æ•°çš„åŠ å‡hhhï¼ é¢˜ç›®æè¿° OJå¹³å° è§£é¢˜ä»£ç  #include \"bits/stdc++.h\" class BigInteger { bool f; char *nums; int length; int capacity; public://æ„é€ å‡½æ•° BigInteger() : length(0), capacity(1), f(false) { //ç¼ºçœæ„é€ å‡½æ•° nums = new char[capacity]; } BigInteger(const char *n) : length(strlen(n)), f(false) { //ç”¨äºåˆå§‹å€¼çš„æ„é€ å‡½æ•° int start = 0; if (n[0] == '-') { f = true; start++; } while (start \u003c length \u0026\u0026 n[start] == '0')start++; capacity = length * 10; nums = new char[capacity]; std::copy(n + start, n + length, nums); length = length - start; } BigInteger(const BigInteger \u0026a) { //æ‹·è´æ„é€ å‡½æ•° capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); } BigInteger(BigInteger \u0026\u0026a) : length(0) { //ç§»åŠ¨æ„é€ å‡½æ•° *this = a; } ~BigInteger() { //ææ„å‡½æ•° delete[] nums; } public://é™æ€æˆå‘˜å‡½æ•° static void Swap(BigInteger \u0026a, BigInteger \u0026b) { std::swap(a.length, b.length); std::swap(a.capacity, b.capacity); std::swap(a.f, b.f); std::swap(a.nums, b.nums); } static bool compare(const BigInteger \u0026a, const BigInteger \u0026b) { //æ¯”è¾ƒçº¯numså¤§å°(ä¸çœ‹ç¬¦å· int n1 = a.length; int n2 = b.length; if (n1 != n2)return n1 \u003e n2; //è¿”å›aå’Œbå“ªä¸ªå¤§ï¼Œtrueåˆ™ä½aå¤§ int i = 0; while (i \u003c n1 \u0026\u0026 a.nums[i] == b.nums[i])i++; //a bä¸€æ ·é•¿çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒä¸¤ä¸ªçš„å€¼ if (i == n1) return false; return a.nums[i] \u003e b.nums[i]; } bool isEqual(BigInteger \u0026a, BigInteger \u0026b) { if (a.f != b.f || (a.length != b.length))return false; int i = 0; while (i \u003c a.length \u0026\u0026 a.nums[i] == b.nums[i])i++; return i == a.length \u0026\u0026 a.f == b.f; } static BigInteger add(BigInteger \u0026a, BigInteger \u0026b) { //ä¸çœ‹ç¬¦å·çš„åŠ æ³• a.reverse();//å°¾ç«¯å¯¹é½ b.reverse(); BigInteger t; int up = 0; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta + tb + up; t.push_back(base % 10 + '0'); up = base / 10; } if (up) t.push_back(up + '0'); t.reverse();//è¿”å›åŸä½ a.reverse(); b.reverse(); return t; } static BigInteger minus(BigInteger \u0026a, BigInteger \u0026b) { //ä¸çœ‹ç¬¦å·çš„å‡æ³•,é»˜è®¤äº†açš„é•¿åº¦æˆ–è€…å¤§å°æ˜¯æ¯”bè¦å¤§çš„(æ‰€ä»¥å¤–ç•Œä¸è¦ä¹±è°ƒç”¨ a.reverse(); b.reverse(); BigInteger t; int len = a.length \u003e b.length ? a.length : b.length; for (int i = 0; i \u003c len; i++) { int ta = i \u003c a.length ? a[i] - '0' : 0; int tb = i \u003c b.length ? b[i] - '0' : 0; int base = ta - tb; if (base \u003c 0) { base += 10; a[i + 1]--; } t.push_back(base + '0'); } t.reverse(); a.reverse(); b.reverse(); return t; } public://æˆå‘˜å‡½æ•°å’Œé‡è½½è¿ç®—ç¬¦ char \u0026operator[](int i) { return nums[i]; } BigInteger \u0026operator=(BigInteger \u0026\u0026a) { //Swap\u0026Copyæ–¹å¼å®ç°å³å€¼èµ‹å€¼é‡è½½ Swap(*this, a); return *this; } BigInteger \u0026operator=(const BigInteger \u0026a) {//æ·±æ‹·è´ if (length != 0)//å¦‚æœä¸æ˜¯åˆå§‹åŒ–è°ƒç”¨çš„ = ï¼Œåˆ™è‚¯å®šéœ€è¦å…ˆæŠŠåŸæ¥çš„å†…å­˜deleteæ‰ delete[]nums; capacity = a.capacity; length = a.length; f = a.f; nums = new char[capacity]; std::copy(a.nums, a.nums + length, nums); return *this; } int getCap() { return capacity; } int getLength() { return length; } bool isNegative() { return f; } bool isEmpty() { return length == 0; } void reverse() { int l = 0, r = length - 1; while (l \u003c r) { std::swap(nums[l], nums[r]); l++; r--; } } void push_back(char x) { if (length \u003e= capacity) { capacity *= 2; char *t = nums; nums = new char[capacity]; std::copy(t, t + length, nums); delete[]t; } nums[length++] = x; } bool operator\u003c(const BigInteger \u0026a) const { if (f \u0026\u0026 !a.f) { //å…¶ä¸­ä¸€ä¸ªä¸ºè´Ÿæ•°ï¼Œåˆ™é‚£ä¸ªæ˜¯æ›´å°çš„ return true; } else if (!f \u0026\u0026 a.f) return false; if (f) { //ä¸¤è€…éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå·¦è¾¹çš„å€¼è¦æ›´å¤§åˆ™ä¸ºtrue return compare(*this, a); }//ä¸¤è€…å‡ä¸ºæ­£æ•°ï¼Œåˆ™å€¼æ›´å°çš„åœ¨å·¦è¾¹ä¸ºtrue return compare(a, *this); } BigInteger operator+(BigInteger \u0026a) { BigInteger res; bool flag; if (a.f \u0026\u0026 f) { //åŒä¸ºè´Ÿæ•°æƒ…å†µï¼Œç›´æ¥ç›¸åŠ ï¼Œå†æ”¹ç¬¦å· res = add(*this, a); flag = true; } else if (a.f \u0026\u0026 !f) {//å·¦æ­£å³è´Ÿ if (compare(a, *this)) { //çœ‹è´Ÿæ•°å¯¹åº”çš„numsæ˜¯å¦æ¯”æ­£æ•°å¤§ flag = true; res = minus(a, *this); } else { flag = false; res = minus(*this, a); } } else if (!a.f \u0026\u0026 f) { if (compare(*this, a)) { //ä¸ä¸Šä¸€ä¸ªç›¸åŒ flag = true; res = minus(*this, a); } else { flag = false; res = minus(a, *this); } } else { //åŒæ—¶ä¸ºæ­£æ•°å°±æ˜¯æœ€ç®€å•çš„åŠ æ³• flag = false; res = add(*this, a); } res.f = flag; return res; } BigInteger operator-(BigInteger \u0026a","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:4:3","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"æ€»ç»“ å¾ˆå¤šäººï¼Œå¯èƒ½è§‰å¾—åšé¡¹ç›®ä¸€å®šå¾—æ˜¯é‚£ç§é«˜å¤§ä¸Šï¼Œåˆæˆ–è€…æ˜¯é‚£ç§è´ªåƒè›‡å°æ¸¸æˆã€æ‰«é›·å°æ¸¸æˆç±»å‹ï¼Œå®é™…ä¸Šåªè¦ä½ æœ‰å…´è¶£ï¼Œä»»ä½•ä¸€ä¸ªä¸œè¥¿éƒ½èƒ½æˆä¸ºä½ çš„ç»ƒæ‰‹é¡¹ç›®ï¼Œå¹¶ä¸”æ”¶è·æ”¶è·ä¹Ÿè®¸æ¯”ä½ è·Ÿé£å»å¼„å‡ ä¸ªå°æ¸¸æˆæ›´å¤§ã€‚ åšè¿™ä¸ªå°é¡¹ç›®ï¼Œæˆ‘çš„æ”¶è·æ˜¯ï¼Œå¯¹C++çš„è¯­æ³•æ›´åŠ çš„äº†è§£äº†ï¼Œå…³äºç§»åŠ¨æ„é€ å™¨ã€æ‹·è´æ„é€ å™¨ã€èµ‹å€¼é‡è½½è¿™å—å¼„å¾—æ›´æ¸…æ¥šäº†ï¼Œæœ€å¤§çš„æ”¶è·åœ¨äºå¼ºåŒ–äº†ä¸€ä¸ªç±»çš„è®¾è®¡æ€è·¯ï¼Œè¿™ä¸ªæ˜¯æœ€é‡è¦çš„ã€‚ å¤šå†™ä¸€äº›ç±»çš„å®ç°ï¼Œä¸ä»…æœ‰åˆ©äºå¯¹ç®—æ³•å’Œè¯­è¨€è¯­æ³•çš„ç†è§£ï¼Œæ›´å¤§çš„æ”¶è·åœ¨äºå¯¹å„ä¸ªåŠŸèƒ½çš„è®¾è®¡æ€è·¯ï¼Œä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬æœ€éœ€è¦çš„å°±æ˜¯è¿™æ ·çš„é€»è¾‘æ€ç»´ï¼Œä»æ¥åˆ°éœ€æ±‚å¼€å§‹ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½è¿…é€Ÿçš„æŠ½è±¡å‡ºå„ç§å®ç°æ–¹æ¡ˆï¼Œç„¶åè¿›è¡Œä¸æ–­çš„ä¼˜åŒ–ï¼Œå¾—å‡ºå±äºè‡ªå·±çš„ä»£ç ï¼ ","date":"2022-01-22","objectID":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/:5:0","tags":["C++ç±»çš„å°è£…"],"title":"å¤§æ•°åŠ å‡ç±»çš„å®ç°(C++å®ç°)âœ¨","uri":"/posts/%E5%A4%A7%E6%95%B4%E6%95%B0%E5%8A%A0%E5%87%8F/"},{"categories":["C++å®æˆ˜"],"content":"â€SocketåŸºæœ¬æ“ä½œçš„C++å°è£…â€œ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å°è£…è¿‡ç¨‹ ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ¥å£ç±»çš„å®ç°(æŠ½è±¡ç±») _public_socket.h è¯¥å¤´æ–‡ä»¶ç”¨äºåŒ…å«æ‰€æœ‰è¯¥ç³»ç»Ÿå¹³å°socketæ‰€éœ€è¦ä¾èµ–çš„åº“ã€‚ windowså¹³å° #ifndef MY_TINY_STL__PUBLIC_SOCKET_H #define MY_TINY_STL__PUBLIC_SOCKET_H #include \u003cwinsock2.h\u003e#pragma comment (lib, \"ws2_32.lib\") //åŠ è½½ ws2_32.dll #endif //MY_TINY_STL__PUBLIC_SOCKET_H Linuxå¹³å° #include \u003cunistd.h\u003e#include \u003carpa/inet.h\u003e#include \u003csys/socket.h\u003e#include \u003cnetinet/in.h\u003eTCP_INTERFACE.h(ä½œç”¨äºwinå¹³å°) ç”±äºè¯¥æ¥å£ç”±æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ç»§æ‰¿ï¼Œè€Œä¸¤è€…åŒæ ·çš„å‡½æ•°æˆå‘˜ä¹Ÿå°±æ˜¯è¿™äº›äº†ï¼Œè®¾è®¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ—¶å°±åªéœ€è¦è€ƒè™‘å„è‡ªçš„å¥—æ¥å­—ä»¥åŠå…¶ä½™æ“ä½œçš„æˆå‘˜å‡½æ•°ï¼Œä¹Ÿä¸éœ€è¦ç®¡ç†DLLçš„å¼€å…³ã€‚ è¿˜æœ‰ä¸€ä¸ªerro_die()æˆå‘˜å‡½æ•°ç”¨äºé˜»æ–­é”™è¯¯å¹¶æ‰“å°å¯¹åº”æƒ…å†µã€‚ // // Created by Alone on 2021/8/17. // #ifndef MY_TINY_STL_TCP_INTERFACE_H #define MY_TINY_STL_TCP_INTERFACE_H #include \u003ccstdio\u003e#include \"_public_socket.h\" class TCP_INTERFACE { public: TCP_INTERFACE() { //åˆå§‹åŒ– DLL WSADATA wsaData; WSAStartup(MAKEWORD(2, 2), \u0026wsaData); } //è¿”å›å€¼å°äºç­‰äº0æ—¶å‘ç”Ÿé”™è¯¯ virtual int Send(SOCKET clnt, const void *buf, const int buflen) = 0; virtual int Recv(SOCKET clnt, void *buf, const int buflen) = 0; //closesocketè¿”å›å€¼ä¸ä¸º0åˆ™å‘ç”Ÿé”™è¯¯ virtual void Close(SOCKET clnt) = 0; virtual void error_die(const char *str) = 0; ~TCP_INTERFACE() { WSACleanup(); } }; #endif //MY_TINY_STL_TCP_INTERFACE_H ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:1","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æœåŠ¡å™¨ç«¯å°è£… è¿™æ¬¡ä¿®æ”¹äº†ä¸‹é€»è¾‘ï¼Œè¿˜æ˜¯ç”¨acceptè¿”å›ä¸€ä¸ªå¥—æ¥å­—è¿›è¡Œå‘é€å’Œæ¥æ”¶æ“ä½œæ¯”è¾ƒå¥½ã€‚ç±»çš„åº•å±‚æ²¡æœ‰å†ä¿ç•™ç”¨äºå’ŒæŸä¸ªå®¢æˆ·ç«¯é€šä¿¡çš„å¥—æ¥å­—äº†ï¼Œè‡ªå·±æ§åˆ¶å„ä¸ªå®¢æˆ·ç«¯å¥—æ¥å­—çš„å…³é—­å’Œä½¿ç”¨ã€‚ TCP_SOCKET_SERVER.h // // Created by Alone on 2021/8/16. // #ifndef MY_TINY_STL_TCP_SOCKET_SERVER_H #define MY_TINY_STL_TCP_SOCKET_SERVER_H #include \"TCP_INTERFACE.h\" class TCP_SOCKET_SERVER : public TCP_INTERFACE { public: TCP_SOCKET_SERVER(); ~TCP_SOCKET_SERVER(); void Bind(int port); void Listen(); SOCKET Accept(); int Send(SOCKET clnt, const void *buf, const int buflen); int Recv(SOCKET clnt, void *buf, const int buflen); void Close(SOCKET clnt); void error_die(const char *str); private: SOCKET servSock; sockaddr_in sockAddr; }; #endif //MY_TINY_STL_TCP_SOCKET_SERVER_H TCP_SOCKET_SERVER.cpp // // Created by Alone on 2021/8/16. // #include \"TCP_SOCKET_SERVER.h\" //åˆå§‹åŒ–æ“ä½œ TCP_SOCKET_SERVER::TCP_SOCKET_SERVER() : servSock(0) { memset(\u0026sockAddr, 0, sizeof(sockAddr)); //æ¯ä¸ªå­—èŠ‚éƒ½ç”¨0å¡«å…… } //ç»‘å®šæ“ä½œ void TCP_SOCKET_SERVER::Bind(int port) { servSock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); sockAddr.sin_family = PF_INET; //ä½¿ç”¨IPv4åœ°å€ sockAddr.sin_addr.s_addr = htonl(INADDR_ANY); //å…·ä½“çš„IPåœ°å€ sockAddr.sin_port = htons(port); //ç«¯å£ if (bind(servSock, (SOCKADDR *) \u0026sockAddr, sizeof(SOCKADDR)) != 0) { error_die(\"bind\"); } } //ç½®äºç›‘å¬çŠ¶æ€ void TCP_SOCKET_SERVER::Listen() { if (servSock == 0) error_die(\"listen\"); if (listen(servSock, SOMAXCONN) != 0) { error_die(\"listen\"); } } //åˆ©ç”¨å¥—æ¥å­—çš„ç›‘å¬ä¸²å£ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå»ºç«‹æ–°çš„å¥—æ¥å­—è¿›è¡Œå­˜å‚¨ä¿¡æ¯ SOCKET TCP_SOCKET_SERVER::Accept() { SOCKADDR t; int nSize = sizeof(SOCKADDR); //åé¢ä¸¤ä¸ªå‚æ•°ä¸ºå¯é€‰ SOCKET clnt = accept(servSock, \u0026t, \u0026nSize); if (clnt \u003c= 0)error_die(\"accept\"); return clnt; } //è¿”å›çš„æ˜¯å‘é€åˆ°ç¼“å†²åŒºçš„å­—èŠ‚é•¿åº¦ int TCP_SOCKET_SERVER::Send(SOCKET clnt, const void *buf, const int buflen) { return send(clnt, (const char *) buf, buflen, 0); } //è¿”å›å·²ç»æ¥æ”¶çš„å­—èŠ‚é•¿åº¦ int TCP_SOCKET_SERVER::Recv(SOCKET clnt, void *buf, const int buflen) { return recv(clnt, (char *) buf, buflen, 0); } //ææ„å‡½æ•°å…³é—­socket TCP_SOCKET_SERVER::~TCP_SOCKET_SERVER() { if (servSock != 0)closesocket(servSock); } void TCP_SOCKET_SERVER::Close(SOCKET clnt) { if (closesocket(clnt) != 0) { error_die(\"closesocket\"); } } void TCP_SOCKET_SERVER::error_die(const char *str) { printf(\"[hint]%s failed:%d\", str, WSAGetLastError()); exit(-1); } ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:2","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®¢æˆ·ç«¯çš„å°è£… TCP_SOCKET_CLIENT.h å¢åŠ äº†åˆ©ç”¨åŸŸåæŸ¥è¯¢ipåœ°å€çš„æˆå‘˜å‡½æ•°gethostbyname(),æŒºå¥½ç©çš„ï¼æ­¤æ¬¡å¢åŠ äº†erro_dieå‡½æ•°ï¼Œä¸”å‘é€å’Œæ¥æ”¶éƒ½æ“ä½œå¥—æ¥å­—ã€‚åœ¨ç±»çš„å†…éƒ¨è¿˜æ˜¯ä¿ç•™äº†å¥—æ¥å­—çš„å¤‡ä»½ï¼Œç”¨äºå¿˜è®°å…³é—­å¥—æ¥å­—æ—¶ï¼Œææ„å‡½æ•°è¿›è¡Œå…³é—­ã€‚ // // Created by Alone on 2021/8/18. // #ifndef MY_TINY_STL_TCP_SOCKET_CLIENT_H #define MY_TINY_STL_TCP_SOCKET_CLIENT_H #include \"TCP_INTERFACE.h\"#include \u003ciostream\u003e class TCP_SOCKET_CLIENT : public TCP_INTERFACE { public: TCP_SOCKET_CLIENT(); ~TCP_SOCKET_CLIENT(); SOCKET Connect(const char *IPAdrr, u_short port); //ç”¨äºåˆ©ç”¨URL(åŸŸå)æŸ¥è¯¢IPåœ°å€ void Gethostbyname(const char *URL); //æ¥å£å¿…é¡»å®ç°çš„å‡½æ•° int Send(SOCKET clnt,const void *buf, const int bufSize); int Recv(SOCKET clnt,void *buf, const int bufSize); void Close(SOCKET clnt); void error_die(const char *str); private: //ç”±äºä¸€èˆ¬å®¢æˆ·ç«¯åªéœ€è¦ä¸€ä¸ªå¥—æ¥å­—å®ç°è¿æ¥,ç„¶åè¿˜éœ€è¦ä¸€ä¸ªsocketadrr_inç”¨äºè¿æ¥å†…å®¹çš„èµ‹å€¼ SOCKET clntSock; sockaddr_in sockAddr; }; #endif //MY_TINY_STL_TCP_SOCKET_CLIENT_H TCP_SOCKET_CLIENT.cpp // // Created by Alone on 2021/8/17. // #include \"TCP_SOCKET_CLIENT.h\" //åˆå§‹åŒ– TCP_SOCKET_CLIENT::TCP_SOCKET_CLIENT() : clntSock(0) {} //å…³é—­å¥—æ¥å­—æ“ä½œ void TCP_SOCKET_CLIENT::Close(SOCKET clnt) { if (closesocket(clnt) != 0) error_die(\"close\"); clntSock = 0; } //è¿æ¥æœåŠ¡å™¨æ“ä½œ SOCKET TCP_SOCKET_CLIENT::Connect(const char *IPAdrr, u_short port) { memset(\u0026sockAddr, 0, sizeof sockAddr); clntSock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); sockAddr.sin_family = PF_INET; sockAddr.sin_addr.s_addr = inet_addr(IPAdrr); sockAddr.sin_port = htons(port); if (connect(clntSock, (SOCKADDR *) \u0026sockAddr, sizeof(sockAddr)) != 0) { error_die(\"connect\"); } return clntSock; } //å‘é€ä¿¡æ¯æ“ä½œ int TCP_SOCKET_CLIENT::Send(SOCKET clnt,const void *buf, const int bufSize) { return send(clnt, (const char *) buf, bufSize, 0); } //æ¥æ”¶ä¿¡æ¯æ“ä½œ int TCP_SOCKET_CLIENT::Recv(SOCKET clnt,void *buf, const int bufSize) { return recv(clnt, (char *) buf, bufSize, 0); } //æ ¹æ®åŸŸåè·å–ipåœ°å€ç­‰ä¿¡æ¯ void TCP_SOCKET_CLIENT::Gethostbyname(const char *URL) { hostent *host = gethostbyname(URL); if (!host) { std::cout \u003c\u003c \"Get IP address error!\\n\"; return; } //æ‰“å°æœ¬å‘½ std::cout \u003c\u003c URL \u003c\u003c std::endl; //åˆ«å for (int i = 0; host-\u003eh_aliases[i]; i++) { printf(\"Aliases %d: %s\\n\", i + 1, host-\u003eh_aliases[i]); } //åœ°å€ç±»å‹ printf(\"Address type: %s\\n\", (host-\u003eh_addrtype == AF_INET) ? \"AF_INET\" : \"AF_INET6\"); //IPåœ°å€,å…¶ä¸­inet_ntoa()å‡½æ•°æ˜¯å°†ç½‘ç»œå­—èŠ‚åºè½¬ä¸ºæœ¬åœ°çš„å­—èŠ‚åºï¼Œæ–¹ä¾¿æ‰“å°çœ‹æ‡‚ for (int i = 0; host-\u003eh_addr_list[i]; i++) { printf(\"IP addr %d: %s\\n\", i + 1, inet_ntoa(*(struct in_addr *) host-\u003eh_addr_list[i])); } } //ææ„æ—¶éœ€è¦ç¡®ä¿æ‰€æœ‰ä¸œè¥¿å·²ç»å…³é—­ TCP_SOCKET_CLIENT::~TCP_SOCKET_CLIENT() { if (clntSock != 0) closesocket(clntSock); } void TCP_SOCKET_CLIENT::error_die(const char *str) { printf(\"[hint]%s failed:%d\", str, WSAGetLastError()); exit(-1); } ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:1:3","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹è®²è§£ ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:2:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹ä¸€ï¼šå›å£°ç¨‹åºé€šä¿¡ æœåŠ¡å™¨å›å£°ç¨‹åº ç»‘å®šæœ¬åœ°1234ç«¯å£ï¼Œè¿›å…¥ç›‘å¬çŠ¶æ€ç­‰å¾…è¯·æ±‚ï¼Œå¦‚æœé€šä¿¡å¯¹è±¡å…³é—­äº†é€šä¿¡ï¼Œä¹Ÿä¸æ…Œï¼Œé‡æ–°gotoåˆ°ç­‰å¾…è¯·æ±‚å¾—åˆ°æ–°çš„é€šä¿¡å¥—æ¥å­— #include \u003ciostream\u003e#include \"TCP_SOCKET_SERVER.h\" #define BUF_SIZE 1000 using namespace std; int main() { TCP_SOCKET_SERVER a; a.Bind(1234); a.Listen(); restart: SOCKET clnt = a.Accept(); while (1) { char *x = new char[BUF_SIZE]; memset(x, 0, BUF_SIZE); int size = a.Recv(clnt,x, BUF_SIZE); if (size \u003c= 0) break; if (a.Send(clnt,x, size) \u003c= 0) break; } a.Close(clnt); cout \u003c\u003c \"connect is over.Waiting for a new connection!\\n\"; goto restart; } å®¢æˆ·ç«¯é€šä¿¡ç¨‹åº ä¸ºä¿æŒæŒç»­é€šä¿¡ï¼Œä¸€æ—¦å®¢æˆ·ç«¯æ‹’ç»äº†è¯·æ±‚ï¼Œé‚£ä¹ˆå¼¹å‡ºå¾ªç¯é‡æ–°è¿æ¥ï¼Œå¹¶è®¾ç½®è¿æ¥è¶…æ—¶æ“ä½œã€‚ #include \"TCP_SOCKET_CLIENT.h\"#define BUF_SIZE 100 int main(){ TCP_SOCKET_CLIENT t; const char* to = \"127.0.0.1\"; restart: SOCKET clnt = t.Connect(to,1234); while(1){ std::cout\u003c\u003c\"\\nInput your message:\\n\"; char buf[BUF_SIZE] = {0}; std::cin.getline(buf,99); int size = t.Send(clnt,buf,BUF_SIZE); if(size\u003c=0) break; memset(buf,0,sizeof buf); if(t.Recv(clnt,buf,size)\u003c=0) break; printf(\"received from %s is:\\n\",to); std::cout\u003c\u003cbuf; } t.Close(clnt); std::cout\u003c\u003c\"The Server is disconnected,and socket has been cleaned up,socket connection has been re-established\\n\"; goto restart; return 0; } å›å£°æ•ˆæœ å®¢æˆ·ç«¯æ”¶åˆ°çš„ç»“æœ æœåŠ¡å™¨ç«¯ä¸€ç›´è¿è¡Œç€ï¼Œåªè¦ä¸å…³é—­ï¼Œä½†æ¯æ¬¡åªèƒ½å’Œä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ï¼Œé€šä¿¡å®Œåé‡æ–°ç­‰å¾…è¿æ¥ã€‚ ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:2:1","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹äºŒï¼šæ–‡ä»¶æ“ä½œï¼Œä¼ é€å›¾ç‰‡(æŒæ¡é‡å¤ä¼ åŒ…) åˆ†æå¾…ä¼ å›¾ç‰‡ çœ‹çœ‹è¿™ç™¾ä¸‡å¤§å°çš„å­—èŠ‚ï¼Œä¸€æ¬¡è‚¯å®šæ˜¯ä¼ ä¸å®Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‘é€ç«¯ä¸æ–­çš„ç»­ä¼ ï¼Œç›´åˆ°ä¼ é€å®Œæ¯•ã€‚ å‘é€ç«¯ç¨‹åº #include \"TCP_SOCKET_CLIENT.h\"#include \u003cfstream\u003eint main(){ TCP_SOCKET_CLIENT t; const char* to = \"127.0.0.1\"; restart: SOCKET clnt = t.Connect(to,1234); //å›¾ç‰‡å†™å…¥buf(è¿™å‡ ç™¾ä¸‡å­—èŠ‚å¤§å°ï¼Œå¾—äºæ˜¯newåŠ¨æ€åˆ†é… std::ifstream img(\"D:/DesktopBackground/L-69.png\",std::ios::in|std::ios::binary); //è®¾ç½®æ–‡ä»¶æŒ‡é’ˆç”¨äºæ±‚æ–‡ä»¶å†…å®¹é•¿åº¦ img.seekg(0,std::ios::end); int len = img.tellg(); img.seekg(0,std::ios::beg); if(len\u003e0){printf(\"read OK\\n\");} else {printf(\"file is empty!\");return 0;} //å¡«è¡¥buf char * buf = new char[len]; img.read(buf,len); //å‘é€æ•°æ®åˆ°æœåŠ¡å™¨,ä¸€æ¬¡è‚¯å®šå‘é€ä¸å®Œï¼Œæ‰€ä»¥å¤šæ¬¡ int sum = 0; while(sum\u003clen){ int sendlen = t.Send(clnt,buf,len); if(sendlen\u003c=0){ printf(\"Send Erro!\"); return 0; } sum += sendlen; } t.Close(clnt); printf(\"Send OK!\"); return 0; } æ¥æ”¶ç«¯ç¨‹åº #include \u003ciostream\u003e#include \"TCP_SOCKET_SERVER.h\"#include \u003cfstream\u003e#define BUF_SIZE 100 using namespace std; int main() { TCP_SOCKET_SERVER a; a.Bind(1234); a.Listen(); //ç­‰å¾…è¿æ¥ï¼Œè¿æ¥æˆåŠŸä¾¿å¯å»ºç«‹é€šè®¯ SOCKET clnt = a.Accept(); //åˆ›å»ºæ–‡ä»¶ç”¨äºå†™å…¥å›¾ç‰‡æ•°æ® ofstream t(\"test.png\",ios::binary|ios::out); //ç”±äºè¦æ¥æ”¶çš„å›¾ç‰‡æ–‡ä»¶è¾ƒå¤§ï¼Œéœ€è¦åˆ†å¤šæ¬¡åŒ…è¿›è¡Œä¼ è¾“æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ä¸æ–­å¾ªç¯æ¥æ”¶ while(1){ char buf[BUF_SIZE]; int sz = a.Recv(clnt,buf,BUF_SIZE); //ç›´åˆ°å‘é€ç«¯å‘é€æ•°æ®å®Œæ¯•æ–­å¼€è¿æ¥åï¼Œä¾¿å¯åˆ¤æ–­ä¸ºæ¥æ”¶å®Œæ¯• if(sz\u003c=0){ cout\u003c\u003c\"Finish !\"; return 0; } //æ¯æ¬¡è°ƒæ•´æ–‡ä»¶æŒ‡é’ˆä½ç½®åˆ°æœ€åç»­å†™ t.seekp(0,ios::end); t.write(buf,sz); } a.Close(clnt); } æ¥æ”¶ç»“æœ ä¸€æ¨¡ä¸€æ ·æ¯«æ— åå·® ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:2:2","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"å®ä¾‹ä¸‰ï¼šWebé€šä¿¡(æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨) ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:3:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"WebæœåŠ¡å™¨ç¨‹åº æˆ‘è¿™ä¸ªwebæœåŠ¡å™¨ä¹Ÿç®—æ˜¯åŠå…¶ç®€å•äº†ã€‚ã€‚å¹¶æ²¡æœ‰å¯¹å®¢æˆ·ç«¯çš„httpè¯·æ±‚è¿›è¡Œè§£æç„¶åå‘é€å¯¹åº”çš„æ–‡ä»¶ç»™å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯å•çº¯çš„æˆ‘å®¢æˆ·ç«¯æƒ³æ€ä¹ˆå‘å°±æ€ä¹ˆå‘ã€‚ã€‚å¦å¤–è¿™ä¸ªç¨‹åºè™½ç„¶æ˜¯å¯¹å›¾ç‰‡è¿›è¡Œäº†åˆ¤æ–­ï¼Œä½†å¹¶æœªå†™å‡ºå¯¹åº”çš„å›¾ç‰‡å‘é€ç¨‹åº(äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™æ˜¯ä¸ä¸€æ ·çš„)ï¼Œæ‰€ä»¥å®é™…åªèƒ½å‘é€æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚htmlä»£ç ã€‚æ‰€ä»¥åé¢çœ‹åˆ°çš„è¯¾ç¨‹è¡¨éƒ½æ— æ³•æ˜¾ç¤ºå›¾ç‰‡çš„åŸå› æ˜¯å®¢æˆ·ç«¯ç¨‹åºå‹æ ¹å°±æ²¡åœ¨ä¹è¿‡å®¢æˆ·ç«¯çš„è¯·æ±‚ğŸ¤£ #include \u003ciostream\u003e#include \u003cfstream\u003e#include \"TCP_SOCKET_SERVER.h\" void sendfileToWeb(SOCKET clnt, TCP_SOCKET_SERVER \u0026a, const char *filename); int main() { TCP_SOCKET_SERVER a; a.Bind(8086); a.Listen(); SOCKET clnt = a.Accept(); while (1) { sendfileToWeb(clnt, a, \"D:/Html/schedule/schedule.html\"); a.Close(clnt); clnt = a.Accept(); } } //åé¦ˆè¯·æ±‚ï¼Œå‘é€æ–‡ä»¶ä»£ç æˆ–è€…å›¾ç‰‡ç­‰äºŒè¿›åˆ¶ä¿¡æ¯ã€‚ void sendfileToWeb(SOCKET clnt, TCP_SOCKET_SERVER \u0026a, const char *filename) { //å†™å…¥è¿”å›å¤´ä¿¡æ¯ï¼šåŒ…æ‹¬çŠ¶æ€å’Œå†…å®¹ç±»å‹ char *type = nullptr; if (strstr(filename, \".html\")) type = \"text/html\"; else if (strstr(filename, \".jpg\")) type = \"image/jpg\"; else if (strstr(filename, \".png\")) type = \"image/png\"; char x[100] = {0}; sprintf(x, \"HTTP/1.1 200 ok\\r\\nContent-Type: %s\\r\\n\\r\\n\", type); //å‘é€è¿”å›å¤´ä¿¡æ¯,æ¯æ¬¡å‘é€é—´éš”éœ€è¦ä¸€å®šæ—¶é—´ï¼Œå¦åˆ™æµè§ˆå™¨å¯èƒ½æ¥æ”¶æ²¡è¿™ä¹ˆå¿« int sz1 = a.Send(clnt, x, strlen(x)); if (sz1 \u003c= 0)return; //å‘é€æ–‡ä»¶å†…å®¹åˆ°å®¢æˆ·ç«¯ std::ifstream ss(filename, std::ios::in); char html[1024] = {0}; while (ss.getline(html, 1024)) { int szz = a.Send(clnt, html, strlen(html)); if (szz \u003c= 0) return; Sleep(1); } ss.close(); } ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:3:1","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ¥æ”¶ç»“æœ ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:3:2","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"æ€»ç»“ æ”¶è·ï¼š äº†è§£åˆ°ç½‘ç»œé€šè®¯è¿‡ç¨‹åˆ°åº•æ˜¯æ€ä¹ˆæ ·çš„ã€‚ äº†è§£åˆ°åº•å±‚socketé€šä¿¡æ˜¯å¦‚ä½•è¿›è¡Œçš„ã€‚ å°è£…äº†socketæ“ä½œï¼Œå¢å¼ºäº†ä»£ç çš„å¤ç”¨æ€§ã€‚ å¯¹åŸºæœ¬çš„httpè¯·æ±‚è¿‡ç¨‹æœ‰æ‰€äº†è§£ï¼š åŸºæœ¬ä¸Šå°±æ˜¯æµè§ˆå™¨(å®¢æˆ·ç«¯)å¯¹ç›¸åº”çš„IPåœ°å€å‘èµ·è¯·æ±‚ï¼Œå…¶å¯¹åº”çš„æœåŠ¡å™¨è¿”å›ç»™ä½ è¿™ä¸ªç½‘é¡µçš„ä¸»é¡µï¼Œç„¶åæ ¹æ®ä½ é¼ æ ‡çš„ç‚¹å‡»ï¼Œåˆä¼šè§¦å‘httpè¯·æ±‚ï¼Œå…¶å¯¹åº”çš„æœåŠ¡å™¨å¯¹ä½ çš„è¯·æ±‚è¿›è¡Œè§£æï¼Œå¾—å‡ºä½ æƒ³è¦çš„æ–‡ä»¶ï¼Œç„¶åå‘é€ç»™ä½ ï¼Œå¾ªç¯å¾€å¤ä¸€ç›´å¦‚æ­¤ã€‚ã€‚ã€‚ ","date":"2022-01-22","objectID":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/:4:0","tags":["socketé€šä¿¡"],"title":"SocketåŸºæœ¬æ“ä½œçš„C++å°è£…","uri":"/posts/socket%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cc++%E5%B0%81%E8%A3%85/"},{"categories":["C++å®æˆ˜"],"content":"â€ä¸€èµ·æ¥é¢†ç•¥C++æ¨¡æ¿çš„å¥¥ä¹‰â€œ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æƒ³è¦å®ç°PrintLnï¼Œå…³é”®åœ¨äºæ”¯æŒæ— é™ä¸ªå‚æ•°çš„æ‰“å°å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘å¤§è‡´æ€»ç»“ä¸‹C++èƒ½å¤Ÿå¦‚ä½•å»å®ç°å®ƒï¼ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:0:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ–¹å¼ä¸€ï¼šç”¨åˆå§‹åŒ–åˆ—è¡¨å®ç°PrintLn() ã€C++11ã€‘ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç‰ˆæœ¬ä¸€ï¼šæœ´ç´ åˆå§‹åŒ–åˆ—è¡¨ç‰ˆæœ¬ç‰ˆæœ¬ å‡½æ•°ç‰ˆæœ¬ï¼š #include\u003ciostream\u003eusing namespace std; void PrintLn(std::initializer_list\u003cint\u003e args){ for(auto arg:args){ cout\u003c\u003carg\u003c\u003c\", \"; } cout\u003c\u003cstd::endl; } int main() { PrintLn({3,23,2,12}); return 0; } ç±»çš„æ„é€ å™¨ç‰ˆæœ¬(å¯å»æ‰å°æ‹¬å·)ï¼š #include\u003ciostream\u003eusing namespace std; class PrintLn { public: PrintLn(std::initializer_list\u003cint\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; } cout \u003c\u003c std::endl; } }; int main() { auto t = PrintLn{3, 23, 2, 12}; return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:1","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç‰ˆæœ¬äºŒï¼šåŠ æ¨¡æ¿å‚æ•°ç‰ˆæœ¬ å®é™…ä¸Šå’Œä¸Šé¢çš„åŸºæœ¬æ²¡å¤ªå¤§åŒºåˆ«ï¼Œé™¤äº†ä¸Šé¢ç¡®å®šä¸ºäº†intç±»å‹ï¼ŒäºŒåŠ äº†æ¨¡æ¿åï¼Œå¯ä»¥ä¸ºä»»æ„ç±»å‹ï¼Œä½†æ˜¯å®é™…ä¸Šä¼ å…¥çš„è¿˜æ˜¯åªèƒ½æ˜¯åŒä¸€ä¸ªç±»å‹ã€‚æ‰€ä»¥åˆå§‹åŒ–åˆ—è¡¨å®ç°æ˜¯éå¸¸çš„ä¸å¥½ç”¨çš„ã€‚ #incldue\u003ciostream\u003e using namespace std; template\u003ctypename T\u003e class PrintLn { public: PrintLn(std::initializer_list\u003cT\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; }# PrintLnå‡½æ•°å®ç° æƒ³è¦å®ç°PrintLnï¼Œå…³é”®åœ¨äºæ”¯æŒæ— é™ä¸ªå‚æ•°çš„æ‰“å°å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘å¤§è‡´æ€»ç»“ä¸‹C++èƒ½å¤Ÿå¦‚ä½•å»å®ç°å®ƒï¼ ## æ–¹å¼ä¸€ï¼šç”¨åˆå§‹åŒ–åˆ—è¡¨å®ç°PrintLn() ã€C++11ã€‘ ### ç‰ˆæœ¬ä¸€ï¼šæœ´ç´ åˆå§‹åŒ–åˆ—è¡¨ç‰ˆæœ¬ç‰ˆæœ¬ \u003e å‡½æ•°ç‰ˆæœ¬ï¼š ```cpp #include\u003ciostream\u003eusing namespace std; void PrintLn(std::initializer_list\u003cint\u003e args){ for(auto arg:args){ cout\u003c\u003carg\u003c\u003c\", \"; } cout\u003c\u003cstd::endl; } int main() { PrintLn({3,23,2,12}); return 0; } ç±»çš„æ„é€ å™¨ç‰ˆæœ¬(å¯å»æ‰å°æ‹¬å·)ï¼š #include\u003ciostream\u003eusing namespace std; class PrintLn { public: PrintLn(std::initializer_list\u003cint\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; } cout \u003c\u003c std::endl; } }; int main() { auto t = PrintLn{3, 23, 2, 12}; return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:2","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç‰ˆæœ¬äºŒï¼šåŠ æ¨¡æ¿å‚æ•°ç‰ˆæœ¬ å®é™…ä¸Šå’Œä¸Šé¢çš„åŸºæœ¬æ²¡å¤ªå¤§åŒºåˆ«ï¼Œé™¤äº†ä¸Šé¢ç¡®å®šä¸ºäº†intç±»å‹ï¼Œè€ŒåŠ äº†æ¨¡æ¿åï¼Œå¯ä»¥ä¸ºä»»æ„ç±»å‹ï¼Œä½†æ˜¯å®é™…ä¸Šä¼ å…¥çš„è¿˜æ˜¯åªèƒ½æ˜¯åŒä¸€ä¸ªç±»å‹ã€‚æ‰€ä»¥åˆå§‹åŒ–åˆ—è¡¨çš„æ–¹å¼å®ç°Printlnåªèƒ½è¯´å½¢ä¼¼è€Œç¥ä¸ä¼¼ã€‚ #incldue\u003ciostream\u003e using namespace std; template\u003ctypename T\u003e class PrintLn { public: PrintLn(std::initializer_list\u003cT\u003e args) { for (auto arg:args) { cout \u003c\u003c arg \u003c\u003c \", \"; } cout \u003c\u003c std::endl; } }; int main() { auto t = PrintLn\u003cint\u003e{3, 23, 2, 12}; return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:1:3","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ–¹å¼äºŒï¼šç”¨å¯å˜å‚æ¨¡æ¿å®ç° ã€C++11/17ã€‘ å¦‚æœæœ‰äº†è§£è¿‡Cçš„å¯å˜å‚å‡½æ•°å’Œå¯å˜å‚çš„å®ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯å˜å‚æ¨¡æ¿ä¸å®ƒæœ‰äº›ç±»å‹ï¼Œåªä¸è¿‡Cé‡Œé¢çš„va_start,va_list,va_arg,va_endè¿™ä¸€ç³»åˆ—å®ç°å¯å˜å‚æ•°çš„å®ç”¨èµ·æ¥éå¸¸éº»çƒ¦ï¼Œè€Œä¸”æ— æ³•ç¡®å®šæ¯ä¸ªå‚æ•°çš„ç±»å‹ï¼Œè€Œå¯å˜å‚çš„æ¨¡æ¿åˆ™å¸¦æœ‰æ¨¡æ¿çš„æ³›å‹æ€§è´¨ï¼Œæ‰€ä»¥æ˜¯èƒ½ç¡®å®šç±»å‹çš„ï¼Œç”šè‡³ç”±äºæ¨¡æ¿å¯ä»¥ä¼ å€¼ï¼Œåé¢è¿˜å¯ç›´æ¥ä¼ å€¼ä½¿ç”¨ã€‚ ä»¥ä¸‹ç®€å•æè¿°å¯å˜å‚æ¨¡æ¿çš„ä½¿ç”¨æ–¹å¼ï¼š typenam... ç®—C++çš„ä¸€ä¸ªæ–°çš„å…³é”®å­—ï¼Œå®ƒå¯ä»¥ç”¨æ¥å®šä¹‰ä¸€ä¸ªå¯å˜å‚çš„æ¨¡æ¿ç±»å‹ï¼Œè€Œè¿™ä¸ªç±»å‹åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰ä½¿ç”¨çš„æ—¶å€™ä¹Ÿè¦åœ¨åé¢å¸¦ä¸Š ... è¡¨ç¤ºæ‹†åŒ…ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ ä¾‹å¦‚ï¼š template\u003ctypename... T\u003e void f(T... t){//TODO è¿™ç§ç±»å‹æˆ–å˜é‡åœ¨ä»»ä½•åœ°æ–¹ä½œä¸ºå‚æ•°å®šä¹‰æˆ–è€…ä¼ é€’çš„æ—¶å€™éƒ½éœ€è¦åŠ ä¸Š...è¡¨ç¤ºæ‹†åŒ… f(t...) } åœ¨C++17å‡ºç°fold expressionä¹‹å‰ï¼Œè¿™ä¸ªæ‹†åŒ…è¿‡ç¨‹åªèƒ½å€ŸåŠ©å¦ä¸€ä¸ªæ¨¡æ¿å‚æ•°æ¥å¾—åˆ°æ¨¡æ¿å‚æ•°åŒ…é‡Œé¢çš„å†…å®¹ã€‚ æ³¨æ„ä»¥ä¸Šä¸¤ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥å¼€å§‹ç¼–å†™æ³›å‹æ¨¡æ¿ï¼Œå®ç°å¯å˜å‚æ•°çš„å®Œå…¨æ‰“å°è¿‡ç¨‹äº†ã€‚ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:2:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"C++11ç‰ˆæœ¬å®ç° é”™è¯¯å®ç°ç‰ˆæœ¬ï¼šå¦‚æœä½ ç›´æ¥åƒä¸‹é¢è¿™æ ·è¿›è¡Œæ‹†åŒ…ï¼Œé‚£ä¹ˆç¼–è¯‘æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºæ‹†åŒ…è¿‡ç¨‹ç›¸å½“äºä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œè€Œä½ è¿™ä¸ªé€’å½’çš„è¿‡ç¨‹æ²¡æœ‰ä¸€ä¸ªè·³å‡ºçš„æ¡ä»¶ï¼Œæ¯”å¦‚argså¦‚æœä¸º0ä¸ªå‚æ•°æ—¶ï¼Œç»§ç»­åœ¨å¾€ä¸‹å°±æ— æ³•å±•å¼€äº†ï¼Œæ‰€ä»¥éœ€è¦å®ç°ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„ç‰ˆæœ¬è®©æ‹†åŒ…è¿‡ç¨‹åœæ­¢ã€‚ template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...); } //æ‹†åŒ…è¿‡ç¨‹ï¼šPrintLn(3,1,3,4)-\u003e // PrintLn(firstArg:3,args(1,3,4)); // PrintLn(firstArg:1,args(3,4)); // PrintLn(firstArg:3,args(4)); // PrintLn(firstArg:4,args(null)) // ç”±äºåˆ°äº†ä¸Šé¢çš„ç¬¬å››è¡Œè¿˜è¦ç»§ç»­å¾€ä¸‹æ‹†åŒ… // è€Œæ­¤æ—¶åªæœ‰0ä¸ªå‚æ•°ï¼Œæ²¡æœ‰å¯¹åº”çš„PrintLnç‰ˆæœ¬å¯ä»¥è°ƒç”¨ï¼Œæ•…æŠ¥é”™ï¼ ä»¥ä¸‹ä¸ºæ­£ç¡®ä¿®æ”¹ç‰ˆæœ¬ï¼š #include\u003ciostream\u003eusing namespace std; void PrintLn(){ } template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...); } int main() { PrintLn(3, 23, 2, 12); return 0; å½“ç„¶ä¹Ÿå¯ä»¥æ§åˆ¶åªå‰©ä¸€ä¸ªå‚æ•°æ—¶å°±åœæ­¢æ‹†åŒ…ã€‚ #include\u003ciostream\u003eusing namespace std; template\u003ctypename T\u003e void PrintLn(T arg){ cout\u003c\u003carg\u003c\u003cendl; } template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...); } int main() { PrintLn(3, 23, 2, 12); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:2:1","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"C++17ç‰ˆæœ¬å®ç° ä¸Šé¢çš„å®ç°æµç¨‹å®é™…ä¸Šåœ¨C++17ä¸­å¯ä»¥ç”¨ if constexpr()+sizeofâ€¦ åœ¨ç¼–è¯‘æœŸé—´æ¥è¿›è¡Œæµç¨‹æ§åˆ¶ã€‚ é¦–å…ˆæ¥è®²ä¸€è®²ä¸ºä»€ä¹ˆæ™®é€šçš„ if + sizeofâ€¦ æ¥å®ç°å¯å˜å‚æ•°çš„é•¿åº¦æ§åˆ¶æµç¨‹ä¼šæŠ¥é”™å‘¢ï¼Ÿ å› ä¸ºæ•´ä¸ªæ¨¡æ¿æ¨æ–­å’Œæ‹†åŒ…è§£åŒ…è¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æœŸå®Œæˆçš„ï¼Œè€Œifçš„æ§åˆ¶æµç¨‹åœ¨ç¼–è¯‘æœŸæ˜¯å®Œå…¨ä¸æ¸…æ¥šçš„ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œä½†æ˜¯æœ‰äº†if constexprä¹‹åï¼Œå°±èƒ½æ§åˆ¶ç¼–è¯‘æœŸçš„æ¨¡æ¿æ‹†åŒ…è¿‡ç¨‹äº†ï¼ å¦‚ä¸Šé¢å®ç°PrintLnï¼Œå¯ä»¥ç›´æ¥ç®€åŒ–æˆä¸‹é¢è¿™æ ·ï¼š #include\u003ciostream\u003eusing namespace std; template\u003ctypename T,typename... Args\u003e void PrintLn(T firstArg,Args... args){ if constexpr(sizeof...(args)==0){//å½“å‚æ•°ä¸ªæ•°ä¸º0ä¸ªçš„æ—¶å€™å°±ä¸ç»§ç»­æ‹†åŒ…äº† cout\u003c\u003cfirstArg\u003c\u003cendl; }else{ cout\u003c\u003cfirstArg\u003c\u003c\", \"; PrintLn(args...);//å¾€ä¸‹ç»§ç»­æ‹†åŒ… } } int main() { PrintLn(3, 23, 2, 12); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:2:2","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ–¹å¼ä¸‰ï¼šå¯å˜å‚æ¨¡æ¿çš„fold expressionå±•å¼€ ã€C++17ã€‘ åœ¨C++17ä¸­ï¼ŒåŠ å…¥äº†ä¸€ä¸ªfold expressionçš„è¯­æ³•ï¼Œè®©å¯å˜å‚æ•°æ¨¡æ¿å¯ä»¥ä¸é€šè¿‡é€’å½’çš„æ–¹å¼æ¥è§£åŒ…ï¼Œç›´æ¥æŠŠæ¯ä¸ªåŒ…è§£å¼€æ”¾å…¥ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç„¶åå‰©ä½™çš„åŒ…éƒ½ä»¥è¯¥è¡¨è¾¾å¼è§£å¼€ï¼ŒåŸºæœ¬çš„è¯­æ³•å¦‚ä¸‹ï¼š ((expression)op...); expression : è¡¨ç¤ºå¸Œæœ›æ¯ä¸ªè§£å¼€çš„å‚æ•°æ‰€æ‰§è¡Œçš„è¡¨è¾¾å¼ã€‚ op : ä½ æŒ‡å®šçš„æ“ä½œç¬¦ã€‚ ... : ä¸€ç›´ä¸æ–­çš„è§£åŒ…ï¼Œç”±äºæ­¤å¤„æ”¾çš„ä½ç½®æ˜¯å³è¾¹ï¼Œæ‰€ä»¥å¾€å³è¾¹è§£åŒ…ï¼Œå¦‚æœæ”¾å·¦è¾¹åˆ™å¾€å·¦è¾¹è§£åŒ…ã€‚ ç¤ºä¾‹ä»£ç ï¼š #include \u003cbits/stdc++.h\u003eusing namespace std; template\u003ctypename... Args\u003e double sum(Args... args){ return (args+...);//ç­‰ä»·äº3+23+1+3.32 } template\u003cauto... val\u003e//å¯å˜çš„ä¼ å€¼çš„æ¨¡æ¿å‚æ•° constexpr int sum(){ return (val+...); } int main() { cout\u003c\u003csum\u003c3,23,1,32\u003e()\u003c\u003cendl;//ä¼ å€¼æ¨¡æ¿å‚æ•°ä¸æ”¯æŒæµ®ç‚¹ç±»å‹ï¼Œæ‰€ä»¥å…¨ç”¨çš„intç±»å‹ cout\u003c\u003csum(3,23,1,3.32); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:0","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"ç®€å•çš„åˆ©ç”¨fold exprå®ç° åŸºäºä»¥ä¸Šå¯¹fold exprçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æ¥æ­£å¼å®ç°PrintLnï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¸ªfold exprçš„æ€§èƒ½è‚¯å®šæ˜¯æ¯”ä¹‹å‰é€’å½’è§£åŒ…çš„æ€§èƒ½è¦å¥½çš„ï¼Œå› ä¸ºåªæ˜¯è¿­ä»£çš„æ‹“å®½è€Œå·²ã€‚ æˆ‘ä»¬å¯ä»¥å°†æ‹†å¼€çš„åŒ…ç”¨ ',' å±•å¼€ #include\u003ciostream\u003eusing namespace std; template\u003ctypename... Args\u003e void PrintLn(Args... args){ ((cout\u003c\u003cargs\u003c\u003c\", \"),...)\u003c\u003cendl; } int main() { PrintLn(1,2.3,\"LB\",\"hhh\"); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:1","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"åŠ ä¸Šæµç¨‹æ§åˆ¶å®ç° é€šè¿‡æ›´å¤æ‚çš„æµç¨‹æ§åˆ¶æŠŠæœ€åä¸€ä¸ªæ‰“å°å‡ºæ¥çš„é€—å·å»æ‰ã€‚ é€šè¿‡å»¶ç”³ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œä½¿å¾—è¿è¡Œæ—¶èƒ½å¤Ÿæ­£ç¡®çš„æ‰“å°æœ€åä¸€æ¬¡ã€‚ åæ­£æˆ‘è¿™é‡Œç¼–è¯‘æœŸåªè´Ÿè´£æ–‡æœ¬æ›¿æ¢ï¼Œæ‰€ä»¥è¢«fold exprå±•å¼€çš„è¡¨è¾¾å¼å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆè¦æ˜¯ç¼–è¯‘æœŸå¸¸é‡çš„è¦æ±‚ã€‚ è¿™ä¸€åˆ‡éƒ½çœ‹ä½œç®€å•å®æ›¿æ¢å³å¯ã€‚ #include\u003ciostream\u003eusing namespace std; template\u003ctypename... Args\u003e void PrintLn(Args... args){ int lastIndex = sizeof...(args)-1;//å¾—åˆ°ä¼ å…¥çš„å‚æ•°é•¿åº¦ int i = 0; ((i++==lastIndex?cout\u003c\u003cargs\u003c\u003cendl:cout\u003c\u003cargs\u003c\u003c\", \"),...); } int main() { PrintLn(1,2.3,\"LB\",\"hhh\"); return 0; } ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:2","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"},{"categories":["C++å®æˆ˜"],"content":"æ›´å¤šfold exprè¿ç”¨â€¦ åˆ©ç”¨ä¸æˆ–è¡¨è¾¾å¼å±•å¼€ï¼Œç„¶ååˆ©ç”¨å®ƒä»¬çš„çŸ­è·¯æ€§è´¨ï¼Œå®ç°å¾—åˆ°æ‹†åŒ…å…ƒç´ çš„ç²¾å‡†æ‰“å‡»ï¼ˆè·å¾—åŒ…é‡Œçš„ç¬¬å‡ ä¸ªå…ƒç´ ï¼‰ã€‚ #include\u003ciostream\u003eusing namespace std; template\u003ctypename... Args\u003e auto GetNth(int n, Args... args) { int i = 0; using CommonType = common_type_t\u003cArgs...\u003e; CommonType ret; ((i++ == n \u0026\u0026 (ret = args, true))||...); return ret; } int main() { cout \u003c\u003c GetNth(3, 2, 1, 2.3, 32.2); return 0; } ä¸Šé¢ä¸ºäº†å­˜å‚¨ä¸ç¡®å®šçš„ç±»å‹ç”¨äº†common_type_tï¼Œè¿™ä¸ªå¯ä»¥å¸®åŠ©ä½ å¾—åˆ°ä¸€ä¸ªå…¬å…±å¯ç”¨çš„ç±»å‹ï¼Œè€Œè¿™ä¸ªç±»å‹å¿…é¡»æ˜¯å…¬å…±å¯ç”¨ï¼Œæ¯”å¦‚intäº†floatå‹å¯ä»¥è¿›è¡Œç›¸äº’è½¬åŒ–æ‰€ä»¥æœ‰å…¬å…±ç±»å‹ï¼Œè€Œ char* å’Œintç±»å‹åˆ™æ²¡æœ‰ï¼Œæ‰€ä»¥è¿™ä¸ªGetNthä¸­çš„å…ƒç´ ä¸èƒ½ä¼ é€’ char* ç±»å‹çš„åŒæ—¶ä¼ é€’intç±»å‹ã€‚ ","date":"2022-01-20","objectID":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/:3:3","tags":["C++æ¨¡æ¿"],"title":"C++å˜å‚æ¨¡æ¿è¿ç”¨å®æˆ˜â€”â€”å®ç°PrintLn","uri":"/posts/c++%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%86%99println/"}]